var By=Object.defineProperty;var jy=(t,e,n)=>e in t?By(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Uy=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Y=(t,e,n)=>jy(t,typeof e!="symbol"?e+"":e,n);import{n as Xr}from"./assets/normalizeUrl.js";var L5=Uy((Bt,jt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e0={exports:{}},Oa={},t0={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=Symbol.for("react.element"),My=Symbol.for("react.portal"),$y=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),Fy=Symbol.for("react.profiler"),zy=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),Gy=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),Ky=Symbol.for("react.memo"),Wy=Symbol.for("react.lazy"),Id=Symbol.iterator;function Qy(t){return t===null||typeof t!="object"?null:(t=Id&&t[Id]||t["@@iterator"],typeof t=="function"?t:null)}var n0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r0=Object.assign,i0={};function ws(t,e,n){this.props=t,this.context=e,this.refs=i0,this.updater=n||n0}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s0(){}s0.prototype=ws.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=i0,this.updater=n||n0}var lh=oh.prototype=new s0;lh.constructor=oh;r0(lh,ws.prototype);lh.isPureReactComponent=!0;var Od=Array.isArray,o0=Object.prototype.hasOwnProperty,ah={current:null},l0={key:!0,ref:!0,__self:!0,__source:!0};function a0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)o0.call(e,r)&&!l0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zo,type:t,key:s,ref:o,props:i,_owner:ah.current}}function Zy(t,e){return{$$typeof:zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===zo}function Xy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rd=/\/+/g;function Hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xy(""+t.key):e.toString(36)}function $l(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zo:case My:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Hu(o,0):r,Od(i)?(n="",t!=null&&(n=t.replace(Rd,"$&/")+"/"),$l(i,e,n,"",function(u){return u})):i!=null&&(uh(i)&&(i=Zy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Od(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Hu(s,l);o+=$l(s,e,n,a,i)}else if(a=Qy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Hu(s,l++),o+=$l(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hl(t,e,n){if(t==null)return t;var r=[],i=0;return $l(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Yy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},ql={transition:null},Jy={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:ah};function u0(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:hl,forEach:function(t,e,n){hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hl(t,function(){e++}),e},toArray:function(t){return hl(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=ws;de.Fragment=$y;de.Profiler=Fy;de.PureComponent=oh;de.StrictMode=qy;de.Suspense=Vy;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jy;de.act=u0;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=r0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ah.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)o0.call(e,a)&&!l0.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:zo,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:Hy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zy,_context:t},t.Consumer=t};de.createElement=a0;de.createFactory=function(t){var e=a0.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Gy,render:t}};de.isValidElement=uh;de.lazy=function(t){return{$$typeof:Wy,_payload:{_status:-1,_result:t},_init:Yy}};de.memo=function(t,e){return{$$typeof:Ky,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};de.unstable_act=u0;de.useCallback=function(t,e){return bt.current.useCallback(t,e)};de.useContext=function(t){return bt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};de.useEffect=function(t,e){return bt.current.useEffect(t,e)};de.useId=function(){return bt.current.useId()};de.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return bt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};de.useRef=function(t){return bt.current.useRef(t)};de.useState=function(t){return bt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return bt.current.useTransition()};de.version="18.3.1";t0.exports=de;var ie=t0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev=ie,tv=Symbol.for("react.element"),nv=Symbol.for("react.fragment"),rv=Object.prototype.hasOwnProperty,iv=ev.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sv={key:!0,ref:!0,__self:!0,__source:!0};function c0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rv.call(e,r)&&!sv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tv,type:t,key:s,ref:o,props:i,_owner:iv.current}}Oa.Fragment=nv;Oa.jsx=c0;Oa.jsxs=c0;e0.exports=Oa;var Z=e0.exports,Pc={},f0={exports:{}},$t={},h0={exports:{}},d0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,F){var $=B.length;B.push(F);e:for(;0<$;){var Q=$-1>>>1,J=B[Q];if(0<i(J,F))B[Q]=F,B[$]=J,$=Q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var F=B[0],$=B.pop();if($!==F){B[0]=$;e:for(var Q=0,J=B.length,le=J>>>1;Q<le;){var ue=2*(Q+1)-1,se=B[ue],he=ue+1,Ue=B[he];if(0>i(se,$))he<J&&0>i(Ue,se)?(B[Q]=Ue,B[he]=$,Q=he):(B[Q]=se,B[ue]=$,Q=ue);else if(he<J&&0>i(Ue,$))B[Q]=Ue,B[he]=$,Q=he;else break e}}return F}function i(B,F){var $=B.sortIndex-F.sortIndex;return $!==0?$:B.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,h=null,p=3,w=!1,m=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(B){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=B)r(u),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(u)}}function b(B){if(E=!1,c(B),!m)if(n(a)!==null)m=!0,V(A);else{var F=n(u);F!==null&&z(b,F.startTime-B)}}function A(B,F){m=!1,E&&(E=!1,x(O),O=-1),w=!0;var $=p;try{for(c(F),h=n(a);h!==null&&(!(h.expirationTime>F)||B&&!G());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,p=h.priorityLevel;var J=Q(h.expirationTime<=F);F=t.unstable_now(),typeof J=="function"?h.callback=J:h===n(a)&&r(a),c(F)}else r(a);h=n(a)}if(h!==null)var le=!0;else{var ue=n(u);ue!==null&&z(b,ue.startTime-F),le=!1}return le}finally{h=null,p=$,w=!1}}var _=!1,C=null,O=-1,D=5,M=-1;function G(){return!(t.unstable_now()-M<D)}function I(){if(C!==null){var B=t.unstable_now();M=B;var F=!0;try{F=C(!0,B)}finally{F?k():(_=!1,C=null)}}else _=!1}var k;if(typeof v=="function")k=function(){v(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,U=P.port2;P.port1.onmessage=I,k=function(){U.postMessage(null)}}else k=function(){S(I,0)};function V(B){C=B,_||(_=!0,k())}function z(B,F){O=S(function(){B(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){m||w||(m=!0,V(A))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var $=p;p=F;try{return B()}finally{p=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,F){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=p;p=B;try{return F()}finally{p=$}},t.unstable_scheduleCallback=function(B,F,$){var Q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=$+J,B={id:f++,callback:F,priorityLevel:B,startTime:$,expirationTime:J,sortIndex:-1},$>Q?(B.sortIndex=$,e(u,B),n(a)===null&&B===n(u)&&(E?(x(O),O=-1):E=!0,z(b,$-Q))):(B.sortIndex=J,e(a,B),m||w||(m=!0,V(A))),B},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(B){var F=p;return function(){var $=p;p=F;try{return B.apply(this,arguments)}finally{p=$}}}})(d0);h0.exports=d0;var ov=h0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv=ie,Mt=ov;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p0=new Set,yo={};function fi(t,e){ss(t,e),ss(t+"Capture",e)}function ss(t,e){for(yo[t]=e,t=0;t<e.length;t++)p0.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dc=Object.prototype.hasOwnProperty,av=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pd={},Dd={};function uv(t){return Dc.call(Dd,t)?!0:Dc.call(Pd,t)?!1:av.test(t)?Dd[t]=!0:(Pd[t]=!0,!1)}function cv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fv(t,e,n,r){if(e===null||typeof e>"u"||cv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,fh);Je[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,fh);Je[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,fh);Je[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fv(e,n,i,r)&&(n=null),r||i===null?uv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=lv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),Bc=Symbol.for("react.profiler"),g0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),jc=Symbol.for("react.suspense"),Uc=Symbol.for("react.suspense_list"),gh=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),y0=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function js(t){return t===null||typeof t!="object"?null:(t=Bd&&t[Bd]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Gu;function Ws(t){if(Gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gu=e&&e[1]||""}return`
`+Gu+t}var Vu=!1;function Ku(t,e){if(!t||Vu)return"";Vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ws(t):""}function hv(t){switch(t.tag){case 5:return Ws(t.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return t=Ku(t.type,!1),t;case 11:return t=Ku(t.type.render,!1),t;case 1:return t=Ku(t.type,!0),t;default:return""}}function Mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Di:return"Portal";case Bc:return"Profiler";case dh:return"StrictMode";case jc:return"Suspense";case Uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m0:return(t.displayName||"Context")+".Consumer";case g0:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gh:return e=t.displayName||null,e!==null?e:Mc(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return Mc(t(e))}catch{}}return null}function dv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mc(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function v0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pv(t){var e=v0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pl(t){t._valueTracker||(t._valueTracker=pv(t))}function w0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=v0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $c(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x0(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function qc(t,e){x0(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fc(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ud(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fc(t,e,n){(e!=="number"||na(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qs=Array.isArray;function Qi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Md(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Qs(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function E0(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $d(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function b0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?b0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,S0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gv=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(t){gv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),to[e]=to[t]})});function T0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||to.hasOwnProperty(t)&&to[t]?(""+e).trim():e+"px"}function A0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=T0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mv=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gc(t,e){if(e){if(mv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Vc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wc=null,Zi=null,Xi=null;function qd(t){if(t=Vo(t)){if(typeof Wc!="function")throw Error(X(280));var e=t.stateNode;e&&(e=ja(e),Wc(t.stateNode,t.type,e))}}function k0(t){Zi?Xi?Xi.push(t):Xi=[t]:Zi=t}function N0(){if(Zi){var t=Zi,e=Xi;if(Xi=Zi=null,qd(t),e)for(t=0;t<e.length;t++)qd(e[t])}}function _0(t,e){return t(e)}function C0(){}var Wu=!1;function L0(t,e,n){if(Wu)return t(e,n);Wu=!0;try{return _0(t,e,n)}finally{Wu=!1,(Zi!==null||Xi!==null)&&(C0(),N0())}}function wo(t,e){var n=t.stateNode;if(n===null)return null;var r=ja(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Qc=!1;if(tr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Qc=!1}function yv(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var no=!1,ra=null,ia=!1,Zc=null,vv={onError:function(t){no=!0,ra=t}};function wv(t,e,n,r,i,s,o,l,a){no=!1,ra=null,yv.apply(vv,arguments)}function xv(t,e,n,r,i,s,o,l,a){if(wv.apply(this,arguments),no){if(no){var u=ra;no=!1,ra=null}else throw Error(X(198));ia||(ia=!0,Zc=u)}}function hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fd(t){if(hi(t)!==t)throw Error(X(188))}function Ev(t){var e=t.alternate;if(!e){if(e=hi(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fd(i),t;if(s===r)return Fd(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function O0(t){return t=Ev(t),t!==null?R0(t):null}function R0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R0(t);if(e!==null)return e;t=t.sibling}return null}var P0=Mt.unstable_scheduleCallback,zd=Mt.unstable_cancelCallback,bv=Mt.unstable_shouldYield,Sv=Mt.unstable_requestPaint,De=Mt.unstable_now,Tv=Mt.unstable_getCurrentPriorityLevel,yh=Mt.unstable_ImmediatePriority,D0=Mt.unstable_UserBlockingPriority,sa=Mt.unstable_NormalPriority,Av=Mt.unstable_LowPriority,B0=Mt.unstable_IdlePriority,Ra=null,Dn=null;function kv(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Ra,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Cv,Nv=Math.log,_v=Math.LN2;function Cv(t){return t>>>=0,t===0?32:31-(Nv(t)/_v|0)|0}var ml=64,yl=4194304;function Zs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Zs(l):(s&=o,s!==0&&(r=Zs(s)))}else o=n&~i,o!==0?r=Zs(o):s!==0&&(r=Zs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function Lv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Lv(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Xc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function j0(){var t=ml;return ml<<=1,!(ml&4194240)&&(ml=64),t}function Qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function Ov(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function U0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M0,wh,$0,q0,F0,Yc=!1,vl=[],kr=null,Nr=null,_r=null,xo=new Map,Eo=new Map,xr=[],Rv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Ms(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vo(e),e!==null&&wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Pv(t,e,n,r,i){switch(e){case"focusin":return kr=Ms(kr,t,e,n,r,i),!0;case"dragenter":return Nr=Ms(Nr,t,e,n,r,i),!0;case"mouseover":return _r=Ms(_r,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xo.set(s,Ms(xo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Eo.set(s,Ms(Eo.get(s)||null,t,e,n,r,i)),!0}return!1}function z0(t){var e=Yr(t.target);if(e!==null){var n=hi(e);if(n!==null){if(e=n.tag,e===13){if(e=I0(n),e!==null){t.blockedOn=e,F0(t.priority,function(){$0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kc=r,n.target.dispatchEvent(r),Kc=null}else return e=Vo(n),e!==null&&wh(e),t.blockedOn=n,!1;e.shift()}return!0}function Gd(t,e,n){Fl(t)&&n.delete(e)}function Dv(){Yc=!1,kr!==null&&Fl(kr)&&(kr=null),Nr!==null&&Fl(Nr)&&(Nr=null),_r!==null&&Fl(_r)&&(_r=null),xo.forEach(Gd),Eo.forEach(Gd)}function $s(t,e){t.blockedOn===e&&(t.blockedOn=null,Yc||(Yc=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Dv)))}function bo(t){function e(i){return $s(i,t)}if(0<vl.length){$s(vl[0],t);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&$s(kr,t),Nr!==null&&$s(Nr,t),_r!==null&&$s(_r,t),xo.forEach(e),Eo.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)z0(n),n.blockedOn===null&&xr.shift()}var Yi=ar.ReactCurrentBatchConfig,la=!0;function Bv(t,e,n,r){var i=be,s=Yi.transition;Yi.transition=null;try{be=1,xh(t,e,n,r)}finally{be=i,Yi.transition=s}}function jv(t,e,n,r){var i=be,s=Yi.transition;Yi.transition=null;try{be=4,xh(t,e,n,r)}finally{be=i,Yi.transition=s}}function xh(t,e,n,r){if(la){var i=Jc(t,e,n,r);if(i===null)sc(t,e,r,aa,n),Hd(t,r);else if(Pv(i,t,e,n,r))r.stopPropagation();else if(Hd(t,r),e&4&&-1<Rv.indexOf(t)){for(;i!==null;){var s=Vo(i);if(s!==null&&M0(s),s=Jc(t,e,n,r),s===null&&sc(t,e,r,aa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sc(t,e,r,null,n)}}var aa=null;function Jc(t,e,n,r){if(aa=null,t=mh(r),t=Yr(t),t!==null)if(e=hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=I0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return aa=t,null}function H0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tv()){case yh:return 1;case D0:return 4;case sa:case Av:return 16;case B0:return 536870912;default:return 16}default:return 16}}var br=null,Eh=null,zl=null;function G0(){if(zl)return zl;var t,e=Eh,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return zl=i.slice(t,1<r?1-r:void 0)}function Hl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function Vd(){return!1}function qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wl:Vd,this.isPropagationStopped=Vd,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=qt(xs),Go=Re({},xs,{view:0,detail:0}),Uv=qt(Go),Zu,Xu,qs,Pa=Re({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(Zu=t.screenX-qs.screenX,Xu=t.screenY-qs.screenY):Xu=Zu=0,qs=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:Xu}}),Kd=qt(Pa),Mv=Re({},Pa,{dataTransfer:0}),$v=qt(Mv),qv=Re({},Go,{relatedTarget:0}),Yu=qt(qv),Fv=Re({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),zv=qt(Fv),Hv=Re({},xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gv=qt(Hv),Vv=Re({},xs,{data:0}),Wd=qt(Vv),Kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qv[t])?!!e[t]:!1}function Sh(){return Zv}var Xv=Re({},Go,{key:function(t){if(t.key){var e=Kv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?Hl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yv=qt(Xv),Jv=Re({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qd=qt(Jv),ew=Re({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),tw=qt(ew),nw=Re({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=qt(nw),iw=Re({},Pa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=qt(iw),ow=[9,13,27,32],Th=tr&&"CompositionEvent"in window,ro=null;tr&&"documentMode"in document&&(ro=document.documentMode);var lw=tr&&"TextEvent"in window&&!ro,V0=tr&&(!Th||ro&&8<ro&&11>=ro),Zd=" ",Xd=!1;function K0(t,e){switch(t){case"keyup":return ow.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function aw(t,e){switch(t){case"compositionend":return W0(e);case"keypress":return e.which!==32?null:(Xd=!0,Zd);case"textInput":return t=e.data,t===Zd&&Xd?null:t;default:return null}}function uw(t,e){if(ji)return t==="compositionend"||!Th&&K0(t,e)?(t=G0(),zl=Eh=br=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V0&&e.locale!=="ko"?null:e.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cw[t.type]:e==="textarea"}function Q0(t,e,n,r){k0(r),e=ua(e,"onChange"),0<e.length&&(n=new bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var io=null,So=null;function fw(t){om(t,0)}function Da(t){var e=$i(t);if(w0(e))return t}function hw(t,e){if(t==="change")return e}var Z0=!1;if(tr){var Ju;if(tr){var ec="oninput"in document;if(!ec){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),ec=typeof Jd.oninput=="function"}Ju=ec}else Ju=!1;Z0=Ju&&(!document.documentMode||9<document.documentMode)}function ep(){io&&(io.detachEvent("onpropertychange",X0),So=io=null)}function X0(t){if(t.propertyName==="value"&&Da(So)){var e=[];Q0(e,So,t,mh(t)),L0(fw,e)}}function dw(t,e,n){t==="focusin"?(ep(),io=e,So=n,io.attachEvent("onpropertychange",X0)):t==="focusout"&&ep()}function pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Da(So)}function gw(t,e){if(t==="click")return Da(e)}function mw(t,e){if(t==="input"||t==="change")return Da(e)}function yw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:yw;function To(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dc.call(e,i)||!vn(t[i],e[i]))return!1}return!0}function tp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function np(t,e){var n=tp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tp(n)}}function Y0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Y0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function J0(){for(var t=window,e=na();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=na(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vw(t){var e=J0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Y0(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=np(n,s);var o=np(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ww=tr&&"documentMode"in document&&11>=document.documentMode,Ui=null,ef=null,so=null,tf=!1;function rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tf||Ui==null||Ui!==na(r)||(r=Ui,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),so&&To(so,r)||(so=r,r=ua(ef,"onSelect"),0<r.length&&(e=new bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ui)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},tc={},em={};tr&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Ba(t){if(tc[t])return tc[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in em)return tc[t]=e[n];return t}var tm=Ba("animationend"),nm=Ba("animationiteration"),rm=Ba("animationstart"),im=Ba("transitionend"),sm=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){sm.set(t,e),fi(e,[t])}for(var nc=0;nc<ip.length;nc++){var rc=ip[nc],xw=rc.toLowerCase(),Ew=rc[0].toUpperCase()+rc.slice(1);Ur(xw,"on"+Ew)}Ur(tm,"onAnimationEnd");Ur(nm,"onAnimationIteration");Ur(rm,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(im,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function sp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xv(r,e,void 0,t),t.currentTarget=null}function om(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;sp(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;sp(i,l,u),s=a}}}if(ia)throw t=Zc,ia=!1,Zc=null,t}function Ne(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var r=t+"__bubble";n.has(r)||(lm(e,t,2,!1),n.add(r))}function ic(t,e,n){var r=0;e&&(r|=4),lm(n,t,r,e)}var El="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[El]){t[El]=!0,p0.forEach(function(n){n!=="selectionchange"&&(bw.has(n)||ic(n,!1,t),ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[El]||(e[El]=!0,ic("selectionchange",!1,e))}}function lm(t,e,n,r){switch(H0(e)){case 1:var i=Bv;break;case 4:i=jv;break;default:i=xh}n=i.bind(null,e,n,t),i=void 0,!Qc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Yr(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}L0(function(){var u=s,f=mh(n),h=[];e:{var p=sm.get(t);if(p!==void 0){var w=bh,m=t;switch(t){case"keypress":if(Hl(n)===0)break e;case"keydown":case"keyup":w=Yv;break;case"focusin":m="focus",w=Yu;break;case"focusout":m="blur",w=Yu;break;case"beforeblur":case"afterblur":w=Yu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=tw;break;case tm:case nm:case rm:w=zv;break;case im:w=rw;break;case"scroll":w=Uv;break;case"wheel":w=sw;break;case"copy":case"cut":case"paste":w=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Qd}var E=(e&4)!==0,S=!E&&t==="scroll",x=E?p!==null?p+"Capture":null:p;E=[];for(var v=u,c;v!==null;){c=v;var b=c.stateNode;if(c.tag===5&&b!==null&&(c=b,x!==null&&(b=wo(v,x),b!=null&&E.push(ko(v,b,c)))),S)break;v=v.return}0<E.length&&(p=new w(p,m,null,n,f),h.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==Kc&&(m=n.relatedTarget||n.fromElement)&&(Yr(m)||m[nr]))break e;if((w||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,w?(m=n.relatedTarget||n.toElement,w=u,m=m?Yr(m):null,m!==null&&(S=hi(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(w=null,m=u),w!==m)){if(E=Kd,b="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=Qd,b="onPointerLeave",x="onPointerEnter",v="pointer"),S=w==null?p:$i(w),c=m==null?p:$i(m),p=new E(b,v+"leave",w,n,f),p.target=S,p.relatedTarget=c,b=null,Yr(f)===u&&(E=new E(x,v+"enter",m,n,f),E.target=c,E.relatedTarget=S,b=E),S=b,w&&m)t:{for(E=w,x=m,v=0,c=E;c;c=Ai(c))v++;for(c=0,b=x;b;b=Ai(b))c++;for(;0<v-c;)E=Ai(E),v--;for(;0<c-v;)x=Ai(x),c--;for(;v--;){if(E===x||x!==null&&E===x.alternate)break t;E=Ai(E),x=Ai(x)}E=null}else E=null;w!==null&&op(h,p,w,E,!1),m!==null&&S!==null&&op(h,S,m,E,!0)}}e:{if(p=u?$i(u):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var A=hw;else if(Yd(p))if(Z0)A=mw;else{A=pw;var _=dw}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=gw);if(A&&(A=A(t,u))){Q0(h,A,n,f);break e}_&&_(t,p,u),t==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Fc(p,"number",p.value)}switch(_=u?$i(u):window,t){case"focusin":(Yd(_)||_.contentEditable==="true")&&(Ui=_,ef=u,so=null);break;case"focusout":so=ef=Ui=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,rp(h,n,f);break;case"selectionchange":if(ww)break;case"keydown":case"keyup":rp(h,n,f)}var C;if(Th)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else ji?K0(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(V0&&n.locale!=="ko"&&(ji||O!=="onCompositionStart"?O==="onCompositionEnd"&&ji&&(C=G0()):(br=f,Eh="value"in br?br.value:br.textContent,ji=!0)),_=ua(u,O),0<_.length&&(O=new Wd(O,t,null,n,f),h.push({event:O,listeners:_}),C?O.data=C:(C=W0(n),C!==null&&(O.data=C)))),(C=lw?aw(t,n):uw(t,n))&&(u=ua(u,"onBeforeInput"),0<u.length&&(f=new Wd("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:u}),f.data=C))}om(h,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wo(t,n),s!=null&&r.unshift(ko(t,s,i)),s=wo(t,e),s!=null&&r.push(ko(t,s,i))),t=t.return}return r}function Ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=wo(n,s),a!=null&&o.unshift(ko(n,a,l))):i||(a=wo(n,s),a!=null&&o.push(ko(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Sw=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace(Sw,`
`).replace(Tw,"")}function bl(t,e,n){if(e=lp(e),lp(t)!==e&&n)throw Error(X(425))}function ca(){}var nf=null,rf=null;function sf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,kw=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(t){return ap.resolve(null).then(t).catch(Nw)}:of;function Nw(t){setTimeout(function(){throw t})}function oc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),bo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bo(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function up(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),On="__reactFiber$"+Es,No="__reactProps$"+Es,nr="__reactContainer$"+Es,lf="__reactEvents$"+Es,_w="__reactListeners$"+Es,Cw="__reactHandles$"+Es;function Yr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=up(t);t!==null;){if(n=t[On])return n;t=up(t)}return e}t=n,n=t.parentNode}return null}function Vo(t){return t=t[On]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function ja(t){return t[No]||null}var af=[],qi=-1;function Mr(t){return{current:t}}function Ce(t){0>qi||(t.current=af[qi],af[qi]=null,qi--)}function ke(t,e){qi++,af[qi]=t.current,t.current=e}var Br={},ht=Mr(Br),Ct=Mr(!1),ri=Br;function os(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function fa(){Ce(Ct),Ce(ht)}function cp(t,e,n){if(ht.current!==Br)throw Error(X(168));ke(ht,e),ke(Ct,n)}function am(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,dv(t)||"Unknown",i));return Re({},n,r)}function ha(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,ri=ht.current,ke(ht,t),ke(Ct,Ct.current),!0}function fp(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=am(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Ce(Ct),Ce(ht),ke(ht,t)):Ce(Ct),ke(Ct,n)}var Xn=null,Ua=!1,lc=!1;function um(t){Xn===null?Xn=[t]:Xn.push(t)}function Lw(t){Ua=!0,um(t)}function $r(){if(!lc&&Xn!==null){lc=!0;var t=0,e=be;try{var n=Xn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,Ua=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),P0(yh,$r),i}finally{be=e,lc=!1}}return null}var Fi=[],zi=0,da=null,pa=0,Kt=[],Wt=0,ii=null,Yn=1,Jn="";function Wr(t,e){Fi[zi++]=pa,Fi[zi++]=da,da=t,pa=e}function cm(t,e,n){Kt[Wt++]=Yn,Kt[Wt++]=Jn,Kt[Wt++]=ii,ii=t;var r=Yn;t=Jn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yn=1<<32-gn(e)+i|n<<i|r,Jn=s+t}else Yn=1<<s|n<<i|r,Jn=t}function kh(t){t.return!==null&&(Wr(t,1),cm(t,1,0))}function Nh(t){for(;t===da;)da=Fi[--zi],Fi[zi]=null,pa=Fi[--zi],Fi[zi]=null;for(;t===ii;)ii=Kt[--Wt],Kt[Wt]=null,Jn=Kt[--Wt],Kt[Wt]=null,Yn=Kt[--Wt],Kt[Wt]=null}var Ut=null,Pt=null,Le=!1,hn=null;function fm(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Pt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:Yn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Pt=null,!0):!1;default:return!1}}function uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cf(t){if(Le){var e=Pt;if(e){var n=e;if(!hp(t,e)){if(uf(t))throw Error(X(418));e=Cr(n.nextSibling);var r=Ut;e&&hp(t,e)?fm(r,n):(t.flags=t.flags&-4097|2,Le=!1,Ut=t)}}else{if(uf(t))throw Error(X(418));t.flags=t.flags&-4097|2,Le=!1,Ut=t}}}function dp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Sl(t){if(t!==Ut)return!1;if(!Le)return dp(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sf(t.type,t.memoizedProps)),e&&(e=Pt)){if(uf(t))throw hm(),Error(X(418));for(;e;)fm(t,e),e=Cr(e.nextSibling)}if(dp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Ut?Cr(t.stateNode.nextSibling):null;return!0}function hm(){for(var t=Pt;t;)t=Cr(t.nextSibling)}function ls(){Pt=Ut=null,Le=!1}function _h(t){hn===null?hn=[t]:hn.push(t)}var Iw=ar.ReactCurrentBatchConfig;function Fs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Tl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pp(t){var e=t._init;return e(t._payload)}function dm(t){function e(x,v){if(t){var c=x.deletions;c===null?(x.deletions=[v],x.flags|=16):c.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function i(x,v){return x=Rr(x,v),x.index=0,x.sibling=null,x}function s(x,v,c){return x.index=c,t?(c=x.alternate,c!==null?(c=c.index,c<v?(x.flags|=2,v):c):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,v,c,b){return v===null||v.tag!==6?(v=pc(c,x.mode,b),v.return=x,v):(v=i(v,c),v.return=x,v)}function a(x,v,c,b){var A=c.type;return A===Bi?f(x,v,c.props.children,b,c.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===vr&&pp(A)===v.type)?(b=i(v,c.props),b.ref=Fs(x,v,c),b.return=x,b):(b=Xl(c.type,c.key,c.props,null,x.mode,b),b.ref=Fs(x,v,c),b.return=x,b)}function u(x,v,c,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==c.containerInfo||v.stateNode.implementation!==c.implementation?(v=gc(c,x.mode,b),v.return=x,v):(v=i(v,c.children||[]),v.return=x,v)}function f(x,v,c,b,A){return v===null||v.tag!==7?(v=ni(c,x.mode,b,A),v.return=x,v):(v=i(v,c),v.return=x,v)}function h(x,v,c){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pc(""+v,x.mode,c),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dl:return c=Xl(v.type,v.key,v.props,null,x.mode,c),c.ref=Fs(x,null,v),c.return=x,c;case Di:return v=gc(v,x.mode,c),v.return=x,v;case vr:var b=v._init;return h(x,b(v._payload),c)}if(Qs(v)||js(v))return v=ni(v,x.mode,c,null),v.return=x,v;Tl(x,v)}return null}function p(x,v,c,b){var A=v!==null?v.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return A!==null?null:l(x,v,""+c,b);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case dl:return c.key===A?a(x,v,c,b):null;case Di:return c.key===A?u(x,v,c,b):null;case vr:return A=c._init,p(x,v,A(c._payload),b)}if(Qs(c)||js(c))return A!==null?null:f(x,v,c,b,null);Tl(x,c)}return null}function w(x,v,c,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(c)||null,l(v,x,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return x=x.get(b.key===null?c:b.key)||null,a(v,x,b,A);case Di:return x=x.get(b.key===null?c:b.key)||null,u(v,x,b,A);case vr:var _=b._init;return w(x,v,c,_(b._payload),A)}if(Qs(b)||js(b))return x=x.get(c)||null,f(v,x,b,A,null);Tl(v,b)}return null}function m(x,v,c,b){for(var A=null,_=null,C=v,O=v=0,D=null;C!==null&&O<c.length;O++){C.index>O?(D=C,C=null):D=C.sibling;var M=p(x,C,c[O],b);if(M===null){C===null&&(C=D);break}t&&C&&M.alternate===null&&e(x,C),v=s(M,v,O),_===null?A=M:_.sibling=M,_=M,C=D}if(O===c.length)return n(x,C),Le&&Wr(x,O),A;if(C===null){for(;O<c.length;O++)C=h(x,c[O],b),C!==null&&(v=s(C,v,O),_===null?A=C:_.sibling=C,_=C);return Le&&Wr(x,O),A}for(C=r(x,C);O<c.length;O++)D=w(C,x,O,c[O],b),D!==null&&(t&&D.alternate!==null&&C.delete(D.key===null?O:D.key),v=s(D,v,O),_===null?A=D:_.sibling=D,_=D);return t&&C.forEach(function(G){return e(x,G)}),Le&&Wr(x,O),A}function E(x,v,c,b){var A=js(c);if(typeof A!="function")throw Error(X(150));if(c=A.call(c),c==null)throw Error(X(151));for(var _=A=null,C=v,O=v=0,D=null,M=c.next();C!==null&&!M.done;O++,M=c.next()){C.index>O?(D=C,C=null):D=C.sibling;var G=p(x,C,M.value,b);if(G===null){C===null&&(C=D);break}t&&C&&G.alternate===null&&e(x,C),v=s(G,v,O),_===null?A=G:_.sibling=G,_=G,C=D}if(M.done)return n(x,C),Le&&Wr(x,O),A;if(C===null){for(;!M.done;O++,M=c.next())M=h(x,M.value,b),M!==null&&(v=s(M,v,O),_===null?A=M:_.sibling=M,_=M);return Le&&Wr(x,O),A}for(C=r(x,C);!M.done;O++,M=c.next())M=w(C,x,O,M.value,b),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?O:M.key),v=s(M,v,O),_===null?A=M:_.sibling=M,_=M);return t&&C.forEach(function(I){return e(x,I)}),Le&&Wr(x,O),A}function S(x,v,c,b){if(typeof c=="object"&&c!==null&&c.type===Bi&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case dl:e:{for(var A=c.key,_=v;_!==null;){if(_.key===A){if(A=c.type,A===Bi){if(_.tag===7){n(x,_.sibling),v=i(_,c.props.children),v.return=x,x=v;break e}}else if(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===vr&&pp(A)===_.type){n(x,_.sibling),v=i(_,c.props),v.ref=Fs(x,_,c),v.return=x,x=v;break e}n(x,_);break}else e(x,_);_=_.sibling}c.type===Bi?(v=ni(c.props.children,x.mode,b,c.key),v.return=x,x=v):(b=Xl(c.type,c.key,c.props,null,x.mode,b),b.ref=Fs(x,v,c),b.return=x,x=b)}return o(x);case Di:e:{for(_=c.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===c.containerInfo&&v.stateNode.implementation===c.implementation){n(x,v.sibling),v=i(v,c.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=gc(c,x.mode,b),v.return=x,x=v}return o(x);case vr:return _=c._init,S(x,v,_(c._payload),b)}if(Qs(c))return m(x,v,c,b);if(js(c))return E(x,v,c,b);Tl(x,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,v!==null&&v.tag===6?(n(x,v.sibling),v=i(v,c),v.return=x,x=v):(n(x,v),v=pc(c,x.mode,b),v.return=x,x=v),o(x)):n(x,v)}return S}var as=dm(!0),pm=dm(!1),ga=Mr(null),ma=null,Hi=null,Ch=null;function Lh(){Ch=Hi=ma=null}function Ih(t){var e=ga.current;Ce(ga),t._currentValue=e}function ff(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ji(t,e){ma=t,Ch=Hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Ch!==t)if(t={context:t,memoizedValue:e,next:null},Hi===null){if(ma===null)throw Error(X(308));Hi=t,ma.dependencies={lanes:0,firstContext:t}}else Hi=Hi.next=t;return e}var Jr=null;function Oh(t){Jr===null?Jr=[t]:Jr.push(t)}function gm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Oh(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function Rh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,Oh(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function Gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function gp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ya(t,e,n,r){var i=t.updateQueue;wr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;o=0,f=u=a=null,l=s;do{var p=l.lane,w=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,E=l;switch(p=e,w=n,E.tag){case 1:if(m=E.payload,typeof m=="function"){h=m.call(w,h,p);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=E.payload,p=typeof m=="function"?m.call(w,h,p):m,p==null)break e;h=Re({},h,p);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else w={eventTime:w,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=w,a=h):f=f.next=w,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=h}}function mp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ko={},Bn=Mr(Ko),_o=Mr(Ko),Co=Mr(Ko);function ei(t){if(t===Ko)throw Error(X(174));return t}function Ph(t,e){switch(ke(Co,e),ke(_o,t),ke(Bn,Ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}Ce(Bn),ke(Bn,e)}function us(){Ce(Bn),Ce(_o),Ce(Co)}function ym(t){ei(Co.current);var e=ei(Bn.current),n=Hc(e,t.type);e!==n&&(ke(_o,t),ke(Bn,n))}function Dh(t){_o.current===t&&(Ce(Bn),Ce(_o))}var Ie=Mr(0);function va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function Bh(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Vl=ar.ReactCurrentDispatcher,uc=ar.ReactCurrentBatchConfig,si=0,Oe=null,$e=null,ze=null,wa=!1,oo=!1,Lo=0,Ow=0;function st(){throw Error(X(321))}function jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Uh(t,e,n,r,i,s){if(si=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vl.current=t===null||t.memoizedState===null?Bw:jw,t=n(r,i),oo){s=0;do{if(oo=!1,Lo=0,25<=s)throw Error(X(301));s+=1,ze=$e=null,e.updateQueue=null,Vl.current=Uw,t=n(r,i)}while(oo)}if(Vl.current=xa,e=$e!==null&&$e.next!==null,si=0,ze=$e=Oe=null,wa=!1,e)throw Error(X(300));return t}function Mh(){var t=Lo!==0;return Lo=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Oe.memoizedState=ze=t:ze=ze.next=t,ze}function rn(){if($e===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=ze===null?Oe.memoizedState:ze.next;if(e!==null)ze=e,$e=t;else{if(t===null)throw Error(X(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ze===null?Oe.memoizedState=ze=t:ze=ze.next=t}return ze}function Io(t,e){return typeof e=="function"?e(t):e}function cc(t){var e=rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((si&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,Oe.lanes|=f,oi|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,vn(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,oi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fc(t){var e=rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vn(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vm(){}function wm(t,e){var n=Oe,r=rn(),i=e(),s=!vn(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,$h(bm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Oo(9,Em.bind(null,n,r,i,e),void 0,null),He===null)throw Error(X(349));si&30||xm(n,e,i)}return i}function xm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Em(t,e,n,r){e.value=n,e.getSnapshot=r,Sm(e)&&Tm(t)}function bm(t,e,n){return n(function(){Sm(e)&&Tm(t)})}function Sm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function Tm(t){var e=rr(t,1);e!==null&&mn(e,t,1,-1)}function yp(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=Dw.bind(null,Oe,t),[e.memoizedState,t]}function Oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Am(){return rn().memoizedState}function Kl(t,e,n,r){var i=Ln();Oe.flags|=t,i.memoizedState=Oo(1|e,n,void 0,r===void 0?null:r)}function Ma(t,e,n,r){var i=rn();r=r===void 0?null:r;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,r!==null&&jh(r,o.deps)){i.memoizedState=Oo(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=Oo(1|e,n,s,r)}function vp(t,e){return Kl(8390656,8,t,e)}function $h(t,e){return Ma(2048,8,t,e)}function km(t,e){return Ma(4,2,t,e)}function Nm(t,e){return Ma(4,4,t,e)}function _m(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cm(t,e,n){return n=n!=null?n.concat([t]):null,Ma(4,4,_m.bind(null,e,t),n)}function qh(){}function Lm(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Im(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Om(t,e,n){return si&21?(vn(n,e)||(n=j0(),Oe.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function Rw(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=uc.transition;uc.transition={};try{t(!1),e()}finally{be=n,uc.transition=r}}function Rm(){return rn().memoizedState}function Pw(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pm(t))Dm(e,n);else if(n=gm(t,e,n,r),n!==null){var i=Et();mn(n,t,r,i),Bm(n,e,r)}}function Dw(t,e,n){var r=Or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pm(t))Dm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,vn(l,o)){var a=e.interleaved;a===null?(i.next=i,Oh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=gm(t,e,i,r),n!==null&&(i=Et(),mn(n,t,r,i),Bm(n,e,r))}}function Pm(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Dm(t,e){oo=wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var xa={readContext:nn,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Bw={readContext:nn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:vp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4194308,4,_m.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kl(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Pw.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:yp,useDebugValue:qh,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=yp(!1),e=t[0];return t=Rw.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=Ln();if(Le){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),He===null)throw Error(X(349));si&30||xm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,vp(bm.bind(null,r,s,t),[t]),r.flags|=2048,Oo(9,Em.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=He.identifierPrefix;if(Le){var n=Jn,r=Yn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ow++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jw={readContext:nn,useCallback:Lm,useContext:nn,useEffect:$h,useImperativeHandle:Cm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Im,useReducer:cc,useRef:Am,useState:function(){return cc(Io)},useDebugValue:qh,useDeferredValue:function(t){var e=rn();return Om(e,$e.memoizedState,t)},useTransition:function(){var t=cc(Io)[0],e=rn().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:wm,useId:Rm,unstable_isNewReconciler:!1},Uw={readContext:nn,useCallback:Lm,useContext:nn,useEffect:$h,useImperativeHandle:Cm,useInsertionEffect:km,useLayoutEffect:Nm,useMemo:Im,useReducer:fc,useRef:Am,useState:function(){return fc(Io)},useDebugValue:qh,useDeferredValue:function(t){var e=rn();return $e===null?e.memoizedState=t:Om(e,$e.memoizedState,t)},useTransition:function(){var t=fc(Io)[0],e=rn().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:wm,useId:Rm,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $a={isMounted:function(t){return(t=t._reactInternals)?hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Or(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(mn(e,t,i,r),Gl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Or(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(mn(e,t,i,r),Gl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Or(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(mn(e,t,r,n),Gl(e,t,r))}};function wp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(i,s):!0}function jm(t,e,n){var r=!1,i=Br,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(i=Lt(e)?ri:ht.current,r=e.contextTypes,s=(r=r!=null)?os(t,i):Br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$a,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$a.enqueueReplaceState(e,e.state,null)}function df(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nn(s):(s=Lt(e)?ri:ht.current,i.context=os(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$a.enqueueReplaceState(i,i.state,null),ya(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function cs(t,e){try{var n="",r=e;do n+=hv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mw=typeof WeakMap=="function"?WeakMap:Map;function Um(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ba||(ba=!0,Tf=r),pf(t,e)},n}function Mm(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pf(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ep(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Jw.bind(null,t,e,n),e.then(t,t))}function bp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var $w=ar.ReactCurrentOwner,_t=!1;function wt(t,e,n,r){e.child=t===null?pm(e,null,n,r):as(e,t.child,n,r)}function Tp(t,e,n,r,i){n=n.render;var s=e.ref;return Ji(e,i),r=Uh(t,e,n,r,s,i),n=Mh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Le&&n&&kh(e),e.flags|=1,wt(t,e,r,i),e.child)}function Ap(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$m(t,e,s,r,i)):(t=Xl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=Rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function $m(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(To(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,ir(t,e,i)}return gf(t,e,n,r,i)}function qm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Vi,Rt),Rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Vi,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(Vi,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ke(Vi,Rt),Rt|=r;return wt(t,e,i,n),e.child}function Fm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,r,i){var s=Lt(n)?ri:ht.current;return s=os(e,s),Ji(e,i),n=Uh(t,e,n,r,s,i),r=Mh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Le&&r&&kh(e),e.flags|=1,wt(t,e,n,i),e.child)}function kp(t,e,n,r,i){if(Lt(n)){var s=!0;ha(e)}else s=!1;if(Ji(e,i),e.stateNode===null)Wl(t,e),jm(e,n,r),df(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nn(u):(u=Lt(n)?ri:ht.current,u=os(e,u));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&xp(e,o,r,u),wr=!1;var p=e.memoizedState;o.state=p,ya(e,r,o,i),a=e.memoizedState,l!==r||p!==a||Ct.current||wr?(typeof f=="function"&&(hf(e,n,f,r),a=e.memoizedState),(l=wr||wp(e,n,l,r,p,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:cn(e.type,l),o.props=u,h=e.pendingProps,p=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=nn(a):(a=Lt(n)?ri:ht.current,a=os(e,a));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==a)&&xp(e,o,r,a),wr=!1,p=e.memoizedState,o.state=p,ya(e,r,o,i);var m=e.memoizedState;l!==h||p!==m||Ct.current||wr?(typeof w=="function"&&(hf(e,n,w,r),m=e.memoizedState),(u=wr||wp(e,n,u,r,p,m,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return mf(t,e,n,r,s,i)}function mf(t,e,n,r,i,s){Fm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fp(e,n,!1),ir(t,e,s);r=e.stateNode,$w.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=as(e,t.child,null,s),e.child=as(e,null,l,s)):wt(t,e,l,s),e.memoizedState=r.state,i&&fp(e,n,!0),e.child}function zm(t){var e=t.stateNode;e.pendingContext?cp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cp(t,e.context,!1),Ph(t,e.containerInfo)}function Np(t,e,n,r,i){return ls(),_h(i),e.flags|=256,wt(t,e,n,r),e.child}var yf={dehydrated:null,treeContext:null,retryLane:0};function vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hm(t,e,n){var r=e.pendingProps,i=Ie.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke(Ie,i&1),t===null)return cf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=za(o,r,0,null),t=ni(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vf(n),e.memoizedState=yf,t):Fh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return qw(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Rr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Rr(l,s):(s=ni(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yf,r}return s=t.child,t=s.sibling,r=Rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fh(t,e){return e=za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&_h(r),as(e,t.child,null,n),t=Fh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qw(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hc(Error(X(422))),Al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=za({mode:"visible",children:r.children},i,0,null),s=ni(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&as(e,t.child,null,o),e.child.memoizedState=vf(o),e.memoizedState=yf,s);if(!(e.mode&1))return Al(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=hc(s,r,void 0),Al(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=He,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rr(t,i),mn(r,t,i,-1))}return Wh(),r=hc(Error(X(421))),Al(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=e2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pt=Cr(i.nextSibling),Ut=e,Le=!0,hn=null,t!==null&&(Kt[Wt++]=Yn,Kt[Wt++]=Jn,Kt[Wt++]=ii,Yn=t.id,Jn=t.overflow,ii=e),e=Fh(e,r.children),e.flags|=4096,e)}function _p(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ff(t.return,e,n)}function dc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_p(t,n,e);else if(t.tag===19)_p(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&va(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&va(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dc(e,!0,n,null,s);break;case"together":dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Fw(t,e,n){switch(e.tag){case 3:zm(e),ls();break;case 5:ym(e);break;case 1:Lt(e.type)&&ha(e);break;case 4:Ph(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(ga,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Hm(t,e,n):(ke(Ie,Ie.current&1),t=ir(t,e,n),t!==null?t.sibling:null);ke(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,qm(t,e,n)}return ir(t,e,n)}var Vm,wf,Km,Wm;Vm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};Km=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ei(Bn.current);var s=null;switch(n){case"input":i=$c(t,i),r=$c(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=zc(t,i),r=zc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ca)}Gc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yo.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Ne("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Wm=function(t,e,n,r){n!==r&&(e.flags|=4)};function zs(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zw(t,e,n){var r=e.pendingProps;switch(Nh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Lt(e.type)&&fa(),ot(e),null;case 3:return r=e.stateNode,us(),Ce(Ct),Ce(ht),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Nf(hn),hn=null))),wf(t,e),ot(e),null;case 5:Dh(e);var i=ei(Co.current);if(n=e.type,t!==null&&e.stateNode!=null)Km(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return ot(e),null}if(t=ei(Bn.current),Sl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[No]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Xs.length;i++)Ne(Xs[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":jd(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Md(r,s),Ne("invalid",r)}Gc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),i=["children",""+l]):yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":pl(r),Ud(r,s,!0);break;case"textarea":pl(r),$d(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ca)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=b0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[No]=r,Vm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vc(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xs.length;i++)Ne(Xs[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":jd(t,r),i=$c(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Md(t,r),i=zc(t,r),Ne("invalid",t);break;default:i=r}Gc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?A0(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&S0(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&vo(t,a):typeof a=="number"&&vo(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yo.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ne("scroll",t):a!=null&&hh(t,s,a,o))}switch(n){case"input":pl(t),Ud(t,r,!1);break;case"textarea":pl(t),$d(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ca)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Wm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=ei(Co.current),ei(Bn.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return ot(e),null;case 13:if(Ce(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Pt!==null&&e.mode&1&&!(e.flags&128))hm(),ls(),e.flags|=98560,s=!1;else if(s=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[On]=e}else ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),s=!1}else hn!==null&&(Nf(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Fe===0&&(Fe=3):Wh())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return us(),wf(t,e),t===null&&Ao(e.stateNode.containerInfo),ot(e),null;case 10:return Ih(e.type._context),ot(e),null;case 17:return Lt(e.type)&&fa(),ot(e),null;case 19:if(Ce(Ie),s=e.memoizedState,s===null)return ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zs(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=va(t),o!==null){for(e.flags|=128,zs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Ie,Ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&De()>fs&&(e.flags|=128,r=!0,zs(s,!1),e.lanes=4194304)}else{if(!r)if(t=va(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return ot(e),null}else 2*De()-s.renderingStartTime>fs&&n!==1073741824&&(e.flags|=128,r=!0,zs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=De(),e.sibling=null,n=Ie.current,ke(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Kh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function Hw(t,e){switch(Nh(e),e.tag){case 1:return Lt(e.type)&&fa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return us(),Ce(Ct),Ce(ht),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dh(e),null;case 13:if(Ce(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ie),null;case 4:return us(),null;case 10:return Ih(e.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var kl=!1,ut=!1,Gw=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function xf(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Cp=!1;function Vw(t,e){if(nf=la,t=J0(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,h=t,p=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==s||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)p=h,h=w;for(;;){if(h===t)break t;if(p===n&&++u===i&&(l=o),p===s&&++f===r&&(a=o),(w=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=w}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(rf={focusedElem:t,selectionRange:n},la=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var E=m.memoizedProps,S=m.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?E:cn(e.type,E),S);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var c=e.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(b){Pe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return m=Cp,Cp=!1,m}function lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xf(e,n,s)}i=i.next}while(i!==r)}}function qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qm(t){var e=t.alternate;e!==null&&(t.alternate=null,Qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[No],delete e[lf],delete e[_w],delete e[Cw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zm(t){return t.tag===5||t.tag===3||t.tag===4}function Lp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ca));else if(r!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}function Sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}var Qe=null,fn=!1;function pr(t,e,n){for(n=n.child;n!==null;)Xm(t,e,n),n=n.sibling}function Xm(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Ra,n)}catch{}switch(n.tag){case 5:ut||Gi(n,e);case 6:var r=Qe,i=fn;Qe=null,pr(t,e,n),Qe=r,fn=i,Qe!==null&&(fn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(fn?(t=Qe,n=n.stateNode,t.nodeType===8?oc(t.parentNode,n):t.nodeType===1&&oc(t,n),bo(t)):oc(Qe,n.stateNode));break;case 4:r=Qe,i=fn,Qe=n.stateNode.containerInfo,fn=!0,pr(t,e,n),Qe=r,fn=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xf(n,e,o),i=i.next}while(i!==r)}pr(t,e,n);break;case 1:if(!ut&&(Gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,pr(t,e,n),ut=r):pr(t,e,n);break;default:pr(t,e,n)}}function Ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gw),e.forEach(function(r){var i=t2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,fn=!1;break e;case 3:Qe=l.stateNode.containerInfo,fn=!0;break e;case 4:Qe=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(Qe===null)throw Error(X(160));Xm(s,o,i),Qe=null,fn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ym(e,t),e=e.sibling}function Ym(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),_n(t),r&4){try{lo(3,t,t.return),qa(3,t)}catch(E){Pe(t,t.return,E)}try{lo(5,t,t.return)}catch(E){Pe(t,t.return,E)}}break;case 1:ln(e,t),_n(t),r&512&&n!==null&&Gi(n,n.return);break;case 5:if(ln(e,t),_n(t),r&512&&n!==null&&Gi(n,n.return),t.flags&32){var i=t.stateNode;try{vo(i,"")}catch(E){Pe(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&x0(i,s),Vc(l,o);var u=Vc(l,s);for(o=0;o<a.length;o+=2){var f=a[o],h=a[o+1];f==="style"?A0(i,h):f==="dangerouslySetInnerHTML"?S0(i,h):f==="children"?vo(i,h):hh(i,f,h,u)}switch(l){case"input":qc(i,s);break;case"textarea":E0(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Qi(i,!!s.multiple,w,!1):p!==!!s.multiple&&(s.defaultValue!=null?Qi(i,!!s.multiple,s.defaultValue,!0):Qi(i,!!s.multiple,s.multiple?[]:"",!1))}i[No]=s}catch(E){Pe(t,t.return,E)}}break;case 6:if(ln(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Pe(t,t.return,E)}}break;case 3:if(ln(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(E){Pe(t,t.return,E)}break;case 4:ln(e,t),_n(t);break;case 13:ln(e,t),_n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gh=De())),r&4&&Ip(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(u=ut)||f,ln(e,t),ut=u):ln(e,t),_n(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(h=ee=f;ee!==null;){switch(p=ee,w=p.child,p.tag){case 0:case 11:case 14:case 15:lo(4,p,p.return);break;case 1:Gi(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(E){Pe(r,n,E)}}break;case 5:Gi(p,p.return);break;case 22:if(p.memoizedState!==null){Rp(h);continue}}w!==null?(w.return=p,ee=w):Rp(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=T0("display",o))}catch(E){Pe(t,t.return,E)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(E){Pe(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ln(e,t),_n(t),r&4&&Ip(t);break;case 21:break;default:ln(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zm(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vo(i,""),r.flags&=-33);var s=Lp(t);Sf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Lp(t);bf(t,l,o);break;default:throw Error(X(161))}}catch(a){Pe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kw(t,e,n){ee=t,Jm(t)}function Jm(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kl;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ut;l=kl;var u=ut;if(kl=o,(ut=a)&&!u)for(ee=i;ee!==null;)o=ee,a=o.child,o.tag===22&&o.memoizedState!==null?Pp(i):a!==null?(a.return=o,ee=a):Pp(i);for(;s!==null;)ee=s,Jm(s),s=s.sibling;ee=i,kl=l,ut=u}Op(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):Op(t)}}function Op(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||qa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&bo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}ut||e.flags&512&&Ef(e)}catch(p){Pe(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Rp(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Pp(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qa(4,e)}catch(a){Pe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Pe(e,i,a)}}var s=e.return;try{Ef(e)}catch(a){Pe(e,s,a)}break;case 5:var o=e.return;try{Ef(e)}catch(a){Pe(e,o,a)}}}catch(a){Pe(e,e.return,a)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var Ww=Math.ceil,Ea=ar.ReactCurrentDispatcher,zh=ar.ReactCurrentOwner,tn=ar.ReactCurrentBatchConfig,me=0,He=null,je=null,Xe=0,Rt=0,Vi=Mr(0),Fe=0,Ro=null,oi=0,Fa=0,Hh=0,ao=null,Nt=null,Gh=0,fs=1/0,Zn=null,ba=!1,Tf=null,Ir=null,Nl=!1,Sr=null,Sa=0,uo=0,Af=null,Ql=-1,Zl=0;function Et(){return me&6?De():Ql!==-1?Ql:Ql=De()}function Or(t){return t.mode&1?me&2&&Xe!==0?Xe&-Xe:Iw.transition!==null?(Zl===0&&(Zl=j0()),Zl):(t=be,t!==0||(t=window.event,t=t===void 0?16:H0(t.type)),t):1}function mn(t,e,n,r){if(50<uo)throw uo=0,Af=null,Error(X(185));Ho(t,n,r),(!(me&2)||t!==He)&&(t===He&&(!(me&2)&&(Fa|=n),Fe===4&&Er(t,Xe)),It(t,r),n===1&&me===0&&!(e.mode&1)&&(fs=De()+500,Ua&&$r()))}function It(t,e){var n=t.callbackNode;Iv(t,e);var r=oa(t,t===He?Xe:0);if(r===0)n!==null&&zd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zd(n),e===1)t.tag===0?Lw(Dp.bind(null,t)):um(Dp.bind(null,t)),kw(function(){!(me&6)&&$r()}),n=null;else{switch(U0(r)){case 1:n=yh;break;case 4:n=D0;break;case 16:n=sa;break;case 536870912:n=B0;break;default:n=sa}n=l1(n,e1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function e1(t,e){if(Ql=-1,Zl=0,me&6)throw Error(X(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var r=oa(t,t===He?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ta(t,r);else{e=r;var i=me;me|=2;var s=n1();(He!==t||Xe!==e)&&(Zn=null,fs=De()+500,ti(t,e));do try{Xw();break}catch(l){t1(t,l)}while(!0);Lh(),Ea.current=s,me=i,je!==null?e=0:(He=null,Xe=0,e=Fe)}if(e!==0){if(e===2&&(i=Xc(t),i!==0&&(r=i,e=kf(t,i))),e===1)throw n=Ro,ti(t,0),Er(t,r),It(t,De()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,!(r&30)&&!Qw(i)&&(e=Ta(t,r),e===2&&(s=Xc(t),s!==0&&(r=s,e=kf(t,s))),e===1))throw n=Ro,ti(t,0),Er(t,r),It(t,De()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Qr(t,Nt,Zn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=Gh+500-De(),10<e)){if(oa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=of(Qr.bind(null,t,Nt,Zn),e);break}Qr(t,Nt,Zn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ww(r/1960))-r,10<r){t.timeoutHandle=of(Qr.bind(null,t,Nt,Zn),r);break}Qr(t,Nt,Zn);break;case 5:Qr(t,Nt,Zn);break;default:throw Error(X(329))}}}return It(t,De()),t.callbackNode===n?e1.bind(null,t):null}function kf(t,e){var n=ao;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=Ta(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Nf(e)),t}function Nf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function Qw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Hh,e&=~Fa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Dp(t){if(me&6)throw Error(X(327));es();var e=oa(t,0);if(!(e&1))return It(t,De()),null;var n=Ta(t,e);if(t.tag!==0&&n===2){var r=Xc(t);r!==0&&(e=r,n=kf(t,r))}if(n===1)throw n=Ro,ti(t,0),Er(t,e),It(t,De()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qr(t,Nt,Zn),It(t,De()),null}function Vh(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(fs=De()+500,Ua&&$r())}}function li(t){Sr!==null&&Sr.tag===0&&!(me&6)&&es();var e=me;me|=1;var n=tn.transition,r=be;try{if(tn.transition=null,be=1,t)return t()}finally{be=r,tn.transition=n,me=e,!(me&6)&&$r()}}function Kh(){Rt=Vi.current,Ce(Vi)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Aw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Nh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fa();break;case 3:us(),Ce(Ct),Ce(ht),Bh();break;case 5:Dh(r);break;case 4:us();break;case 13:Ce(Ie);break;case 19:Ce(Ie);break;case 10:Ih(r.type._context);break;case 22:case 23:Kh()}n=n.return}if(He=t,je=t=Rr(t.current,null),Xe=Rt=e,Fe=0,Ro=null,Hh=Fa=oi=0,Nt=ao=null,Jr!==null){for(e=0;e<Jr.length;e++)if(n=Jr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Jr=null}return t}function t1(t,e){do{var n=je;try{if(Lh(),Vl.current=xa,wa){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wa=!1}if(si=0,ze=$e=Oe=null,oo=!1,Lo=0,zh.current=null,n===null||n.return===null){Fe=1,Ro=e,je=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=bp(o);if(w!==null){w.flags&=-257,Sp(w,o,l,s,e),w.mode&1&&Ep(s,u,e),e=w,a=u;var m=e.updateQueue;if(m===null){var E=new Set;E.add(a),e.updateQueue=E}else m.add(a);break e}else{if(!(e&1)){Ep(s,u,e),Wh();break e}a=Error(X(426))}}else if(Le&&l.mode&1){var S=bp(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Sp(S,o,l,s,e),_h(cs(a,l));break e}}s=a=cs(a,l),Fe!==4&&(Fe=2),ao===null?ao=[s]:ao.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Um(s,a,e);gp(s,x);break e;case 1:l=a;var v=s.type,c=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ir===null||!Ir.has(c)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Mm(s,l,e);gp(s,b);break e}}s=s.return}while(s!==null)}i1(n)}catch(A){e=A,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function n1(){var t=Ea.current;return Ea.current=xa,t===null?xa:t}function Wh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(oi&268435455)&&!(Fa&268435455)||Er(He,Xe)}function Ta(t,e){var n=me;me|=2;var r=n1();(He!==t||Xe!==e)&&(Zn=null,ti(t,e));do try{Zw();break}catch(i){t1(t,i)}while(!0);if(Lh(),me=n,Ea.current=r,je!==null)throw Error(X(261));return He=null,Xe=0,Fe}function Zw(){for(;je!==null;)r1(je)}function Xw(){for(;je!==null&&!bv();)r1(je)}function r1(t){var e=o1(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?i1(t):je=e,zh.current=null}function i1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hw(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,je=null;return}}else if(n=zw(n,e,Rt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Fe===0&&(Fe=5)}function Qr(t,e,n){var r=be,i=tn.transition;try{tn.transition=null,be=1,Yw(t,e,n,r)}finally{tn.transition=i,be=r}return null}function Yw(t,e,n,r){do es();while(Sr!==null);if(me&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ov(t,s),t===He&&(je=He=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nl||(Nl=!0,l1(sa,function(){return es(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tn.transition,tn.transition=null;var o=be;be=1;var l=me;me|=4,zh.current=null,Vw(t,n),Ym(n,t),vw(rf),la=!!nf,rf=nf=null,t.current=n,Kw(n),Sv(),me=l,be=o,tn.transition=s}else t.current=n;if(Nl&&(Nl=!1,Sr=t,Sa=i),s=t.pendingLanes,s===0&&(Ir=null),kv(n.stateNode),It(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ba)throw ba=!1,t=Tf,Tf=null,t;return Sa&1&&t.tag!==0&&es(),s=t.pendingLanes,s&1?t===Af?uo++:(uo=0,Af=t):uo=0,$r(),null}function es(){if(Sr!==null){var t=U0(Sa),e=tn.transition,n=be;try{if(tn.transition=null,be=16>t?16:t,Sr===null)var r=!1;else{if(t=Sr,Sr=null,Sa=0,me&6)throw Error(X(331));var i=me;for(me|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(ee=u;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:lo(8,f,s)}var h=f.child;if(h!==null)h.return=f,ee=h;else for(;ee!==null;){f=ee;var p=f.sibling,w=f.return;if(Qm(f),f===u){ee=null;break}if(p!==null){p.return=w,ee=p;break}ee=w}}}var m=s.alternate;if(m!==null){var E=m.child;if(E!==null){m.child=null;do{var S=E.sibling;E.sibling=null,E=S}while(E!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lo(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,ee=x;break e}ee=s.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var c=o.child;if(o.subtreeFlags&2064&&c!==null)c.return=o,ee=c;else e:for(o=v;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qa(9,l)}}catch(A){Pe(l,l.return,A)}if(l===o){ee=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ee=b;break e}ee=l.return}}if(me=i,$r(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Ra,t)}catch{}r=!0}return r}finally{be=n,tn.transition=e}}return!1}function Bp(t,e,n){e=cs(n,e),e=Um(t,e,1),t=Lr(t,e,1),e=Et(),t!==null&&(Ho(t,1,e),It(t,e))}function Pe(t,e,n){if(t.tag===3)Bp(t,t,n);else for(;e!==null;){if(e.tag===3){Bp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=cs(n,t),t=Mm(e,t,1),e=Lr(e,t,1),t=Et(),e!==null&&(Ho(e,1,t),It(e,t));break}}e=e.return}}function Jw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Xe&n)===n&&(Fe===4||Fe===3&&(Xe&130023424)===Xe&&500>De()-Gh?ti(t,0):Hh|=n),It(t,e)}function s1(t,e){e===0&&(t.mode&1?(e=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):e=1);var n=Et();t=rr(t,e),t!==null&&(Ho(t,e,n),It(t,n))}function e2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s1(t,n)}function t2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),s1(t,n)}var o1;o1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,Fw(t,e,n);_t=!!(t.flags&131072)}else _t=!1,Le&&e.flags&1048576&&cm(e,pa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wl(t,e),t=e.pendingProps;var i=os(e,ht.current);Ji(e,n),i=Uh(null,e,r,t,i,n);var s=Mh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,ha(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rh(e),i.updater=$a,e.stateNode=i,i._reactInternals=e,df(e,r,t,n),e=mf(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&kh(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=r2(r),t=cn(r,t),i){case 0:e=gf(null,e,r,t,n);break e;case 1:e=kp(null,e,r,t,n);break e;case 11:e=Tp(null,e,r,t,n);break e;case 14:e=Ap(null,e,r,cn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),gf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),kp(t,e,r,i,n);case 3:e:{if(zm(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mm(t,e),ya(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cs(Error(X(423)),e),e=Np(t,e,r,n,i);break e}else if(r!==i){i=cs(Error(X(424)),e),e=Np(t,e,r,n,i);break e}else for(Pt=Cr(e.stateNode.containerInfo.firstChild),Ut=e,Le=!0,hn=null,n=pm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===i){e=ir(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return ym(e),t===null&&cf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sf(r,i)?o=null:s!==null&&sf(r,s)&&(e.flags|=32),Fm(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&cf(e),null;case 13:return Hm(t,e,n);case 4:return Ph(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=as(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Tp(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ke(ga,r._currentValue),r._currentValue=o,s!==null)if(vn(s.value,o)){if(s.children===i.children&&!Ct.current){e=ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=er(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ff(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ff(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ji(e,n),i=nn(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=cn(r,e.pendingProps),i=cn(r.type,i),Ap(t,e,r,i,n);case 15:return $m(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Wl(t,e),e.tag=1,Lt(r)?(t=!0,ha(e)):t=!1,Ji(e,n),jm(e,r,i),df(e,r,i,n),mf(null,e,r,!0,t,n);case 19:return Gm(t,e,n);case 22:return qm(t,e,n)}throw Error(X(156,e.tag))};function l1(t,e){return P0(t,e)}function n2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new n2(t,e,n,r)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r2(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===gh)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ni(n.children,i,s,e);case dh:o=8,i|=8;break;case Bc:return t=Jt(12,n,e,i|2),t.elementType=Bc,t.lanes=s,t;case jc:return t=Jt(13,n,e,i),t.elementType=jc,t.lanes=s,t;case Uc:return t=Jt(19,n,e,i),t.elementType=Uc,t.lanes=s,t;case y0:return za(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g0:o=10;break e;case m0:o=9;break e;case ph:o=11;break e;case gh:o=14;break e;case vr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ni(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function za(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=y0,t.lanes=n,t.stateNode={isHidden:!1},t}function pc(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function gc(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function i2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zh(t,e,n,r,i,s,o,l,a){return t=new i2(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(s),t}function s2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function a1(t){if(!t)return Br;t=t._reactInternals;e:{if(hi(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Lt(n))return am(t,n,e)}return e}function u1(t,e,n,r,i,s,o,l,a){return t=Zh(n,r,!0,t,i,s,o,l,a),t.context=a1(null),n=t.current,r=Et(),i=Or(n),s=er(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,Ho(t,i,r),It(t,r),t}function Ha(t,e,n,r){var i=e.current,s=Et(),o=Or(i);return n=a1(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(mn(t,i,o,s),Gl(t,i,o)),o}function Aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xh(t,e){jp(t,e),(t=t.alternate)&&jp(t,e)}function o2(){return null}var c1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yh(t){this._internalRoot=t}Ga.prototype.render=Yh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Ha(t,e,null,null)};Ga.prototype.unmount=Yh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;li(function(){Ha(null,t,null,null)}),e[nr]=null}};function Ga(t){this._internalRoot=t}Ga.prototype.unstable_scheduleHydration=function(t){if(t){var e=q0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&z0(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Up(){}function l2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Aa(o);s.call(u)}}var o=u1(e,r,t,0,null,!1,!1,"",Up);return t._reactRootContainer=o,t[nr]=o.current,Ao(t.nodeType===8?t.parentNode:t),li(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Aa(a);l.call(u)}}var a=Zh(t,0,!1,null,null,!1,!1,"",Up);return t._reactRootContainer=a,t[nr]=a.current,Ao(t.nodeType===8?t.parentNode:t),li(function(){Ha(e,a,n,r)}),a}function Ka(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Aa(o);l.call(a)}}Ha(e,o,t,i)}else o=l2(n,e,t,i,r);return Aa(o)}M0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zs(e.pendingLanes);n!==0&&(vh(e,n|1),It(e,De()),!(me&6)&&(fs=De()+500,$r()))}break;case 13:li(function(){var r=rr(t,1);if(r!==null){var i=Et();mn(r,t,1,i)}}),Xh(t,1)}};wh=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=Et();mn(e,t,134217728,n)}Xh(t,134217728)}};$0=function(t){if(t.tag===13){var e=Or(t),n=rr(t,e);if(n!==null){var r=Et();mn(n,t,e,r)}Xh(t,e)}};q0=function(){return be};F0=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Wc=function(t,e,n){switch(e){case"input":if(qc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ja(r);if(!i)throw Error(X(90));w0(r),qc(r,i)}}}break;case"textarea":E0(t,n);break;case"select":e=n.value,e!=null&&Qi(t,!!n.multiple,e,!1)}};_0=Vh;C0=li;var a2={usingClientEntryPoint:!1,Events:[Vo,$i,ja,k0,N0,Vh]},Hs={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u2={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O0(t),t===null?null:t.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||o2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Ra=_l.inject(u2),Dn=_l}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a2;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(X(200));return s2(t,e,null,n)};$t.createRoot=function(t,e){if(!Jh(t))throw Error(X(299));var n=!1,r="",i=c1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zh(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,Ao(t.nodeType===8?t.parentNode:t),new Yh(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=O0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return li(t)};$t.hydrate=function(t,e,n){if(!Va(e))throw Error(X(200));return Ka(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=c1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=u1(e,null,t,1,n??null,i,!1,s,o),t[nr]=e.current,Ao(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ga(e)};$t.render=function(t,e,n){if(!Va(e))throw Error(X(200));return Ka(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Va(t))throw Error(X(40));return t._reactRootContainer?(li(function(){Ka(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};$t.unstable_batchedUpdates=Vh;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Va(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Ka(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function f1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f1)}catch(t){console.error(t)}}f1(),f0.exports=$t;var c2=f0.exports,Mp=c2;Pc.createRoot=Mp.createRoot,Pc.hydrateRoot=Mp.hydrateRoot;function f2(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ed={exports:{}};ed.exports;(function(t){(function(){function e(r,i){return i?f2(r):r.slice?e[s(r)]:function(o,l){r(o={exports:{}}),e[s(l)]=o.exports};function s(o){return o.split("/").slice(-1).toString().replace(".js","")}}var n=t;e(function(r){String.random=function(s,o){var l="";for(s=s||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";s-- >0;)l+=o.charAt(Math.floor(Math.random()*o.length));return l},String.match=function(s,o){var l,a;return typeof s!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},l=o["="]||o["*"]||o[">"]||o["<"],s===l?!0:a!==o["="]?!1:(l=o["*"]||o[">"],s.slice(0,(l||"").length)===l?!0:a!==o["*"]?!1:a!==o[">"]&&a!==o["<"]?s>=o[">"]&&s<=o["<"]:a!==o[">"]&&s>=o[">"]||a!==o["<"]&&s<=o["<"]))},String.hash=function(s,o){if(typeof s=="string"){if(o=o||0,!s.length)return o;for(var l=0,a=s.length,u;l<a;++l)u=s.charCodeAt(l),o=(o<<5)-o+u,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(s){return s?s instanceof Object&&s.constructor===Object||Object.prototype.toString.call(s).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(s,o){for(var l in s)if(i.call(s,l)&&(!o||o.indexOf(l)==-1))return!1;return!0},Object.keys=Object.keys||function(s){var o=[];for(var l in s)i.call(s,l)&&o.push(l);return o},function(){var s,o=setTimeout,l=0,a=0,u=typeof setImmediate!=""+s&&setImmediate||function(h,p){return typeof MessageChannel==""+s?o:((h=new MessageChannel).port1.onmessage=function(w){w.data==""&&p()},function(w){p=w,h.port2.postMessage("")})}(),f=o.check=o.check||typeof performance!=""+s&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(h){if(o.hold>=f.now()-l&&a++<3333){h();return}u(function(){l=f.now(),h()},a=0)}}(),function(){var s=setTimeout,o=s.turn=s.turn||function(p){l.push(p)==1&&a(h)},l=o.s=[],a=s.poll,u=0,f,h=function(){(f=l[u++])&&f(),(u==l.length||u==99)&&(l=o.s=l.slice(u),u=0),l.length&&a(h)}}(),function(){var s,o=setTimeout,l=o.turn;(o.each=o.each||function(a,u,f,h){h=h||9,function p(w,m,E){if(m=(w=(a||[]).splice(0,h)).length){for(var S=0;S<m&&s===(E=u(w[S]));S++);if(s===E){l(p);return}}f&&f(E)}()})()}()})(e,"./shim"),e(function(r){r.exports=function i(f,o,l){if(!f)return{to:i};var a,u=typeof o=="function",f=(this.tag||(this.tag={}))[f]||u&&(this.tag[f]={tag:f,to:i._={next:function(p){var w;(w=this.to)&&w.next(p)}}});if(u){var h={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:f,on:this,as:l};return(h.back=f.last||f).to=h,f.last=h}return(f=f.to)&&a!==o&&f.next(o),f}})(e,"./onto"),e(function(r){r.exports=function(i){return i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"&&i!=1/0&&i!=-1/0&&i===i||!!i&&typeof i["#"]=="string"&&Object.keys(i).length===1&&i["#"]}})(e,"./valid"),e(function(r){e("./shim");function i(){var f=+new Date;return a<f?(o=0,a=f+i.drift):a=f+(o+=1)/l+i.drift}i.drift=0;var s=-1/0,o=0,l=999,a=s,u;i.is=function(f,h,p){var w=h&&f&&f._&&f._[">"]||p;if(w)return typeof(w=w[h])=="number"?w:s},i.ify=function(f,h,p,w,m){(f=f||{})._=f._||{},m&&(f._["#"]=m);var E=f._[">"]||(f._[">"]={});return u!==h&&h!=="_"&&(typeof p=="number"&&(E[h]=p),u!==w&&(f[h]=w)),f},r.exports=i})(e,"./state"),e(function(r){e("./shim");function i(s){var o={s:{}},l=o.s;s=s||{max:999,age:1e3*9},o.check=function(u){return l[u]?a(u):!1};var a=o.track=function(u){var f=l[u]||(l[u]={});return f.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,s.age+9)),a.ed&&a.ed(u),f};return o.drop=function(u){o.to=null,o.now=+new Date;var f=Object.keys(l);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(f,function(h){var p=l[h];p&&(u||s.age)>o.now-p.was||delete l[h]},0,99)},o}r.exports=i})(e,"./dup"),e(function(r){e("./onto"),r.exports=function(o,l){if(this.on){var a=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var f=o["#"]||o,u=(this.tag||"")[f];return u?(l&&(u=this.on(f,l),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},a)),!0):void 0}var f=l&&l["#"]||i(9);if(!o)return f;var h=this.on(f,o,l);return h.err=h.err||setTimeout(function(){h.off(),h.next({err:"Error: No ACK yet.",lack:!0})},a),f}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(r){function i(m){return m instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:m}):new i(m)}i.is=function(m){return m instanceof i||m&&m._&&m===m._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},e("./shim"),i.valid=e("./valid"),i.state=e("./state"),i.on=e("./onto"),i.dup=e("./dup"),i.ask=e("./ask"),function(){i.create=function(k){k.root=k.root||k,k.graph=k.graph||{},k.on=k.on||i.on,k.ask=k.ask||i.ask,k.dup=k.dup||i.dup();var P=k.$.opt(k.opt);return k.once||(k.on("in",m,k),k.on("out",m,k),k.on("put",x,k),i.on("create",k),k.on("create",k)),k.once=1,P};function m(k){if(k){if(k.out===m){this.to.next(k);return}var P=this,U=P.as,V=U.at||U,z=V.$,B=V.dup,F,$=k.DBG;if((F=k["#"])||(F=k["#"]=o(9)),!B.check(F)){if(B.track(F),F=k._,k._=typeof F=="function"?F:function(){},k.$&&k.$===(k.$._||"").$||(k.$=z),k["@"]&&!k.put&&c(k),!V.ask(k["@"],k))if($&&($.u=+new Date),k.put){E(k);return}else k.get&&i.on.get(k,z);$&&($.uc=+new Date),P.to.next(k),$&&($.ua=+new Date),!(k.nts||k.NTS)&&(k.out=m,V.on("out",k),$&&($.ue=+new Date))}}}function E(k){if(k){var P=k._||"",U=P.root=((P.$=k.$||"")._||"").root;if(k["@"]&&P.faith&&!P.miss){k.out=m,U.on("out",k);return}P.latch=U.hatch,P.match=U.hatch=[];var V=k.put,z=P.DBG=k.DBG,B=+new Date;if(G=G||B,!(V["#"]&&V["."])){z&&(z.p=B),P["#"]=k["#"],P.msg=k,P.all=0,P.stun=1;var F=Object.keys(V);console.STAT&&console.STAT(B,((z||P).pk=+new Date)-B,"put sort");var $=0,Q,J,le,ue,se,he,Ue;(function Se(dt){if(Q!=$){if(Q=$,!(le=F[$])){console.STAT&&console.STAT(B,((z||P).pd=+new Date)-B,"put"),v(P);return}(ue=V[le])?(Ue=ue._)?le!==Ue["#"]?he=A+_(le)+"soul not same.":(se=Ue[">"])||(he=A+_(le)+"no state."):he=A+_(le)+"no meta.":he=A+_(le)+"no node.",J=Object.keys(ue||{})}if(he){k.err=P.err=he,v(P);return}var zt=0,Ge;for(dt=dt||0;dt++<9&&(Ge=J[zt++]);)if(Ge!=="_"){var pt=ue[Ge],et=se[Ge];if(h===et){he=A+_(Ge)+"on"+_(le)+"no state.";break}if(!a(pt)){he=A+_(Ge)+"on"+_(le)+"bad "+typeof pt+_(pt);break}S(pt,Ge,le,et,k),++M}if((J=J.slice(zt)).length){l(Se);return}++$,J=null,Se(dt)})()}}}i.on.put=E;function S(k,P,U,V,z){var B=z._||"",F=B.root,$=F.graph,Q,J=$[U]||p,le=u(J,P,1),ue=J[P],se=B.DBG;(Q=console.STAT)&&(!$[U]||!ue)&&(Q.has=(Q.has||0)+1);var he=D();if(V>he){setTimeout(function(){S(k,P,U,V,z)},(Q=V-he)>O?O:Q),console.STAT&&console.STAT((se||B).Hf=+new Date,Q,"future");return}if(!(V<le)&&!(!B.faith&&V===le&&(k===ue||C(k)<=C(ue))&&!B.miss)){B.stun++;var Ue=z["#"]+B.all++,Se={toString:function(){return Ue},_:B};Se.toJSON=Se.toString,F.dup.track(Se)["#"]=z["#"],se&&(se.ph=se.ph||+new Date),F.on("put",{"#":Se,"@":z["@"],put:{"#":U,".":P,":":k,">":V},ok:z.ok,_:B})}}function x(k){var P;(P=(k._||"").DBG)&&(P.pa=+new Date,P.pm=P.pm||+new Date);var U=this,V=U.as,z=V.graph,B=k._,F=k.put,$=F["#"],Q=F["."],J=F[":"],le=F[">"];k["#"];var ue;(ue=B.msg)&&(ue=ue.put)&&(ue=ue[$])&&f(ue,Q,le,J,$),z[$]=f(z[$],Q,le,J,$),(ue=(V.next||"")[$])&&ue.on("in",k),v(B),U.to.next(k)}function v(k,P){var U;if(!k.stop&&!(!k.err&&0<--k.stun)&&(k.stop=1,!!(U=k.root))){var V=k.match;V.end=1,V===U.hatch&&(!(V=k.latch)||V.end?delete U.hatch:U.hatch=V),k.hatch&&k.hatch(),setTimeout.each(k.match,function(z){z&&z()}),!(!(P=k.msg)||k.err||P.err)&&(P.out=m,k.root.on("out",P),I())}}function c(k){var P=k["@"]||"",U;if(!(U=P._)){var V=(V=k.$)&&(V=V._)&&(V=V.root)&&(V=V.dup);if(!(V=V.check(P)))return;k["@"]=V["#"]||k["@"];return}U.acks=(U.acks||0)+1,(U.err=k.err)&&(k["@"]=U["#"],v(U)),U.ok=k.ok||U.ok,!U.stop&&!U.crack&&(U.crack=U.match&&U.match.push(function(){b(U)})),b(U)}function b(k){!k||!k.root||k.stun||k.acks!==k.all||k.root.on("in",{"@":k["#"],err:k.err,ok:k.err?h:k.ok||{"":1}})}var A="Error: Invalid graph!",_=function(k){return" '"+(""+k).slice(0,9)+"...' "},C=JSON.stringify,O=2147483647,D=i.state,M=0,G,I=function(){M>999&&M/-(G-(G=+new Date))>1&&(i.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),I=function(){M=0})}}(),function(){i.on.get=function(E,S){var x=S._,v=E.get,c=v["#"],b=x.graph[c],A=v["."],_=x.next||(x.next={}),C=_[c],O=E._||{},D=O.DBG=E.DBG;if(D&&(D.g=+new Date),!b)return x.on("get",E);if(A){if((typeof A!="string"||h===b[A])&&!((C||"").next||"")[A]){x.on("get",E);return}b=f({},A,u(b,A),b[A],c)}b&&m(E,b),x.on("get",E)};function m(E,S){var x=+new Date,v=E._||{},c=v.DBG=E.DBG,b=E["#"],A=o(9),_=Object.keys(S||"").sort(),C=((S||"")._||"")["#"];_.length;var O=E.$._.root,D=S===O.graph[C];console.STAT&&console.STAT(x,((c||v).gk=+new Date)-x,"got keys"),S&&function M(){x=+new Date;for(var G=0,I,k={},P;G<9&&(I=_[G++]);)f(k,I,u(S,I),S[I],C);_=_.slice(G),(P={})[C]=k,k=P;var U;D&&(U=function(){},U.ram=U.faith=!0),P=_.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),c&&(c.ga=+new Date),O.on("in",{"@":b,"#":A,put:k,"%":P?A=o(9):h,$:O.$,_:U,DBG:c,FOO:1}),console.STAT&&console.STAT(x,+new Date-x,"got in"),P&&setTimeout.turn(M)}(),S||O.on("in",{"@":E["#"]})}i.on.get.ack=m}(),function(){i.chain.opt=function(m){m=m||{};var E=this,S=E._,x=m.peers||m;return Object.plain(m)||(m={}),Object.plain(S.opt)||(S.opt=m),typeof x=="string"&&(x=[x]),Object.plain(S.opt.peers)||(S.opt.peers={}),x instanceof Array&&(m.peers={},x.forEach(function(v){var c={};c.id=c.url=v,m.peers[v]=S.opt.peers[v]=S.opt.peers[v]||c})),s(m,function v(c){var b=this[c];if(this&&this.hasOwnProperty(c)||typeof b=="string"||Object.empty(b)){this[c]=b;return}b&&b.constructor!==Object&&!(b instanceof Array)||s(b,v)}),S.opt.from=m,i.on("opt",S),S.opt.uuid=S.opt.uuid||function(c){return i.state().toString(36).replace(".","")+String.random(c||12)},E}}();var s=function(m,E){Object.keys(m).forEach(E,m)},o=String.random,l=setTimeout.turn,a=i.valid,u=i.state.is,f=i.state.ify,h,p={},w;i.log=function(){return!i.log.off&&w.log.apply(w,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(m,E,S){return(S=i.log.once)[m]=S[m]||0,S[m]++||i.log(E)},typeof window<"u"&&((window.GUN=window.Gun=i).window=window);try{typeof n<"u"&&(n.exports=i)}catch{}r.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(w=console).only=function(m,E){return w.only.i&&m===w.only.i&&w.only.i++&&(w.log.apply(w,arguments)||E)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(r){var i=e("./root");i.chain.back=function(l,a){var u;if(l=l||1,l===-1||l===1/0)return this._.root.$;if(l===1)return(this._.back||this._).$;var f=this,h=f._;if(typeof l=="string"&&(l=l.split(".")),l instanceof Array){var p=0,w=l.length,u=h;for(p;p<w;p++)u=(u||s)[l[p]];return o!==u?a?f:u:(u=h.back)?u.$.back(l,a):void 0}if(typeof l=="function"){for(var m,u={back:h};(u=u.back)&&o===(m=l(u,a)););return m}return typeof l=="number"?(h.back||h).$.back(l-1):this};var s={},o})(e,"./back"),e(function(r){var i=e("./root");i.chain.chain=function(v){var c=this,b=c._,A=new(v||c).constructor(c),_=A._,C;return _.root=C=b.root,_.id=++C.once,_.back=c._,_.on=i.on,_.on("in",i.on.in,_),_.on("out",i.on.out,_),A};function s(v){var c,b=this.as,A=b.back,_=b.root,C;if(v.$||(v.$=b.$),this.to.next(v),b.err){b.on("in",{put:b.put=h,$:b.$});return}if(c=v.get){if(_.pass&&(_.pass[b.id]=b),b.lex&&Object.keys(b.lex).forEach(function(O){C[O]=b.lex[O]},C=v.get=v.get||{}),c["#"]||b.soul){if(c["#"]=c["#"]||b.soul,v["#"]||(v["#"]=p(9)),A=_.$.get(c["#"])._,c=c["."]){if(m(A.put,c)&&(C=A.ask&&A.ask[c],(A.ask||(A.ask={}))[c]=A.$.get(c)._,A.on("in",{get:c,put:{"#":A.soul,".":c,":":A.put[c],">":S(_.graph[A.soul],c)}}),C))return}else{if(C=A.ask&&A.ask[""],(A.ask||(A.ask={}))[""]=A,h!==A.put&&(A.on("in",A),C))return;v.$=A.$}return _.ask(u,v),_.on("in",v)}if(c["."])return b.get?(v={get:{".":b.get},$:b.$},(A.ask||(A.ask={}))[b.get]=v.$._,A.on("out",v)):(v={get:b.lex?v.get:{},$:b.$},A.on("out",v));if((b.ask||(b.ask={}))[""]=b,b.get)return c["."]=b.get,(A.ask||(A.ask={}))[b.get]=v.$._,A.on("out",v)}return A.on("out",v)}i.on.out=s;function o(v,c){c=c||this.as;var b=c.root,A=v.$||(v.$=c.$),_=(A||"")._||f,C=v.put||"",O=C["#"],D=C["."],M=h!==C["="]?C["="]:C[":"],G=C[">"]||-1/0,I;if(h!==v.put&&(h===C["#"]||h===C["."]||h===C[":"]&&h===C["="]||h===C[">"])){if(!w(C)){if(!(O=((C||"")._||"")["#"])){console.log("chain not yet supported for",C,"...",v,c);return}return A=c.root.$.get(O),setTimeout.each(Object.keys(C).sort(),function(k){k=="_"||h===(G=S(C,k))||c.on("in",{$:A,put:{"#":O,".":k,"=":C[k],">":G},VIA:v})})}c.on("in",{$:_.back.$,put:{"#":O=_.back.soul,".":D=_.has||_.get,"=":C,">":S(_.back.put,D)},via:v});return}(v.seen||"")[c.id]||((v.seen||(v.seen=function(){}))[c.id]=c,c!==_&&(Object.keys(v).forEach(function(k){C[k]=v[k]},C={}),C.get=c.get||C.get,!c.soul&&!c.has?C.$$$=C.$$$||c.$:_.soul&&(C.$=c.$,C.$$=C.$$||_.$),v=C),a(v,c),(c.soul||v.$$)&&G>=S(b.graph[O],D)&&((C=b.$.get(O)._).put=x(C.put,D,G,M,O)),!_.soul&&G>=S(b.graph[O],D)&&(I=(b.$.get(O)._.next||"")[D])&&(I.put=M,typeof(C=w(M))=="string"&&(I.put=b.$.get(C)._.put||M)),this.to&&this.to.next(v),c.any&&setTimeout.each(Object.keys(c.any),function(k){(k=c.any[k])&&k(v)},0,99),c.echo&&setTimeout.each(Object.keys(c.echo),function(k){(k=c.echo[k])&&k.on("in",v)},0,99),((v.$$||"")._||_).soul&&(I=c.next)&&(I=I[D])&&(C={},Object.keys(v).forEach(function(k){C[k]=v[k]}),C.$=(v.$$||v.$).get(C.get=D),delete C.$$,delete C.$$$,I.on("in",C)),l(v,c))}i.on.in=o;function l(v,c){if(c=c||this.as||v.$._,!(v.$$&&this!==i.on)&&!(!v.put||c.soul)){var b=v.put||"",A=b["="]||b[":"],D,_=c.root,C=_.$.get(b["#"]).get(b["."])._;if(typeof(A=w(A))!="string"){this===i.on&&((C.echo||(C.echo={}))[c.id]=c);return}if(!((C.echo||(C.echo={}))[c.id]&&!(_.pass||"")[c.id])){if(D=_.pass){if(D[A+c.id])return;D[A+c.id]=1}(C.echo||(C.echo={}))[c.id]=c,c.has&&(c.link=A);var O=_.$.get(C.link=A)._;(O.echo||(O.echo={}))[C.id]=C;var D=c.ask||"";(D[""]||c.lex)&&O.on("out",{get:{"#":A}}),setTimeout.each(Object.keys(D),function(M,G){!M||!(G=D[M])||G.on("out",{get:{"#":A,".":M}})},0,99)}}}i.on.link=l;function a(v,c){var b=v.put||"",A=h!==b["="]?b["="]:b[":"],_=c.root,C,O;if(h===A){if(c.soul&&h!==c.put||(O=(v.$$||v.$||"")._||"",v["@"]&&(h!==O.put||h!==c.put)))return;(C=c.link||v.linked)&&delete(_.$.get(C)._.echo||"")[c.id],c.has&&(c.link=null),c.put=h,setTimeout.each(Object.keys(c.next||""),function(D,M){(M=c.next[D])&&(C&&delete(_.$.get(C).get(D)._.echo||"")[M.id],M.on("in",{get:D,put:h,$:M.$}))},0,99);return}c.soul||v.$$||(C=w(A),O=v.$._||"",!((C===O.link||c.has&&!O.link)&&!((_.pass||"")[c.id]&&typeof C!="string"))&&(delete(O.echo||"")[c.id],a({get:c.get,put:h,$:v.$,linked:v.linked=v.linked||O.link},c)))}i.on.unlink=a;function u(v,c){var b=this.as,A=b.$._;A.root;var _=b.get||"",C=(v.put||"")[_["#"]]||"";if(!v.put||typeof _["."]=="string"&&h===C[_["."]]){if(h!==A.put||!A.soul&&!A.has)return;A.ack=(A.ack||0)+1,A.on("in",{get:A.get,put:A.put=h,$:A.$,"@":v["@"]});return}(v._||{}).miss=1,i.on.put(v)}var f={},h,p=String.random,w=i.valid,m=function(v,c){return v&&Object.prototype.hasOwnProperty.call(v,c)},E=i.state,S=E.is,x=E.ify})(e,"./chain"),e(function(r){var i=e("./root");i.chain.get=function(h,p,w){var m,E;if(typeof h=="string"){if(h.length==0)return(m=this.chain())._.err={err:i.log("0 length key!",h)},p&&p.call(m,m._.err),m;var S=this,x=S._,v=x.next||a;(m=v[h])||(m=h&&s(h,S)),m=m&&m.$}else if(typeof h=="function"){let O=function(D,M,G){if(!O.stun&&!((z=b.pass)&&!z[A])){var I=D.$._,k=(D.$$||"")._,P=(k||I).put,U=!I.has&&!I.soul,V={},z;if((U||f===P)&&(P=f===((z=D.put)||"")["="]?f===(z||"")[":"]?z:z[":"]:z["="]),typeof(z=i.valid(P))=="string"&&(P=f===(z=b.$.get(z)._.put)?c.not?f:P:z),!(c.not&&f===P)){if(f===c.stun){if((z=b.stun)&&z.on&&(x.$.back(function(B){if(z.on(""+B.id,V={}),(V.run||0)<O.id)return V}),!V.run&&z.on(""+I.id,V={}),!V.run&&k&&z.on(""+k.id,V={}),O.id>V.run&&((!V.stun||V.stun.end)&&(V.stun=z.on("stun"),V.stun=V.stun&&V.stun.last),V.stun&&!V.stun.end))){(V.stun.add||(V.stun.add={}))[A]=function(){O(D,M,1)};return}if(f===P&&(G=0),(z=b.hatch)&&!z.end&&f===c.hatch&&!G){if(_[I.$._.id])return;_[I.$._.id]=1,z.push(function(){O(D,M,1)});return}_={}}if(b.pass){if(b.pass[A+I.id])return;b.pass[A+I.id]=1}if(c.on){c.ok.call(I.$,P,I.get,D,M||O);return}if(c.v2020){c.ok(D,M||O);return}Object.keys(D).forEach(function(B){z[B]=D[B]},z={}),D=z,D.put=P,c.ok.call(c.as,D,M||O)}}};if(p===!0)return o(this,h,p,w),this;m=this;var x=m._,c=p||{},b=x.root,A;c.at=x,c.ok=h;var _={};return O.at=x,(x.any||(x.any={}))[A=String.random(7)]=O,O.off=function(){O.stun=1,x.any&&delete x.any[A]},O.rid=l,O.id=c.run||++b.once,E=b.pass,(b.pass={})[A]=1,c.out=c.out||{get:{}},x.on("out",c.out),b.pass=E,m}else{if(typeof h=="number")return this.get(""+h,p,w);if(typeof(E=u(h))=="string")return this.get(E,p,w);(E=this.get.next)&&(m=E(this,h))}return m?(p&&typeof p=="function"&&m.get(p,w),m):((m=this.chain())._.err={err:i.log("Invalid get request!",h)},p&&p.call(m,m._.err),m)};function s(h,p){var w=p._,m=w.next,E=p.chain(),S=E._;return m||(m=w.next={}),m[S.get=h]=S,p===w.root.$?S.soul=h:(w.soul||w.has)&&(S.has=h),S}function o(h,p,w,m){var E=h._,S=0,x;return(x=E.soul||E.link)?p(x,m,E):E.jam?E.jam.push([p,m]):(E.jam=[[p,m]],h.get(function(c,b){if(!(f===c.put&&!E.root.opt.super&&(x=Object.keys(E.root.opt.peers).length)&&++S<=x)){b.rid(c);var A=(A=c.$)&&A._||{},_=0,C;for(x=E.jam,delete E.jam;C=x[_++];){var O=C[0];C=C[1],O&&O(A.link||A.soul||i.valid(c.put)||((c.put||{})._||{})["#"],C,c,b)}}},{out:{get:{".":!0}}}),h)}function l(h){var p=this.at||this.on;if(!h||p.soul||p.has)return this.off();if(h=(h=(h=h.$||h)._||h).id){p.map;var w;if((w=this.seen||(this.seen={}))[h])return!0;w[h]=!0}}var a={},u=i.valid,f})(e,"./get"),e(function(r){var i=e("./root");i.chain.put=function(m,E,S){var x=this,v=x._,c=v.root;S=S||{},S.root=v.root,S.run||(S.run=c.once),s(S,v.id),S.ack=S.ack||E,S.via=S.via||x,S.data=S.data||m,S.soul||(S.soul=v.soul||typeof E=="string"&&E);var b=S.state=S.state||i.state();return typeof m=="function"?(m(function(A){S.data=A,x.put(u,u,S)}),x):S.soul?(S.$=c.$.get(S.soul),S.todo=[{it:S.data,ref:S.$}],S.turn=S.turn||h,S.ran=S.ran||o,function A(){var _=S.todo,C=_.pop(),O=C.it;C.ref&&C.ref._.id;var D,M,G,I,k;if(s(S,C.ref),(I=C.todo)&&(M=I.pop(),O=O[M],I.length&&_.push(C)),M&&(_.path||(_.path=[])).push(M),!(D=p(O))&&!(k=i.is(O))){if(!Object.plain(O)){o.err(S,"Invalid data: "+a(O)+" at "+(S.via.back(function(z){z.get&&I.push(z.get)},I=[])||I.join("."))+"."+(_.path||[]).join("."));return}for(var P=S.seen||(S.seen=[]),U=P.length;U--;)if(O===(I=P[U]).it){D=O=I.link;break}}if(M&&D)C.node=w(C.node,M,b,O);else{let z=function(B,F){var $=G.link["#"];F&&(F.off(),F.rid(B));var Q=$||B.soul||(I=(B.$$||B.$)._||"").soul||I.link||((I=I.put||"")._||"")["#"]||I["#"]||((I=B.put||"")&&B.$$?I["#"]:(I["="]||I[":"]||"")["#"]);if(!$&&s(S,B.$),!Q&&!C.link["#"]){(C.wait||(C.wait=[])).push(function(){z(B,F)});return}Q||(Q=[],(B.$$||B.$).back(function(J){if(I=J.soul||J.link)return Q.push(I);Q.push(J.get)}),Q=Q.reverse().join("/")),G.link["#"]=Q,!k&&(((S.graph||(S.graph={}))[Q]=G.node||(G.node={_:{}}))._["#"]=Q),delete S.wait[V],G.wait&&setTimeout.each(G.wait,function(J){J&&J()}),S.ran(S)};if(!S.seen){o.err(S,"Data at root of graph must be a node (an object).");return}S.seen.push(G={it:O,link:{},todo:k?[]:Object.keys(O).sort().reverse(),path:(_.path||[]).slice(),up:C}),C.node=w(C.node,M,b,G.link),!k&&G.todo.length&&_.push(G);var V=S.seen.length;(S.wait||(S.wait={}))[V]="",I=(G.ref=k?O:M?C.ref.get(M):C.ref)._,(I=O&&(O._||"")["#"]||I.soul||I.link)?z({soul:I}):G.ref.get(z,{run:S.run,v2020:1,out:{get:{".":" "}}})}if(!_.length)return S.ran(S);S.turn(A)}(),x):(l(S),x)};function s(m,E){if(E){E=(E._||"").id||E;var S=m.root.stun||(m.root.stun={on:i.on}),x={},v;m.stun||(m.stun=S.on("stun",function(){})),(v=S.on(""+E))&&v.the.last.next(x),!(x.run>=m.run)&&S.on(""+E,function(c){if(m.stun.end){this.off(),this.to.next(c);return}c.run=c.run||m.run,c.stun=c.stun||m.stun})}}function o(m){if(m.err){o.end(m.stun,m.root);return}if(!(m.todo.length||m.end||!Object.empty(m.wait))){m.end=1;var E=m.$.back(-1)._,S=E.root,x=E.ask(function(A){S.on("ack",A),A.err&&!A.lack&&i.log(A),++v>(m.acks||0)&&this.off(),m.ack&&m.ack(A,this)},m.opt),v=0,c=m.stun,b;(b=function(){c&&(o.end(c,S),setTimeout.each(Object.keys(c=c.add||""),function(A){(A=c[A])&&A()}))}).hatch=b,m.ack&&!m.ok&&(m.ok=m.acks||9),m.via._.on("out",{put:m.out=m.graph,ok:m.ok&&{"@":m.ok+1},opt:m.opt,"#":x,_:b})}}o.end=function(m,E){m.end=f,m.the.to===m&&m===m.the.last&&delete E.stun,m.off()},o.err=function(m,E){(m.ack||f).call(m,m.out={err:m.err=i.log(E)}),m.ran(m)};function l(m){var E=m.via._,S;m.via=m.via.back(function(x){if(x.soul||!x.get)return x.$;S=m.data,(m.data={})[x.get]=S}),(!m.via||!m.via._.soul)&&(m.via=E.root.$.get(((m.data||"")._||"")["#"]||E.$.back("opt.uuid")())),m.via.put(m.data,m.ack,m)}function a(m,E){return m&&(E=m.constructor)&&E.name||typeof m}var u,f=function(){},h=setTimeout.turn,p=i.valid,w=i.state.ify})(e,"./put"),e(function(r){var i=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),r.exports=i})(e,"./index"),e(function(r){var i=e("./index");i.chain.on=function(l,a,u,f){var h=this,p=h._;p.root;var w;if(typeof l=="string")return a?(w=p.on(l,a,u||p,f),u&&u.$&&(u.subs||(u.subs=[])).push(w),h):p.on(l);var m=a;return(m=m===!0?{change:!0}:m||{}).not=1,m.on=1,h.get(l,m),h},i.chain.once=function(l,a){if(a=a||{},!l)return s(this);var u=this,f=u._,h=f.root;f.put;var p=String.random(7),w;return u.get(function(m,E,S,x){var v=this,c=v._,b=c.one||(c.one={});if(x.stun||b[p]==="")return;if((w=i.valid(m))===!0){A();return}if(typeof w=="string")return;clearTimeout((f.one||"")[p]),clearTimeout(b[p]),b[p]=setTimeout(A,a.wait||99);function A(_){if(!c.has&&!c.soul&&(c={put:m,get:E}),o===(w=c.put)&&(w=((S.$$||"")._||"").put),typeof i.valid(w)=="string"&&(w=h.$.get(w)._.put,w===o&&!_)){b[p]=setTimeout(function(){A(1)},a.wait||99);return}x.stun||b[p]!==""&&(b[p]="",(f.soul||f.has)&&x.off(),l.call(v,w,c.get),clearTimeout(b[p]))}},{on:1}),u};function s(l,a,u){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(u=l.chain())._.nix=l.once(function(f,h){u._.on("in",this._)}),u._.lex=l._.lex,u}i.chain.off=function(){var l=this,a=l._,u,f=a.back;if(f)return a.ack=0,(u=f.next)&&u[a.get]&&delete u[a.get],(u=f.any)&&(delete f.any,f.any={}),(u=f.ask)&&delete u[a.get],(u=f.put)&&delete u[a.get],(u=a.soul)&&delete f.root.graph[u],(u=a.map)&&Object.keys(u).forEach(function(h,p){p=u[h],p.link&&f.root.$.get(p.link).off()}),(u=a.next)&&Object.keys(u).forEach(function(h,p){p=u[h],p.$.off()}),a.on("off",{}),l};var o})(e,"./on"),e(function(r){var i=e("./index"),s=i.chain.get.next;i.chain.get.next=function(u,f){var h;return Object.plain(f)?(h=((h=f["#"])||"")["="]||h)?u.get(h):((h=u.chain()._).lex=f,u.on("in",function(p){String.match(p.get||(p.put||"")["."],f["."]||f["#"]||f)&&h.on("in",p),this.to.next(p)}),h.$):(s||l)(u,f)},i.chain.map=function(u,f,h){var p=this,w=p._,m,E;return Object.plain(u)&&(m=u["."]?u:{".":u},u=a),u?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),E=p.chain(),p.map().on(function(S,x,v,c){var b=(u||l).call(this,S,x,v,c);if(a!==b){if(S===b)return E._.on("in",v);if(i.is(b))return E._.on("in",b._);var A={};Object.keys(v.put).forEach(function(_){A[_]=v.put[_]},A),A["="]=b,E._.on("in",{get:x,put:A})}}),E):((E=w.each)||((w.each=E=p.chain())._.lex=m||E._.lex||w.lex,E._.nix=p.back("nix"),p.on("in",o,E._)),E)};function o(u){this.to.next(u);var f=this.as,h=u.$,p=h._,w=u.put,m;!p.soul&&!u.$$||(m=f.lex)&&!String.match(u.get||(w||"")["."],m["."]||m["#"]||m)||i.on.link(u,f)}var l=function(){},a})(e,"./map"),e(function(r){var i=e("./index");i.chain.set=function(s,o,l){var a=this,u=a.back(-1),f,h;return o=o||function(){},l=l||{},l.item=l.item||s,(f=((s||"")._||"")["#"])&&((s={})["#"]=f),typeof(h=i.valid(s))=="string"?a.get(f=h).put(s,o,l):i.is(s)?(a.put(function(p){s.get(function(w,m,E){if(!w)return o.call(a,{err:i.log('Only a node can be linked! Not "'+E.put+'"!')});(h={})[w]={"#":w},p(h)},!0)}),s):(Object.plain(s)&&(s=u.get(f=a.back("opt.uuid")()).put(s)),a.get(f||u.back("opt.uuid")(7)).put(s,o,l))}})(e,"./set"),e(function(r){e("./shim");var i=function(){},s=JSON.parseAsync||function(u,f,h){var p,w=+new Date;try{f(p,JSON.parse(u,h),o.sucks(+new Date-w))}catch(m){f(m)}},o=JSON.stringifyAsync||function(u,f,h,p){var w,m=+new Date;try{f(w,JSON.stringify(u,h,p),o.sucks(+new Date-m))}catch(E){f(E)}};o.sucks=function(u){u>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=i)};function l(u){var f=function(){},h=u.opt||{};h.log=h.log||console.log,h.gap=h.gap||h.wait||0,h.max=h.max||(h.memory?h.memory*999*999:3e8)*.3,h.pack=h.pack||h.max*.01*.01,h.puff=h.puff||9;var p=setTimeout.turn||setTimeout,w=u.dup,m=w.check,E=w.track,S=f.hear=function(c,b){if(c){if(h.max<=c.length)return f.say({dam:"!",err:"Message too big!"},b);f===this&&(S.d+=c.length||0,++S.c);var A=b.SH=+new Date,_=c[0],C;if(_==="["){s(c,function(O,D){if(O||!D)return f.say({dam:"!",err:"DAM JSON parse error."},b);console.STAT&&console.STAT(+new Date,D.length,"# on hear batch");var M=h.puff;(function G(){for(var I=+new Date,k=0,P;k<M&&(P=D[k++]);)f.hear(P,b);D=D.slice(k),console.STAT&&console.STAT(I,+new Date-I,"hear loop"),x(b),D.length&&p(G,0)})()}),c="";return}if(_==="{"||(c["#"]||Object.plain(c))&&(C=c)){if(C)return S.one(C,b,A);s(c,function(O,D){if(O||!D)return f.say({dam:"!",err:"DAM JSON parse error."},b);S.one(D,b,A)});return}}};S.one=function(c,b,G){var _,C,O,D,M;if(c.DBG&&(c.DBG=M={DBG:c.DBG}),M&&(M.h=G),M&&(M.hp=+new Date),(_=c["#"])||(_=c["#"]=String.random(9)),!(O=m(_))&&(C=c["##"],!(C&&(O=c["@"]||c.get&&_)&&w.check(D=O+C)))){if((c._=function(){}).via=f.leap=b,(O=c["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(I){this[I]=1},c._.yo={}),O=c.dam){(O=f.hear[O])&&O(c,b,u),E(_);return}(O=c.ok)&&(c._.near=O["/"]);var G=+new Date;M&&(M.is=G),b.SI=_,E.ed=function(I){_===I&&(E.ed=0,(I=w.s[_])&&(I.via=b,c.get&&(I.it=c)))},u.on("in",f.last=c),M&&(M.hd=+new Date),console.STAT&&console.STAT(G,+new Date-G,c.get?"msg get":c.put?"msg put":"msg"),E(_),D&&E(D),f.leap=f.last=null}},S.c=S.d=0,function(){var c=0,b;f.hash=function(C,O){var D,M,G,I=+new Date;o(C.put,function k(P,U){var V=(M||(M=G=U||"")).slice(0,32768);if(D=String.hash(V,D),M=M.slice(32768),M){p(k,0);return}console.STAT&&console.STAT(I,+new Date-I,"say json+hash"),C._.$put=G,C["##"]=D,f.say(C,O),delete C._.$put},A)};function A(C,O){var D;return O instanceof Object?(Object.keys(O).sort().forEach(_,{to:D={},on:O}),D):O}function _(C){this.to[C]=this.on[C]}f.say=function(C,O){var D;if((D=this)&&(D=D.to)&&D.next&&D.next(C),!C)return!1;var M,G,I,k=C["@"],P=C._||(C._=function(){}),U=C.DBG,V=+new Date;if(P.y=P.y||V,O||U&&(U.y=V),(M=C["#"])||(M=C["#"]=String.random(9)),!b&&E(M),!(G=C["##"])&&a!==C.put&&!P.via&&k){f.hash(C,O);return}if(!O&&k&&(O=(D=w.s[k])&&(D.via||(D=D.it)&&(D=D._)&&D.via)||(D=f.last)&&k===D["#"]&&f.leap),!O&&k)return w.s[k]?void 0:(console.STAT&&console.STAT(+new Date,++c,"total no peer to ack to"),!1);if(k&&!C.put&&!G&&((w.s[k]||"").it||"")["##"])return!1;if(!O&&f.way)return f.way(C);if(U&&(U.yh=+new Date),!(I=P.raw)){f.raw(C,O);return}if(U&&(U.yr=+new Date),!O||!O.id){if(!Object.plain(O||h.peers))return!1;var V=+new Date;h.puff;var z=h.peers,B=Object.keys(O||h.peers||{});console.STAT&&console.STAT(V,+new Date-V,"peer keys"),function Q(){var J=+new Date;b=1;var le=P.raw;P.raw=I;for(var ue=0,se;ue<9&&(se=(B||"")[ue++]);)(se=z[se]||(O||"")[se])&&f.say(C,se);P.raw=le,b=0,B=B.slice(ue),console.STAT&&console.STAT(J,+new Date-J,"say loop"),B.length&&(p(Q,0),k&&E(k))}();return}if(!O.wire&&f.wire&&f.wire(O),M!==O.last){if(O.last=M,O===P.via||(D=P.yo)&&(D[O.url]||D[O.pid]||D[O.id]))return!1;if(console.STAT&&console.STAT(V,((U||P).yp=+new Date)-(P.y||V),"say prep"),!b&&k&&E(k),O.batch){if(O.tail=(D=O.tail||0)+I.length,O.tail<=h.pack){O.batch+=(D?",":"")+I;return}x(O)}O.batch="[";var F=+new Date;setTimeout(function(){console.STAT&&console.STAT(F,+new Date-F,"0ms TO"),x(O)},h.gap),v(I,O),console.STAT&&k===O.SI&&console.STAT(V,+new Date-O.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(C,O){if(!C)return"";var D=C._||{},M,G;if(G=D.raw)return G;if(typeof C=="string")return C;var I=C["##"],k=C["@"];if(I&&k){if(!D.via&&m(k+I))return!1;if(G=(w.s[k]||"").it){if(I===G["##"])return!1;G["##"]||(G["##"]=I)}}if(!C.dam&&!C["@"]){var P=0,U=[];G=h.peers;for(var V in G){var z=G[V];if(U.push(z.url||z.pid||z.id),++P>6)break}P>1&&(C["><"]=U.join())}if(C.put&&(G=C.ok)&&(C.ok={"@":(G["@"]||1)-1,"/":G["/"]==C._.near?f.near:G["/"]}),M=D.$put){G={},Object.keys(C).forEach(function(F){G[F]=C[F]}),G.put=":])([:",o(G,function(F,$){if(!F){var Q=+new Date;G=$.indexOf('"put":":])([:"'),B(a,$=$.slice(0,G+6)+M+$.slice(G+14)),console.STAT&&console.STAT(Q,+new Date-Q,"say slice")}});return}o(C,B);function B(F,$){F||(D.raw=$,f.say(C,O))}}}();function x(c){var b=c.batch,A=typeof b=="string";if(A&&(b+="]"),c.batch=c.tail=null,!!b&&!(A?3>b.length:!b.length)){if(!A)try{b=b.length===1?b[0]:JSON.stringify(b)}catch(_){return h.log("DAM JSON stringify error",_)}b&&v(b,c)}}function v(c,b){try{var A=b.wire;b.say?b.say(c):A.send&&A.send(c),f.say.d+=c.length||0,++f.say.c}catch{(b.queue=b.queue||[]).push(c)}}return f.near=0,f.hi=function(c){var b=c.wire,A;if(!b){f.wire(c.length&&{url:c,id:c}||c);return}c.id?h.peers[c.url||c.id]=c:(A=c.id=c.id||c.url||String.random(9),f.say({dam:"?",pid:u.opt.pid},h.peers[A]=c),delete w.s[c.last]),c.met||(f.near++,c.met=+new Date,u.on("hi",c)),A=c.queue,c.queue=[],setTimeout.each(A||[],function(_){v(_,c)},0,9)},f.bye=function(c){c.met&&--f.near,delete c.met,u.on("bye",c);var b=+new Date;b=b-(c.met||b),f.bye.time=((f.bye.time||b)+b)/2},f.hear["!"]=function(c,b){h.log("Error:",c.err)},f.hear["?"]=function(c,b){c.pid&&(b.pid||(b.pid=c.pid),c["@"])||(f.say({dam:"?",pid:h.pid,"@":c["#"]},b),delete w.s[b.last])},f.hear.mob=function(c,b){if(c.peers){var A=Object.keys(c.peers),_=A[Math.random()*A.length>>0];_&&(f.bye(b),f.hi(_))}},u.on("create",function(c){c.opt.pid=c.opt.pid||String.random(9),this.to.next(c),c.on("out",f.say)}),u.on("bye",function(c,b){c=h.peers[c.id||c]||c,this.to.next(c),c.bye?c.bye():(b=c.wire)&&b.close&&b.close(),delete h.peers[c.id],c.wire=null}),u.on("bye",function(c,b){this.to.next(c),(b=console.STAT)&&(b.peers=f.near),(b=c.url)&&setTimeout(function(){},h.lack||9e3)}),u.on("hi",function(c,b){if(this.to.next(c),(b=console.STAT)&&(b.peers=f.near),!h.super){var A=Object.keys(u.next||"");A.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(A,function(_){var C=u.next[_];if(h.super||(C.ask||"")[""]){f.say({get:{"#":_}},c);return}setTimeout.each(Object.keys(C.ask||""),function(O){O&&f.say({"##":String.hash((u.graph[_]||"")[O]),get:{"#":_,".":O}},c)})})}}),f}var a;try{r.exports=l}catch{}})(e,"./mesh"),e(function(r){var i=e("./index");i.Mesh=e("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var l=o.opt;if(l.WebSocket===!1)return;var a=i.window||{},u=l.WebSocket||a.WebSocket||a.webkitWebSocket||a.mozWebSocket;if(!u)return;l.WebSocket=u;var f=l.mesh=l.mesh||i.Mesh(o);f.wire||l.wire,f.wire=l.wire=h;function h(E){try{if(!E||!E.url)return x&&x(E);var S=E.url.replace(/^http/,"ws"),x=E.wire=new l.WebSocket(S);return x.onclose=function(){w(E),l.mesh.bye(E)},x.onerror=function(v){w(E)},x.onopen=function(){l.mesh.hi(E)},x.onmessage=function(v){v&&l.mesh.hear(v.data||v,E)},x}catch{l.mesh.bye(E)}}setTimeout(function(){!l.super&&o.on("out",{dam:"hi"})},1);var p=2*999;function w(E){clearTimeout(E.defer),l.peers[E.url]&&(m&&E.retry<=0||(E.retry=(E.retry||l.retry+1||60)-(-E.tried+(E.tried=+new Date)<p*4?1:0),E.defer=setTimeout(function S(){if(m&&m.hidden)return setTimeout(S,p);h(E)},p)))}var m=""+s!=typeof document&&document});var s})(e,"./websocket"),e(function(r){if(!(typeof Gun>"u")){var i=function(){},s;try{s=(Gun.window||i).localStorage}catch{}s||(Gun.log("Warning: No localStorage exists to persist data to!"),s={setItem:function(l,a){this[l]=a},removeItem:function(l){delete this[l]},getItem:function(l){return this[l]}});var o=JSON.stringifyAsync||function(l,a,u,f){var h;try{a(h,JSON.stringify(l,u,f))}catch(p){a(p)}};Gun.on("create",function l(a){this.to.next(a);var u=a.opt;a.graph;var f=[],h,p,w,m;if(u.localStorage===!1)return;u.prefix=u.file||"gun/";try{h=l[u.prefix]=l[u.prefix]||JSON.parse(w=s.getItem(u.prefix))||{}}catch{h=l[u.prefix]={}}w=(w||"").length,a.on("get",function(S){this.to.next(S);var x=S.get,v,c,b,A;!x||!(v=x["#"])||(c=h[v]||A,c&&(b=x["."])&&!Object.plain(b)&&(c=Gun.state.ify({},b,Gun.state.is(c,b),c[b],v)),Gun.on.get.ack(S,c))}),a.on("put",function(S){this.to.next(S);var x=S.put,v=x["#"],c=x["."],b=S["#"],A=S.ok||"";if(h[v]=Gun.state.ify(h[v],c,x[">"],x[":"],v),m&&w>4999880){a.on("in",{"@":b,err:"localStorage max!"});return}!S["@"]&&(!S._.via||Math.random()<A["@"]/A["/"])&&f.push(b),!p&&(p=setTimeout(E,9+w/333))});function E(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(E,99);return}var S=f;clearTimeout(p),p=!1,f=[],o(h,function(x,v){try{!x&&s.setItem(u.prefix,v)}catch(c){x=m=c||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),a.on("localStorage:error",{err:x,get:u.prefix,put:h})),w=v.length,setTimeout.each(S,function(c){a.on("in",{"@":c,err:x,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var G;if(""+G!=typeof Gun){var e=function(I){console.warn("Warning! Deprecated internal utility will break in next version:",I)},n=Gun;n.fn=n.fn||{is:function(I){return e("fn"),!!I&&typeof I=="function"}},n.bi=n.bi||{is:function(I){return e("bi"),I instanceof Boolean||typeof I=="boolean"}},n.num=n.num||{is:function(I){return e("num"),!r(I)&&(I-parseFloat(I)+1>=0||I===1/0||I===-1/0)}},n.text=n.text||{is:function(I){return e("text"),typeof I=="string"}},n.text.ify=n.text.ify||function(I){return e("text.ify"),n.text.is(I)?I:typeof JSON<"u"?JSON.stringify(I):I&&I.toString?I.toString():I},n.text.random=n.text.random||function(I,k){e("text.random");var P="";for(I=I||24,k=k||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";I>0;)P+=k.charAt(Math.floor(Math.random()*k.length)),I--;return P},n.text.match=n.text.match||function(I,k){var P,U;return e("text.match"),typeof I!="string"?!1:(typeof k=="string"&&(k={"=":k}),k=k||{},P=k["="]||k["*"]||k[">"]||k["<"],I===P?!0:U!==k["="]?!1:(P=k["*"]||k[">"]||k["<"],I.slice(0,(P||"").length)===P?!0:U!==k["*"]?!1:U!==k[">"]&&U!==k["<"]?I>=k[">"]&&I<=k["<"]:U!==k[">"]&&I>=k[">"]||U!==k["<"]&&I<=k["<"]))},n.text.hash=n.text.hash||function(I,k){if(e("text.hash"),typeof I=="string"){if(k=k||0,!I.length)return k;for(var P=0,U=I.length,V;P<U;++P)V=I.charCodeAt(P),k=(k<<5)-k+V,k|=0;return k}},n.list=n.list||{is:function(I){return e("list"),I instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(I){return e("list.sort"),function(k,P){return!k||!P?0:(k=k[I],P=P[I],k<P?-1:k>P?1:0)}},n.list.map=n.list.map||function(I,k,P){return e("list.map"),D(I,k,P)},n.list.index=1,n.obj=n.boj||{is:function(I){return e("obj"),I?I instanceof Object&&I.constructor===Object||Object.prototype.toString.call(I).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},n.obj.put=n.obj.put||function(I,k,P){return e("obj.put"),(I||{})[k]=P,I},n.obj.has=n.obj.has||function(I,k){return e("obj.has"),I&&Object.prototype.hasOwnProperty.call(I,k)},n.obj.del=n.obj.del||function(I,k){if(e("obj.del"),!!I)return I[k]=null,delete I[k],I},n.obj.as=n.obj.as||function(I,k,P,U){return e("obj.as"),I[k]=I[k]||(U===P?{}:P)},n.obj.ify=n.obj.ify||function(I){if(e("obj.ify"),b(I))return I;try{I=JSON.parse(I)}catch{I={}}return I},function(){var I;function k(P,U){_(this,U)&&I!==this[U]||(this[U]=P)}n.obj.to=n.obj.to||function(P,U){return e("obj.to"),U=U||{},D(P,k,U),U}}(),n.obj.copy=n.obj.copy||function(I){return e("obj.copy"),I&&JSON.parse(JSON.stringify(I))},function(){function I(k,P){var U=this.n,V;if(!(U&&(P===U||b(U)&&_(U,P)))&&V!==P)return!0}n.obj.empty=n.obj.empty||function(k,P){return e("obj.empty"),k?!D(k,I,{n:P}):!0}}(),function(){function I(U,V){if(arguments.length===2){I.r=I.r||{},I.r[U]=V;return}I.r=I.r||[],I.r.push(U)}var k=Object.keys,P;Object.keys=Object.keys||function(U){return P(U,function(V,z,B){B(z)})},n.obj.map=P=n.obj.map||function(U,V,z){e("obj.map");var B,F=0,$,Q,J,le,ue=typeof V=="function";if(I.r=B,k&&b(U)&&(J=k(U),le=!0),z=z||{},r(U)||J)for($=(J||U).length;F<$;F++){var se=F+n.list.index;if(ue){if(Q=le?V.call(z,U[J[F]],J[F],I):V.call(z,U[F],se,I),Q!==B)return Q}else if(V===U[le?J[F]:F])return J?J[F]:se}else for(F in U)if(ue){if(_(U,F)&&(Q=z?V.call(z,U[F],F,I):V(U[F],F,I),Q!==B))return Q}else if(V===U[F])return F;return ue?I.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(I){return e("time"),I?I instanceof Date:+new Date().getTime()};var v=n.fn.is,r=n.list.is,c=n.obj,b=c.is,_=c.has,D=c.map,i={};i.is=function(I){return e("val.is"),I===G?!1:I===null?!0:I===1/0?!1:l(I)||o(I)||m(I)?!0:i.link.is(I)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(k){if(e("val.link.is"),k&&k[s]&&!k._&&b(k)){var P={};if(D(k,I,P),P.id)return P.id}return!1};function I(k,P){var U=this;if(U.id)return U.id=!1;if(P==s&&l(k))U.id=k;else return U.id=!1}}(),i.link.ify=function(I){return e("val.link.ify"),O({},s,I)},n.obj.has._=".";var s=i.link._,G,o=n.bi.is,m=n.num.is,l=n.text.is,c=n.obj,b=c.is,O=c.put,D=c.map;n.val=n.val||i;var a={_:"_"};a.soul=function(I,k){return e("node.soul"),I&&I._&&I._[k||h]},a.soul.ify=function(I,k){return e("node.soul.ify"),k=typeof k=="string"?{soul:k}:k||{},I=I||{},I._=I._||{},I._[h]=k.soul||I._[h]||f(),I},a.soul._=i.link._,function(){a.is=function(k,P,U){e("node.is");var V;return b(k)&&(V=a.soul(k))?!D(k,I,{as:U,cb:P,s:V,n:k}):!1};function I(k,P){if(P!==a._){if(!i.is(k))return!0;this.cb&&this.cb.call(this.as,k,P,this.n,this.s)}}}(),function(){a.ify=function(k,P,U){return e("node.ify"),P?typeof P=="string"?P={soul:P}:typeof P=="function"&&(P={map:P}):P={},P.map&&(P.node=P.map.call(U,k,G,P.node||{})),(P.node=a.soul.ify(P.node||{},P))&&D(k,I,{o:P,as:U}),P.node};function I(k,P){var U=this.o,V,z;if(U.map){V=U.map.call(this.as,k,""+P,U.node),z===V?A(U.node,P):U.node&&(U.node[P]=V);return}i.is(k)&&(U.node[P]=k)}}();var c=n.obj,b=c.is,A=c.del,D=c.map,u=n.text,f=u.random,h=a.soul._,G;n.node=n.node||a;var p=n.state;p.lex=function(){return e("state.lex"),p().toString(36).replace(".","")},p.to=function(I,k,P){e("state.to");var U=(I||{})[k];return b(U)&&(U=M(U)),p.ify(P,k,p.is(I,k),U,a.soul(I))},function(){p.map=function(k,P,U){e("state.map");var V,z=b(z=k||P)?z:null;return k=v(k=k||P)?k:null,z&&!k?(P=m(P)?P:p(),z[S]=z[S]||{},D(z,I,{o:z,s:P}),z):(U=U||b(P)?P:V,P=m(P)?P:p(),function(B,F,$,Q){if(!k)return I.call({o:$,s:P},B,F),B;k.call(U||this||{},B,F,$,Q),!(_($,F)&&V===$[F])&&I.call({o:$,s:P},B,F)})};function I(k,P){S!==P&&p.ify(this.o,P,this.s)}}();var c=n.obj;c.as;var _=c.has,b=c.is,D=c.map,M=c.copy,w=n.num,m=w.is,E=n.fn,v=E.is,S=a._,G,x={};(function(){x.is=function(P,U,V,z){return e("graph.is"),!P||!b(P)||C(P)?!1:!D(P,I,{cb:U,fn:V,as:z})};function I(P,U){if(!P||U!==a.soul(P)||!a.is(P,this.fn,this.as))return!0;this.cb&&(k.n=P,k.as=this.as,this.cb.call(k.as,P,U,k))}function k(P){P&&a.is(k.n,P,k.as)}})(),function(){x.ify=function(z,B,F){e("graph.ify");var $={path:[],obj:z};return B?typeof B=="string"?B={soul:B}:typeof B=="function"&&(B.map=B):B={},typeof F=="string"&&(B.soul=B.soul||F,F=G),B.soul&&($.link=i.link.ify(B.soul)),B.shell=(F||{}).shell,B.graph=B.graph||{},B.seen=B.seen||[],B.as=B.as||F,I(B,$),B.root=$.node,B.graph};function I(z,B){var F;return(F=V(z,B))?F:(B.env=z,B.soul=P,a.ify(B.obj,k,B)&&(B.link=B.link||i.link.ify(a.soul(B.node)),B.obj!==z.shell&&(z.graph[i.link.is(B.link)]=B.node)),B)}function k(z,B,F){var $=this,Q=$.env,J,le;if(a._===B&&_(z,i.link._))return F._;if(J=U(z,B,F,$,Q)){if(B||($.node=$.node||F||{},_(z,a._)&&a.soul(z)&&($.node._=M(z._)),$.node=a.soul.ify($.node,i.link.is($.link)),$.link=$.link||i.link.ify(a.soul($.node))),(le=Q.map)&&(le.call(Q.as||{},z,B,F,$),_(F,B))){if(z=F[B],G===z){A(F,B);return}if(!(J=U(z,B,F,$,Q)))return}if(!B)return $.node;if(J===!0)return z;if(le=I(Q,{obj:z,path:$.path.concat(B)}),!!le.node)return le.link}}function P(z){var B=this,F=i.link.is(B.link),$=B.env.graph;B.link=B.link||i.link.ify(z),B.link[i.link._]=z,B.node&&B.node[a._]&&(B.node[a._][i.link._]=z),_($,F)&&($[z]=$[F],A($,F))}function U(z,B,F,$,Q){var J;if(i.is(z))return!0;if(b(z))return 1;if(J=Q.invalid)return z=J.call(Q.as||{},z,B,F),U(z,B,F,$,Q);Q.err="Invalid value at '"+$.path.concat(B).join(".")+"'!",n.list.is(z)&&(Q.err+=" Use `.set(item)` instead of an Array.")}function V(z,B){for(var F=z.seen,$=F.length,Q;$--;)if(Q=F[$],B.obj===Q.obj)return Q;F.push(B)}}(),x.node=function(I){e("graph.node");var k=a.soul(I);if(k)return O({},k,I)},function(){x.to=function(k,P,U){if(e("graph.to"),!!k){var V={};return U=U||{seen:{}},D(k[P],I,{obj:V,graph:k,opt:U}),V}};function I(k,P){var U,V;if(a._===P){if(C(k,i.link._))return;this.obj[P]=M(k);return}if(!(U=i.link.is(k))){this.obj[P]=k;return}if(V=this.opt.seen[U]){this.obj[P]=V;return}this.obj[P]=this.opt.seen[U]=x.to(this.graph,U,this.opt)}}();var v=n.fn.is,c=n.obj,b=c.is,A=c.del,_=c.has,C=c.empty,O=c.put,D=c.map,M=c.copy,G;n.graph=n.graph||x}}()})(ed);var h1=ed.exports,h2=h1;const d2=sh(h2);(function(){var t=typeof window<"u"?window.Gun:h1;t.on("opt",function(e){this.to.next(e);var n=e.opt;if(e.once||!t.Mesh||n.RTCPeerConnection===!1)return;var r;typeof window<"u"&&(r=window),typeof Pn<"u"&&(r=Pn),r=r||{};var i=n.RTCPeerConnection||r.RTCPeerConnection||r.webkitRTCPeerConnection||r.mozRTCPeerConnection,s=n.RTCSessionDescription||r.RTCSessionDescription||r.webkitRTCSessionDescription||r.mozRTCSessionDescription,o=n.RTCIceCandidate||r.RTCIceCandidate||r.webkitRTCIceCandidate||r.mozRTCIceCandidate;if(!i||!s||!o)return;n.RTCPeerConnection=i,n.RTCSessionDescription=s,n.RTCIceCandidate=o,n.rtc=n.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},n.rtc.dataChannel=n.rtc.dataChannel||{ordered:!1,maxRetransmits:2},n.rtc.sdp=n.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},n.rtc.max=n.rtc.max||55,n.rtc.room=n.rtc.room||t.window&&(location.hash.slice(1)||location.pathname.slice(1)),n.announce=function(u){n.rtc.start=+new Date,e.$.get("/RTC/"+n.rtc.room+"<?99").get("+").put(n.pid,function(f){!f.ok||!f.ok.rtc||a(f)},{acks:n.rtc.max}).on(function(f,h,p){f===n.pid||n.rtc.start>p.put[">"]||a({"#":""+p["#"],ok:{rtc:{id:f}}})})};var l=n.mesh=n.mesh||t.Mesh(e);e.on("create",function(u){this.to.next(u),setTimeout(n.announce,1)});function a(u){if(this&&this.off&&this.off(),!!u.ok){var f=u.ok.rtc,h,p;if(!(!f||!f.id||f.id===n.pid)){if(p=f.answer)return!(h=n.peers[f.id]||a[f.id])||h.remoteSet?void 0:(p.sdp=p.sdp.replace(/\\r\\n/g,`\r
`),h.setRemoteDescription(h.remoteSet=new n.RTCSessionDescription(p)));if(p=f.candidate)return h=n.peers[f.id]||a[f.id]||a({ok:{rtc:{id:f.id}}}),h.addIceCandidate(new n.RTCIceCandidate(p));if(!a[f.id]){(h=new n.RTCPeerConnection(n.rtc)).id=f.id;var w=h.wire=h.createDataChannel("dc",n.rtc.dataChannel);if(a[f.id]=h,w.to=setTimeout(function(){delete a[f.id]},1e3*60),w.onclose=function(){l.bye(h)},w.onerror=function(m){},w.onopen=function(m){delete a[f.id],l.hi(h)},w.onmessage=function(m){m&&l.hear(m.data||m,h)},h.onicecandidate=function(m){m.candidate&&e.on("out",{"@":u["#"],ok:{rtc:{candidate:m.candidate,id:n.pid}}})},h.ondatachannel=function(m){var E=m.channel;E.onmessage=w.onmessage,E.onopen=w.onopen,E.onclose=w.onclose},p=f.offer){f.offer.sdp=f.offer.sdp.replace(/\\r\\n/g,`\r
`),h.setRemoteDescription(new n.RTCSessionDescription(p)),h.createAnswer(function(m){h.setLocalDescription(m),e.on("out",{"@":u["#"],ok:{rtc:{answer:m,id:n.pid}}})},function(){},n.rtc.sdp);return}return h.createOffer(function(m){h.setLocalDescription(m),e.on("out",{"@":u["#"],"#":e.ask(a),ok:{rtc:{offer:m,id:n.pid}}})},function(){},n.rtc.sdp),h}}}}})})();class p2{constructor(e={}){Y(this,"gun");Y(this,"options");Y(this,"annotationCallbacks",new Map);Y(this,"currentPeers",[]);Y(this,"isConnected",!1);Y(this,"lastLogTime",new Map);Y(this,"fetchAttempts",0);Y(this,"maxFetchAttempts",10);Y(this,"initializationResolve",null);Y(this,"initialPeers",["https://citizen-x-bootsrap.onrender.com/gun"]);Y(this,"cleanupListeners",null);this.options={peers:e.peers||this.initialPeers,radisk:e.radisk??!0},this.currentPeers=this.options.peers,this.gun=d2({peers:this.currentPeers,radisk:this.options.radisk,localStorage:!1,file:"gun-data",webrtc:!0}),this.startConnectionCheck()}throttleLog(e,n=6e4){const r=Date.now(),i=this.lastLogTime.get(e)||0;return r-i<n?!1:(this.lastLogTime.set(e,r),!0)}async initialize(){return this.initializationResolve?(console.log("GunRepository: Already initializing, waiting for existing promise"),new Promise(e=>{this.initializationResolve=e})):(console.log("GunRepository: Initializing..."),new Promise((e,n)=>{this.initializationResolve=e;const r=l=>{var a;console.log("GunRepository: Connected to peer:",l),this.isConnected=!0,this.cleanupListeners(),(a=this.initializationResolve)==null||a.call(this),this.initializationResolve=null},i=l=>{console.log("GunRepository: Disconnected from peer:",l),this.isConnected=!1};this.gun.on("hi",r),this.gun.on("bye",i);const s=setTimeout(()=>{var l;this.isConnected||(console.warn("GunRepository: No connection established after timeout, proceeding anyway"),this.cleanupListeners(),(l=this.initializationResolve)==null||l.call(this),this.initializationResolve=null)},1e4),o=()=>{clearTimeout(s),this.gun.off("hi",r),this.gun.off("bye",i)};this.cleanupListeners=o,this.gun.on("error",l=>{console.error("GunRepository: Error during initialization:",l),this.cleanupListeners(),n(l),this.initializationResolve=null})}).then(()=>{console.log("GunRepository: Initialization complete, starting peer discovery"),this.discoverPeers()}))}startConnectionCheck(){setInterval(()=>{if(!this.isConnected){console.log("GunRepository: Connection lost, attempting to reconnect...");const e=[...new Set([...this.currentPeers,...this.initialPeers])];this.arraysEqual(e,this.currentPeers)||(this.currentPeers=e,console.log("GunRepository: Reverted to initial peers:",this.currentPeers),this.gun.opt({peers:this.currentPeers})),this.discoverPeers()}},30*1e3)}discoverPeers(){this.fetchKnownPeers().then(r=>{const i=[...new Set([...this.currentPeers,...r,...this.initialPeers])];if(this.arraysEqual(i,this.currentPeers)){console.log("GunRepository: Initial peer list unchanged:",this.currentPeers);return}this.currentPeers=i,console.log("GunRepository: Discovered initial peers:",this.currentPeers),this.gun.opt({peers:this.currentPeers})});let e=0;const n=30*1e3;this.gun.get("knownPeers").map().on((r,i)=>{const s=Date.now();if(s-e<n)return;if(!r||!r.url||!r.timestamp){this.throttleLog(`Ignore null peer ${i}`)&&console.log("GunRepository: Ignoring null or invalid peer entry:",i);return}if(s-r.timestamp>10*60*1e3){console.log("GunRepository: Removing expired peer:",r.url),this.gun.get("knownPeers").get(i).put(null);return}this.fetchKnownPeers().then(l=>{const a=[...new Set([...this.currentPeers,...l,...this.initialPeers])];if(this.arraysEqual(a,this.currentPeers)){this.throttleLog("Peer list unchanged after update")&&console.log("GunRepository: Peer list unchanged after update:",this.currentPeers);return}this.currentPeers=a,console.log("GunRepository: Updated peers list:",this.currentPeers),this.gun.opt({peers:this.currentPeers}),e=s})})}async fetchKnownPeers(){if(this.fetchAttempts>=this.maxFetchAttempts)return console.warn("GunRepository: Max fetch attempts reached, stopping retries"),[];this.isConnected||(console.log("GunRepository: Waiting for connection before fetching knownPeers..."),await new Promise(r=>{this.gun.on("hi",()=>r(null)),setTimeout(()=>{console.warn("GunRepository: Connection timeout in fetchKnownPeers, proceeding"),r(null)},5e3)}));const e=5;let n=0;for(this.fetchAttempts++;n<e;){n++;const r=await new Promise(i=>{const s=[];this.gun.get("knownPeers").map().once((o,l)=>{if(console.log("GunRepository: Raw peer data from knownPeers:",l,o),!o||!o.url||!o.timestamp)return;const u=Date.now()-o.timestamp;u<=10*60*1e3?(s.push(o.url),console.log("GunRepository: Found valid peer:",o.url,"Age:",u/1e3,"seconds")):console.log("GunRepository: Skipping stale peer in fetch:",o.url,"Age:",u/1e3,"seconds")}),setTimeout(()=>i(s),5e3)});if(r.length>0)return this.fetchAttempts=0,r;if(n===e)return console.log("GunRepository: No valid peers found in knownPeers after",n,"attempts"),[];this.throttleLog("Retry fetchKnownPeers")&&console.log("GunRepository: Retrying fetchKnownPeers, attempt:",n),await new Promise(i=>setTimeout(i,2e3))}return console.log("GunRepository: No valid peers found in knownPeers after all retries"),[]}arraysEqual(e,n){return e.length!==n.length?!1:e.every((r,i)=>r===n[i])}getGunInstance(){return this.gun}addPeers(e){const n=[...new Set([...this.currentPeers,...e,...this.initialPeers])];if(this.arraysEqual(n,this.currentPeers)){console.log("GunRepository: No new peers to add:",this.currentPeers);return}this.currentPeers=n,this.gun.opt({peers:this.currentPeers}),console.log("Updated peers:",this.currentPeers)}async getCurrentDID(){return new Promise(e=>{const n=localStorage.getItem("currentDID");console.log("GunRepository: Retrieved cached DID from localStorage:",n),n?this.gun.get(`user_${n}`).get("did").once(r=>{r&&r.did===n?(console.log("GunRepository: Confirmed DID in user-specific namespace:",n),e(n)):(console.log("GunRepository: DID not found in user-specific namespace, clearing localStorage"),localStorage.removeItem("currentDID"),e(null))}):e(null)})}async setCurrentDID(e){return new Promise((n,r)=>{localStorage.setItem("currentDID",e),console.log("GunRepository: Set current DID in localStorage:",e),this.gun.get(`user_${e}`).get("did").put({did:e},i=>{i.err?(console.error("GunRepository: Failed to set user-specific DID:",i.err),r(new Error(i.err))):(console.log("GunRepository: Set user-specific DID in Gun.js:",e),n())})})}async clearCurrentDID(){return new Promise(e=>{localStorage.removeItem("currentDID"),console.log("GunRepository: Cleared current DID from localStorage"),e()})}async saveProfile(e){return new Promise((n,r)=>{this.gun.get(`user_${e.did}`).get("profile").put(e,i=>{i.err?(console.error("GunRepository: Failed to save profile:",i.err),r(new Error(i.err))):(console.log("GunRepository: Saved profile:",e),n())})})}async getProfile(e,n=5,r=1e3){for(let i=1;i<=n;i++){const s=await new Promise(o=>{this.gun.get(`user_${e}`).get("profile").once(l=>{l&&l.did&&l.handle?(console.log("GunRepository: Loaded profile for DID:",e,l),o({did:l.did,handle:l.handle,profilePicture:l.profilePicture})):(console.warn("GunRepository: Profile not found for DID on attempt",i,e,l),o(null))})});if(s)return s;console.log(`GunRepository: Retrying getProfile for DID: ${e}, attempt ${i}/${n}`),await new Promise(o=>setTimeout(o,r))}return console.error("GunRepository: Failed to load profile for DID after retries:",e),null}async getAnnotations(e,n){const r=[],i=this.gun.get("annotations").get(e),s=3;for(let o=1;o<=s;o++){const l=new Set;let a=!1;if(await new Promise(u=>{const f=async h=>{if(!h||l.has(h.id))return;l.add(h.id),a=!0;const p=await new Promise(m=>{const E=[];i.get(h.id).get("comments").map().once(S=>{S&&E.push({id:S.id,content:S.content,author:S.author,timestamp:S.timestamp})}),setTimeout(()=>m(E),500)}),w={id:h.id,url:h.url||e,content:h.content,author:h.author,timestamp:h.timestamp,comments:p};r.push(w),console.log("GunRepository: Loaded annotation:",w)};i.map().once(f),setTimeout(()=>{console.log("GunRepository: Initial annotations loaded for URL:",e,r,"Has new data:",a,"Attempt:",o),u()},2e3)}),a||o===s)break;console.log("GunRepository: Retrying annotations fetch for URL:",e,"Attempt:",o),await new Promise(u=>setTimeout(u,1e3))}if(n){this.annotationCallbacks.has(e)||this.annotationCallbacks.set(e,[]),this.annotationCallbacks.get(e).push(n);const o=async(l,a)=>{if(console.log("Real-time update received for URL:",e,"Annotation:",l),l){const u=await new Promise(p=>{const w=[];i.get(l.id).get("comments").map().once(m=>{m&&w.push({id:m.id,content:m.content,author:m.author,timestamp:m.timestamp})}),setTimeout(()=>p(w),500)}),f=r.filter(p=>p.id!==l.id);f.push({id:l.id,url:l.url||e,content:l.content,author:l.author,timestamp:l.timestamp,comments:u}),r.splice(0,r.length,...f),console.log("GunRepository: Real-time update for URL:",e,r),(this.annotationCallbacks.get(e)||[]).forEach(p=>p([...r]))}else{const u=r.filter(h=>h.id!==a);r.splice(0,r.length,...u),console.log("GunRepository: Real-time deletion for URL:",e,r),(this.annotationCallbacks.get(e)||[]).forEach(h=>h([...r]))}};i.map().on(o),this.annotationCallbacks.get(e).cleanup=()=>{i.map().off()}}return[...r]}cleanupAnnotationsListeners(e){const n=this.annotationCallbacks.get(e);n&&n.cleanup&&(n.cleanup(),this.annotationCallbacks.delete(e),console.log("GunRepository: Cleaned up listeners for URL:",e))}async saveAnnotation(e){const{comments:n,...r}=e;if(await new Promise((i,s)=>{this.gun.get("annotations").get(e.url).get(e.id).put(r,o=>{o.err?(console.error("GunRepository: Failed to save annotation:",o.err),s(new Error(o.err))):(console.log("GunRepository: Saved annotation:",r),i())})}),n&&n.length>0)for(const i of n)await this.saveComment(e.url,e.id,i)}async deleteAnnotation(e,n){return new Promise((r,i)=>{this.gun.get("annotations").get(e).get(n).put(null,s=>{s.err?(console.error("GunRepository: Failed to delete annotation:",s.err),i(new Error(s.err))):(console.log("GunRepository: Deleted annotation:",n),r())})})}async saveComment(e,n,r){return new Promise((i,s)=>{this.gun.get("annotations").get(e).get(n).get("comments").get(r.id).put(r,o=>{o.err?(console.error("GunRepository: Failed to save comment:",o.err),s(new Error(o.err))):(console.log("GunRepository: Saved comment:",r),i())})})}}const Wi=class Wi{constructor(){}static getInstance(){return Wi.instance||(Wi.instance=new g2),Wi.instance}};Y(Wi,"instance");let _f=Wi;class g2{constructor(){Y(this,"repository");Y(this,"initialized",!1);Y(this,"initializing",!1);Y(this,"initializationPromise",null);const e=["https://citizen-x-bootsrap.onrender.com/gun"];this.repository=new p2({peers:e,radisk:!1})}normalizeUrl(e){let n=e.replace(/^(https?:\/\/)+/,"https://");n=n.replace(/\/+$/,"");const r=new URL(n),i=new URLSearchParams(r.search);for(const s of i.keys())s.startsWith("utm_")&&i.delete(s);return r.search=i.toString(),r.toString()}async initialize(){if(this.initialized){console.log("StorageRepository: Already initialized");return}return this.initializing?(console.log("StorageRepository: Initialization already in progress, waiting..."),this.initializationPromise):(console.log("StorageRepository: Initializing..."),this.initializing=!0,this.initializationPromise=this.repository.initialize().then(()=>{this.initialized=!0,this.initializing=!1,console.log("StorageRepository: Initialized successfully")}).catch(e=>{throw console.error("StorageRepository: Initialization failed:",e),this.initialized=!1,this.initializing=!1,this.initializationPromise=null,e}),this.initializationPromise)}async getCurrentDID(){return await this.initialize(),this.repository.getCurrentDID()}async setCurrentDID(e){await this.initialize(),await this.repository.setCurrentDID(e)}async clearCurrentDID(){await this.initialize(),await this.repository.clearCurrentDID()}async saveProfile(e){await this.initialize(),await this.repository.saveProfile(e)}async getProfile(e){return await this.initialize(),this.repository.getProfile(e)}async getAnnotations(e,n){await this.initialize();const r=this.normalizeUrl(e);return console.log("StorageRepository: Fetching annotations for normalized URL:",r),this.repository.getAnnotations(r,n)}async saveAnnotation(e){await this.initialize();const n={...e,url:this.normalizeUrl(e.url)};await this.repository.saveAnnotation(n)}async deleteAnnotation(e,n){await this.initialize();const r=this.normalizeUrl(e);await this.repository.deleteAnnotation(r,n)}async saveComment(e,n,r){await this.initialize();const i=this.normalizeUrl(e);await this.repository.saveComment(i,n,r)}cleanupAnnotationsListeners(e){this.repository.cleanupAnnotationsListeners(e)}}const co=_f.getInstance();function d1(){const[t,e]=ie.useState(null),[n,r]=ie.useState(!0);return ie.useEffect(()=>{(async()=>{try{console.log("useStorage: Starting storage initialization"),await co.initialize(),console.log("useStorage: Storage initialized successfully"),e(null)}catch(s){console.error("useStorage: Failed to initialize storage:",s.message||s),e("Failed to initialize storage: "+(s.message||"Unknown error"))}finally{r(!1)}})()},[]),{storage:co,error:t,isLoading:n}}var Cf={exports:{}};function m2(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,l=t.charAt(0),a=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var m=0,E=0,S=0,x=w.length;S!==x&&w[S]===0;)S++,m++;for(var v=(x-S)*u+1>>>0,c=new Uint8Array(v);S!==x;){for(var b=w[S],A=0,_=v-1;(b!==0||A<E)&&_!==-1;_--,A++)b+=256*c[_]>>>0,c[_]=b%o>>>0,b=b/o>>>0;if(b!==0)throw new Error("Non-zero carry");E=A,S++}for(var C=v-E;C!==v&&c[C]===0;)C++;for(var O=l.repeat(m);C<v;++C)O+=t.charAt(c[C]);return O}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var m=0;if(w[m]!==" "){for(var E=0,S=0;w[m]===l;)E++,m++;for(var x=(w.length-m)*a+1>>>0,v=new Uint8Array(x);w[m];){var c=e[w.charCodeAt(m)];if(c===255)return;for(var b=0,A=x-1;(c!==0||b<S)&&A!==-1;A--,b++)c+=o*v[A]>>>0,v[A]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");S=b,m++}if(w[m]!==" "){for(var _=x-S;_!==x&&v[_]===0;)_++;for(var C=new Uint8Array(E+(x-_)),O=E;_!==x;)C[O++]=v[_++];return C}}}function p(w){var m=h(w);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:h,decode:p}}var y2=m2;const v2=new TextDecoder,w2=t=>v2.decode(t),x2=new TextEncoder,E2=t=>x2.encode(t);function b2(t,e){const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}var td={decodeText:w2,encodeText:E2,concat:b2};const{encodeText:S2}=td;let T2=class{constructor(e,n,r,i){this.name=e,this.code=n,this.codeBuf=S2(this.code),this.alphabet=i,this.codec=r(i)}encode(e){return this.codec.encode(e)}decode(e){for(const n of e)if(this.alphabet&&this.alphabet.indexOf(n)<0)throw new Error(`invalid character '${n}' in '${e}'`);return this.codec.decode(e)}};var A2=T2;const k2=(t,e,n)=>{const r={};for(let u=0;u<e.length;++u)r[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let o=0,l=0,a=0;for(let u=0;u<i;++u){const f=r[t[u]];if(f===void 0)throw new SyntaxError("Invalid character "+t[u]);l=l<<n|f,o+=n,o>=8&&(o-=8,s[a++]=255&l>>o)}if(o>=n||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return s},N2=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,l=0;for(let a=0;a<t.length;++a)for(l=l<<8|t[a],o+=8;o>n;)o-=n,s+=e[i&l>>o];if(o&&(s+=e[i&l<<n-o]),r)for(;s.length*n&7;)s+="=";return s},_2=t=>e=>({encode(n){return N2(n,e,t)},decode(n){return k2(n,e,t)}});var C2={rfc4648:_2};const Gs=y2,L2=A2,{rfc4648:We}=C2,{decodeText:I2,encodeText:O2}=td,R2=()=>({encode:I2,decode:O2}),p1=[["identity","\0",R2,""],["base2","0",We(1),"01"],["base8","7",We(3),"01234567"],["base10","9",Gs,"0123456789"],["base16","f",We(4),"0123456789abcdef"],["base16upper","F",We(4),"0123456789ABCDEF"],["base32hex","v",We(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",We(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",We(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",We(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",We(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",We(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",We(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",We(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",We(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Gs,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Gs,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Gs,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Gs,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],g1=p1.reduce((t,e)=>(t[e[0]]=new L2(e[0],e[1],e[2],e[3]),t),{}),P2=p1.reduce((t,e)=>(t[e[1]]=g1[e[0]],t),{});var D2={names:g1,codes:P2};(function(t,e){const n=D2,{encodeText:r,decodeText:i,concat:s}=td;function o(E,S){if(!S)throw new Error("requires an encoded Uint8Array");const{name:x,codeBuf:v}=h(E);return f(x,S),s([v,S],v.length+S.length)}function l(E,S){const x=h(E),v=r(x.encode(S));return s([x.codeBuf,v],x.codeBuf.length+v.length)}function a(E){E instanceof Uint8Array&&(E=i(E));const S=E[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(S)&&(E=E.toLowerCase()),h(E[0]).decode(E.substring(1))}function u(E){if(E instanceof Uint8Array&&(E=i(E)),Object.prototype.toString.call(E)!=="[object String]")return!1;try{return h(E[0]).name}catch{return!1}}function f(E,S){h(E).decode(i(S))}function h(E){if(Object.prototype.hasOwnProperty.call(n.names,E))return n.names[E];if(Object.prototype.hasOwnProperty.call(n.codes,E))return n.codes[E];throw new Error(`Unsupported encoding: ${E}`)}function p(E){return E instanceof Uint8Array&&(E=i(E)),h(E[0])}e=t.exports=o,e.encode=l,e.decode=a,e.isEncoded=u,e.encoding=h,e.encodingFromData=p;const w=Object.freeze(n.names),m=Object.freeze(n.codes);e.names=w,e.codes=m})(Cf,Cf.exports);var m1=Cf.exports;/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const at=2n**255n-19n,Yl=2n**252n+27742317777372353535851937790883648493n,$p=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,qp=0x6666666666666666666666666666666666666666666666666666666666666658n,B2=37095705934669439343138083508754565189542113879843219016388785533085940283555n,Cl={a:-1n,d:B2,h:8},Ze=(t="")=>{throw new Error(t)},y1=t=>typeof t=="string",j2=t=>t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array",Po=(t,e)=>!j2(t)||typeof e=="number"&&e>0&&t.length!==e?Ze("Uint8Array of valid length expected"):t,hs=t=>new Uint8Array(t),nd=(t,e)=>Po(y1(t)?id(t):hs(Po(t)),e),ae=(t,e=at)=>{let n=t%e;return n>=0n?n:e+n},Fp=t=>t instanceof Xt?t:Ze("Point expected");class Xt{constructor(e,n,r,i){this.ex=e,this.ey=n,this.ez=r,this.et=i}static fromAffine(e){return new Xt(e.x,e.y,1n,ae(e.x*e.y))}static fromHex(e,n=!1){const{d:r}=Cl;e=nd(e,32);const i=e.slice(),s=e[31];i[31]=s&-129;const o=w1(i);n&&!(0n<=o&&o<2n**256n)&&Ze("bad y coord 1"),!n&&!(0n<=o&&o<at)&&Ze("bad y coord 2");const l=ae(o*o),a=ae(l-1n),u=ae(r*l+1n);let{isValid:f,value:h}=$2(a,u);f||Ze("bad y coordinate 3");const p=(h&1n)===1n,w=(s&128)!==0;return!n&&h===0n&&w&&Ze("bad y coord 3"),w!==p&&(h=ae(-h)),new Xt(h,o,1n,ae(h*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:n,ey:r,ez:i}=this,{ex:s,ey:o,ez:l}=Fp(e),a=ae(n*l),u=ae(s*i),f=ae(r*l),h=ae(o*i);return a===u&&f===h}is0(){return this.equals(Ys)}negate(){return new Xt(ae(-this.ex),this.ey,this.ez,ae(-this.et))}double(){const{ex:e,ey:n,ez:r}=this,{a:i}=Cl,s=ae(e*e),o=ae(n*n),l=ae(2n*ae(r*r)),a=ae(i*s),u=e+n,f=ae(ae(u*u)-s-o),h=a+o,p=h-l,w=a-o,m=ae(f*p),E=ae(h*w),S=ae(f*w),x=ae(p*h);return new Xt(m,E,x,S)}add(e){const{ex:n,ey:r,ez:i,et:s}=this,{ex:o,ey:l,ez:a,et:u}=Fp(e),{a:f,d:h}=Cl,p=ae(n*o),w=ae(r*l),m=ae(s*h*u),E=ae(i*a),S=ae((n+r)*(o+l)-p-w),x=ae(E-m),v=ae(E+m),c=ae(w-f*p),b=ae(S*x),A=ae(v*c),_=ae(S*c),C=ae(x*v);return new Xt(b,A,C,_)}mul(e,n=!0){if(e===0n)return n===!0?Ze("cannot multiply by 0"):Ys;if(typeof e=="bigint"&&0n<e&&e<Yl||Ze("invalid scalar, must be < L"),!n&&this.is0()||e===1n)return this;if(this.equals(ds))return W2(e).p;let r=Ys,i=ds;for(let s=this;e>0n;s=s.double(),e>>=1n)e&1n?r=r.add(s):n&&(i=i.add(s));return r}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(Cl.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(Yl/2n,!1).double();return Yl%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:n,ez:r}=this;if(this.equals(Ys))return{x:0n,y:1n};const i=x1(r,at);return ae(r*i)!==1n&&Ze("invalid inverse"),{x:ae(e*i),y:ae(n*i)}}toRawBytes(){const{x:e,y:n}=this.toAffine(),r=U2(n);return r[31]|=e&1n?128:0,r}toHex(){return rd(this.toRawBytes())}}Xt.BASE=new Xt($p,qp,1n,ae($p*qp));Xt.ZERO=new Xt(0n,1n,1n,0n);const{BASE:ds,ZERO:Ys}=Xt,v1=(t,e)=>t.toString(16).padStart(e,"0"),rd=t=>Array.from(Po(t)).map(e=>v1(e,2)).join(""),Kn={_0:48,_9:57,A:65,F:70,a:97,f:102},zp=t=>{if(t>=Kn._0&&t<=Kn._9)return t-Kn._0;if(t>=Kn.A&&t<=Kn.F)return t-(Kn.A-10);if(t>=Kn.a&&t<=Kn.f)return t-(Kn.a-10)},id=t=>{const e="hex invalid";if(!y1(t))return Ze(e);const n=t.length,r=n/2;if(n%2)return Ze(e);const i=hs(r);for(let s=0,o=0;s<r;s++,o+=2){const l=zp(t.charCodeAt(o)),a=zp(t.charCodeAt(o+1));if(l===void 0||a===void 0)return Ze(e);i[s]=l*16+a}return i},U2=t=>id(v1(t,32*2)).reverse(),w1=t=>BigInt("0x"+rd(hs(Po(t)).reverse())),Hp=(...t)=>{const e=hs(t.reduce((r,i)=>r+Po(i).length,0));let n=0;return t.forEach(r=>{e.set(r,n),n+=r.length}),e},x1=(t,e)=>{(t===0n||e<=0n)&&Ze("no inverse n="+t+" mod="+e);let n=ae(t,e),r=e,i=0n,s=1n;for(;n!==0n;){const o=r/n,l=r%n,a=i-s*o;r=n,n=l,i=s,s=a}return r===1n?ae(i,e):Ze("no inverse")},Cn=(t,e)=>{let n=t;for(;e-- >0n;)n*=n,n%=at;return n},M2=t=>{const n=t*t%at*t%at,r=Cn(n,2n)*n%at,i=Cn(r,1n)*t%at,s=Cn(i,5n)*i%at,o=Cn(s,10n)*s%at,l=Cn(o,20n)*o%at,a=Cn(l,40n)*l%at,u=Cn(a,80n)*a%at,f=Cn(u,80n)*a%at,h=Cn(f,10n)*s%at;return{pow_p_5_8:Cn(h,2n)*t%at,b2:n}},Gp=19681161376707505956807079304988542015446066515923890162744021073123829784752n,$2=(t,e)=>{const n=ae(e*e*e),r=ae(n*n*e),i=M2(t*r).pow_p_5_8;let s=ae(t*n*i);const o=ae(e*s*s),l=s,a=ae(s*Gp),u=o===t,f=o===ae(-t),h=o===ae(-t*Gp);return u&&(s=l),(f||h)&&(s=a),(ae(s)&1n)===1n&&(s=ae(-s)),{isValid:u||f,value:s}},q2=t=>ae(w1(t),Yl);let fo;const F2=(...t)=>wn.sha512Async(...t),z2=(...t)=>typeof fo=="function"?fo(...t):Ze("etc.sha512Sync not set"),E1=t=>{const e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const n=t.slice(32,64),r=q2(e),i=ds.mul(r),s=i.toRawBytes();return{head:e,prefix:n,scalar:r,point:i,pointBytes:s}},H2=t=>F2(nd(t,32)).then(E1),b1=t=>E1(z2(nd(t,32))),G2=t=>b1(t).pointBytes,Vp=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,wn={bytesToHex:rd,hexToBytes:id,concatBytes:Hp,mod:ae,invert:x1,randomBytes:(t=32)=>{const e=Vp();return(!e||!e.getRandomValues)&&Ze("crypto.getRandomValues must be defined"),e.getRandomValues(hs(t))},sha512Async:async(...t)=>{const e=Vp(),n=e&&e.subtle;n||Ze("etc.sha512Async or crypto.subtle must be defined");const r=Hp(...t);return hs(await n.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(wn,{sha512Sync:{configurable:!1,get(){return fo},set(t){fo||(fo=t)}}});const V2={getExtendedPublicKeyAsync:H2,getExtendedPublicKey:b1,randomPrivateKey:()=>wn.randomBytes(32),precompute:(t=8,e=ds)=>(e.multiply(3n),e)},Zr=8,K2=()=>{const t=[],e=256/Zr+1;let n=ds,r=n;for(let i=0;i<e;i++){r=n,t.push(r);for(let s=1;s<2**(Zr-1);s++)r=r.add(n),t.push(r);n=r.double()}return t};let Kp;const W2=t=>{const e=Kp||(Kp=K2()),n=(f,h)=>{let p=h.negate();return f?p:h};let r=Ys,i=ds;const s=1+256/Zr,o=2**(Zr-1),l=BigInt(2**Zr-1),a=2**Zr,u=BigInt(Zr);for(let f=0;f<s;f++){const h=f*o;let p=Number(t&l);t>>=u,p>o&&(p-=a,t+=1n);const w=h,m=h+Math.abs(p)-1,E=f%2!==0,S=p<0;p===0?i=i.add(n(E,e[w])):r=r.add(n(S,e[m]))}return{p:r,f:i}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Q2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sd(t,...e){if(!Q2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Wp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Z2(t,e){sd(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Lf(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function mc(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function X2(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function S1(t){return typeof t=="string"&&(t=X2(t)),sd(t),t}let Y2=class{};function J2(t){const e=r=>t().update(S1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ex(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,u=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+u,l,r)}class tx extends Y2{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=mc(this.buffer)}update(e){Wp(this),e=S1(e),sd(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=mc(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wp(this),Z2(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Lf(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;ex(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=mc(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)l.setUint32(4*h,f[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=l,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const lt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ll=BigInt(2**32-1),Qp=BigInt(32);function nx(t,e=!1){return e?{h:Number(t&Ll),l:Number(t>>Qp&Ll)}:{h:Number(t>>Qp&Ll)|0,l:Number(t&Ll)|0}}function rx(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l}=nx(t[s],e);[r[s],i[s]]=[o,l]}return[r,i]}const Zp=(t,e,n)=>t>>>n,Xp=(t,e,n)=>t<<32-n|e>>>n,ki=(t,e,n)=>t>>>n|e<<32-n,Ni=(t,e,n)=>t<<32-n|e>>>n,Il=(t,e,n)=>t<<64-n|e>>>n-32,Ol=(t,e,n)=>t>>>n-32|e<<64-n;function Wn(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const ix=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),sx=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ox=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),lx=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,ax=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ux=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,T1=rx(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),cx=T1[0],fx=T1[1],gr=new Uint32Array(80),mr=new Uint32Array(80);class hx extends tx{constructor(e=64){super(128,e,16,!1),this.Ah=lt[0]|0,this.Al=lt[1]|0,this.Bh=lt[2]|0,this.Bl=lt[3]|0,this.Ch=lt[4]|0,this.Cl=lt[5]|0,this.Dh=lt[6]|0,this.Dl=lt[7]|0,this.Eh=lt[8]|0,this.El=lt[9]|0,this.Fh=lt[10]|0,this.Fl=lt[11]|0,this.Gh=lt[12]|0,this.Gl=lt[13]|0,this.Hh=lt[14]|0,this.Hl=lt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:l,Dl:a,Eh:u,El:f,Fh:h,Fl:p,Gh:w,Gl:m,Hh:E,Hl:S}=this;return[e,n,r,i,s,o,l,a,u,f,h,p,w,m,E,S]}set(e,n,r,i,s,o,l,a,u,f,h,p,w,m,E,S){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=h|0,this.Fl=p|0,this.Gh=w|0,this.Gl=m|0,this.Hh=E|0,this.Hl=S|0}process(e,n){for(let c=0;c<16;c++,n+=4)gr[c]=e.getUint32(n),mr[c]=e.getUint32(n+=4);for(let c=16;c<80;c++){const b=gr[c-15]|0,A=mr[c-15]|0,_=ki(b,A,1)^ki(b,A,8)^Zp(b,A,7),C=Ni(b,A,1)^Ni(b,A,8)^Xp(b,A,7),O=gr[c-2]|0,D=mr[c-2]|0,M=ki(O,D,19)^Il(O,D,61)^Zp(O,D,6),G=Ni(O,D,19)^Ol(O,D,61)^Xp(O,D,6),I=ox(C,G,mr[c-7],mr[c-16]),k=lx(I,_,M,gr[c-7],gr[c-16]);gr[c]=k|0,mr[c]=I|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:l,Cl:a,Dh:u,Dl:f,Eh:h,El:p,Fh:w,Fl:m,Gh:E,Gl:S,Hh:x,Hl:v}=this;for(let c=0;c<80;c++){const b=ki(h,p,14)^ki(h,p,18)^Il(h,p,41),A=Ni(h,p,14)^Ni(h,p,18)^Ol(h,p,41),_=h&w^~h&E,C=p&m^~p&S,O=ax(v,A,C,fx[c],mr[c]),D=ux(O,x,b,_,cx[c],gr[c]),M=O|0,G=ki(r,i,28)^Il(r,i,34)^Il(r,i,39),I=Ni(r,i,28)^Ol(r,i,34)^Ol(r,i,39),k=r&s^r&l^s&l,P=i&o^i&a^o&a;x=E|0,v=S|0,E=w|0,S=m|0,w=h|0,m=p|0,{h,l:p}=Wn(u|0,f|0,D|0,M|0),u=l|0,f=a|0,l=s|0,a=o|0,s=r|0,o=i|0;const U=ix(M,I,P);r=sx(U,D,G,k),i=U|0}({h:r,l:i}=Wn(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Wn(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:a}=Wn(this.Ch|0,this.Cl|0,l|0,a|0),{h:u,l:f}=Wn(this.Dh|0,this.Dl|0,u|0,f|0),{h,l:p}=Wn(this.Eh|0,this.El|0,h|0,p|0),{h:w,l:m}=Wn(this.Fh|0,this.Fl|0,w|0,m|0),{h:E,l:S}=Wn(this.Gh|0,this.Gl|0,E|0,S|0),{h:x,l:v}=Wn(this.Hh|0,this.Hl|0,x|0,v|0),this.set(r,i,s,o,l,a,u,f,h,p,w,m,E,S,x,v)}roundClean(){Lf(gr,mr)}destroy(){Lf(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const dx=J2(()=>new hx),Wa=dx;var If={},Qa={};Qa.byteLength=mx;Qa.toByteArray=vx;Qa.fromByteArray=Ex;var Rn=[],Vt=[],px=typeof Uint8Array<"u"?Uint8Array:Array,yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _i=0,gx=yc.length;_i<gx;++_i)Rn[_i]=yc[_i],Vt[yc.charCodeAt(_i)]=_i;Vt[45]=62;Vt[95]=63;function A1(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function mx(t){var e=A1(t),n=e[0],r=e[1];return(n+r)*3/4-r}function yx(t,e,n){return(e+n)*3/4-n}function vx(t){var e,n=A1(t),r=n[0],i=n[1],s=new px(yx(t,r,i)),o=0,l=i>0?r-4:r,a;for(a=0;a<l;a+=4)e=Vt[t.charCodeAt(a)]<<18|Vt[t.charCodeAt(a+1)]<<12|Vt[t.charCodeAt(a+2)]<<6|Vt[t.charCodeAt(a+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Vt[t.charCodeAt(a)]<<2|Vt[t.charCodeAt(a+1)]>>4,s[o++]=e&255),i===1&&(e=Vt[t.charCodeAt(a)]<<10|Vt[t.charCodeAt(a+1)]<<4|Vt[t.charCodeAt(a+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function wx(t){return Rn[t>>18&63]+Rn[t>>12&63]+Rn[t>>6&63]+Rn[t&63]}function xx(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(wx(r));return i.join("")}function Ex(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,l=n-r;o<l;o+=s)i.push(xx(t,o,o+s>l?l:o+s));return r===1?(e=t[n-1],i.push(Rn[e>>2]+Rn[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Rn[e>>10]+Rn[e>>4&63]+Rn[e<<2&63]+"=")),i.join("")}var od={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */od.read=function(t,e,n,r,i){var s,o,l=i*8-r-1,a=(1<<l)-1,u=a>>1,f=-7,h=n?i-1:0,p=n?-1:1,w=t[e+h];for(h+=p,s=w&(1<<-f)-1,w>>=-f,f+=l;f>0;s=s*256+t[e+h],h+=p,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=o*256+t[e+h],h+=p,f-=8);if(s===0)s=1-u;else{if(s===a)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(w?-1:1)*o*Math.pow(2,s-r)};od.write=function(t,e,n,r,i,s){var o,l,a,u=s*8-i-1,f=(1<<u)-1,h=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:s-1,m=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+h>=1?e+=p/a:e+=p*Math.pow(2,1-h),e*a>=2&&(o++,a/=2),o+h>=f?(l=0,o=f):o+h>=1?(l=(e*a-1)*Math.pow(2,i),o=o+h):(l=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+w]=l&255,w+=m,l/=256,i-=8);for(o=o<<i|l,u+=i;u>0;t[n+w]=o&255,w+=m,o/=256,u-=8);t[n+w-m]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Qa,n=od,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const T=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(T,d),T.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(T){if(T>i)throw new RangeError('The value "'+T+'" is invalid for option "size"');const d=new Uint8Array(T);return Object.setPrototypeOf(d,l.prototype),d}function l(T,d,y){if(typeof T=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(T)}return a(T,d,y)}l.poolSize=8192;function a(T,d,y){if(typeof T=="string")return p(T,d);if(ArrayBuffer.isView(T))return m(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(mt(T,ArrayBuffer)||T&&mt(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mt(T,SharedArrayBuffer)||T&&mt(T.buffer,SharedArrayBuffer)))return E(T,d,y);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=T.valueOf&&T.valueOf();if(L!=null&&L!==T)return l.from(L,d,y);const j=S(T);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return l.from(T[Symbol.toPrimitive]("string"),d,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}l.from=function(T,d,y){return a(T,d,y)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function f(T,d,y){return u(T),T<=0?o(T):d!==void 0?typeof y=="string"?o(T).fill(d,y):o(T).fill(d):o(T)}l.alloc=function(T,d,y){return f(T,d,y)};function h(T){return u(T),o(T<0?0:x(T)|0)}l.allocUnsafe=function(T){return h(T)},l.allocUnsafeSlow=function(T){return h(T)};function p(T,d){if((typeof d!="string"||d==="")&&(d="utf8"),!l.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const y=c(T,d)|0;let L=o(y);const j=L.write(T,d);return j!==y&&(L=L.slice(0,j)),L}function w(T){const d=T.length<0?0:x(T.length)|0,y=o(d);for(let L=0;L<d;L+=1)y[L]=T[L]&255;return y}function m(T){if(mt(T,Uint8Array)){const d=new Uint8Array(T);return E(d.buffer,d.byteOffset,d.byteLength)}return w(T)}function E(T,d,y){if(d<0||T.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<d+(y||0))throw new RangeError('"length" is outside of buffer bounds');let L;return d===void 0&&y===void 0?L=new Uint8Array(T):y===void 0?L=new Uint8Array(T,d):L=new Uint8Array(T,d,y),Object.setPrototypeOf(L,l.prototype),L}function S(T){if(l.isBuffer(T)){const d=x(T.length)|0,y=o(d);return y.length===0||T.copy(y,0,0,d),y}if(T.length!==void 0)return typeof T.length!="number"||fr(T.length)?o(0):w(T);if(T.type==="Buffer"&&Array.isArray(T.data))return w(T.data)}function x(T){if(T>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return T|0}function v(T){return+T!=T&&(T=0),l.alloc(+T)}l.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==l.prototype},l.compare=function(d,y){if(mt(d,Uint8Array)&&(d=l.from(d,d.offset,d.byteLength)),mt(y,Uint8Array)&&(y=l.from(y,y.offset,y.byteLength)),!l.isBuffer(d)||!l.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===y)return 0;let L=d.length,j=y.length;for(let q=0,K=Math.min(L,j);q<K;++q)if(d[q]!==y[q]){L=d[q],j=y[q];break}return L<j?-1:j<L?1:0},l.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(d,y){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return l.alloc(0);let L;if(y===void 0)for(y=0,L=0;L<d.length;++L)y+=d[L].length;const j=l.allocUnsafe(y);let q=0;for(L=0;L<d.length;++L){let K=d[L];if(mt(K,Uint8Array))q+K.length>j.length?(l.isBuffer(K)||(K=l.from(K)),K.copy(j,q)):Uint8Array.prototype.set.call(j,K,q);else if(l.isBuffer(K))K.copy(j,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=K.length}return j};function c(T,d){if(l.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||mt(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const y=T.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&y===0)return 0;let j=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return gt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Fn(T).length;default:if(j)return L?-1:gt(T).length;d=(""+d).toLowerCase(),j=!0}}l.byteLength=c;function b(T,d,y){let L=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,d>>>=0,y<=d))return"";for(T||(T="utf8");;)switch(T){case"hex":return F(this,d,y);case"utf8":case"utf-8":return P(this,d,y);case"ascii":return z(this,d,y);case"latin1":case"binary":return B(this,d,y);case"base64":return k(this,d,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,d,y);default:if(L)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),L=!0}}l.prototype._isBuffer=!0;function A(T,d,y){const L=T[d];T[d]=T[y],T[y]=L}l.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<d;y+=2)A(this,y,y+1);return this},l.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<d;y+=4)A(this,y,y+3),A(this,y+1,y+2);return this},l.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<d;y+=8)A(this,y,y+7),A(this,y+1,y+6),A(this,y+2,y+5),A(this,y+3,y+4);return this},l.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?P(this,0,d):b.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(d){if(!l.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:l.compare(this,d)===0},l.prototype.inspect=function(){let d="";const y=t.INSPECT_MAX_BYTES;return d=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(d+=" ... "),"<Buffer "+d+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(d,y,L,j,q){if(mt(d,Uint8Array)&&(d=l.from(d,d.offset,d.byteLength)),!l.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(y===void 0&&(y=0),L===void 0&&(L=d?d.length:0),j===void 0&&(j=0),q===void 0&&(q=this.length),y<0||L>d.length||j<0||q>this.length)throw new RangeError("out of range index");if(j>=q&&y>=L)return 0;if(j>=q)return-1;if(y>=L)return 1;if(y>>>=0,L>>>=0,j>>>=0,q>>>=0,this===d)return 0;let K=q-j,ce=L-y;const we=Math.min(K,ce),xe=this.slice(j,q),Ee=d.slice(y,L);for(let pe=0;pe<we;++pe)if(xe[pe]!==Ee[pe]){K=xe[pe],ce=Ee[pe];break}return K<ce?-1:ce<K?1:0};function _(T,d,y,L,j){if(T.length===0)return-1;if(typeof y=="string"?(L=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,fr(y)&&(y=j?0:T.length-1),y<0&&(y=T.length+y),y>=T.length){if(j)return-1;y=T.length-1}else if(y<0)if(j)y=0;else return-1;if(typeof d=="string"&&(d=l.from(d,L)),l.isBuffer(d))return d.length===0?-1:C(T,d,y,L,j);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(T,d,y):Uint8Array.prototype.lastIndexOf.call(T,d,y):C(T,[d],y,L,j);throw new TypeError("val must be string, number or Buffer")}function C(T,d,y,L,j){let q=1,K=T.length,ce=d.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(T.length<2||d.length<2)return-1;q=2,K/=2,ce/=2,y/=2}function we(Ee,pe){return q===1?Ee[pe]:Ee.readUInt16BE(pe*q)}let xe;if(j){let Ee=-1;for(xe=y;xe<K;xe++)if(we(T,xe)===we(d,Ee===-1?0:xe-Ee)){if(Ee===-1&&(Ee=xe),xe-Ee+1===ce)return Ee*q}else Ee!==-1&&(xe-=xe-Ee),Ee=-1}else for(y+ce>K&&(y=K-ce),xe=y;xe>=0;xe--){let Ee=!0;for(let pe=0;pe<ce;pe++)if(we(T,xe+pe)!==we(d,pe)){Ee=!1;break}if(Ee)return xe}return-1}l.prototype.includes=function(d,y,L){return this.indexOf(d,y,L)!==-1},l.prototype.indexOf=function(d,y,L){return _(this,d,y,L,!0)},l.prototype.lastIndexOf=function(d,y,L){return _(this,d,y,L,!1)};function O(T,d,y,L){y=Number(y)||0;const j=T.length-y;L?(L=Number(L),L>j&&(L=j)):L=j;const q=d.length;L>q/2&&(L=q/2);let K;for(K=0;K<L;++K){const ce=parseInt(d.substr(K*2,2),16);if(fr(ce))return K;T[y+K]=ce}return K}function D(T,d,y,L){return Tn(gt(d,T.length-y),T,y,L)}function M(T,d,y,L){return Tn(Tt(d),T,y,L)}function G(T,d,y,L){return Tn(Fn(d),T,y,L)}function I(T,d,y,L){return Tn(Ss(d,T.length-y),T,y,L)}l.prototype.write=function(d,y,L,j){if(y===void 0)j="utf8",L=this.length,y=0;else if(L===void 0&&typeof y=="string")j=y,L=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(L)?(L=L>>>0,j===void 0&&(j="utf8")):(j=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-y;if((L===void 0||L>q)&&(L=q),d.length>0&&(L<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let K=!1;for(;;)switch(j){case"hex":return O(this,d,y,L);case"utf8":case"utf-8":return D(this,d,y,L);case"ascii":case"latin1":case"binary":return M(this,d,y,L);case"base64":return G(this,d,y,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,d,y,L);default:if(K)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),K=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(T,d,y){return d===0&&y===T.length?e.fromByteArray(T):e.fromByteArray(T.slice(d,y))}function P(T,d,y){y=Math.min(T.length,y);const L=[];let j=d;for(;j<y;){const q=T[j];let K=null,ce=q>239?4:q>223?3:q>191?2:1;if(j+ce<=y){let we,xe,Ee,pe;switch(ce){case 1:q<128&&(K=q);break;case 2:we=T[j+1],(we&192)===128&&(pe=(q&31)<<6|we&63,pe>127&&(K=pe));break;case 3:we=T[j+1],xe=T[j+2],(we&192)===128&&(xe&192)===128&&(pe=(q&15)<<12|(we&63)<<6|xe&63,pe>2047&&(pe<55296||pe>57343)&&(K=pe));break;case 4:we=T[j+1],xe=T[j+2],Ee=T[j+3],(we&192)===128&&(xe&192)===128&&(Ee&192)===128&&(pe=(q&15)<<18|(we&63)<<12|(xe&63)<<6|Ee&63,pe>65535&&pe<1114112&&(K=pe))}}K===null?(K=65533,ce=1):K>65535&&(K-=65536,L.push(K>>>10&1023|55296),K=56320|K&1023),L.push(K),j+=ce}return V(L)}const U=4096;function V(T){const d=T.length;if(d<=U)return String.fromCharCode.apply(String,T);let y="",L=0;for(;L<d;)y+=String.fromCharCode.apply(String,T.slice(L,L+=U));return y}function z(T,d,y){let L="";y=Math.min(T.length,y);for(let j=d;j<y;++j)L+=String.fromCharCode(T[j]&127);return L}function B(T,d,y){let L="";y=Math.min(T.length,y);for(let j=d;j<y;++j)L+=String.fromCharCode(T[j]);return L}function F(T,d,y){const L=T.length;(!d||d<0)&&(d=0),(!y||y<0||y>L)&&(y=L);let j="";for(let q=d;q<y;++q)j+=Ht[T[q]];return j}function $(T,d,y){const L=T.slice(d,y);let j="";for(let q=0;q<L.length-1;q+=2)j+=String.fromCharCode(L[q]+L[q+1]*256);return j}l.prototype.slice=function(d,y){const L=this.length;d=~~d,y=y===void 0?L:~~y,d<0?(d+=L,d<0&&(d=0)):d>L&&(d=L),y<0?(y+=L,y<0&&(y=0)):y>L&&(y=L),y<d&&(y=d);const j=this.subarray(d,y);return Object.setPrototypeOf(j,l.prototype),j};function Q(T,d,y){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+d>y)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(d,y,L){d=d>>>0,y=y>>>0,L||Q(d,y,this.length);let j=this[d],q=1,K=0;for(;++K<y&&(q*=256);)j+=this[d+K]*q;return j},l.prototype.readUintBE=l.prototype.readUIntBE=function(d,y,L){d=d>>>0,y=y>>>0,L||Q(d,y,this.length);let j=this[d+--y],q=1;for(;y>0&&(q*=256);)j+=this[d+--y]*q;return j},l.prototype.readUint8=l.prototype.readUInt8=function(d,y){return d=d>>>0,y||Q(d,1,this.length),this[d]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(d,y){return d=d>>>0,y||Q(d,2,this.length),this[d]|this[d+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(d,y){return d=d>>>0,y||Q(d,2,this.length),this[d]<<8|this[d+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(d,y){return d=d>>>0,y||Q(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(d,y){return d=d>>>0,y||Q(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},l.prototype.readBigUInt64LE=yt(function(d){d=d>>>0,et(d,"offset");const y=this[d],L=this[d+7];(y===void 0||L===void 0)&&Ot(d,this.length-8);const j=y+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,q=this[++d]+this[++d]*2**8+this[++d]*2**16+L*2**24;return BigInt(j)+(BigInt(q)<<BigInt(32))}),l.prototype.readBigUInt64BE=yt(function(d){d=d>>>0,et(d,"offset");const y=this[d],L=this[d+7];(y===void 0||L===void 0)&&Ot(d,this.length-8);const j=y*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],q=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+L;return(BigInt(j)<<BigInt(32))+BigInt(q)}),l.prototype.readIntLE=function(d,y,L){d=d>>>0,y=y>>>0,L||Q(d,y,this.length);let j=this[d],q=1,K=0;for(;++K<y&&(q*=256);)j+=this[d+K]*q;return q*=128,j>=q&&(j-=Math.pow(2,8*y)),j},l.prototype.readIntBE=function(d,y,L){d=d>>>0,y=y>>>0,L||Q(d,y,this.length);let j=y,q=1,K=this[d+--j];for(;j>0&&(q*=256);)K+=this[d+--j]*q;return q*=128,K>=q&&(K-=Math.pow(2,8*y)),K},l.prototype.readInt8=function(d,y){return d=d>>>0,y||Q(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},l.prototype.readInt16LE=function(d,y){d=d>>>0,y||Q(d,2,this.length);const L=this[d]|this[d+1]<<8;return L&32768?L|4294901760:L},l.prototype.readInt16BE=function(d,y){d=d>>>0,y||Q(d,2,this.length);const L=this[d+1]|this[d]<<8;return L&32768?L|4294901760:L},l.prototype.readInt32LE=function(d,y){return d=d>>>0,y||Q(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},l.prototype.readInt32BE=function(d,y){return d=d>>>0,y||Q(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},l.prototype.readBigInt64LE=yt(function(d){d=d>>>0,et(d,"offset");const y=this[d],L=this[d+7];(y===void 0||L===void 0)&&Ot(d,this.length-8);const j=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(L<<24);return(BigInt(j)<<BigInt(32))+BigInt(y+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),l.prototype.readBigInt64BE=yt(function(d){d=d>>>0,et(d,"offset");const y=this[d],L=this[d+7];(y===void 0||L===void 0)&&Ot(d,this.length-8);const j=(y<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(j)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+L)}),l.prototype.readFloatLE=function(d,y){return d=d>>>0,y||Q(d,4,this.length),n.read(this,d,!0,23,4)},l.prototype.readFloatBE=function(d,y){return d=d>>>0,y||Q(d,4,this.length),n.read(this,d,!1,23,4)},l.prototype.readDoubleLE=function(d,y){return d=d>>>0,y||Q(d,8,this.length),n.read(this,d,!0,52,8)},l.prototype.readDoubleBE=function(d,y){return d=d>>>0,y||Q(d,8,this.length),n.read(this,d,!1,52,8)};function J(T,d,y,L,j,q){if(!l.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>j||d<q)throw new RangeError('"value" argument is out of bounds');if(y+L>T.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(d,y,L,j){if(d=+d,y=y>>>0,L=L>>>0,!j){const ce=Math.pow(2,8*L)-1;J(this,d,y,L,ce,0)}let q=1,K=0;for(this[y]=d&255;++K<L&&(q*=256);)this[y+K]=d/q&255;return y+L},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(d,y,L,j){if(d=+d,y=y>>>0,L=L>>>0,!j){const ce=Math.pow(2,8*L)-1;J(this,d,y,L,ce,0)}let q=L-1,K=1;for(this[y+q]=d&255;--q>=0&&(K*=256);)this[y+q]=d/K&255;return y+L},l.prototype.writeUint8=l.prototype.writeUInt8=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,1,255,0),this[y]=d&255,y+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,2,65535,0),this[y]=d&255,this[y+1]=d>>>8,y+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,2,65535,0),this[y]=d>>>8,this[y+1]=d&255,y+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,4,4294967295,0),this[y+3]=d>>>24,this[y+2]=d>>>16,this[y+1]=d>>>8,this[y]=d&255,y+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,4,4294967295,0),this[y]=d>>>24,this[y+1]=d>>>16,this[y+2]=d>>>8,this[y+3]=d&255,y+4};function le(T,d,y,L,j){pt(d,L,j,T,y,7);let q=Number(d&BigInt(4294967295));T[y++]=q,q=q>>8,T[y++]=q,q=q>>8,T[y++]=q,q=q>>8,T[y++]=q;let K=Number(d>>BigInt(32)&BigInt(4294967295));return T[y++]=K,K=K>>8,T[y++]=K,K=K>>8,T[y++]=K,K=K>>8,T[y++]=K,y}function ue(T,d,y,L,j){pt(d,L,j,T,y,7);let q=Number(d&BigInt(4294967295));T[y+7]=q,q=q>>8,T[y+6]=q,q=q>>8,T[y+5]=q,q=q>>8,T[y+4]=q;let K=Number(d>>BigInt(32)&BigInt(4294967295));return T[y+3]=K,K=K>>8,T[y+2]=K,K=K>>8,T[y+1]=K,K=K>>8,T[y]=K,y+8}l.prototype.writeBigUInt64LE=yt(function(d,y=0){return le(this,d,y,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=yt(function(d,y=0){return ue(this,d,y,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(d,y,L,j){if(d=+d,y=y>>>0,!j){const we=Math.pow(2,8*L-1);J(this,d,y,L,we-1,-we)}let q=0,K=1,ce=0;for(this[y]=d&255;++q<L&&(K*=256);)d<0&&ce===0&&this[y+q-1]!==0&&(ce=1),this[y+q]=(d/K>>0)-ce&255;return y+L},l.prototype.writeIntBE=function(d,y,L,j){if(d=+d,y=y>>>0,!j){const we=Math.pow(2,8*L-1);J(this,d,y,L,we-1,-we)}let q=L-1,K=1,ce=0;for(this[y+q]=d&255;--q>=0&&(K*=256);)d<0&&ce===0&&this[y+q+1]!==0&&(ce=1),this[y+q]=(d/K>>0)-ce&255;return y+L},l.prototype.writeInt8=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,1,127,-128),d<0&&(d=255+d+1),this[y]=d&255,y+1},l.prototype.writeInt16LE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,2,32767,-32768),this[y]=d&255,this[y+1]=d>>>8,y+2},l.prototype.writeInt16BE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,2,32767,-32768),this[y]=d>>>8,this[y+1]=d&255,y+2},l.prototype.writeInt32LE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,4,2147483647,-2147483648),this[y]=d&255,this[y+1]=d>>>8,this[y+2]=d>>>16,this[y+3]=d>>>24,y+4},l.prototype.writeInt32BE=function(d,y,L){return d=+d,y=y>>>0,L||J(this,d,y,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[y]=d>>>24,this[y+1]=d>>>16,this[y+2]=d>>>8,this[y+3]=d&255,y+4},l.prototype.writeBigInt64LE=yt(function(d,y=0){return le(this,d,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=yt(function(d,y=0){return ue(this,d,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(T,d,y,L,j,q){if(y+L>T.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function he(T,d,y,L,j){return d=+d,y=y>>>0,j||se(T,d,y,4),n.write(T,d,y,L,23,4),y+4}l.prototype.writeFloatLE=function(d,y,L){return he(this,d,y,!0,L)},l.prototype.writeFloatBE=function(d,y,L){return he(this,d,y,!1,L)};function Ue(T,d,y,L,j){return d=+d,y=y>>>0,j||se(T,d,y,8),n.write(T,d,y,L,52,8),y+8}l.prototype.writeDoubleLE=function(d,y,L){return Ue(this,d,y,!0,L)},l.prototype.writeDoubleBE=function(d,y,L){return Ue(this,d,y,!1,L)},l.prototype.copy=function(d,y,L,j){if(!l.isBuffer(d))throw new TypeError("argument should be a Buffer");if(L||(L=0),!j&&j!==0&&(j=this.length),y>=d.length&&(y=d.length),y||(y=0),j>0&&j<L&&(j=L),j===L||d.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),d.length-y<j-L&&(j=d.length-y+L);const q=j-L;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,L,j):Uint8Array.prototype.set.call(d,this.subarray(L,j),y),q},l.prototype.fill=function(d,y,L,j){if(typeof d=="string"){if(typeof y=="string"?(j=y,y=0,L=this.length):typeof L=="string"&&(j=L,L=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!l.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(d.length===1){const K=d.charCodeAt(0);(j==="utf8"&&K<128||j==="latin1")&&(d=K)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(y<0||this.length<y||this.length<L)throw new RangeError("Out of range index");if(L<=y)return this;y=y>>>0,L=L===void 0?this.length:L>>>0,d||(d=0);let q;if(typeof d=="number")for(q=y;q<L;++q)this[q]=d;else{const K=l.isBuffer(d)?d:l.from(d,j),ce=K.length;if(ce===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(q=0;q<L-y;++q)this[q+y]=K[q%ce]}return this};const Se={};function dt(T,d,y){Se[T]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(T,d){return`The "${T}" argument must be of type number. Received type ${typeof d}`},TypeError),dt("ERR_OUT_OF_RANGE",function(T,d,y){let L=`The value of "${T}" is out of range.`,j=y;return Number.isInteger(y)&&Math.abs(y)>2**32?j=zt(String(y)):typeof y=="bigint"&&(j=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(j=zt(j)),j+="n"),L+=` It must be ${d}. Received ${j}`,L},RangeError);function zt(T){let d="",y=T.length;const L=T[0]==="-"?1:0;for(;y>=L+4;y-=3)d=`_${T.slice(y-3,y)}${d}`;return`${T.slice(0,y)}${d}`}function Ge(T,d,y){et(d,"offset"),(T[d]===void 0||T[d+y]===void 0)&&Ot(d,T.length-(y+1))}function pt(T,d,y,L,j,q){if(T>y||T<d){const K=typeof d=="bigint"?"n":"";let ce;throw d===0||d===BigInt(0)?ce=`>= 0${K} and < 2${K} ** ${(q+1)*8}${K}`:ce=`>= -(2${K} ** ${(q+1)*8-1}${K}) and < 2 ** ${(q+1)*8-1}${K}`,new Se.ERR_OUT_OF_RANGE("value",ce,T)}Ge(L,j,q)}function et(T,d){if(typeof T!="number")throw new Se.ERR_INVALID_ARG_TYPE(d,"number",T)}function Ot(T,d,y){throw Math.floor(T)!==T?(et(T,y),new Se.ERR_OUT_OF_RANGE("offset","an integer",T)):d<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,T)}const Te=/[^+/0-9A-Za-z-_]/g;function tt(T){if(T=T.split("=")[0],T=T.trim().replace(Te,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function gt(T,d){d=d||1/0;let y;const L=T.length;let j=null;const q=[];for(let K=0;K<L;++K){if(y=T.charCodeAt(K),y>55295&&y<57344){if(!j){if(y>56319){(d-=3)>-1&&q.push(239,191,189);continue}else if(K+1===L){(d-=3)>-1&&q.push(239,191,189);continue}j=y;continue}if(y<56320){(d-=3)>-1&&q.push(239,191,189),j=y;continue}y=(j-55296<<10|y-56320)+65536}else j&&(d-=3)>-1&&q.push(239,191,189);if(j=null,y<128){if((d-=1)<0)break;q.push(y)}else if(y<2048){if((d-=2)<0)break;q.push(y>>6|192,y&63|128)}else if(y<65536){if((d-=3)<0)break;q.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((d-=4)<0)break;q.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return q}function Tt(T){const d=[];for(let y=0;y<T.length;++y)d.push(T.charCodeAt(y)&255);return d}function Ss(T,d){let y,L,j;const q=[];for(let K=0;K<T.length&&!((d-=2)<0);++K)y=T.charCodeAt(K),L=y>>8,j=y%256,q.push(j),q.push(L);return q}function Fn(T){return e.toByteArray(tt(T))}function Tn(T,d,y,L){let j;for(j=0;j<L&&!(j+y>=d.length||j>=T.length);++j)d[j+y]=T[j];return j}function mt(T,d){return T instanceof d||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===d.name}function fr(T){return T!==T}const Ht=function(){const T="0123456789abcdef",d=new Array(256);for(let y=0;y<16;++y){const L=y*16;for(let j=0;j<16;++j)d[L+j]=T[y]+T[j]}return d}();function yt(T){return typeof BigInt>"u"?Ts:T}function Ts(){throw new Error("BigInt not supported")}})(If);wn.sha512Sync=(...t)=>Wa(wn.concatBytes(...t));wn.sha512Async=(...t)=>Promise.resolve(Wa(wn.concatBytes(...t)));const ts=[237,1];async function bx(){try{const t=V2.randomPrivateKey(),e=await G2(t),n=new Uint8Array(ts.length+e.length);n.set(ts,0),n.set(e,ts.length);const r=m1.encode("base58btc",n),s=`did:key:${If.Buffer.from(r).toString("utf8")}`,o=If.Buffer.from(t).toString("hex");return console.log("Generated DID:",s),{did:s,privateKey:o}}catch(t){throw console.error("Error generating DID:",t),new Error("Failed to generate DID")}}function vc(t){try{if(!t.startsWith("did:key:"))throw new Error("Invalid DID format: must start with did:key:");const e=t.split("did:key:")[1];if(!e||!e.startsWith("z"))throw new Error("Invalid DID: identifier must be multibase-encoded (base58btc, prefix z)");const n=m1.decode(e);if(console.log("Decoded DID identifier bytes:",Array.from(n)),n[0]!==ts[0]||n[1]!==ts[1])throw new Error("Invalid DID: key type must be Ed25519");if(n.length!==32+ts.length)throw new Error("Invalid DID: Ed25519 public key must be 32 bytes");return!0}catch(e){return console.error("DID validation error:",e.message),!1}}var Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Js=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rl=0;Rl<Ki.length;Rl++)Js[Ki.charCodeAt(Rl)]=Rl;var wc=function(t){var e=new Uint8Array(t),n,r=e.length,i="";for(n=0;n<r;n+=3)i+=Ki[e[n]>>2],i+=Ki[(e[n]&3)<<4|e[n+1]>>4],i+=Ki[(e[n+1]&15)<<2|e[n+2]>>6],i+=Ki[e[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},xc=function(t){var e=t.length*.75,n=t.length,r,i=0,s,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=new ArrayBuffer(e),f=new Uint8Array(u);for(r=0;r<n;r+=4)s=Js[t.charCodeAt(r)],o=Js[t.charCodeAt(r+1)],l=Js[t.charCodeAt(r+2)],a=Js[t.charCodeAt(r+3)],f[i++]=s<<2|o>>4,f[i++]=(o&15)<<4|l>>2,f[i++]=(l&3)<<6|a&63;return u};wn.sha512Sync=(...t)=>Wa(wn.concatBytes(...t));wn.sha512Async=(...t)=>Promise.resolve(Wa(wn.concatBytes(...t)));function Of(t){return new TextEncoder().encode(t).buffer}function Sx(t){return new TextDecoder().decode(t)}async function Tx(t,e){try{const n=await crypto.subtle.importKey("raw",Of(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),r=crypto.getRandomValues(new Uint8Array(16)),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},i,Of(t)),l={salt:wc(r.buffer),iv:wc(s.buffer),encryptedData:wc(o)};return console.log("crypto: Exported data:",l),JSON.stringify(l)}catch(n){throw console.error("crypto: Failed to export data:",n),new Error("Failed to export data: "+(n.message||"Unknown error"))}}async function Ax(t,e){try{const n=JSON.parse(t),{salt:r,iv:i,encryptedData:s}=n,o=await crypto.subtle.importKey("raw",Of(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),l=await crypto.subtle.deriveKey({name:"PBKDF2",salt:xc(r),iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["decrypt"]),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:xc(i)},l,xc(s)),u=Sx(a);return console.log("crypto: Decrypted data:",u),u}catch(n){throw console.error("crypto: Failed to import data:",n),new Error("Failed to decrypt data: "+(n.message||"Unknown error"))}}const kx=()=>{const{storage:t,error:e,isLoading:n}=d1(),[r,i]=ie.useState(null),[s,o]=ie.useState(null),[l,a]=ie.useState(null),[u,f]=ie.useState(!0),[h,p]=ie.useState(null);ie.useEffect(()=>{(async()=>{if(!n){if(!t){p("Storage not initialized"),f(!1);return}try{const b=await t.getCurrentDID();if(b)if(vc(b)){i(b),console.log("useUserProfile: Loaded DID from storage:",b);const A=await new Promise(C=>{chrome.storage.local.get(["privateKey"],O=>{C(O.privateKey||null)})});A?(o(A),console.log("useUserProfile: Loaded private key from storage")):console.warn("useUserProfile: Private key not found in storage");const _=await t.getProfile(b);_?(a(_),console.log("useUserProfile: Loaded profile from storage:",_)):console.warn("useUserProfile: Profile not found for DID:",b)}else console.warn("useUserProfile: Invalid DID in storage, clearing..."),await t.clearCurrentDID(),await new Promise(A=>{chrome.storage.local.remove("privateKey",()=>A())})}catch(b){console.error("useUserProfile: Failed to initialize:",b),p("Failed to initialize user profile")}finally{f(!1)}}})()},[t,n]);const w=ie.useCallback(async()=>{if(n){p("Storage is still initializing");return}if(!t){p("Storage not initialized");return}try{if(f(!0),p(null),!r){const{did:c,privateKey:b}=await bx();if(vc(c))i(c),o(b),await t.setCurrentDID(c),await new Promise(A=>{chrome.storage.local.set({privateKey:b},()=>A())}),console.log("useUserProfile: Created and saved new DID:",c);else throw new Error("Generated DID is invalid")}}catch(c){console.error("useUserProfile: Authentication failed:",c),p("Authentication failed")}finally{f(!1)}},[t,n,r]),m=ie.useCallback(async()=>{if(n){p("Storage is still initializing");return}if(!t){p("Storage not initialized");return}try{await t.clearCurrentDID(),await new Promise(c=>{chrome.storage.local.remove("privateKey",()=>c())}),i(null),o(null),a(null),p(null),console.log("useUserProfile: Signed out")}catch(c){console.error("useUserProfile: Sign out failed:",c),p("Sign out failed")}},[t,n]),E=ie.useCallback(async c=>{if(n)throw new Error("Storage is still initializing");if(!t)throw new Error("Storage not initialized");if(!r||!s)throw new Error("Not authenticated");try{const A=JSON.stringify({did:r,privateKey:s,profile:l||{did:r,handle:"Unknown"}}),_=await Tx(A,c);return console.log("useUserProfile: Exported identity:",_),_}catch(b){throw console.error("useUserProfile: Export identity failed:",b),new Error("Failed to export identity: "+(b.message||"Unknown error"))}},[n,t,r,s,l]),S=ie.useCallback(async(c,b)=>{if(n)throw new Error("Storage is still initializing");if(!t)throw new Error("Storage not initialized");try{const A=await Ax(c,b),{did:_,privateKey:C,profile:O}=JSON.parse(A);if(!vc(_))throw new Error("Invalid DID format");if(i(_),o(C),await t.setCurrentDID(_),await new Promise(D=>{chrome.storage.local.set({privateKey:C},()=>D())}),console.log("useUserProfile: Imported identity:",_),O&&O.did)await t.saveProfile(O),a(O),console.log("useUserProfile: Restored profile after import:",O);else{const D=await t.getProfile(_);D&&(a(D),console.log("useUserProfile: Loaded profile after import:",D))}}catch(A){console.error("useUserProfile: Import identity failed:",A);let _="Failed to import identity";throw A.message.includes("OperationError")||A.message.includes("Failed to decrypt")?_="Failed to import identity: Incorrect passphrase or corrupted data":A.message.includes("Invalid DID format")?_="Failed to import identity: Invalid DID format":_="Failed to import identity: "+(A.message||"Unknown error"),new Error(_)}},[n,t]),x=ie.useCallback(async(c,b)=>{if(n){p("Storage is still initializing");return}if(!t||!r){p("Not authenticated or storage not initialized");return}try{const A={did:r,handle:c,profilePicture:b};console.log("useUserProfile: Saving profile to storage:",A),await t.saveProfile(A),a(A),p(null)}catch(A){console.error("useUserProfile: Failed to create profile:",A),p("Failed to create profile")}},[n,t,r]),v=ie.useCallback(async(c,b)=>{if(n){p("Storage is still initializing");return}if(!t||!r){p("Not authenticated or storage not initialized");return}try{const A={did:r,handle:c,profilePicture:b};console.log("useUserProfile: Updating profile in storage:",A),await t.saveProfile(A),a(A),p(null)}catch(A){console.error("useUserProfile: Failed to update profile:",A),p("Failed to update profile")}},[n,t,r]);return{did:r,profile:l,loading:u||n,error:h||e,authenticate:w,signOut:m,exportIdentity:E,importIdentity:S,createProfile:x,updateProfile:v}},Nx=({url:t,did:e})=>{const{storage:n,error:r,isLoading:i}=d1(),[s,o]=ie.useState([]),[l,a]=ie.useState({}),[u,f]=ie.useState(null),[h,p]=ie.useState(!1);ie.useEffect(()=>{if(!t){console.log("useAnnotations: No URL provided, skipping fetch"),p(!1);return}if(i){console.log("useAnnotations: Waiting for storage to initialize"),p(!0);return}if(!n){console.error("useAnnotations: Storage not initialized"),f(r||"Storage not initialized"),p(!1);return}const S=Xr(t);console.log("useAnnotations: Fetching annotations for URL:",S),p(!0),f(null);const x=v=>{o(v)};return n.getAnnotations(S,x).then(v=>{console.log("useAnnotations: Fetched annotations:",v),o(v);const c=v.map(b=>n.getProfile(b.author).then(A=>({did:b.author,profile:A})));Promise.all(c).then(b=>{const A=b.reduce((_,{did:C,profile:O})=>(O&&(_[C]=O),_),{});a(_=>({..._,...A}))})}).catch(v=>{console.error("useAnnotations: Failed to fetch annotations:",v),f(v.message||"Failed to fetch annotations")}).finally(()=>{p(!1)}),()=>{console.log("useAnnotations: Cleaning up listeners for URL:",S),n.cleanupAnnotationsListeners(S)}},[t,n,i,r]);const w=ie.useCallback(async S=>{if(!e)throw new Error("User not authenticated");if(!n)throw new Error("Storage not initialized");if(!t)throw new Error("No URL provided for annotation");const x={id:Date.now().toString(),url:Xr(t),content:S,author:e,timestamp:Date.now(),comments:[]};await n.saveAnnotation(x),o(v=>[...v,x])},[e,t,n]),m=ie.useCallback(async S=>{if(!n)throw new Error("Storage not initialized");if(!t)throw new Error("No URL provided for deletion");await n.deleteAnnotation(Xr(t),S),o(x=>x.filter(v=>v.id!==S))},[t,n]),E=ie.useCallback(async(S,x)=>{if(!e)throw new Error("User not authenticated");if(!n)throw new Error("Storage not initialized");if(!t)throw new Error("No URL provided for comment");const v={id:Date.now().toString(),content:x,author:e,timestamp:Date.now()};await n.saveComment(Xr(t),S,v),o(c=>c.map(b=>b.id===S?{...b,comments:[...b.comments||[],v]}:b))},[e,t,n]);return{annotations:s,profiles:l,error:u||r,loading:h||i,handleSaveAnnotation:w,handleDeleteAnnotation:m,handleSaveComment:E}};async function _x(t){try{const e=await fetch("https://citizen-x-bootsrap.onrender.com/api/shorten",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})});if(!e.ok)throw new Error(`Failed to shorten URL: ${e.status} ${e.statusText}`);return(await e.json()).shortUrl}catch(e){throw console.error("Error shortening URL:",e),e}}function Yp(t){const e=document.createElement("div");e.innerHTML=t;let n=e.textContent||e.innerText||"";return n=n.replace(/\s+/g," ").trim(),n}var k1=typeof global=="object"&&global&&global.Object===Object&&global,Cx=typeof self=="object"&&self&&self.Object===Object&&self,qn=k1||Cx||Function("return this")(),jr=qn.Symbol,N1=Object.prototype,Lx=N1.hasOwnProperty,Ix=N1.toString,Vs=jr?jr.toStringTag:void 0;function Ox(t){var e=Lx.call(t,Vs),n=t[Vs];try{t[Vs]=void 0;var r=!0}catch{}var i=Ix.call(t);return r&&(e?t[Vs]=n:delete t[Vs]),i}var Rx=Object.prototype,Px=Rx.toString;function Dx(t){return Px.call(t)}var Bx="[object Null]",jx="[object Undefined]",Jp=jr?jr.toStringTag:void 0;function bs(t){return t==null?t===void 0?jx:Bx:Jp&&Jp in Object(t)?Ox(t):Dx(t)}function sr(t){return t!=null&&typeof t=="object"}var ai=Array.isArray;function qr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function _1(t){return t}var Ux="[object AsyncFunction]",Mx="[object Function]",$x="[object GeneratorFunction]",qx="[object Proxy]";function ld(t){if(!qr(t))return!1;var e=bs(t);return e==Mx||e==$x||e==Ux||e==qx}var Ec=qn["__core-js_shared__"],eg=function(){var t=/[^.]+$/.exec(Ec&&Ec.keys&&Ec.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Fx(t){return!!eg&&eg in t}var zx=Function.prototype,Hx=zx.toString;function di(t){if(t!=null){try{return Hx.call(t)}catch{}try{return t+""}catch{}}return""}var Gx=/[\\^$.*+?()[\]{}|]/g,Vx=/^\[object .+?Constructor\]$/,Kx=Function.prototype,Wx=Object.prototype,Qx=Kx.toString,Zx=Wx.hasOwnProperty,Xx=RegExp("^"+Qx.call(Zx).replace(Gx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yx(t){if(!qr(t)||Fx(t))return!1;var e=ld(t)?Xx:Vx;return e.test(di(t))}function Jx(t,e){return t==null?void 0:t[e]}function pi(t,e){var n=Jx(t,e);return Yx(n)?n:void 0}var Rf=pi(qn,"WeakMap"),tg=Object.create,eE=function(){function t(){}return function(e){if(!qr(e))return{};if(tg)return tg(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function tE(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function nE(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var rE=800,iE=16,sE=Date.now;function oE(t){var e=0,n=0;return function(){var r=sE(),i=iE-(r-n);if(n=r,i>0){if(++e>=rE)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function lE(t){return function(){return t}}var ka=function(){try{var t=pi(Object,"defineProperty");return t({},"",{}),t}catch{}}(),aE=ka?function(t,e){return ka(t,"toString",{configurable:!0,enumerable:!1,value:lE(e),writable:!0})}:_1,uE=oE(aE);function cE(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var fE=9007199254740991,hE=/^(?:0|[1-9]\d*)$/;function C1(t,e){var n=typeof t;return e=e??fE,!!e&&(n=="number"||n!="symbol"&&hE.test(t))&&t>-1&&t%1==0&&t<e}function ad(t,e,n){e=="__proto__"&&ka?ka(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Wo(t,e){return t===e||t!==t&&e!==e}var dE=Object.prototype,pE=dE.hasOwnProperty;function L1(t,e,n){var r=t[e];(!(pE.call(t,e)&&Wo(r,n))||n===void 0&&!(e in t))&&ad(t,e,n)}function gE(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],a=void 0;a===void 0&&(a=t[l]),i?ad(n,l,a):L1(n,l,a)}return n}var ng=Math.max;function mE(t,e,n){return e=ng(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=ng(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),tE(t,this,l)}}function yE(t,e){return uE(mE(t,e,_1),t+"")}var vE=9007199254740991;function I1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vE}function Za(t){return t!=null&&I1(t.length)&&!ld(t)}function wE(t,e,n){if(!qr(n))return!1;var r=typeof e;return(r=="number"?Za(n)&&C1(e,n.length):r=="string"&&e in n)?Wo(n[e],t):!1}function xE(t){return yE(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&wE(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}var EE=Object.prototype;function ud(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||EE;return t===n}function bE(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var SE="[object Arguments]";function rg(t){return sr(t)&&bs(t)==SE}var O1=Object.prototype,TE=O1.hasOwnProperty,AE=O1.propertyIsEnumerable,Pf=rg(function(){return arguments}())?rg:function(t){return sr(t)&&TE.call(t,"callee")&&!AE.call(t,"callee")};function kE(){return!1}var R1=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,ig=R1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,NE=ig&&ig.exports===R1,sg=NE?qn.Buffer:void 0,_E=sg?sg.isBuffer:void 0,Do=_E||kE,CE="[object Arguments]",LE="[object Array]",IE="[object Boolean]",OE="[object Date]",RE="[object Error]",PE="[object Function]",DE="[object Map]",BE="[object Number]",jE="[object Object]",UE="[object RegExp]",ME="[object Set]",$E="[object String]",qE="[object WeakMap]",FE="[object ArrayBuffer]",zE="[object DataView]",HE="[object Float32Array]",GE="[object Float64Array]",VE="[object Int8Array]",KE="[object Int16Array]",WE="[object Int32Array]",QE="[object Uint8Array]",ZE="[object Uint8ClampedArray]",XE="[object Uint16Array]",YE="[object Uint32Array]",_e={};_e[HE]=_e[GE]=_e[VE]=_e[KE]=_e[WE]=_e[QE]=_e[ZE]=_e[XE]=_e[YE]=!0;_e[CE]=_e[LE]=_e[FE]=_e[IE]=_e[zE]=_e[OE]=_e[RE]=_e[PE]=_e[DE]=_e[BE]=_e[jE]=_e[UE]=_e[ME]=_e[$E]=_e[qE]=!1;function JE(t){return sr(t)&&I1(t.length)&&!!_e[bs(t)]}function cd(t){return function(e){return t(e)}}var P1=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,ho=P1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,eb=ho&&ho.exports===P1,bc=eb&&k1.process,ps=function(){try{var t=ho&&ho.require&&ho.require("util").types;return t||bc&&bc.binding&&bc.binding("util")}catch{}}(),og=ps&&ps.isTypedArray,fd=og?cd(og):JE,tb=Object.prototype,nb=tb.hasOwnProperty;function D1(t,e){var n=ai(t),r=!n&&Pf(t),i=!n&&!r&&Do(t),s=!n&&!r&&!i&&fd(t),o=n||r||i||s,l=o?bE(t.length,String):[],a=l.length;for(var u in t)(e||nb.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||C1(u,a)))&&l.push(u);return l}function B1(t,e){return function(n){return t(e(n))}}var rb=B1(Object.keys,Object),ib=Object.prototype,sb=ib.hasOwnProperty;function ob(t){if(!ud(t))return rb(t);var e=[];for(var n in Object(t))sb.call(t,n)&&n!="constructor"&&e.push(n);return e}function lb(t){return Za(t)?D1(t):ob(t)}function ab(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ub=Object.prototype,cb=ub.hasOwnProperty;function fb(t){if(!qr(t))return ab(t);var e=ud(t),n=[];for(var r in t)r=="constructor"&&(e||!cb.call(t,r))||n.push(r);return n}function j1(t){return Za(t)?D1(t,!0):fb(t)}var Bo=pi(Object,"create");function hb(){this.__data__=Bo?Bo(null):{},this.size=0}function db(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var pb="__lodash_hash_undefined__",gb=Object.prototype,mb=gb.hasOwnProperty;function yb(t){var e=this.__data__;if(Bo){var n=e[t];return n===pb?void 0:n}return mb.call(e,t)?e[t]:void 0}var vb=Object.prototype,wb=vb.hasOwnProperty;function xb(t){var e=this.__data__;return Bo?e[t]!==void 0:wb.call(e,t)}var Eb="__lodash_hash_undefined__";function bb(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bo&&e===void 0?Eb:e,this}function ui(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ui.prototype.clear=hb;ui.prototype.delete=db;ui.prototype.get=yb;ui.prototype.has=xb;ui.prototype.set=bb;function Sb(){this.__data__=[],this.size=0}function Xa(t,e){for(var n=t.length;n--;)if(Wo(t[n][0],e))return n;return-1}var Tb=Array.prototype,Ab=Tb.splice;function kb(t){var e=this.__data__,n=Xa(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Ab.call(e,n,1),--this.size,!0}function Nb(t){var e=this.__data__,n=Xa(e,t);return n<0?void 0:e[n][1]}function _b(t){return Xa(this.__data__,t)>-1}function Cb(t,e){var n=this.__data__,r=Xa(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ur(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ur.prototype.clear=Sb;ur.prototype.delete=kb;ur.prototype.get=Nb;ur.prototype.has=_b;ur.prototype.set=Cb;var jo=pi(qn,"Map");function Lb(){this.size=0,this.__data__={hash:new ui,map:new(jo||ur),string:new ui}}function Ib(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ya(t,e){var n=t.__data__;return Ib(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Ob(t){var e=Ya(this,t).delete(t);return this.size-=e?1:0,e}function Rb(t){return Ya(this,t).get(t)}function Pb(t){return Ya(this,t).has(t)}function Db(t,e){var n=Ya(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function gi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gi.prototype.clear=Lb;gi.prototype.delete=Ob;gi.prototype.get=Rb;gi.prototype.has=Pb;gi.prototype.set=Db;function Bb(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var U1=B1(Object.getPrototypeOf,Object),jb="[object Object]",Ub=Function.prototype,Mb=Object.prototype,M1=Ub.toString,$b=Mb.hasOwnProperty,qb=M1.call(Object);function Fb(t){if(!sr(t)||bs(t)!=jb)return!1;var e=U1(t);if(e===null)return!0;var n=$b.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&M1.call(n)==qb}function zb(){this.__data__=new ur,this.size=0}function Hb(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Gb(t){return this.__data__.get(t)}function Vb(t){return this.__data__.has(t)}var Kb=200;function Wb(t,e){var n=this.__data__;if(n instanceof ur){var r=n.__data__;if(!jo||r.length<Kb-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new gi(r)}return n.set(t,e),this.size=n.size,this}function jn(t){var e=this.__data__=new ur(t);this.size=e.size}jn.prototype.clear=zb;jn.prototype.delete=Hb;jn.prototype.get=Gb;jn.prototype.has=Vb;jn.prototype.set=Wb;var $1=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,lg=$1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,Qb=lg&&lg.exports===$1,ag=Qb?qn.Buffer:void 0,ug=ag?ag.allocUnsafe:void 0;function q1(t,e){if(e)return t.slice();var n=t.length,r=ug?ug(n):new t.constructor(n);return t.copy(r),r}function Zb(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function Xb(){return[]}var Yb=Object.prototype,Jb=Yb.propertyIsEnumerable,cg=Object.getOwnPropertySymbols,eS=cg?function(t){return t==null?[]:(t=Object(t),Zb(cg(t),function(e){return Jb.call(t,e)}))}:Xb;function tS(t,e,n){var r=e(t);return ai(t)?r:Bb(r,n(t))}function Df(t){return tS(t,lb,eS)}var Bf=pi(qn,"DataView"),jf=pi(qn,"Promise"),Uf=pi(qn,"Set"),fg="[object Map]",nS="[object Object]",hg="[object Promise]",dg="[object Set]",pg="[object WeakMap]",gg="[object DataView]",rS=di(Bf),iS=di(jo),sS=di(jf),oS=di(Uf),lS=di(Rf),dn=bs;(Bf&&dn(new Bf(new ArrayBuffer(1)))!=gg||jo&&dn(new jo)!=fg||jf&&dn(jf.resolve())!=hg||Uf&&dn(new Uf)!=dg||Rf&&dn(new Rf)!=pg)&&(dn=function(t){var e=bs(t),n=e==nS?t.constructor:void 0,r=n?di(n):"";if(r)switch(r){case rS:return gg;case iS:return fg;case sS:return hg;case oS:return dg;case lS:return pg}return e});var aS=Object.prototype,uS=aS.hasOwnProperty;function cS(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&uS.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Na=qn.Uint8Array;function hd(t){var e=new t.constructor(t.byteLength);return new Na(e).set(new Na(t)),e}function fS(t,e){var n=hd(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var hS=/\w*$/;function dS(t){var e=new t.constructor(t.source,hS.exec(t));return e.lastIndex=t.lastIndex,e}var mg=jr?jr.prototype:void 0,yg=mg?mg.valueOf:void 0;function pS(t){return yg?Object(yg.call(t)):{}}function F1(t,e){var n=e?hd(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var gS="[object Boolean]",mS="[object Date]",yS="[object Map]",vS="[object Number]",wS="[object RegExp]",xS="[object Set]",ES="[object String]",bS="[object Symbol]",SS="[object ArrayBuffer]",TS="[object DataView]",AS="[object Float32Array]",kS="[object Float64Array]",NS="[object Int8Array]",_S="[object Int16Array]",CS="[object Int32Array]",LS="[object Uint8Array]",IS="[object Uint8ClampedArray]",OS="[object Uint16Array]",RS="[object Uint32Array]";function PS(t,e,n){var r=t.constructor;switch(e){case SS:return hd(t);case gS:case mS:return new r(+t);case TS:return fS(t);case AS:case kS:case NS:case _S:case CS:case LS:case IS:case OS:case RS:return F1(t,n);case yS:return new r;case vS:case ES:return new r(t);case wS:return dS(t);case xS:return new r;case bS:return pS(t)}}function z1(t){return typeof t.constructor=="function"&&!ud(t)?eE(U1(t)):{}}var DS="[object Map]";function BS(t){return sr(t)&&dn(t)==DS}var vg=ps&&ps.isMap,jS=vg?cd(vg):BS,US="[object Set]";function MS(t){return sr(t)&&dn(t)==US}var wg=ps&&ps.isSet,$S=wg?cd(wg):MS,qS=1,H1="[object Arguments]",FS="[object Array]",zS="[object Boolean]",HS="[object Date]",GS="[object Error]",G1="[object Function]",VS="[object GeneratorFunction]",KS="[object Map]",WS="[object Number]",V1="[object Object]",QS="[object RegExp]",ZS="[object Set]",XS="[object String]",YS="[object Symbol]",JS="[object WeakMap]",e3="[object ArrayBuffer]",t3="[object DataView]",n3="[object Float32Array]",r3="[object Float64Array]",i3="[object Int8Array]",s3="[object Int16Array]",o3="[object Int32Array]",l3="[object Uint8Array]",a3="[object Uint8ClampedArray]",u3="[object Uint16Array]",c3="[object Uint32Array]",Ae={};Ae[H1]=Ae[FS]=Ae[e3]=Ae[t3]=Ae[zS]=Ae[HS]=Ae[n3]=Ae[r3]=Ae[i3]=Ae[s3]=Ae[o3]=Ae[KS]=Ae[WS]=Ae[V1]=Ae[QS]=Ae[ZS]=Ae[XS]=Ae[YS]=Ae[l3]=Ae[a3]=Ae[u3]=Ae[c3]=!0;Ae[GS]=Ae[G1]=Ae[JS]=!1;function Jl(t,e,n,r,i,s){var o,l=e&qS;if(o!==void 0)return o;if(!qr(t))return t;var a=ai(t);if(a)o=cS(t);else{var u=dn(t),f=u==G1||u==VS;if(Do(t))return q1(t,l);if(u==V1||u==H1||f&&!i)o=f?{}:z1(t);else{if(!Ae[u])return i?t:{};o=PS(t,u,l)}}s||(s=new jn);var h=s.get(t);if(h)return h;s.set(t,o),$S(t)?t.forEach(function(m){o.add(Jl(m,e,n,m,t,s))}):jS(t)&&t.forEach(function(m,E){o.set(E,Jl(m,e,n,E,t,s))});var p=Df,w=a?void 0:p(t);return cE(w||t,function(m,E){w&&(E=m,m=t[E]),L1(o,E,Jl(m,e,n,E,t,s))}),o}var f3=1,h3=4;function ns(t){return Jl(t,f3|h3)}var d3="__lodash_hash_undefined__";function p3(t){return this.__data__.set(t,d3),this}function g3(t){return this.__data__.has(t)}function _a(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new gi;++e<n;)this.add(t[e])}_a.prototype.add=_a.prototype.push=p3;_a.prototype.has=g3;function m3(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function y3(t,e){return t.has(e)}var v3=1,w3=2;function K1(t,e,n,r,i,s){var o=n&v3,l=t.length,a=e.length;if(l!=a&&!(o&&a>l))return!1;var u=s.get(t),f=s.get(e);if(u&&f)return u==e&&f==t;var h=-1,p=!0,w=n&w3?new _a:void 0;for(s.set(t,e),s.set(e,t);++h<l;){var m=t[h],E=e[h];if(r)var S=o?r(E,m,h,e,t,s):r(m,E,h,t,e,s);if(S!==void 0){if(S)continue;p=!1;break}if(w){if(!m3(e,function(x,v){if(!y3(w,v)&&(m===x||i(m,x,n,r,s)))return w.push(v)})){p=!1;break}}else if(!(m===E||i(m,E,n,r,s))){p=!1;break}}return s.delete(t),s.delete(e),p}function x3(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function E3(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var b3=1,S3=2,T3="[object Boolean]",A3="[object Date]",k3="[object Error]",N3="[object Map]",_3="[object Number]",C3="[object RegExp]",L3="[object Set]",I3="[object String]",O3="[object Symbol]",R3="[object ArrayBuffer]",P3="[object DataView]",xg=jr?jr.prototype:void 0,Sc=xg?xg.valueOf:void 0;function D3(t,e,n,r,i,s,o){switch(n){case P3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R3:return!(t.byteLength!=e.byteLength||!s(new Na(t),new Na(e)));case T3:case A3:case _3:return Wo(+t,+e);case k3:return t.name==e.name&&t.message==e.message;case C3:case I3:return t==e+"";case N3:var l=x3;case L3:var a=r&b3;if(l||(l=E3),t.size!=e.size&&!a)return!1;var u=o.get(t);if(u)return u==e;r|=S3,o.set(t,e);var f=K1(l(t),l(e),r,i,s,o);return o.delete(t),f;case O3:if(Sc)return Sc.call(t)==Sc.call(e)}return!1}var B3=1,j3=Object.prototype,U3=j3.hasOwnProperty;function M3(t,e,n,r,i,s){var o=n&B3,l=Df(t),a=l.length,u=Df(e),f=u.length;if(a!=f&&!o)return!1;for(var h=a;h--;){var p=l[h];if(!(o?p in e:U3.call(e,p)))return!1}var w=s.get(t),m=s.get(e);if(w&&m)return w==e&&m==t;var E=!0;s.set(t,e),s.set(e,t);for(var S=o;++h<a;){p=l[h];var x=t[p],v=e[p];if(r)var c=o?r(v,x,p,e,t,s):r(x,v,p,t,e,s);if(!(c===void 0?x===v||i(x,v,n,r,s):c)){E=!1;break}S||(S=p=="constructor")}if(E&&!S){var b=t.constructor,A=e.constructor;b!=A&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof A=="function"&&A instanceof A)&&(E=!1)}return s.delete(t),s.delete(e),E}var $3=1,Eg="[object Arguments]",bg="[object Array]",Pl="[object Object]",q3=Object.prototype,Sg=q3.hasOwnProperty;function F3(t,e,n,r,i,s){var o=ai(t),l=ai(e),a=o?bg:dn(t),u=l?bg:dn(e);a=a==Eg?Pl:a,u=u==Eg?Pl:u;var f=a==Pl,h=u==Pl,p=a==u;if(p&&Do(t)){if(!Do(e))return!1;o=!0,f=!1}if(p&&!f)return s||(s=new jn),o||fd(t)?K1(t,e,n,r,i,s):D3(t,e,a,n,r,i,s);if(!(n&$3)){var w=f&&Sg.call(t,"__wrapped__"),m=h&&Sg.call(e,"__wrapped__");if(w||m){var E=w?t.value():t,S=m?e.value():e;return s||(s=new jn),i(E,S,n,r,s)}}return p?(s||(s=new jn),M3(t,e,n,r,i,s)):!1}function W1(t,e,n,r,i){return t===e?!0:t==null||e==null||!sr(t)&&!sr(e)?t!==t&&e!==e:F3(t,e,n,r,W1,i)}function z3(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),l=o.length;l--;){var a=o[++i];if(n(s[a],a,s)===!1)break}return e}}var H3=z3();function Mf(t,e,n){(n!==void 0&&!Wo(t[e],n)||n===void 0&&!(e in t))&&ad(t,e,n)}function G3(t){return sr(t)&&Za(t)}function $f(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function V3(t){return gE(t,j1(t))}function K3(t,e,n,r,i,s,o){var l=$f(t,n),a=$f(e,n),u=o.get(a);if(u){Mf(t,n,u);return}var f=s?s(l,a,n+"",t,e,o):void 0,h=f===void 0;if(h){var p=ai(a),w=!p&&Do(a),m=!p&&!w&&fd(a);f=a,p||w||m?ai(l)?f=l:G3(l)?f=nE(l):w?(h=!1,f=q1(a,!0)):m?(h=!1,f=F1(a,!0)):f=[]:Fb(a)||Pf(a)?(f=l,Pf(l)?f=V3(l):(!qr(l)||ld(l))&&(f=z1(a))):h=!1}h&&(o.set(a,f),i(f,a,r,s,o),o.delete(a)),Mf(t,n,f)}function Q1(t,e,n,r,i){t!==e&&H3(e,function(s,o){if(i||(i=new jn),qr(s))K3(t,e,o,n,Q1,r,i);else{var l=r?r($f(t,o),s,o+"",t,e,i):void 0;l===void 0&&(l=s),Mf(t,o,l)}},j1)}function dd(t,e){return W1(t,e)}var Pr=xE(function(t,e,n){Q1(t,e,n)}),re=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(re||{});class Mn{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=re.TYPE&re.ATTRIBUTE;this.scope=r.scope!=null?r.scope&re.LEVEL|i:re.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class rs extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const Z1=class qf{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new rs(`Unable to create ${n} blot`);const s=i,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(r),l=new s(e,o,r);return qf.blots.set(l.domNode,l),l}find(e,n=!1){return qf.find(e,n)}query(e,n=re.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&re.LEVEL&re.BLOCK?r=this.types.block:e&re.LEVEL&re.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&re.LEVEL&r.scope&&n&re.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new rs("Invalid definition");if(r&&n.blotName==="abstract")throw new rs("Cannot register abstract class");const s=r?n.blotName:i?n.attrName:void 0;return this.types[s]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};Z1.blots=new WeakMap;let gs=Z1;function Tg(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class W3 extends Mn{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){Tg(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(Tg(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const En=W3;function Tc(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class Q3 extends Mn{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[Tc(this.keyName)]=n,!0):!1}remove(e){e.style[Tc(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[Tc(this.keyName)];return this.canAdd(e,n)?n:""}}const Fr=Q3;class Z3{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=gs.find(this.domNode);if(e==null)return;const n=Mn.keys(this.domNode),r=En.keys(this.domNode),i=Fr.keys(this.domNode);n.concat(r).concat(i).forEach(s=>{const o=e.scroll.query(s,re.ATTRIBUTE);o instanceof Mn&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const Ja=Z3,X1=class{constructor(e,n){this.scroll=e,this.domNode=n,gs.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new rs("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),gs.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const s=this.isolate(e,n);if(this.scroll.query(r,re.BLOT)!=null&&i)s.wrap(r,i);else if(this.scroll.query(r,re.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);s.wrap(o),o.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),s=this.split(e);this.parent.insertBefore(i,s||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new rs(`Cannot wrap ${e}`);return r.appendChild(this),r}};X1.blotName="abstract";let Y1=X1;const J1=class extends Y1{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};J1.scope=re.INLINE_BLOT;let X3=J1;const ct=X3;class Y3{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const s=i.length();if(e<s||n&&e===s&&(i.next==null||i.next.length()!==0))return[i,e];e-=s,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,s]=this.find(e);let o=e-s;const l=this.iterator(i);let a=l();for(;a&&o<e+n;){const u=a.length();e>o?r(a,e-o,Math.min(n,o+u-e)):r(a,0,Math.min(u,e+n-o)),o+=u,a=l()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function Ag(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(re.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const ey=class yr extends Y1{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,yr.uiClass&&this.uiNode.classList.add(yr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Y3,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=Ag(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof rs)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,s)=>{r.deleteAt(i,s)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof yr?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],s=r;return this.children.forEachAt(n,r,(o,l,a)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&i.push(o),o instanceof yr&&(i=i.concat(o.descendants(e,l,s))),s-=a}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===re.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof yr?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(s,o,l)=>{s.formatAt(o,l,r,i)})}insertAt(e,n,r){const[i,s]=this.children.find(e);if(i)i.insertAt(s,n,r);else{const o=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),s=[[this,e]];return r instanceof yr?s.concat(r.path(i,n)):(r!=null&&s.push([r,i]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof yr&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,s,o)=>{const l=i.split(s,n);l!=null&&r.appendChild(l)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(r.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(s);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),r.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,o)=>s===o?0:s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let o=null;s.nextSibling!=null&&(o=this.scroll.find(s.nextSibling));const l=Ag(s,this.scroll);(l.next!==o||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,o||void 0))}),this.enforceAllowedChildren()}};ey.uiClass="";let J3=ey;const yn=J3;function e4(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Ci=class Li extends yn{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Li.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Ja(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof Li||(r=r.wrap(Li.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,re.INLINE);if(r==null)return;r instanceof Mn?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,re.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof Li&&r.prev===this&&e4(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof Li&&this.attributes.move(r),r}};Ci.allowedChildren=[Ci,ct],Ci.blotName="inline",Ci.scope=re.INLINE_BLOT,Ci.tagName="SPAN";let t4=Ci;const pd=t4,Ii=class Ff extends yn{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Ff.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Ja(this.domNode)}format(e,n){const r=this.scroll.query(e,re.BLOCK);r!=null&&(r instanceof Mn?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(Ff.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,re.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,re.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const s=this.scroll.create(n,r);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Ii.blotName="block",Ii.scope=re.BLOCK_BLOT,Ii.tagName="P",Ii.allowedChildren=[pd,Ii,ct];let n4=Ii;const Uo=n4,zf=class extends yn{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};zf.blotName="container",zf.scope=re.BLOCK_BLOT;let r4=zf;const eu=r4;class i4 extends ct{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ft=i4,s4={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},o4=100,Oi=class extends yn{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,s4),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=re.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const s=(a,u=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),u&&s(a.parent))},o=a=>{r.has(a.domNode)&&(a instanceof yn&&a.children.forEach(o),r.delete(a.domNode),a.optimize(n))};let l=e;for(let a=0;l.length>0;a+=1){if(a>=o4)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(u=>{const f=this.find(u.target,!0);f!=null&&(f.domNode===u.target&&(u.type==="childList"?(s(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(h=>{const p=this.find(h,!1);s(p,!1),p instanceof yn&&p.children.forEach(w=>{s(w,!1)})})):u.type==="attributes"&&s(f.prev)),s(f))}),this.children.forEach(o),l=Array.from(this.observer.takeRecords()),i=l.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const s=this.find(i.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(i),null):(r.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};Oi.blotName="scroll",Oi.defaultChild=Uo,Oi.allowedChildren=[Uo,eu],Oi.scope=re.BLOCK_BLOT,Oi.tagName="DIV";let l4=Oi;const gd=l4,Hf=class ty extends ct{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ty&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Hf.blotName="text",Hf.scope=re.INLINE_BLOT;let a4=Hf;const Ca=a4,u4=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Mn,AttributorStore:Ja,BlockBlot:Uo,ClassAttributor:En,ContainerBlot:eu,EmbedBlot:Ft,InlineBlot:pd,LeafBlot:ct,ParentBlot:yn,Registry:gs,Scope:re,ScrollBlot:gd,StyleAttributor:Fr,TextBlot:Ca},Symbol.toStringTag,{value:"Module"}));var Gf={exports:{}},Dt=-1,xt=1,qe=0;function Mo(t,e,n,r,i){if(t===e)return t?[[qe,t]]:[];if(n!=null){var s=v4(t,e,n);if(s)return s}var o=md(t,e),l=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=tu(t,e);var a=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var u=c4(t,e);return l&&u.unshift([qe,l]),a&&u.push([qe,a]),yd(u,i),r&&d4(u),u}function c4(t,e){var n;if(!t)return[[xt,e]];if(!e)return[[Dt,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,s=r.indexOf(i);if(s!==-1)return n=[[xt,r.substring(0,s)],[qe,i],[xt,r.substring(s+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Dt),n;if(i.length===1)return[[Dt,t],[xt,e]];var o=h4(t,e);if(o){var l=o[0],a=o[1],u=o[2],f=o[3],h=o[4],p=Mo(l,u),w=Mo(a,f);return p.concat([[qe,h]],w)}return f4(t,e)}function f4(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,o=2*i,l=new Array(o),a=new Array(o),u=0;u<o;u++)l[u]=-1,a[u]=-1;l[s+1]=0,a[s+1]=0;for(var f=n-r,h=f%2!==0,p=0,w=0,m=0,E=0,S=0;S<i;S++){for(var x=-S+p;x<=S-w;x+=2){var v=s+x,c;x===-S||x!==S&&l[v-1]<l[v+1]?c=l[v+1]:c=l[v-1]+1;for(var b=c-x;c<n&&b<r&&t.charAt(c)===e.charAt(b);)c++,b++;if(l[v]=c,c>n)w+=2;else if(b>r)p+=2;else if(h){var A=s+f-x;if(A>=0&&A<o&&a[A]!==-1){var _=n-a[A];if(c>=_)return kg(t,e,c,b)}}}for(var C=-S+m;C<=S-E;C+=2){var A=s+C,_;C===-S||C!==S&&a[A-1]<a[A+1]?_=a[A+1]:_=a[A-1]+1;for(var O=_-C;_<n&&O<r&&t.charAt(n-_-1)===e.charAt(r-O-1);)_++,O++;if(a[A]=_,_>n)E+=2;else if(O>r)m+=2;else if(!h){var v=s+f-C;if(v>=0&&v<o&&l[v]!==-1){var c=l[v],b=s+c-v;if(_=n-_,c>=_)return kg(t,e,c,b)}}}}return[[Dt,t],[xt,e]]}function kg(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),o=t.substring(n),l=e.substring(r),a=Mo(i,s),u=Mo(o,l);return a.concat(u)}function md(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return ny(t.charCodeAt(i-1))&&i--,i}function Ng(t,e){var n=t.length,r=e.length;if(n==0||r==0)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var s=0,o=1;;){var l=t.substring(i-o),a=e.indexOf(l);if(a==-1)return s;o+=a,(a==0||t.substring(i-o)==e.substring(0,o))&&(s=o,o++)}}function tu(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return ry(t.charCodeAt(t.length-i))&&i--,i}function h4(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function i(w,m,E){for(var S=w.substring(E,E+Math.floor(w.length/4)),x=-1,v="",c,b,A,_;(x=m.indexOf(S,x+1))!==-1;){var C=md(w.substring(E),m.substring(x)),O=tu(w.substring(0,E),m.substring(0,x));v.length<O+C&&(v=m.substring(x-O,x)+m.substring(x,x+C),c=w.substring(0,E-O),b=w.substring(E+C),A=m.substring(0,x-O),_=m.substring(x+C))}return v.length*2>=w.length?[c,b,A,_,v]:null}var s=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),l;if(!s&&!o)return null;o?s?l=s[4].length>o[4].length?s:o:l=o:l=s;var a,u,f,h;t.length>e.length?(a=l[0],u=l[1],f=l[2],h=l[3]):(f=l[0],h=l[1],a=l[2],u=l[3]);var p=l[4];return[a,u,f,h,p]}function d4(t){for(var e=!1,n=[],r=0,i=null,s=0,o=0,l=0,a=0,u=0;s<t.length;)t[s][0]==qe?(n[r++]=s,o=a,l=u,a=0,u=0,i=t[s][1]):(t[s][0]==xt?a+=t[s][1].length:u+=t[s][1].length,i&&i.length<=Math.max(o,l)&&i.length<=Math.max(a,u)&&(t.splice(n[r-1],0,[Dt,i]),t[n[r-1]+1][0]=xt,r--,r--,s=r>0?n[r-1]:-1,o=0,l=0,a=0,u=0,i=null,e=!0)),s++;for(e&&yd(t),m4(t),s=1;s<t.length;){if(t[s-1][0]==Dt&&t[s][0]==xt){var f=t[s-1][1],h=t[s][1],p=Ng(f,h),w=Ng(h,f);p>=w?(p>=f.length/2||p>=h.length/2)&&(t.splice(s,0,[qe,h.substring(0,p)]),t[s-1][1]=f.substring(0,f.length-p),t[s+1][1]=h.substring(p),s++):(w>=f.length/2||w>=h.length/2)&&(t.splice(s,0,[qe,f.substring(0,w)]),t[s-1][0]=xt,t[s-1][1]=h.substring(0,h.length-w),t[s+1][0]=Dt,t[s+1][1]=f.substring(w),s++),s++}s++}}var _g=/[^a-zA-Z0-9]/,Cg=/\s/,Lg=/[\r\n]/,p4=/\n\r?\n$/,g4=/^\r?\n\r?\n/;function m4(t){function e(w,m){if(!w||!m)return 6;var E=w.charAt(w.length-1),S=m.charAt(0),x=E.match(_g),v=S.match(_g),c=x&&E.match(Cg),b=v&&S.match(Cg),A=c&&E.match(Lg),_=b&&S.match(Lg),C=A&&w.match(p4),O=_&&m.match(g4);return C||O?5:A||_?4:x&&!c&&b?3:c||b?2:x||v?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==qe&&t[n+1][0]==qe){var r=t[n-1][1],i=t[n][1],s=t[n+1][1],o=tu(r,i);if(o){var l=i.substring(i.length-o);r=r.substring(0,r.length-o),i=l+i.substring(0,i.length-o),s=l+s}for(var a=r,u=i,f=s,h=e(r,i)+e(i,s);i.charAt(0)===s.charAt(0);){r+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var p=e(r,i)+e(i,s);p>=h&&(h=p,a=r,u=i,f=s)}t[n-1][1]!=a&&(a?t[n-1][1]=a:(t.splice(n-1,1),n--),t[n][1]=u,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}}function yd(t,e){t.push([qe,""]);for(var n=0,r=0,i=0,s="",o="",l;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case xt:i++,o+=t[n][1],n++;break;case Dt:r++,s+=t[n][1],n++;break;case qe:var a=n-i-r-1;if(e){if(a>=0&&sy(t[a][1])){var u=t[a][1].slice(-1);if(t[a][1]=t[a][1].slice(0,-1),s=u+s,o=u+o,!t[a][1]){t.splice(a,1),n--;var f=a-1;t[f]&&t[f][0]===xt&&(i++,o=t[f][1]+o,f--),t[f]&&t[f][0]===Dt&&(r++,s=t[f][1]+s,f--),a=f}}if(iy(t[n][1])){var u=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),s+=u,o+=u}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(l=md(o,s),l!==0&&(a>=0?t[a][1]+=o.substring(0,l):(t.splice(0,0,[qe,o.substring(0,l)]),n++),o=o.substring(l),s=s.substring(l)),l=tu(o,s),l!==0&&(t[n][1]=o.substring(o.length-l)+t[n][1],o=o.substring(0,o.length-l),s=s.substring(0,s.length-l)));var h=i+r;s.length===0&&o.length===0?(t.splice(n-h,h),n=n-h):s.length===0?(t.splice(n-h,h,[xt,o]),n=n-h+1):o.length===0?(t.splice(n-h,h,[Dt,s]),n=n-h+1):(t.splice(n-h,h,[Dt,s],[xt,o]),n=n-h+2)}n!==0&&t[n-1][0]===qe?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",o="";break}}t[t.length-1][1]===""&&t.pop();var p=!1;for(n=1;n<t.length-1;)t[n-1][0]===qe&&t[n+1][0]===qe&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),p=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),p=!0)),n++;p&&yd(t,e)}function ny(t){return t>=55296&&t<=56319}function ry(t){return t>=56320&&t<=57343}function iy(t){return ry(t.charCodeAt(0))}function sy(t){return ny(t.charCodeAt(t.length-1))}function y4(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function Ac(t,e,n,r){return sy(t)||iy(r)?null:y4([[qe,t],[Dt,e],[xt,n],[qe,r]])}function v4(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,s=t.length,o=e.length;if(r.length===0&&(i===null||i.length===0)){var l=r.index,a=t.slice(0,l),u=t.slice(l),f=i?i.index:null;e:{var h=l+o-s;if(f!==null&&f!==h||h<0||h>o)break e;var p=e.slice(0,h),w=e.slice(h);if(w!==u)break e;var m=Math.min(l,h),E=a.slice(0,m),S=p.slice(0,m);if(E!==S)break e;var x=a.slice(m),v=p.slice(m);return Ac(E,x,v,u)}e:{if(f!==null&&f!==l)break e;var c=l,p=e.slice(0,c),w=e.slice(c);if(p!==a)break e;var b=Math.min(s-c,o-c),A=u.slice(u.length-b),_=w.slice(w.length-b);if(A!==_)break e;var x=u.slice(0,u.length-b),v=w.slice(0,w.length-b);return Ac(a,x,v,A)}}if(r.length>0&&i&&i.length===0)e:{var E=t.slice(0,r.index),A=t.slice(r.index+r.length),m=E.length,b=A.length;if(o<m+b)break e;var S=e.slice(0,m),_=e.slice(o-b);if(E!==S||A!==_)break e;var x=t.slice(m,s-b),v=e.slice(m,o-b);return Ac(E,x,v,A)}return null}function nu(t,e,n,r){return Mo(t,e,n,r,!0)}nu.INSERT=xt;nu.DELETE=Dt;nu.EQUAL=qe;var w4=nu,La={exports:{}};La.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",l="[object Boolean]",a="[object Date]",u="[object Error]",f="[object Function]",h="[object GeneratorFunction]",p="[object Map]",w="[object Number]",m="[object Object]",E="[object Promise]",S="[object RegExp]",x="[object Set]",v="[object String]",c="[object Symbol]",b="[object WeakMap]",A="[object ArrayBuffer]",_="[object DataView]",C="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",M="[object Int16Array]",G="[object Int32Array]",I="[object Uint8Array]",k="[object Uint8ClampedArray]",P="[object Uint16Array]",U="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,z=/\w*$/,B=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,$={};$[s]=$[o]=$[A]=$[_]=$[l]=$[a]=$[C]=$[O]=$[D]=$[M]=$[G]=$[p]=$[w]=$[m]=$[S]=$[x]=$[v]=$[c]=$[I]=$[k]=$[P]=$[U]=!0,$[u]=$[f]=$[b]=!1;var Q=typeof Pn=="object"&&Pn&&Pn.Object===Object&&Pn,J=typeof self=="object"&&self&&self.Object===Object&&self,le=Q||J||Function("return this")(),ue=e&&!e.nodeType&&e,se=ue&&!0&&t&&!t.nodeType&&t,he=se&&se.exports===ue;function Ue(g,N){return g.set(N[0],N[1]),g}function Se(g,N){return g.add(N),g}function dt(g,N){for(var R=-1,H=g?g.length:0;++R<H&&N(g[R],R,g)!==!1;);return g}function zt(g,N){for(var R=-1,H=N.length,fe=g.length;++R<H;)g[fe+R]=N[R];return g}function Ge(g,N,R,H){for(var fe=-1,oe=g?g.length:0;++fe<oe;)R=N(R,g[fe],fe,g);return R}function pt(g,N){for(var R=-1,H=Array(g);++R<g;)H[R]=N(R);return H}function et(g,N){return g==null?void 0:g[N]}function Ot(g){var N=!1;if(g!=null&&typeof g.toString!="function")try{N=!!(g+"")}catch{}return N}function Te(g){var N=-1,R=Array(g.size);return g.forEach(function(H,fe){R[++N]=[fe,H]}),R}function tt(g,N){return function(R){return g(N(R))}}function gt(g){var N=-1,R=Array(g.size);return g.forEach(function(H){R[++N]=H}),R}var Tt=Array.prototype,Ss=Function.prototype,Fn=Object.prototype,Tn=le["__core-js_shared__"],mt=function(){var g=/[^.]+$/.exec(Tn&&Tn.keys&&Tn.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),fr=Ss.toString,Ht=Fn.hasOwnProperty,yt=Fn.toString,Ts=RegExp("^"+fr.call(Ht).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=he?le.Buffer:void 0,d=le.Symbol,y=le.Uint8Array,L=tt(Object.getPrototypeOf,Object),j=Object.create,q=Fn.propertyIsEnumerable,K=Tt.splice,ce=Object.getOwnPropertySymbols,we=T?T.isBuffer:void 0,xe=tt(Object.keys,Object),Ee=on(le,"DataView"),pe=on(le,"Map"),sn=on(le,"Promise"),wi=on(le,"Set"),As=on(le,"WeakMap"),zr=on(Object,"create"),ks=vt(Ee),Hr=vt(pe),Ns=vt(sn),_s=vt(wi),Cs=vt(As),hr=d?d.prototype:void 0,Jo=hr?hr.valueOf:void 0;function zn(g){var N=-1,R=g?g.length:0;for(this.clear();++N<R;){var H=g[N];this.set(H[0],H[1])}}function lu(){this.__data__=zr?zr(null):{}}function au(g){return this.has(g)&&delete this.__data__[g]}function uu(g){var N=this.__data__;if(zr){var R=N[g];return R===r?void 0:R}return Ht.call(N,g)?N[g]:void 0}function el(g){var N=this.__data__;return zr?N[g]!==void 0:Ht.call(N,g)}function Ls(g,N){var R=this.__data__;return R[g]=zr&&N===void 0?r:N,this}zn.prototype.clear=lu,zn.prototype.delete=au,zn.prototype.get=uu,zn.prototype.has=el,zn.prototype.set=Ls;function Ve(g){var N=-1,R=g?g.length:0;for(this.clear();++N<R;){var H=g[N];this.set(H[0],H[1])}}function cu(){this.__data__=[]}function fu(g){var N=this.__data__,R=Ei(N,g);if(R<0)return!1;var H=N.length-1;return R==H?N.pop():K.call(N,R,1),!0}function hu(g){var N=this.__data__,R=Ei(N,g);return R<0?void 0:N[R][1]}function du(g){return Ei(this.__data__,g)>-1}function pu(g,N){var R=this.__data__,H=Ei(R,g);return H<0?R.push([g,N]):R[H][1]=N,this}Ve.prototype.clear=cu,Ve.prototype.delete=fu,Ve.prototype.get=hu,Ve.prototype.has=du,Ve.prototype.set=pu;function nt(g){var N=-1,R=g?g.length:0;for(this.clear();++N<R;){var H=g[N];this.set(H[0],H[1])}}function gu(){this.__data__={hash:new zn,map:new(pe||Ve),string:new zn}}function mu(g){return Vr(this,g).delete(g)}function yu(g){return Vr(this,g).get(g)}function vu(g){return Vr(this,g).has(g)}function wu(g,N){return Vr(this,g).set(g,N),this}nt.prototype.clear=gu,nt.prototype.delete=mu,nt.prototype.get=yu,nt.prototype.has=vu,nt.prototype.set=wu;function At(g){this.__data__=new Ve(g)}function xu(){this.__data__=new Ve}function Eu(g){return this.__data__.delete(g)}function bu(g){return this.__data__.get(g)}function Su(g){return this.__data__.has(g)}function Tu(g,N){var R=this.__data__;if(R instanceof Ve){var H=R.__data__;if(!pe||H.length<n-1)return H.push([g,N]),this;R=this.__data__=new nt(H)}return R.set(g,N),this}At.prototype.clear=xu,At.prototype.delete=Eu,At.prototype.get=bu,At.prototype.has=Su,At.prototype.set=Tu;function xi(g,N){var R=Ps(g)||Si(g)?pt(g.length,String):[],H=R.length,fe=!!H;for(var oe in g)Ht.call(g,oe)&&!(fe&&(oe=="length"||Uu(oe,H)))&&R.push(oe);return R}function tl(g,N,R){var H=g[N];(!(Ht.call(g,N)&&ol(H,R))||R===void 0&&!(N in g))&&(g[N]=R)}function Ei(g,N){for(var R=g.length;R--;)if(ol(g[R][0],N))return R;return-1}function An(g,N){return g&&Rs(N,Bs(N),g)}function Is(g,N,R,H,fe,oe,ye){var ge;if(H&&(ge=oe?H(g,fe,oe,ye):H(g)),ge!==void 0)return ge;if(!Nn(g))return g;var Be=Ps(g);if(Be){if(ge=Bu(g),!N)return Ru(g,ge)}else{var ve=Gn(g),rt=ve==f||ve==h;if(ll(g))return bi(g,N);if(ve==m||ve==s||rt&&!oe){if(Ot(g))return oe?g:{};if(ge=kn(rt?{}:g),!N)return Pu(g,An(ge,g))}else{if(!$[ve])return oe?g:{};ge=ju(g,ve,Is,N)}}ye||(ye=new At);var kt=ye.get(g);if(kt)return kt;if(ye.set(g,ge),!Be)var Me=R?Du(g):Bs(g);return dt(Me||g,function(it,Ke){Me&&(Ke=it,it=g[Ke]),tl(ge,Ke,Is(it,N,R,H,Ke,g,ye))}),ge}function Au(g){return Nn(g)?j(g):{}}function ku(g,N,R){var H=N(g);return Ps(g)?H:zt(H,R(g))}function Nu(g){return yt.call(g)}function _u(g){if(!Nn(g)||$u(g))return!1;var N=Ds(g)||Ot(g)?Ts:B;return N.test(vt(g))}function Cu(g){if(!il(g))return xe(g);var N=[];for(var R in Object(g))Ht.call(g,R)&&R!="constructor"&&N.push(R);return N}function bi(g,N){if(N)return g.slice();var R=new g.constructor(g.length);return g.copy(R),R}function Os(g){var N=new g.constructor(g.byteLength);return new y(N).set(new y(g)),N}function Gr(g,N){var R=N?Os(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function nl(g,N,R){var H=N?R(Te(g),!0):Te(g);return Ge(H,Ue,new g.constructor)}function rl(g){var N=new g.constructor(g.source,z.exec(g));return N.lastIndex=g.lastIndex,N}function Lu(g,N,R){var H=N?R(gt(g),!0):gt(g);return Ge(H,Se,new g.constructor)}function Iu(g){return Jo?Object(Jo.call(g)):{}}function Ou(g,N){var R=N?Os(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function Ru(g,N){var R=-1,H=g.length;for(N||(N=Array(H));++R<H;)N[R]=g[R];return N}function Rs(g,N,R,H){R||(R={});for(var fe=-1,oe=N.length;++fe<oe;){var ye=N[fe],ge=void 0;tl(R,ye,ge===void 0?g[ye]:ge)}return R}function Pu(g,N){return Rs(g,Hn(g),N)}function Du(g){return ku(g,Bs,Hn)}function Vr(g,N){var R=g.__data__;return Mu(N)?R[typeof N=="string"?"string":"hash"]:R.map}function on(g,N){var R=et(g,N);return _u(R)?R:void 0}var Hn=ce?tt(ce,Object):Fu,Gn=Nu;(Ee&&Gn(new Ee(new ArrayBuffer(1)))!=_||pe&&Gn(new pe)!=p||sn&&Gn(sn.resolve())!=E||wi&&Gn(new wi)!=x||As&&Gn(new As)!=b)&&(Gn=function(g){var N=yt.call(g),R=N==m?g.constructor:void 0,H=R?vt(R):void 0;if(H)switch(H){case ks:return _;case Hr:return p;case Ns:return E;case _s:return x;case Cs:return b}return N});function Bu(g){var N=g.length,R=g.constructor(N);return N&&typeof g[0]=="string"&&Ht.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function kn(g){return typeof g.constructor=="function"&&!il(g)?Au(L(g)):{}}function ju(g,N,R,H){var fe=g.constructor;switch(N){case A:return Os(g);case l:case a:return new fe(+g);case _:return Gr(g,H);case C:case O:case D:case M:case G:case I:case k:case P:case U:return Ou(g,H);case p:return nl(g,H,R);case w:case v:return new fe(g);case S:return rl(g);case x:return Lu(g,H,R);case c:return Iu(g)}}function Uu(g,N){return N=N??i,!!N&&(typeof g=="number"||F.test(g))&&g>-1&&g%1==0&&g<N}function Mu(g){var N=typeof g;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?g!=="__proto__":g===null}function $u(g){return!!mt&&mt in g}function il(g){var N=g&&g.constructor,R=typeof N=="function"&&N.prototype||Fn;return g===R}function vt(g){if(g!=null){try{return fr.call(g)}catch{}try{return g+""}catch{}}return""}function sl(g){return Is(g,!0,!0)}function ol(g,N){return g===N||g!==g&&N!==N}function Si(g){return qu(g)&&Ht.call(g,"callee")&&(!q.call(g,"callee")||yt.call(g)==s)}var Ps=Array.isArray;function Ti(g){return g!=null&&al(g.length)&&!Ds(g)}function qu(g){return ul(g)&&Ti(g)}var ll=we||zu;function Ds(g){var N=Nn(g)?yt.call(g):"";return N==f||N==h}function al(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=i}function Nn(g){var N=typeof g;return!!g&&(N=="object"||N=="function")}function ul(g){return!!g&&typeof g=="object"}function Bs(g){return Ti(g)?xi(g):Cu(g)}function Fu(){return[]}function zu(){return!1}t.exports=sl})(La,La.exports);var oy=La.exports,Ia={exports:{}};Ia.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,l="[object Arguments]",a="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",h="[object Date]",p="[object Error]",w="[object Function]",m="[object GeneratorFunction]",E="[object Map]",S="[object Number]",x="[object Null]",v="[object Object]",c="[object Promise]",b="[object Proxy]",A="[object RegExp]",_="[object Set]",C="[object String]",O="[object Symbol]",D="[object Undefined]",M="[object WeakMap]",G="[object ArrayBuffer]",I="[object DataView]",k="[object Float32Array]",P="[object Float64Array]",U="[object Int8Array]",V="[object Int16Array]",z="[object Int32Array]",B="[object Uint8Array]",F="[object Uint8ClampedArray]",$="[object Uint16Array]",Q="[object Uint32Array]",J=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,se={};se[k]=se[P]=se[U]=se[V]=se[z]=se[B]=se[F]=se[$]=se[Q]=!0,se[l]=se[a]=se[G]=se[f]=se[I]=se[h]=se[p]=se[w]=se[E]=se[S]=se[v]=se[A]=se[_]=se[C]=se[M]=!1;var he=typeof Pn=="object"&&Pn&&Pn.Object===Object&&Pn,Ue=typeof self=="object"&&self&&self.Object===Object&&self,Se=he||Ue||Function("return this")(),dt=e&&!e.nodeType&&e,zt=dt&&!0&&t&&!t.nodeType&&t,Ge=zt&&zt.exports===dt,pt=Ge&&he.process,et=function(){try{return pt&&pt.binding&&pt.binding("util")}catch{}}(),Ot=et&&et.isTypedArray;function Te(g,N){for(var R=-1,H=g==null?0:g.length,fe=0,oe=[];++R<H;){var ye=g[R];N(ye,R,g)&&(oe[fe++]=ye)}return oe}function tt(g,N){for(var R=-1,H=N.length,fe=g.length;++R<H;)g[fe+R]=N[R];return g}function gt(g,N){for(var R=-1,H=g==null?0:g.length;++R<H;)if(N(g[R],R,g))return!0;return!1}function Tt(g,N){for(var R=-1,H=Array(g);++R<g;)H[R]=N(R);return H}function Ss(g){return function(N){return g(N)}}function Fn(g,N){return g.has(N)}function Tn(g,N){return g==null?void 0:g[N]}function mt(g){var N=-1,R=Array(g.size);return g.forEach(function(H,fe){R[++N]=[fe,H]}),R}function fr(g,N){return function(R){return g(N(R))}}function Ht(g){var N=-1,R=Array(g.size);return g.forEach(function(H){R[++N]=H}),R}var yt=Array.prototype,Ts=Function.prototype,T=Object.prototype,d=Se["__core-js_shared__"],y=Ts.toString,L=T.hasOwnProperty,j=function(){var g=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),q=T.toString,K=RegExp("^"+y.call(L).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=Ge?Se.Buffer:void 0,we=Se.Symbol,xe=Se.Uint8Array,Ee=T.propertyIsEnumerable,pe=yt.splice,sn=we?we.toStringTag:void 0,wi=Object.getOwnPropertySymbols,As=ce?ce.isBuffer:void 0,zr=fr(Object.keys,Object),ks=Hn(Se,"DataView"),Hr=Hn(Se,"Map"),Ns=Hn(Se,"Promise"),_s=Hn(Se,"Set"),Cs=Hn(Se,"WeakMap"),hr=Hn(Object,"create"),Jo=vt(ks),zn=vt(Hr),lu=vt(Ns),au=vt(_s),uu=vt(Cs),el=we?we.prototype:void 0,Ls=el?el.valueOf:void 0;function Ve(g){var N=-1,R=g==null?0:g.length;for(this.clear();++N<R;){var H=g[N];this.set(H[0],H[1])}}function cu(){this.__data__=hr?hr(null):{},this.size=0}function fu(g){var N=this.has(g)&&delete this.__data__[g];return this.size-=N?1:0,N}function hu(g){var N=this.__data__;if(hr){var R=N[g];return R===r?void 0:R}return L.call(N,g)?N[g]:void 0}function du(g){var N=this.__data__;return hr?N[g]!==void 0:L.call(N,g)}function pu(g,N){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=hr&&N===void 0?r:N,this}Ve.prototype.clear=cu,Ve.prototype.delete=fu,Ve.prototype.get=hu,Ve.prototype.has=du,Ve.prototype.set=pu;function nt(g){var N=-1,R=g==null?0:g.length;for(this.clear();++N<R;){var H=g[N];this.set(H[0],H[1])}}function gu(){this.__data__=[],this.size=0}function mu(g){var N=this.__data__,R=bi(N,g);if(R<0)return!1;var H=N.length-1;return R==H?N.pop():pe.call(N,R,1),--this.size,!0}function yu(g){var N=this.__data__,R=bi(N,g);return R<0?void 0:N[R][1]}function vu(g){return bi(this.__data__,g)>-1}function wu(g,N){var R=this.__data__,H=bi(R,g);return H<0?(++this.size,R.push([g,N])):R[H][1]=N,this}nt.prototype.clear=gu,nt.prototype.delete=mu,nt.prototype.get=yu,nt.prototype.has=vu,nt.prototype.set=wu;function At(g){var N=-1,R=g==null?0:g.length;for(this.clear();++N<R;){var H=g[N];this.set(H[0],H[1])}}function xu(){this.size=0,this.__data__={hash:new Ve,map:new(Hr||nt),string:new Ve}}function Eu(g){var N=on(this,g).delete(g);return this.size-=N?1:0,N}function bu(g){return on(this,g).get(g)}function Su(g){return on(this,g).has(g)}function Tu(g,N){var R=on(this,g),H=R.size;return R.set(g,N),this.size+=R.size==H?0:1,this}At.prototype.clear=xu,At.prototype.delete=Eu,At.prototype.get=bu,At.prototype.has=Su,At.prototype.set=Tu;function xi(g){var N=-1,R=g==null?0:g.length;for(this.__data__=new At;++N<R;)this.add(g[N])}function tl(g){return this.__data__.set(g,r),this}function Ei(g){return this.__data__.has(g)}xi.prototype.add=xi.prototype.push=tl,xi.prototype.has=Ei;function An(g){var N=this.__data__=new nt(g);this.size=N.size}function Is(){this.__data__=new nt,this.size=0}function Au(g){var N=this.__data__,R=N.delete(g);return this.size=N.size,R}function ku(g){return this.__data__.get(g)}function Nu(g){return this.__data__.has(g)}function _u(g,N){var R=this.__data__;if(R instanceof nt){var H=R.__data__;if(!Hr||H.length<n-1)return H.push([g,N]),this.size=++R.size,this;R=this.__data__=new At(H)}return R.set(g,N),this.size=R.size,this}An.prototype.clear=Is,An.prototype.delete=Au,An.prototype.get=ku,An.prototype.has=Nu,An.prototype.set=_u;function Cu(g,N){var R=Si(g),H=!R&&ol(g),fe=!R&&!H&&Ti(g),oe=!R&&!H&&!fe&&ul(g),ye=R||H||fe||oe,ge=ye?Tt(g.length,String):[],Be=ge.length;for(var ve in g)L.call(g,ve)&&!(ye&&(ve=="length"||fe&&(ve=="offset"||ve=="parent")||oe&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||ju(ve,Be)))&&ge.push(ve);return ge}function bi(g,N){for(var R=g.length;R--;)if(sl(g[R][0],N))return R;return-1}function Os(g,N,R){var H=N(g);return Si(g)?H:tt(H,R(g))}function Gr(g){return g==null?g===void 0?D:x:sn&&sn in Object(g)?Gn(g):il(g)}function nl(g){return Nn(g)&&Gr(g)==l}function rl(g,N,R,H,fe){return g===N?!0:g==null||N==null||!Nn(g)&&!Nn(N)?g!==g&&N!==N:Lu(g,N,R,H,rl,fe)}function Lu(g,N,R,H,fe,oe){var ye=Si(g),ge=Si(N),Be=ye?a:kn(g),ve=ge?a:kn(N);Be=Be==l?v:Be,ve=ve==l?v:ve;var rt=Be==v,kt=ve==v,Me=Be==ve;if(Me&&Ti(g)){if(!Ti(N))return!1;ye=!0,rt=!1}if(Me&&!rt)return oe||(oe=new An),ye||ul(g)?Rs(g,N,R,H,fe,oe):Pu(g,N,Be,R,H,fe,oe);if(!(R&i)){var it=rt&&L.call(g,"__wrapped__"),Ke=kt&&L.call(N,"__wrapped__");if(it||Ke){var dr=it?g.value():g,Vn=Ke?N.value():N;return oe||(oe=new An),fe(dr,Vn,R,H,oe)}}return Me?(oe||(oe=new An),Du(g,N,R,H,fe,oe)):!1}function Iu(g){if(!al(g)||Mu(g))return!1;var N=ll(g)?K:le;return N.test(vt(g))}function Ou(g){return Nn(g)&&Ds(g.length)&&!!se[Gr(g)]}function Ru(g){if(!$u(g))return zr(g);var N=[];for(var R in Object(g))L.call(g,R)&&R!="constructor"&&N.push(R);return N}function Rs(g,N,R,H,fe,oe){var ye=R&i,ge=g.length,Be=N.length;if(ge!=Be&&!(ye&&Be>ge))return!1;var ve=oe.get(g);if(ve&&oe.get(N))return ve==N;var rt=-1,kt=!0,Me=R&s?new xi:void 0;for(oe.set(g,N),oe.set(N,g);++rt<ge;){var it=g[rt],Ke=N[rt];if(H)var dr=ye?H(Ke,it,rt,N,g,oe):H(it,Ke,rt,g,N,oe);if(dr!==void 0){if(dr)continue;kt=!1;break}if(Me){if(!gt(N,function(Vn,Kr){if(!Fn(Me,Kr)&&(it===Vn||fe(it,Vn,R,H,oe)))return Me.push(Kr)})){kt=!1;break}}else if(!(it===Ke||fe(it,Ke,R,H,oe))){kt=!1;break}}return oe.delete(g),oe.delete(N),kt}function Pu(g,N,R,H,fe,oe,ye){switch(R){case I:if(g.byteLength!=N.byteLength||g.byteOffset!=N.byteOffset)return!1;g=g.buffer,N=N.buffer;case G:return!(g.byteLength!=N.byteLength||!oe(new xe(g),new xe(N)));case f:case h:case S:return sl(+g,+N);case p:return g.name==N.name&&g.message==N.message;case A:case C:return g==N+"";case E:var ge=mt;case _:var Be=H&i;if(ge||(ge=Ht),g.size!=N.size&&!Be)return!1;var ve=ye.get(g);if(ve)return ve==N;H|=s,ye.set(g,N);var rt=Rs(ge(g),ge(N),H,fe,oe,ye);return ye.delete(g),rt;case O:if(Ls)return Ls.call(g)==Ls.call(N)}return!1}function Du(g,N,R,H,fe,oe){var ye=R&i,ge=Vr(g),Be=ge.length,ve=Vr(N),rt=ve.length;if(Be!=rt&&!ye)return!1;for(var kt=Be;kt--;){var Me=ge[kt];if(!(ye?Me in N:L.call(N,Me)))return!1}var it=oe.get(g);if(it&&oe.get(N))return it==N;var Ke=!0;oe.set(g,N),oe.set(N,g);for(var dr=ye;++kt<Be;){Me=ge[kt];var Vn=g[Me],Kr=N[Me];if(H)var Ld=ye?H(Kr,Vn,Me,N,g,oe):H(Vn,Kr,Me,g,N,oe);if(!(Ld===void 0?Vn===Kr||fe(Vn,Kr,R,H,oe):Ld)){Ke=!1;break}dr||(dr=Me=="constructor")}if(Ke&&!dr){var cl=g.constructor,fl=N.constructor;cl!=fl&&"constructor"in g&&"constructor"in N&&!(typeof cl=="function"&&cl instanceof cl&&typeof fl=="function"&&fl instanceof fl)&&(Ke=!1)}return oe.delete(g),oe.delete(N),Ke}function Vr(g){return Os(g,Bs,Bu)}function on(g,N){var R=g.__data__;return Uu(N)?R[typeof N=="string"?"string":"hash"]:R.map}function Hn(g,N){var R=Tn(g,N);return Iu(R)?R:void 0}function Gn(g){var N=L.call(g,sn),R=g[sn];try{g[sn]=void 0;var H=!0}catch{}var fe=q.call(g);return H&&(N?g[sn]=R:delete g[sn]),fe}var Bu=wi?function(g){return g==null?[]:(g=Object(g),Te(wi(g),function(N){return Ee.call(g,N)}))}:Fu,kn=Gr;(ks&&kn(new ks(new ArrayBuffer(1)))!=I||Hr&&kn(new Hr)!=E||Ns&&kn(Ns.resolve())!=c||_s&&kn(new _s)!=_||Cs&&kn(new Cs)!=M)&&(kn=function(g){var N=Gr(g),R=N==v?g.constructor:void 0,H=R?vt(R):"";if(H)switch(H){case Jo:return I;case zn:return E;case lu:return c;case au:return _;case uu:return M}return N});function ju(g,N){return N=N??o,!!N&&(typeof g=="number"||ue.test(g))&&g>-1&&g%1==0&&g<N}function Uu(g){var N=typeof g;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?g!=="__proto__":g===null}function Mu(g){return!!j&&j in g}function $u(g){var N=g&&g.constructor,R=typeof N=="function"&&N.prototype||T;return g===R}function il(g){return q.call(g)}function vt(g){if(g!=null){try{return y.call(g)}catch{}try{return g+""}catch{}}return""}function sl(g,N){return g===N||g!==g&&N!==N}var ol=nl(function(){return arguments}())?nl:function(g){return Nn(g)&&L.call(g,"callee")&&!Ee.call(g,"callee")},Si=Array.isArray;function Ps(g){return g!=null&&Ds(g.length)&&!ll(g)}var Ti=As||zu;function qu(g,N){return rl(g,N)}function ll(g){if(!al(g))return!1;var N=Gr(g);return N==w||N==m||N==u||N==b}function Ds(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}function al(g){var N=typeof g;return g!=null&&(N=="object"||N=="function")}function Nn(g){return g!=null&&typeof g=="object"}var ul=Ot?Ss(Ot):Ou;function Bs(g){return Ps(g)?Cu(g):Ru(g)}function Fu(){return[]}function zu(){return!1}t.exports=qu})(Ia,Ia.exports);var ly=Ia.exports,vd={};Object.defineProperty(vd,"__esModule",{value:!0});const x4=oy,E4=ly;var Vf;(function(t){function e(s={},o={},l=!1){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});let a=x4(o);l||(a=Object.keys(a).reduce((u,f)=>(a[f]!=null&&(u[f]=a[f]),u),{}));for(const u in s)s[u]!==void 0&&o[u]===void 0&&(a[u]=s[u]);return Object.keys(a).length>0?a:void 0}t.compose=e;function n(s={},o={}){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});const l=Object.keys(s).concat(Object.keys(o)).reduce((a,u)=>(E4(s[u],o[u])||(a[u]=o[u]===void 0?null:o[u]),a),{});return Object.keys(l).length>0?l:void 0}t.diff=n;function r(s={},o={}){s=s||{};const l=Object.keys(o).reduce((a,u)=>(o[u]!==s[u]&&s[u]!==void 0&&(a[u]=o[u]),a),{});return Object.keys(s).reduce((a,u)=>(s[u]!==o[u]&&o[u]===void 0&&(a[u]=null),a),l)}t.invert=r;function i(s,o,l=!1){if(typeof s!="object")return o;if(typeof o!="object")return;if(!l)return o;const a=Object.keys(o).reduce((u,f)=>(s[f]===void 0&&(u[f]=o[f]),u),{});return Object.keys(a).length>0?a:void 0}t.transform=i})(Vf||(Vf={}));vd.default=Vf;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});var Kf;(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(Kf||(Kf={}));ru.default=Kf;var wd={};Object.defineProperty(wd,"__esModule",{value:!0});const Ig=ru;class b4{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const n=this.ops[this.index];if(n){const r=this.offset,i=Ig.default.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};{const s={};return n.attributes&&(s.attributes=n.attributes),typeof n.retain=="number"?s.retain=e:typeof n.retain=="object"&&n.retain!==null?s.retain=n.retain:typeof n.insert=="string"?s.insert=n.insert.substr(r,e):s.insert=n.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Ig.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,n=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(i)}}else return[]}}wd.default=b4;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=w4,r=oy,i=ly,s=vd;e.AttributeMap=s.default;const o=ru;e.Op=o.default;const l=wd;e.OpIterator=l.default;const a="\0",u=(h,p)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const w=Object.keys(h)[0];if(!w||w!==Object.keys(p)[0])throw new Error(`embed types not matched: ${w} != ${Object.keys(p)[0]}`);return[w,h[w],p[w]]};class f{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,w){this.handlers[p]=w}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const w=this.handlers[p];if(!w)throw new Error(`no handlers for embed type "${p}"`);return w}insert(p,w){const m={};return typeof p=="string"&&p.length===0?this:(m.insert=p,w!=null&&typeof w=="object"&&Object.keys(w).length>0&&(m.attributes=w),this.push(m))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,w){if(typeof p=="number"&&p<=0)return this;const m={retain:p};return w!=null&&typeof w=="object"&&Object.keys(w).length>0&&(m.attributes=w),this.push(m)}push(p){let w=this.ops.length,m=this.ops[w-1];if(p=r(p),typeof m=="object"){if(typeof p.delete=="number"&&typeof m.delete=="number")return this.ops[w-1]={delete:m.delete+p.delete},this;if(typeof m.delete=="number"&&p.insert!=null&&(w-=1,m=this.ops[w-1],typeof m!="object"))return this.ops.unshift(p),this;if(i(p.attributes,m.attributes)){if(typeof p.insert=="string"&&typeof m.insert=="string")return this.ops[w-1]={insert:m.insert+p.insert},typeof p.attributes=="object"&&(this.ops[w-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof m.retain=="number")return this.ops[w-1]={retain:m.retain+p.retain},typeof p.attributes=="object"&&(this.ops[w-1].attributes=p.attributes),this}}return w===this.ops.length?this.ops.push(p):this.ops.splice(w,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const w=[],m=[];return this.forEach(E=>{(p(E)?w:m).push(E)}),[w,m]}reduce(p,w){return this.ops.reduce(p,w)}changeLength(){return this.reduce((p,w)=>w.insert?p+o.default.length(w):w.delete?p-w.delete:p,0)}length(){return this.reduce((p,w)=>p+o.default.length(w),0)}slice(p=0,w=1/0){const m=[],E=new l.default(this.ops);let S=0;for(;S<w&&E.hasNext();){let x;S<p?x=E.next(p-S):(x=E.next(w-S),m.push(x)),S+=o.default.length(x)}return new f(m)}compose(p){const w=new l.default(this.ops),m=new l.default(p.ops),E=[],S=m.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){let v=S.retain;for(;w.peekType()==="insert"&&w.peekLength()<=v;)v-=w.peekLength(),E.push(w.next());S.retain-v>0&&m.next(S.retain-v)}const x=new f(E);for(;w.hasNext()||m.hasNext();)if(m.peekType()==="insert")x.push(m.next());else if(w.peekType()==="delete")x.push(w.next());else{const v=Math.min(w.peekLength(),m.peekLength()),c=w.next(v),b=m.next(v);if(b.retain){const A={};if(typeof c.retain=="number")A.retain=typeof b.retain=="number"?v:b.retain;else if(typeof b.retain=="number")c.retain==null?A.insert=c.insert:A.retain=c.retain;else{const C=c.retain==null?"insert":"retain",[O,D,M]=u(c[C],b.retain),G=f.getHandler(O);A[C]={[O]:G.compose(D,M,C==="retain")}}const _=s.default.compose(c.attributes,b.attributes,typeof c.retain=="number");if(_&&(A.attributes=_),x.push(A),!m.hasNext()&&i(x.ops[x.ops.length-1],A)){const C=new f(w.rest());return x.concat(C).chop()}}else typeof b.delete=="number"&&(typeof c.retain=="number"||typeof c.retain=="object"&&c.retain!==null)&&x.push(b)}return x.chop()}concat(p){const w=new f(this.ops.slice());return p.ops.length>0&&(w.push(p.ops[0]),w.ops=w.ops.concat(p.ops.slice(1))),w}diff(p,w){if(this.ops===p.ops)return new f;const m=[this,p].map(c=>c.map(b=>{if(b.insert!=null)return typeof b.insert=="string"?b.insert:a;const A=c===p?"on":"with";throw new Error("diff() called "+A+" non-document")}).join("")),E=new f,S=n(m[0],m[1],w,!0),x=new l.default(this.ops),v=new l.default(p.ops);return S.forEach(c=>{let b=c[1].length;for(;b>0;){let A=0;switch(c[0]){case n.INSERT:A=Math.min(v.peekLength(),b),E.push(v.next(A));break;case n.DELETE:A=Math.min(b,x.peekLength()),x.next(A),E.delete(A);break;case n.EQUAL:A=Math.min(x.peekLength(),v.peekLength(),b);const _=x.next(A),C=v.next(A);i(_.insert,C.insert)?E.retain(A,s.default.diff(_.attributes,C.attributes)):E.push(C).delete(A);break}b-=A}}),E.chop()}eachLine(p,w=`
`){const m=new l.default(this.ops);let E=new f,S=0;for(;m.hasNext();){if(m.peekType()!=="insert")return;const x=m.peek(),v=o.default.length(x)-m.peekLength(),c=typeof x.insert=="string"?x.insert.indexOf(w,v)-v:-1;if(c<0)E.push(m.next());else if(c>0)E.push(m.next(c));else{if(p(E,m.next(1).attributes||{},S)===!1)return;S+=1,E=new f}}E.length()>0&&p(E,{},S)}invert(p){const w=new f;return this.reduce((m,E)=>{if(E.insert)w.delete(o.default.length(E));else{if(typeof E.retain=="number"&&E.attributes==null)return w.retain(E.retain),m+E.retain;if(E.delete||typeof E.retain=="number"){const S=E.delete||E.retain;return p.slice(m,m+S).forEach(v=>{E.delete?w.push(v):E.retain&&E.attributes&&w.retain(o.default.length(v),s.default.invert(E.attributes,v.attributes))}),m+S}else if(typeof E.retain=="object"&&E.retain!==null){const S=p.slice(m,m+1),x=new l.default(S.ops).next(),[v,c,b]=u(E.retain,x.insert),A=f.getHandler(v);return w.retain({[v]:A.invert(c,b)},s.default.invert(E.attributes,x.attributes)),m+1}}return m},0),w.chop()}transform(p,w=!1){if(w=!!w,typeof p=="number")return this.transformPosition(p,w);const m=p,E=new l.default(this.ops),S=new l.default(m.ops),x=new f;for(;E.hasNext()||S.hasNext();)if(E.peekType()==="insert"&&(w||S.peekType()!=="insert"))x.retain(o.default.length(E.next()));else if(S.peekType()==="insert")x.push(S.next());else{const v=Math.min(E.peekLength(),S.peekLength()),c=E.next(v),b=S.next(v);if(c.delete)continue;if(b.delete)x.push(b);else{const A=c.retain,_=b.retain;let C=typeof _=="object"&&_!==null?_:v;if(typeof A=="object"&&A!==null&&typeof _=="object"&&_!==null){const O=Object.keys(A)[0];if(O===Object.keys(_)[0]){const D=f.getHandler(O);D&&(C={[O]:D.transform(A[O],_[O],w)})}}x.retain(C,s.default.transform(c.attributes,b.attributes,w))}}return x.chop()}transformPosition(p,w=!1){w=!!w;const m=new l.default(this.ops);let E=0;for(;m.hasNext()&&E<=p;){const S=m.peekLength(),x=m.peekType();if(m.next(),x==="delete"){p-=Math.min(S,p-E);continue}else x==="insert"&&(E<p||!w)&&(p+=S);E+=S}return p}}f.Op=o.default,f.OpIterator=l.default,f.AttributeMap=s.default,f.handlers={},e.default=f,t.exports=f,t.exports.default=f})(Gf,Gf.exports);var en=Gf.exports;const ne=sh(en);class bn extends Ft{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}bn.blotName="break";bn.tagName="BR";let xn=class extends Ca{};const S4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function iu(t){return t.replace(/[&<>"']/g,e=>S4[e])}const In=class In extends pd{static compare(e,n){const r=In.order.indexOf(e),i=In.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(In.compare(this.statics.blotName,r)<0&&this.scroll.query(r,re.BLOT)){const s=this.isolate(e,n);i&&s.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof In&&In.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};Y(In,"allowedChildren",[In,bn,Ft,xn]),Y(In,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let $n=In;const Og=1;class Ye extends Uo{constructor(){super(...arguments);Y(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=ay(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,i,s){r<=0||(this.scroll.query(i,re.BLOCK)?n+r===this.length()&&this.format(i,s):super.formatAt(n,Math.min(r,this.length()-n-1),i,s),this.cache={})}insertAt(n,r,i){if(i!=null){super.insertAt(n,r,i),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),o=s.shift();o.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let l=this;s.reduce((a,u)=>(l=l.split(a,!0),l.insertAt(0,u),u.length),n+o.length)}insertBefore(n,r){const{head:i}=this.children;super.insertBefore(n,r),i instanceof bn&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Og),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-Og)){const s=this.clone();return n===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(n,r);return this.cache={},i}}Ye.blotName="block";Ye.tagName="P";Ye.defaultChild=bn;Ye.allowedChildren=[bn,$n,Ft,xn];class Yt extends Ft{attach(){super.attach(),this.attributes=new Ja(this.domNode)}delta(){return new ne().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,re.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),s=i.pop(),o=i.map(a=>{const u=this.scroll.create(Ye.blotName);return u.insertAt(0,a),u}),l=this.split(e);o.forEach(a=>{this.parent.insertBefore(a,l)}),s&&this.parent.insertBefore(this.scroll.create("text",s),l)}}Yt.scope=re.BLOCK_BLOT;function ay(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(ct).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),Qt(r,{},e)),new ne).insert(`
`,Qt(t))}function Qt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Qt(t.parent,e,n)}const Gt=class Gt extends Ft{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(Gt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==re.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Gt.CONTENTS.length,r.optimize(),r.formatAt(i,Gt.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof xn?this.prev:null,r=n?n.length():0,i=this.next instanceof xn?this.next:null,s=i?i.text:"",{textNode:o}=this,l=o.data.split(Gt.CONTENTS).join("");o.data=Gt.CONTENTS;let a;if(n)a=n,(l||i)&&(n.insertAt(n.length(),l+s),i&&i.remove());else if(i)a=i,i.insertAt(0,l);else{const u=document.createTextNode(l);a=this.scroll.create(u),this.parent.insertBefore(a,this)}if(this.remove(),e){const u=(p,w)=>n&&p===n.domNode?w:p===o?r+w-1:i&&p===i.domNode?r+l.length+w:null,f=u(e.start.node,e.start.offset),h=u(e.end.node,e.end.offset);if(f!==null&&h!==null)return{startNode:a.domNode,startOffset:f,endNode:a.domNode,endOffset:h}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Gt.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};Y(Gt,"blotName","cursor"),Y(Gt,"className","ql-cursor"),Y(Gt,"tagName","span"),Y(Gt,"CONTENTS","\uFEFF");let ms=Gt;var uy={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(a,u,f){this.fn=a,this.context=u,this.once=f||!1}function s(a,u,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var w=new i(f,h||a,p),m=n?n+u:u;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],w]:a._events[m].push(w):(a._events[m]=w,a._eventsCount++),a}function o(a,u){--a._eventsCount===0?a._events=new r:delete a._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,w=h.length,m=new Array(w);p<w;p++)m[p]=h[p].fn;return m},l.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,f,h,p,w,m){var E=n?n+u:u;if(!this._events[E])return!1;var S=this._events[E],x=arguments.length,v,c;if(S.fn){switch(S.once&&this.removeListener(u,S.fn,void 0,!0),x){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,h),!0;case 4:return S.fn.call(S.context,f,h,p),!0;case 5:return S.fn.call(S.context,f,h,p,w),!0;case 6:return S.fn.call(S.context,f,h,p,w,m),!0}for(c=1,v=new Array(x-1);c<x;c++)v[c-1]=arguments[c];S.fn.apply(S.context,v)}else{var b=S.length,A;for(c=0;c<b;c++)switch(S[c].once&&this.removeListener(u,S[c].fn,void 0,!0),x){case 1:S[c].fn.call(S[c].context);break;case 2:S[c].fn.call(S[c].context,f);break;case 3:S[c].fn.call(S[c].context,f,h);break;case 4:S[c].fn.call(S[c].context,f,h,p);break;default:if(!v)for(A=1,v=new Array(x-1);A<x;A++)v[A-1]=arguments[A];S[c].fn.apply(S[c].context,v)}}return!0},l.prototype.on=function(u,f,h){return s(this,u,f,h,!1)},l.prototype.once=function(u,f,h){return s(this,u,f,h,!0)},l.prototype.removeListener=function(u,f,h,p){var w=n?n+u:u;if(!this._events[w])return this;if(!f)return o(this,w),this;var m=this._events[w];if(m.fn)m.fn===f&&(!p||m.once)&&(!h||m.context===h)&&o(this,w);else{for(var E=0,S=[],x=m.length;E<x;E++)(m[E].fn!==f||p&&!m[E].once||h&&m[E].context!==h)&&S.push(m[E]);S.length?this._events[w]=S.length===1?S[0]:S:o(this,w)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(uy);var T4=uy.exports;const A4=sh(T4),Wf=new WeakMap,Qf=["error","warn","log","info"];let Zf="warn";function cy(t){if(Zf&&Qf.indexOf(t)<=Qf.indexOf(Zf)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function cr(t){return Qf.reduce((e,n)=>(e[n]=cy.bind(console,n,t),e),{})}cr.level=t=>{Zf=t};cy.level=cr.level;const kc=cr("quill:events"),k4=["selectionchange","mousedown","mouseup","click"];k4.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=Wf.get(i);s&&s.emitter&&s.emitter.handleDOM(...n)})})});class te extends A4{constructor(){super(),this.domListeners={},this.on("error",kc.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kc.log.call(kc,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(s=>{let{node:o,handler:l}=s;(e.target===o||o.contains(e.target))&&l(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}Y(te,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),Y(te,"sources",{API:"api",SILENT:"silent",USER:"user"});const Nc=cr("quill:selection");class ci{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class N4{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ci(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,te.sources.USER),1)}),this.emitter.on(te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(te.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const o=s.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(o?te.sources.SILENT:i)}catch{}})}),this.emitter.on(te.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:s,startOffset:o,endNode:l,endOffset:a}=i.range;this.setNativeRange(s,o,l,a),this.update(te.sources.SILENT)}}),this.update(te.sources.SILENT)}handleComposition(){this.emitter.on(te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,re.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof ct){const s=i.split(r.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[s,o]=this.scroll.leaf(e);if(s==null)return null;if(n>0&&o===s.length()){const[f]=this.scroll.leaf(e+1);if(f){const[h]=this.scroll.line(e),[p]=this.scroll.line(e+1);h===p&&(s=f,o=0)}}[i,o]=s.position(o,!0);const l=document.createRange();if(n>0)return l.setStart(i,o),[s,o]=this.scroll.leaf(e+n),s==null?null:([i,o]=s.position(o,!0),l.setEnd(i,o),l.getBoundingClientRect());let a="left",u;if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(l.setStart(i,o),l.setEnd(i,o+1)):(l.setStart(i,o-1),l.setEnd(i,o),a="right"),u=l.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;u=s.domNode.getBoundingClientRect(),o>0&&(a="right")}return{bottom:u.top+u.height,height:u.height,left:u[a],right:u[a],top:u.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Nc.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&_c(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(o=>{const[l,a]=o,u=this.scroll.find(l,!0),f=u.offset(this.scroll);return a===0?f:u instanceof ct?f+u.index(l,a):f+u.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),s=Math.min(i,...r);return new ci(s,i-s)}normalizeNative(e){if(!_c(this.root,e.startContainer)||!e.collapsed&&!_c(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:s}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;r.node=i,r.offset=s}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,s)=>{i=Math.min(n-1,i);const[o,l]=this.scroll.leaf(i);return o?o.position(l,s):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Nc.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||s||e!==l.startContainer||n!==l.startOffset||r!==l.endContainer||i!==l.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const a=document.createRange();a.setStart(e,n),a.setEnd(r,i),o.removeAllRanges(),o.addRange(a)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.sources.API;if(typeof n=="string"&&(r=n,n=!1),Nc.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!dd(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const s=[te.events.SELECTION_CHANGE,ns(this.lastRange),ns(n),e];this.emitter.emit(te.events.EDITOR_CHANGE,...s),e!==te.sources.SILENT&&this.emitter.emit(...s)}}}function _c(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const _4=/^[ -~]*$/;class C4{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=Rg(e),i=new ne;return I4(r.ops.slice()).reduce((o,l)=>{const a=en.Op.length(l);let u=l.attributes||{},f=!1,h=!1;if(l.insert!=null){if(i.retain(a),typeof l.insert=="string"){const m=l.insert;h=!m.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(Yt,o)[0]),this.scroll.insertAt(o,m);const[E,S]=this.scroll.line(o);let x=Pr({},Qt(E));if(E instanceof Ye){const[v]=E.descendant(ct,S);v&&(x=Pr(x,Qt(v)))}u=en.AttributeMap.diff(x,u)||{}}else if(typeof l.insert=="object"){const m=Object.keys(l.insert)[0];if(m==null)return o;const E=this.scroll.query(m,re.INLINE)!=null;if(E)(n<=o||this.scroll.descendant(Yt,o)[0])&&(h=!0);else if(o>0){const[S,x]=this.scroll.descendant(ct,o-1);S instanceof xn?S.value()[x]!==`
`&&(f=!0):S instanceof Ft&&S.statics.scope===re.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(o,m,l.insert[m]),E){const[S]=this.scroll.descendant(ct,o);if(S){const x=Pr({},Qt(S));u=en.AttributeMap.diff(x,u)||{}}}}n+=a}else if(i.push(l),l.retain!==null&&typeof l.retain=="object"){const m=Object.keys(l.retain)[0];if(m==null)return o;this.scroll.updateEmbedAt(o,m,l.retain[m])}Object.keys(u).forEach(m=>{this.scroll.formatAt(o,a,m,u[m])});const p=f?1:0,w=h?1:0;return n+=p+w,i.retain(p),i.delete(w),o+a+p+w},0),i.reduce((o,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(o,l.delete),o):o+en.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new ne().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(s=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(s,r[s])})}),this.scroll.optimize();const i=new ne().retain(e).retain(n,ns(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(s=>{this.scroll.formatAt(e,n,s,r[s])});const i=new ne().retain(e).retain(n,ns(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new ne)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(l=>{const[a]=l;a instanceof Ye?r.push(a):a instanceof ct&&i.push(a)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(ct,e,n));const[s,o]=[r,i].map(l=>{const a=l.shift();if(a==null)return{};let u=Qt(a);for(;Object.keys(u).length>0;){const f=l.shift();if(f==null)return u;u=L4(Qt(f),u)}return u});return{...s,...o}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const s=r.length();return r.length()>=i+n&&!(i===0&&n===s)?$o(r,i,n,!0):$o(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=Rg(n),i=new ne().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new ne().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new ne().retain(e).insert(n,ns(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Ye.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof bn}removeFormat(e,n){const r=this.getText(e,n),[i,s]=this.scroll.line(e+n);let o=0,l=new ne;i!=null&&(o=i.length()-s,l=i.delta().slice(s,s+o-1).insert(`
`));const u=this.getContents(e,n+o).diff(new ne().insert(r).concat(l)),f=new ne().retain(e).concat(u);return this.applyDelta(f)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(_4)&&this.scroll.find(n[0].target)){const s=this.scroll.find(n[0].target),o=Qt(s),l=s.offset(this.scroll),a=n[0].oldValue.replace(ms.CONTENTS,""),u=new ne().insert(a),f=new ne().insert(s.value()),h=r&&{oldRange:Pg(r.oldRange,-l),newRange:Pg(r.newRange,-l)};e=new ne().retain(l).concat(u.diff(f,h)).reduce((w,m)=>m.insert?w.insert(m.insert,o):w.push(m),new ne),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!dd(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Ri(t,e,n){if(t.length===0){const[w]=Cc(n.pop());return e<=0?`</li></${w}>`:`</li></${w}>${Ri([],e-1,n)}`}const[{child:r,offset:i,length:s,indent:o,type:l},...a]=t,[u,f]=Cc(l);if(o>e)return n.push(l),o===e+1?`<${u}><li${f}>${$o(r,i,s)}${Ri(a,o,n)}`:`<${u}><li>${Ri(t,e+1,n)}`;const h=n[n.length-1];if(o===e&&l===h)return`</li><li${f}>${$o(r,i,s)}${Ri(a,o,n)}`;const[p]=Cc(n.pop());return`</li></${p}>${Ri(t,e-1,n)}`}function $o(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof xn)return iu(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof yn){if(t.statics.blotName==="list-container"){const u=[];return t.children.forEachAt(e,n,(f,h,p)=>{const w="formats"in f&&typeof f.formats=="function"?f.formats():{};u.push({child:f,offset:h,length:p,indent:w.indent||0,type:w.list})}),Ri(u,-1,[])}const i=[];if(t.children.forEachAt(e,n,(u,f,h)=>{i.push($o(u,f,h))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:o}=t.domNode,[l,a]=s.split(`>${o}<`);return l==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${a}`:`${l}>${i.join("")}<${a}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function L4(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function Cc(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Rg(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new ne)}function Pg(t,e){let{index:n,length:r}=t;return new ci(n+e,r)}function I4(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,s)=>{s&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class Sn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}Y(Sn,"DEFAULTS",{});const Dl="\uFEFF";class xd extends Ft{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Dl),this.rightGuard=document.createTextNode(Dl),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(Dl).join("");if(e===this.leftGuard)if(this.prev instanceof xn){const s=this.prev.length();this.prev.insertAt(s,i),n={startNode:this.prev.domNode,startOffset:s+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof xn?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=Dl,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class O4{constructor(e,n){Y(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof xd)&&(this.emitter.emit(te.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(te.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(te.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(te.events.COMPOSITION_END,e),this.isComposing=!1}}const go=class go{constructor(e,n){Y(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};Y(go,"DEFAULTS",{modules:{}}),Y(go,"themes",{default:go});let ys=go;const R4=t=>t.parentElement||t.getRootNode().host||null,P4=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},Bl=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Dg=(t,e,n,r,i,s)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+s:0,D4=(t,e)=>{var s,o,l;const n=t.ownerDocument;let r=e,i=t;for(;i;){const a=i===n.body,u=a?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??n.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??n.documentElement.clientHeight,left:0}:P4(i),f=getComputedStyle(i),h=Dg(r.left,r.right,u.left,u.right,Bl(f.scrollPaddingLeft),Bl(f.scrollPaddingRight)),p=Dg(r.top,r.bottom,u.top,u.bottom,Bl(f.scrollPaddingTop),Bl(f.scrollPaddingBottom));if(h||p)if(a)(l=n.defaultView)==null||l.scrollBy(h,p);else{const{scrollLeft:w,scrollTop:m}=i;p&&(i.scrollTop+=p),h&&(i.scrollLeft+=h);const E=i.scrollLeft-w,S=i.scrollTop-m;r={left:r.left-E,top:r.top-S,right:r.right-E,bottom:r.bottom-S}}i=a||f.position==="fixed"?null:R4(i)}},B4=100,j4=["block","break","cursor","inline","scroll","text"],U4=(t,e,n)=>{const r=new gs;return j4.forEach(i=>{const s=e.query(i);s&&r.register(s)}),t.forEach(i=>{let s=e.query(i);s||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;s;)if(r.register(s),s="blotName"in s?s.requiredContainer??null:null,o+=1,o>B4){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},is=cr("quill"),jl=new gs;yn.uiClass="ql-ui";const un=class un{static debug(e){e===!0&&(e="log"),cr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Wf.get(e)||jl.find(e,n)}static import(e){return this.imports[e]==null&&is.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&is.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&jl.register(n),typeof n.register=="function"&&n.register(jl)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=M4(e,n),this.container=this.options.container,this.container==null){is.error("Invalid Quill container",e);return}this.options.debug&&un.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Wf.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new te;const i=gd.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new C4(this.scroll),this.selection=new N4(this.scroll,this.emitter),this.composition=new O4(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(te.events.EDITOR_CHANGE,o=>{o===te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(te.events.SCROLL_UPDATE,(o,l)=>{const a=this.selection.lastRange,[u]=this.selection.getRange(),f=a&&u?{oldRange:a,newRange:u}:void 0;an.call(this,()=>this.editor.update(null,l,f),o)}),this.emitter.on(te.events.SCROLL_EMBED_UPDATE,(o,l)=>{const a=this.selection.lastRange,[u]=this.selection.getRange(),f=a&&u?{oldRange:a,newRange:u}:void 0;an.call(this,()=>{const h=new ne().retain(o.offset(this)).retain({[o.statics.blotName]:l});return this.editor.update(h,[],f)},un.sources.USER)}),r){const o=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Qn(e,n,r),an.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.sources.API;return an.call(this,()=>{const i=this.getSelection(!0);let s=new ne;if(i==null)return s;if(this.scroll.query(e,re.BLOCK))s=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),s;s=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,te.sources.SILENT),s},r)}formatLine(e,n,r,i,s){let o;return[e,n,o,s]=Qn(e,n,r,i,s),an.call(this,()=>this.editor.formatLine(e,n,o),s,e,0)}formatText(e,n,r,i,s){let o;return[e,n,o,s]=Qn(e,n,r,i,s),an.call(this,()=>this.editor.formatText(e,n,o),s,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Qn(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Qn(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Qn(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:un.sources.API;return an.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,s){let o;return[e,,o,s]=Qn(e,0,r,i,s),an.call(this,()=>this.editor.insertText(e,n,o),s,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Qn(e,n,r),an.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){D4(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;return an.call(this,()=>{e=new ne(e);const r=this.getLength(),i=this.editor.deleteText(0,r),s=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(o)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||un.sources.API):([e,n,,r]=Qn(e,n,r),this.selection.setRange(new ci(Math.max(0,e),n),r),r!==te.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;const r=new ne().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;return an.call(this,()=>(e=new ne(e),this.editor.applyDelta(e)),n,!0)}};Y(un,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:jl,theme:"default"}),Y(un,"events",te.events),Y(un,"sources",te.sources),Y(un,"version","2.0.3"),Y(un,"imports",{delta:ne,parchment:u4,"core/module":Sn,"core/theme":ys});let W=un;function Bg(t){return typeof t=="string"?document.querySelector(t):t}function Lc(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function jg(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function M4(t,e){const n=Bg(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===W.DEFAULTS.theme?ys:W.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:s,...o}=W.DEFAULTS,{modules:l,...a}=i.DEFAULTS;let u=Lc(e.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const f=Pr({},Lc(s),Lc(l),u),h={...o,...jg(a),...jg(e)};let p=e.registry;return p?e.formats&&is.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?U4(e.formats,h.registry,is):h.registry,{...h,registry:p,container:n,theme:i,modules:Object.entries(f).reduce((w,m)=>{let[E,S]=m;if(!S)return w;const x=W.import(`modules/${E}`);return x==null?(is.error(`Cannot load ${E} module. Are you sure you registered it?`),w):{...w,[E]:Pr({},x.DEFAULTS||{},S)}},{}),bounds:Bg(h.bounds)}}function an(t,e,n,r){if(!this.isEnabled()&&e===te.sources.USER&&!this.allowReadOnlyEdits)return new ne;let i=n==null?null:this.getSelection();const s=this.editor.delta,o=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=Ug(i,o,e):r!==0&&(i=Ug(i,n,r,e)),this.setSelection(i,te.sources.SILENT)),o.length()>0){const l=[te.events.TEXT_CHANGE,o,s,e];this.emitter.emit(te.events.EDITOR_CHANGE,...l),e!==te.sources.SILENT&&this.emitter.emit(...l)}return o}function Qn(t,e,n,r,i){let s={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(s=n,i=r):typeof n=="string"&&(r!=null?s[n]=r:i=n),i=i||te.sources.API,[t,e,s,i]}function Ug(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let s,o;return e&&typeof e.transformPosition=="function"?[s,o]=[t.index,t.index+t.length].map(l=>e.transformPosition(l,r!==te.sources.USER)):[s,o]=[t.index,t.index+t.length].map(l=>l<e||l===e&&r===te.sources.USER?l:i>=0?l+i:Math.max(e,l+i)),new ci(s,o-s)}class mi extends eu{}function Mg(t){return t instanceof Ye||t instanceof Yt}function $g(t){return typeof t.updateContent=="function"}class Pi extends gd{constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(te.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(te.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(te.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[s]=this.line(e+n);if(super.deleteAt(e,n),s!=null&&r!==s&&i>0){if(r instanceof Yt||s instanceof Yt){this.optimize();return}const o=s.children.head instanceof bn?null:s.children.head;r.moveChildren(s,o),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,re.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===re.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new ne().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const s=r.shift();if(s){const a=s.type==="block"&&(s.delta.length()===0||!this.descendant(Yt,e)[0]&&e<this.length()),u=s.type==="block"?s.delta:new ne().insert({[s.key]:s.value});Ic(this,e,u);const f=s.type==="block"?1:0,h=e+u.length()+f;a&&this.insertAt(h-1,`
`);const p=Qt(this.line(e)[0]),w=en.AttributeMap.diff(p,s.attributes)||{};Object.keys(w).forEach(m=>{this.formatAt(h-1,1,m,w[m])}),e=h}let[o,l]=this.children.find(e);if(r.length&&(o&&(o=o.split(l),l=0),r.forEach(a=>{if(a.type==="block"){const u=this.createBlock(a.attributes,o||void 0);Ic(u,0,a.delta)}else{const u=this.create(a.key,a.value);this.insertBefore(u,o||void 0),Object.keys(a.attributes).forEach(f=>{u.format(f,a.attributes[f])})}})),i.type==="block"&&i.delta.length()){const a=o?o.offset(o.scroll)+l:this.length();Ic(this,a,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof ct?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Mg,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,s,o)=>{let l=[],a=o;return i.children.forEachAt(s,o,(u,f,h)=>{Mg(u)?l.push(u):u instanceof eu&&(l=l.concat(r(u,f,a))),a-=h}),l};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(te.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=te.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const s=this.find(i,!0);return s&&!$g(s)}),e.length>0&&this.emitter.emit(te.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(te.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(s=>s instanceof Yt,e);i&&i.statics.blotName===n&&$g(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new ne;return e.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const o=s.split(`
`);o.slice(0,-1).forEach(a=>{r.insert(a,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new ne});const l=o[o.length-1];l&&r.insert(l,i.attributes)}else{const o=Object.keys(s)[0];if(!o)return;this.query(o,re.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new ne,n.push({type:"blockEmbed",key:o,value:s[o],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(l=>{let[a,u]=l;this.query(a,re.BLOCK&re.BLOT)!=null?r=a:i[a]=u});const s=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(s,n||void 0);const o=s.length();return Object.entries(i).forEach(l=>{let[a,u]=l;s.formatAt(0,o,a,u)}),s}}Y(Pi,"blotName","scroll"),Y(Pi,"className","ql-editor"),Y(Pi,"tagName","DIV"),Y(Pi,"defaultChild",Ye),Y(Pi,"allowedChildren",[Ye,Yt,mi]);function Ic(t,e,n){n.reduce((r,i)=>{const s=en.Op.length(i);let o=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const l=i.insert;t.insertAt(r,l);const[a]=t.descendant(ct,r),u=Qt(a);o=en.AttributeMap.diff(u,o)||{}}else if(typeof i.insert=="object"){const l=Object.keys(i.insert)[0];if(l==null)return r;if(t.insertAt(r,l,i.insert[l]),t.scroll.query(l,re.INLINE)!=null){const[u]=t.descendant(ct,r),f=Qt(u);o=en.AttributeMap.diff(f,o)||{}}}}return Object.keys(o).forEach(l=>{t.formatAt(r,s,l,o[l])}),r+s},e)}const Ed={scope:re.BLOCK,whitelist:["right","center","justify"]},$4=new Mn("align","align",Ed),fy=new En("align","ql-align",Ed),hy=new Fr("align","text-align",Ed);class dy extends Fr{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const q4=new En("color","ql-color",{scope:re.INLINE}),bd=new dy("color","color",{scope:re.INLINE}),F4=new En("background","ql-bg",{scope:re.INLINE}),Sd=new dy("background","background-color",{scope:re.INLINE});class yi extends mi{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${iu(this.code(e,n))}
</pre>`}}class ft extends Ye{static register(){W.register(yi)}}Y(ft,"TAB","  ");class Td extends $n{}Td.blotName="code";Td.tagName="CODE";ft.blotName="code-block";ft.className="ql-code-block";ft.tagName="DIV";yi.blotName="code-block-container";yi.className="ql-code-block-container";yi.tagName="DIV";yi.allowedChildren=[ft];ft.allowedChildren=[xn,bn,ms];ft.requiredContainer=yi;const Ad={scope:re.BLOCK,whitelist:["rtl"]},py=new Mn("direction","dir",Ad),gy=new En("direction","ql-direction",Ad),my=new Fr("direction","direction",Ad),yy={scope:re.INLINE,whitelist:["serif","monospace"]},vy=new En("font","ql-font",yy);class z4 extends Fr{value(e){return super.value(e).replace(/["']/g,"")}}const wy=new z4("font","font-family",yy),xy=new En("size","ql-size",{scope:re.INLINE,whitelist:["small","large","huge"]}),Ey=new Fr("size","font-size",{scope:re.INLINE,whitelist:["10px","18px","32px"]}),H4=cr("quill:keyboard"),G4=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class su extends Sn{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=K4(e);if(i==null){H4.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(o=>{const l={...i,key:o,...n,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(x=>su.match(e,x));if(i.length===0)return;const s=W.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[l,a]=this.quill.getLine(o.index),[u,f]=this.quill.getLeaf(o.index),[h,p]=o.length===0?[u,f]:this.quill.getLeaf(o.index+o.length),w=u instanceof Ca?u.value().slice(0,f):"",m=h instanceof Ca?h.value().slice(p):"",E={collapsed:o.length===0,empty:o.length===0&&l.length()<=1,format:this.quill.getFormat(o),line:l,offset:a,prefix:w,suffix:m,event:e};i.some(x=>{if(x.collapsed!=null&&x.collapsed!==E.collapsed||x.empty!=null&&x.empty!==E.empty||x.offset!=null&&x.offset!==E.offset)return!1;if(Array.isArray(x.format)){if(x.format.every(v=>E.format[v]==null))return!1}else if(typeof x.format=="object"&&!Object.keys(x.format).every(v=>x.format[v]===!0?E.format[v]!=null:x.format[v]===!1?E.format[v]==null:dd(x.format[v],E.format[v])))return!1;return x.prefix!=null&&!x.prefix.test(E.prefix)||x.suffix!=null&&!x.suffix.test(E.suffix)?!1:x.handler.call(this,o,E,x)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(e.index);let o=new ne().retain(e.index-r).delete(r);if(n.offset===0){const[l]=this.quill.getLine(e.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const u=s.formats(),f=this.quill.getFormat(e.index-1,1);if(i=en.AttributeMap.diff(u,f)||{},Object.keys(i).length>0){const h=new ne().retain(e.index+s.length()-2).retain(1,i);o=o.compose(h)}}}this.quill.updateContents(o,W.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[s]=this.quill.getLine(e.index);let o=new ne().retain(e.index).delete(r);if(n.offset>=s.length()-1){const[l]=this.quill.getLine(e.index+1);if(l){const a=s.formats(),u=this.quill.getFormat(e.index,1);i=en.AttributeMap.diff(a,u)||{},Object.keys(i).length>0&&(o=o.retain(l.length()-1).retain(1,i))}}this.quill.updateContents(o,W.sources.USER),this.quill.focus()}handleDeleteRange(e){kd({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((s,o)=>(this.quill.scroll.query(o,re.BLOCK)&&!Array.isArray(n.format[o])&&(s[o]=n.format[o]),s),{}),i=new ne().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,W.sources.USER),this.quill.setSelection(e.index+1,W.sources.SILENT),this.quill.focus()}}const V4={bindings:{bold:Oc("bold"),italic:Oc("italic"),underline:Oc("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",W.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",W.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",W.sources.USER):e.format.list!=null&&this.quill.format("list",!1,W.sources.USER)}},"indent code-block":qg(!0),"outdent code-block":qg(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,W.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new ne().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,W.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,W.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,W.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,W.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new ne().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,W.sources.USER),this.quill.setSelection(t.index+1,W.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new ne().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,W.sources.USER),this.quill.setSelection(t.index+1,W.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,s]=e.getTable(t),o=W4(n,r,i,s);if(o==null)return;let l=n.offset();if(o<0){const a=new ne().retain(l).insert(`
`);this.quill.updateContents(a,W.sources.USER),this.quill.setSelection(t.index+1,t.length,W.sources.SILENT)}else if(o>0){l+=n.length();const a=new ne().retain(l).insert(`
`);this.quill.updateContents(a,W.sources.USER),this.quill.setSelection(l,W.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,W.sources.USER):this.quill.setSelection(i+r.length(),W.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",W.sources.USER),this.quill.history.cutoff();const o=new ne().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:s});return this.quill.updateContents(o,W.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,W.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const s=new ne().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,W.sources.USER),this.quill.setSelection(t.index-1,W.sources.SILENT),!1}return!0}},"embed left":Ul("ArrowLeft",!1),"embed left shift":Ul("ArrowLeft",!0),"embed right":Ul("ArrowRight",!1),"embed right shift":Ul("ArrowRight",!0),"table down":Fg(!1),"table up":Fg(!0)}};su.DEFAULTS=V4;function qg(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,s,W.sources.USER),this.quill.setSelection(e.index+s.length,W.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:l,length:a}=e;o.forEach((u,f)=>{t?(u.insertAt(0,s),f===0?l+=s.length:a+=s.length):u.domNode.textContent.startsWith(s)&&(u.deleteAt(0,s.length),f===0?l-=s.length:a-=s.length)}),this.quill.update(W.sources.USER),this.quill.setSelection(l,a,W.sources.SILENT)}}}function Ul(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[s]=this.quill.getLeaf(i);return s instanceof Ft?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,W.sources.USER):this.quill.setSelection(r.index-1,W.sources.USER):e?this.quill.setSelection(r.index,r.length+1,W.sources.USER):this.quill.setSelection(r.index+r.length+1,W.sources.USER),!1):!0}}}function Oc(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],W.sources.USER)}}}function Fg(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,s=i.parent[r];if(s!=null){if(s.statics.blotName==="table-row"){let o=s.children.head,l=i;for(;l.prev!=null;)l=l.prev,o=o.next;const a=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(a,0,W.sources.USER)}}else{const o=i.table()[r];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,W.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,W.sources.USER))}return!1}}}function K4(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=ns(t);else return null;return t.shortKey&&(t[G4]=t.shortKey,delete t.shortKey),t}function kd(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const s=r[0].formats(),o=r[r.length-1].formats();i=en.AttributeMap.diff(o,s)||{}}e.deleteText(n,W.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,W.sources.USER),e.setSelection(n.index,W.sources.SILENT)}function W4(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Q4=/font-weight:\s*normal/,Z4=["P","OL","UL"],zg=t=>t&&Z4.includes(t.tagName),X4=t=>{Array.from(t.querySelectorAll("br")).filter(e=>zg(e.previousElementSibling)&&zg(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},Y4=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(Q4)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function J4(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Y4(t),X4(t))}const eT=/\bmso-list:[^;]*ignore/i,tT=/\bmso-list:[^;]*\bl(\d+)/i,nT=/\bmso-list:[^;]*\blevel(\d+)/i,rT=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(tT);if(!r)return null;const i=Number(r[1]),s=n==null?void 0:n.match(nT),o=s?Number(s[1]):1,l=new RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),a=e.match(l),u=a&&a[1]==="bullet"?"bullet":"ordered";return{id:i,indent:o,type:u,element:t}},iT=t=>{var o,l;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(a=>{(a.getAttribute("style")||"").match(eT)?n.push(a):r.push(a)}),n.forEach(a=>{var u;return(u=a.parentNode)==null?void 0:u.removeChild(a)});const i=t.documentElement.innerHTML,s=r.map(a=>rT(a,i)).filter(a=>a);for(;s.length;){const a=[];let u=s.shift();for(;u;)a.push(u),u=s.length&&((o=s[0])==null?void 0:o.element)===u.element.nextElementSibling&&s[0].id===u.id?s.shift():null;const f=document.createElement("ul");a.forEach(w=>{const m=document.createElement("li");m.setAttribute("data-list",w.type),w.indent>1&&m.setAttribute("class",`ql-indent-${w.indent-1}`),m.innerHTML=w.element.innerHTML,f.appendChild(m)});const h=(l=a[0])==null?void 0:l.element,{parentNode:p}=h??{};h&&(p==null||p.replaceChild(f,h)),a.slice(1).forEach(w=>{let{element:m}=w;p==null||p.removeChild(m)})}};function sT(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&iT(t)}const oT=[sT,J4],lT=t=>{t.documentElement&&oT.forEach(e=>{e(t)})},aT=cr("quill:clipboard"),uT=[[Node.TEXT_NODE,ET],[Node.TEXT_NODE,Gg],["br",pT],[Node.ELEMENT_NODE,Gg],[Node.ELEMENT_NODE,dT],[Node.ELEMENT_NODE,hT],[Node.ELEMENT_NODE,wT],["li",yT],["ol, ul",vT],["pre",gT],["tr",xT],["b",Rc("bold")],["i",Rc("italic")],["strike",Rc("strike")],["style",mT]],cT=[$4,py].reduce((t,e)=>(t[e.keyName]=e,t),{}),Hg=[hy,Sd,bd,my,wy,Ey].reduce((t,e)=>(t[e.keyName]=e,t),{});class by extends Sn{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],uT.concat(this.options.matchers??[]).forEach(r=>{let[i,s]=r;this.addMatcher(i,s)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[ft.blotName])return new ne().insert(r||"",{[ft.blotName]:i[ft.blotName]});if(!n)return new ne().insert(r||"",i);const s=this.convertHTML(n);return Qo(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new ne().retain(s.length()-1).delete(1)):s}normalizeHTML(e){lT(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[s,o]=this.prepareMatching(r,i);return Nd(this.quill.scroll,r,s,o,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:W.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,W.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new ne().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),W.sources.SILENT)}}onCaptureCopy(e){var o,l;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:s}=this.onCopy(r,n);(o=e.clipboardData)==null||o.setData("text/plain",s),(l=e.clipboardData)==null||l.setData("text/html",i),n&&kd({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var o,l,a,u,f;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(o=e.clipboardData)==null?void 0:o.getData("text/html");let i=(l=e.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!i){const h=(a=e.clipboardData)==null?void 0:a.getData("text/uri-list");h&&(i=this.normalizeURIList(h))}const s=Array.from(((u=e.clipboardData)==null?void 0:u.files)||[]);if(!r&&s.length>0){this.quill.uploader.upload(n,s);return}if(r&&s.length>0){const h=new DOMParser().parseFromString(r,"text/html");if(h.body.childElementCount===1&&((f=h.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(n,s);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const s=this.quill.getFormat(e.index),o=this.convert({text:r,html:i},s);aT.log("onPaste",o,{text:r,html:i});const l=new ne().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(l,W.sources.USER),this.quill.setSelection(l.length()-e.length,W.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(s=>{const[o,l]=s;switch(o){case Node.TEXT_NODE:i.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(e.querySelectorAll(o)).forEach(a=>{if(n.has(a)){const u=n.get(a);u==null||u.push(l)}else n.set(a,[l])});break}}),[r,i]}}Y(by,"DEFAULTS",{matchers:[]});function vi(t,e,n,r){return r.query(e)?t.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[e])return i.push(s);const o=n?{[e]:n}:{};return i.insert(s.insert,{...o,...s.attributes})},new ne):t}function Qo(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function Tr(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Ft?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function fT(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Tr(t.previousElementSibling,e)&&!Tr(t.nextElementSibling,e)}const Ml=new WeakMap;function Sy(t){return t==null?!1:(Ml.has(t)||(t.tagName==="PRE"?Ml.set(t,!0):Ml.set(t,Sy(t.parentNode))),Ml.get(t))}function Nd(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((s,o)=>o(e,s,t),new ne):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,o)=>{let l=Nd(t,o,n,r,i);return o.nodeType===e.ELEMENT_NODE&&(l=n.reduce((a,u)=>u(o,a,t),l),l=(i.get(o)||[]).reduce((a,u)=>u(o,a,t),l)),s.concat(l)},new ne):new ne}function Rc(t){return(e,n,r)=>vi(n,t,!0,r)}function hT(t,e,n){const r=Mn.keys(t),i=En.keys(t),s=Fr.keys(t),o={};return r.concat(i).concat(s).forEach(l=>{let a=n.query(l,re.ATTRIBUTE);a!=null&&(o[a.attrName]=a.value(t),o[a.attrName])||(a=cT[l],a!=null&&(a.attrName===l||a.keyName===l)&&(o[a.attrName]=a.value(t)||void 0),a=Hg[l],a!=null&&(a.attrName===l||a.keyName===l)&&(a=Hg[l],o[a.attrName]=a.value(t)||void 0))}),Object.entries(o).reduce((l,a)=>{let[u,f]=a;return vi(l,u,f,n)},e)}function dT(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof Ft){const i={},s=r.value(t);if(s!=null)return i[r.blotName]=s,new ne().insert(i,r.formats(t,n))}else if(r.prototype instanceof Uo&&!Qo(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return vi(e,r.blotName,r.formats(t,n),n);return e}function pT(t,e){return Qo(e,`
`)||e.insert(`
`),e}function gT(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return vi(e,"code-block",i,n)}function mT(){return new ne}function yT(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Qo(e,`
`))return e;let i=-1,s=t.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?e:e.reduce((o,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?o.push(l):o.insert(l.insert,{indent:i,...l.attributes||{}}):o,new ne)}function vT(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const s=r.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),vi(e,"list",i,n)}function Gg(t,e,n){if(!Qo(e,`
`)){if(Tr(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Tr(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof Yt)return e.insert(`
`);r=r.firstChild}}}return e}function wT(t,e,n){var s;const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,l)=>{let[a,u]=l;return vi(o,a,u,n)},e),parseFloat(i.textIndent||0)>0?new ne().insert("	").concat(e):e}function xT(t,e,n){var i,s;const r=((i=t.parentElement)==null?void 0:i.tagName)==="TABLE"?t.parentElement:(s=t.parentElement)==null?void 0:s.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return vi(e,"table",l,n)}return e}function ET(t,e,n){var i;let r=t.data;if(((i=t.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(r.trim());if(!Sy(t)){if(r.trim().length===0&&r.includes(`
`)&&!fT(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&Tr(t.parentElement,n)||t.previousSibling instanceof Element&&Tr(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&Tr(t.parentElement,n)||t.nextSibling instanceof Element&&Tr(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(" "," ")}return e.insert(r)}class Ty extends Sn{constructor(n,r){super(n,r);Y(this,"lastRecorded",0);Y(this,"ignoreChange",!1);Y(this,"stack",{undo:[],redo:[]});Y(this,"currentRange",null);this.quill.on(W.events.EDITOR_CHANGE,(i,s,o,l)=>{i===W.events.SELECTION_CHANGE?s&&l!==W.sources.SILENT&&(this.currentRange=s):i===W.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===W.sources.USER?this.record(s,o):this.transform(s)),this.currentRange=Xf(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const i=this.stack[n].pop();if(!i)return;const s=this.quill.getContents(),o=i.delta.invert(s);this.stack[r].push({delta:o,range:Xf(i.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,W.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let i=n.invert(r),s=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(i=i.compose(l.delta),s=l.range)}else this.lastRecorded=o;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){Vg(this.stack.undo,n),Vg(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,W.sources.USER);else{const r=ST(this.quill.scroll,n.delta);this.quill.setSelection(r,W.sources.USER)}}}Y(Ty,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Vg(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Xf(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function bT(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,re.BLOCK)!=null):!1}function ST(t,e){const n=e.reduce((i,s)=>i+(s.delete||0),0);let r=e.length()-n;return bT(t,e)&&(r-=1),r}function Xf(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class Ay extends Sn{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var o;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(l.offsetNode,l.offset),i.setEnd(l.offsetNode,l.offset)}const s=i&&e.selection.normalizeNative(i);if(s){const l=e.selection.normalizedToRange(s);(o=r.dataTransfer)!=null&&o.files&&this.upload(l,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}Ay.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((s,o)=>s.insert({image:o}),new ne().retain(t.index).delete(t.length));this.quill.updateContents(i,te.sources.USER),this.quill.setSelection(t.index+r.length,te.sources.SILENT)})}};const TT=["insertText","insertReplacementText"];class AT extends Sn{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(W.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){kd({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new ne().retain(e.index).insert(n,r),W.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,W.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!TT.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=kT(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function kT(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const NT=/Mac/i.test(navigator.platform),_T=100,CT=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||NT&&t.key==="a"&&t.ctrlKey===!0);class LT extends Sn{constructor(n,r){super(n,r);Y(this,"isListening",!1);Y(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:i,event:s}=r;if(!(i instanceof yn)||!i.uiNode)return!0;const o=getComputedStyle(i.domNode).direction==="rtl";return o&&s.key!=="ArrowRight"||!o&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(s.shiftKey?1:0),W.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&CT(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+_T,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof yn)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(s)}}W.register({"blots/block":Ye,"blots/block/embed":Yt,"blots/break":bn,"blots/container":mi,"blots/cursor":ms,"blots/embed":xd,"blots/inline":$n,"blots/scroll":Pi,"blots/text":xn,"modules/clipboard":by,"modules/history":Ty,"modules/keyboard":su,"modules/uploader":Ay,"modules/input":AT,"modules/uiNode":LT});class IT extends En{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const OT=new IT("indent","ql-indent",{scope:re.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Yf extends Ye{}Y(Yf,"blotName","blockquote"),Y(Yf,"tagName","blockquote");class Jf extends Ye{static formats(e){return this.tagName.indexOf(e.tagName)+1}}Y(Jf,"blotName","header"),Y(Jf,"tagName",["H1","H2","H3","H4","H5","H6"]);class Zo extends mi{}Zo.blotName="list-container";Zo.tagName="OL";class Xo extends Ye{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){W.register(Zo)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=s=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),s.preventDefault()):o==="unchecked"&&(this.format("list","checked"),s.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}Xo.blotName="list";Xo.tagName="LI";Zo.allowedChildren=[Xo];Xo.requiredContainer=Zo;class qo extends $n{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}Y(qo,"blotName","bold"),Y(qo,"tagName",["STRONG","B"]);class eh extends qo{}Y(eh,"blotName","italic"),Y(eh,"tagName",["EM","I"]);class Ar extends $n{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return ky(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}Y(Ar,"blotName","link"),Y(Ar,"tagName","A"),Y(Ar,"SANITIZED_URL","about:blank"),Y(Ar,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function ky(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class th extends $n{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}Y(th,"blotName","script"),Y(th,"tagName",["SUB","SUP"]);class nh extends qo{}Y(nh,"blotName","strike"),Y(nh,"tagName",["S","STRIKE"]);class rh extends $n{}Y(rh,"blotName","underline"),Y(rh,"tagName","U");class ea extends xd{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}Y(ea,"blotName","formula"),Y(ea,"className","ql-formula"),Y(ea,"tagName","SPAN");const Kg=["alt","height","width"];class ih extends Ft{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Kg.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return ky(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){Kg.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}}Y(ih,"blotName","image"),Y(ih,"tagName","IMG");const Wg=["height","width"];class ta extends Yt{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Wg.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return Ar.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){Wg.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}Y(ta,"blotName","video"),Y(ta,"className","ql-video"),Y(ta,"tagName","IFRAME");const eo=new En("code-token","hljs",{scope:re.INLINE});class or extends $n{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(ft.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),eo.add(this.domNode,r)}format(e,n){e!==or.blotName?super.format(e,n):n?eo.add(this.domNode,n):(eo.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),eo.value(this.domNode)||this.unwrap()}}or.blotName="code-token";or.className="ql-token";class Zt extends ft{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),or.blotName,!1),super.replaceWith(e,n)}}class po extends yi{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Zt.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===Zt.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,s=Zt.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const o=this.children.reduce((a,u)=>a.concat(ay(u,!1)),new ne),l=e(i,s);o.diff(l).reduce((a,u)=>{let{retain:f,attributes:h}=u;return f?(h&&Object.keys(h).forEach(p=>{[Zt.blotName,or.blotName].includes(p)&&this.formatAt(a,f,p,h[p])}),a+f):a},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?Zt.formats(r.domNode):"plain"}">
${iu(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Zt.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}po.allowedChildren=[Zt];Zt.requiredContainer=po;Zt.allowedChildren=[or,ms,xn,bn];const RT=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class Ny extends Sn{static register(){W.register(or,!0),W.register(Zt,!0),W.register(po,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:s}=i;return r[s]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(W.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof po))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:s}=r;const o=n.ownerDocument.createElement("option");o.textContent=s,o.setAttribute("value",i),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(Zt.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Zt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(W.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(W.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(po):[e]).forEach(s=>{s.highlight(this.highlightBlot,n)}),this.quill.update(W.sources.SILENT),r!=null&&this.quill.setSelection(r,W.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return iu(e).split(`
`).reduce((i,s,o)=>(o!==0&&i.insert(`
`,{[ft.blotName]:n}),i.insert(s)),new ne);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(ft.className),r.innerHTML=RT(this.options.hljs,n,e),Nd(this.quill.scroll,r,[(i,s)=>{const o=eo.value(i);return o?s.compose(new ne().retain(s.length(),{[or.blotName]:o})):s}],[(i,s)=>i.data.split(`
`).reduce((o,l,a)=>(a!==0&&o.insert(`
`,{[ft.blotName]:n}),o.insert(l)),s)],new WeakMap)}}Ny.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const mo=class mo extends Ye{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",_d()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===mo.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};Y(mo,"blotName","table"),Y(mo,"tagName","TD");let pn=mo;class lr extends mi{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const s=this.splitAfter(n);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}Y(lr,"blotName","table-row"),Y(lr,"tagName","TR");class Un extends mi{}Y(Un,"blotName","table-body"),Y(Un,"tagName","TBODY");class vs extends mi{balanceCells(){const e=this.descendants(lr),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=pn.formats(r.children.head.domNode));const s=this.scroll.create(pn.blotName,i);r.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(Un);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[n]=this.descendant(Un);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),s=pn.formats(r.children.head.domNode),o=this.scroll.create(pn.blotName,s);r.insertBefore(o,i)})}insertRow(e){const[n]=this.descendant(Un);if(n==null||n.children.head==null)return;const r=_d(),i=this.scroll.create(lr.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(pn.blotName,r);i.appendChild(o)});const s=n.children.at(e);n.insertBefore(i,s)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}Y(vs,"blotName","table-container"),Y(vs,"tagName","TABLE");vs.allowedChildren=[Un];Un.requiredContainer=vs;Un.allowedChildren=[lr];lr.requiredContainer=Un;lr.allowedChildren=[pn];pn.requiredContainer=lr;function _d(){return`row-${Math.random().toString(36).slice(2,6)}`}class PT extends Sn{static register(){W.register(pn),W.register(lr),W.register(Un),W.register(vs)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(vs).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(W.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(W.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(W.sources.USER),this.quill.setSelection(n,W.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==pn.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const o=s.cellOffset();r.insertColumn(o+e),this.quill.update(W.sources.USER);let l=i.rowOffset();e===0&&(l+=1),this.quill.setSelection(n.index+l,n.length,W.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const o=i.rowOffset();r.insertRow(o+e),this.quill.update(W.sources.USER),e>0?this.quill.setSelection(n,W.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,W.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(s=>{const o=new Array(n).fill(`
`).join("");return s.insert(o,{table:_d()})},new ne().retain(r.index));this.quill.updateContents(i,W.sources.USER),this.quill.setSelection(r.index,W.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(W.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(W.events.TEXT_CHANGE,(r,i,s)=>{s===W.sources.USER&&this.balanceTables()}),!0):!1)})}}const Qg=cr("quill:toolbar");class Cd extends Sn{constructor(e,n){var r,i;if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),DT(s,this.options.container),(i=(r=e.container)==null?void 0:r.parentNode)==null||i.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Qg.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var l;const o=(l=this.options.handlers)==null?void 0:l[s];o&&this.addHandler(s,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(W.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){Qg.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];l.hasAttribute("selected")?s=!1:s=l.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,s);else if(this.quill.scroll.query(n).prototype instanceof Ft){if(s=prompt(`Enter ${n}`),!s)return;this.quill.updateContents(new ne().retain(o.index).delete(o.length).insert({[n]:s}),W.sources.USER)}else this.quill.format(n,s,W.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,s]=r;if(s.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[i]==null)o=s.querySelector("option[selected]");else if(!Array.isArray(n[i])){let l=n[i];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),o=s.querySelector(`option[value="${l}"]`)}o==null?(s.value="",s.selectedIndex=-1):o.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const o=n[i],l=o===s.getAttribute("value")||o!=null&&o.toString()===s.getAttribute("value")||o==null&&!s.getAttribute("value");s.classList.toggle("ql-active",l),s.setAttribute("aria-pressed",l.toString())}else{const o=n[i]!=null;s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}})}}Cd.DEFAULTS={};function Zg(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function DT(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")Zg(r,i);else{const s=Object.keys(i)[0],o=i[s];Array.isArray(o)?BT(r,s,o):Zg(r,s,o)}}),t.appendChild(r)})}function BT(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),r.appendChild(s)}),t.appendChild(r)}Cd.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,re.INLINE)!=null&&this.quill.format(n,!1,W.sources.USER)})}else this.quill.removeFormat(t.index,t.length,W.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",W.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,W.sources.USER),this.quill.format("direction",t,W.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,W.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,W.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,W.sources.USER):this.quill.format("list","unchecked",W.sources.USER):this.quill.format("list",t,W.sources.USER)}}};const jT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',UT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',MT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',$T='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',qT='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',FT='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',zT='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',HT='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Xg='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',GT='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',VT='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',KT='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',WT='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',QT='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',ZT='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',XT='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',YT='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',JT='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',e5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',t5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',n5='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',r5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',i5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',s5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',o5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',l5='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',a5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',u5='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',c5='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',f5='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',h5='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',d5='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',p5='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Fo={align:{"":jT,center:UT,right:MT,justify:$T},background:qT,blockquote:FT,bold:zT,clean:HT,code:Xg,"code-block":Xg,color:GT,direction:{"":VT,rtl:KT},formula:WT,header:{1:QT,2:ZT,3:XT,4:YT,5:JT,6:e5},italic:t5,image:n5,indent:{"+1":r5,"-1":i5},link:s5,list:{bullet:o5,check:l5,ordered:a5},script:{sub:u5,super:c5},strike:f5,table:h5,underline:d5,video:p5},g5='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Yg=0;function Jg(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class ou{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Jg(this.label,"aria-expanded"),Jg(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=g5,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Yg}`,Yg+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class _y extends ou{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class Cy extends ou{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const m5=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class Ly{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,m5(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let o=0;if(s.right>i.right&&(o=i.right-s.right,this.root.style.left=`${n+o}px`),s.left<i.left&&(o=i.left-s.left,this.root.style.left=`${n+o}px`),s.bottom>i.bottom){const l=s.bottom-s.top,a=e.bottom-e.top+l;this.root.style.top=`${r-a}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const y5=[!1,"center","right","justify"],v5=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],w5=[!1,"serif","monospace"],x5=["1","2","3",!1],E5=["small",!1,"large","huge"];class Yo extends ys{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),n[s]!=null))if(s==="direction")r.innerHTML=n[s][""]+n[s].rtl;else if(typeof n[s]=="string")r.innerHTML=n[s];else{const o=r.value||"";o!=null&&n[s][o]&&(r.innerHTML=n[s][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Ks(i,y5),typeof n.align=="object"))return new Cy(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Ks(i,v5,s==="background"?"#ffffff":"#000000"),new _y(i,n[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Ks(i,w5):i.classList.contains("ql-header")?Ks(i,x5):i.classList.contains("ql-size")&&Ks(i,E5)),new ou(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(te.events.EDITOR_CHANGE,r)}}Yo.DEFAULTS=Pr({},ys.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Iy extends Ly{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,te.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=b5(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",te.sources.USER),this.quill.setSelection(r+2,te.sources.USER)}break}}this.textbox.value="",this.hide()}}function b5(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Ks(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const S5=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Oy extends Iy{constructor(e,n){super(e,n),this.quill.on(te.events.EDITOR_CHANGE,(r,i,s,o)=>{if(r===te.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&o===te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(i.index,i.length);if(l.length===1){const a=this.quill.getBounds(i);a!=null&&this.position(a)}else{const a=l[l.length-1],u=this.quill.getIndex(a),f=Math.min(a.length()-1,i.index+i.length-u),h=this.quill.getBounds(new ci(u,f));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}Y(Oy,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Ry extends Yo{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=S5),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Oy(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Fo),this.buildPickers(e.container.querySelectorAll("select"),Fo))}}Ry.DEFAULTS=Pr({},Yo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,W.sources.USER)}}}}});const T5=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Py extends Iy{constructor(){super(...arguments);Y(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,te.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(te.events.SELECTION_CHANGE,(n,r,i)=>{if(n!=null){if(n.length===0&&i===te.sources.USER){const[s,o]=this.quill.scroll.descendant(Ar,n.index);if(s!=null){this.linkRange=new ci(n.index-o,s.length());const l=Ar.formats(s.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}Y(Py,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Dy extends Yo{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=T5),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Fo),this.buildPickers(e.container.querySelectorAll("select"),Fo),this.tooltip=new Py(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}Dy.DEFAULTS=Pr({},Yo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,W.sources.USER)}}}}});W.register({"attributors/attribute/direction":py,"attributors/class/align":fy,"attributors/class/background":F4,"attributors/class/color":q4,"attributors/class/direction":gy,"attributors/class/font":vy,"attributors/class/size":xy,"attributors/style/align":hy,"attributors/style/background":Sd,"attributors/style/color":bd,"attributors/style/direction":my,"attributors/style/font":wy,"attributors/style/size":Ey},!0);W.register({"formats/align":fy,"formats/direction":gy,"formats/indent":OT,"formats/background":Sd,"formats/color":bd,"formats/font":vy,"formats/size":xy,"formats/blockquote":Yf,"formats/code-block":ft,"formats/header":Jf,"formats/list":Xo,"formats/bold":qo,"formats/code":Td,"formats/italic":eh,"formats/link":Ar,"formats/script":th,"formats/strike":nh,"formats/underline":rh,"formats/formula":ea,"formats/image":ih,"formats/video":ta,"modules/syntax":Ny,"modules/table":PT,"modules/toolbar":Cd,"themes/bubble":Ry,"themes/snow":Dy,"ui/icons":Fo,"ui/picker":ou,"ui/icon-picker":Cy,"ui/color-picker":_y,"ui/tooltip":Ly},!0);const A5=({annotations:t,profiles:e,onDelete:n,onSaveComment:r,currentUrl:i})=>{const[s,o]=ie.useState({}),[l,a]=ie.useState(null),[u,f]=ie.useState(!1),[h,p]=ie.useState(null),w=ie.useRef({}),m=ie.useRef({}),[E,S]=ie.useState({});ie.useEffect(()=>{const _={};t.forEach(C=>{E[C.id]===void 0&&(_[C.id]=!1)}),S(C=>({...C,..._}))},[t]),ie.useEffect(()=>{const C=setTimeout(()=>{t.forEach(D=>{const M=D.id,G=w.current[M];if(G&&!m.current[M]){console.log(`Initializing Quill editor for annotation ${M}`);const I=document.createElement("div");I.className="quill-wrapper",G.appendChild(I);try{m.current[M]=new W(I,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]},placeholder:"Add a comment..."}),m.current[M].on("text-change",()=>{const k=m.current[M].root.innerHTML||"";o(P=>({...P,[M]:k==="<p><br></p>"?"":k}))})}catch(k){console.error(`Failed to initialize Quill editor for annotation ${M}:`,k)}}else G||console.warn(`Editor element not found for annotation ${M}`)})},0),O=new Set(t.map(D=>D.id));return Object.keys(m.current).forEach(D=>{if(!O.has(D)&&m.current[D]){console.log(`Cleaning up Quill editor for removed annotation ${D}`);const M=w.current[D];M&&(M.innerHTML=""),m.current[D].off("text-change"),m.current[D]=null,delete m.current[D],delete w.current[D]}}),()=>{clearTimeout(C),Object.keys(m.current).forEach(D=>{console.log(`Cleaning up Quill editor on unmount for annotation ${D}`);const M=w.current[D];M&&(M.innerHTML=""),m.current[D]&&(m.current[D].off("text-change"),m.current[D]=null)}),m.current={},w.current={}}},[t]);const x=async _=>{const C=s[_]||"";if(C.trim()&&r){console.log("AnnotationList: Saving comment for annotation:",_,C),await r(_,C),o(D=>({...D,[_]:""}));const O=m.current[_];O&&O.setContents([])}},v=async _=>{var C,O;f(!0),p(null);try{const D=_.url||i;if(!D)throw new Error("No URL available for sharing");const M=Xr(D),G=`https://citizenx.app/check-extension?annotationId=${_.id}&url=${encodeURIComponent(M)}`,I=await _x(G),k=Yp(_.content),U=`Check out this annotation: "${k.trim()?k.length>100?k.substring(0,100)+"...":k:"No content available"}" by ${((C=e[_.author])==null?void 0:C.handle)||"Unknown"} #CitizenX`;a(`${U} ${I}`)}catch(D){console.error("AnnotationList: Failed to shorten URL:",D),p("Failed to shorten URL");const M=_.url||i;let G="";if(M){const U=Xr(M);G=`https://citizenx.app/check-extension?annotationId=${_.id}&url=${encodeURIComponent(U)}`}else G="https://citizenx.app";const I=Yp(_.content),P=`Check out this annotation: "${I.trim()?I.length>100?I.substring(0,100)+"...":I:"No content available"}" by ${((O=e[_.author])==null?void 0:O.handle)||"Unknown"} #CitizenX`;a(`${P} ${G}`)}finally{f(!1)}},c=async _=>{await navigator.clipboard.writeText(_),alert("Link copied to clipboard!"),a(null)},b=_=>{S(C=>({...C,[_]:!C[_]}))},A=(_,C,O)=>{const D=encodeURIComponent(C),M=encodeURIComponent(O);switch(_){case"x":return`https://twitter.com/intent/tweet?text=${D}&url=${M}`;case"facebook":return`https://www.facebook.com/sharer/sharer.php?u=${M}"e=${D}`;case"whatsapp":return`https://api.whatsapp.com/send?text=${D}%20${M}`;case"telegram":return`https://t.me/share/url?url=${M}&text=${D}`;case"email":return`mailto:?subject=CitizenX%20Annotation&body=${D}%20${M}`;default:return"#"}};return Z.jsxs("div",{className:"annotation-list",children:[t.map(_=>{var G;const C=e[_.author]||null,O=C?C.handle:"Unknown";console.log("AnnotationList: Rendering annotation:",_,"Author handle:",O);const D=_.comments?[..._.comments].sort((I,k)=>I.timestamp-k.timestamp):[],M=E[_.id]||!1;return Z.jsxs("div",{className:"annotation-item","data-annotation-id":_.id,children:[Z.jsxs("div",{className:"annotation-header",children:[Z.jsx("span",{className:"annotation-author",children:O}),Z.jsxs("span",{className:"annotation-timestamp",children:[" ","• ",new Date(_.timestamp).toLocaleString()]}),Z.jsx("button",{onClick:()=>n(_.id),className:"delete-button",children:"Delete"}),Z.jsx("button",{onClick:()=>v(_),className:"share-button",disabled:u,children:u?"Shortening...":"Share"})]}),Z.jsx("div",{className:"annotation-content",dangerouslySetInnerHTML:{__html:_.content||"No content"}}),Z.jsxs("div",{className:"comments-container",children:[Z.jsxs("button",{className:"comments-toggle-button",onClick:()=>b(_.id),children:[M?"−":"+"," ",M?"Hide comments":`Show ${D.length} comment${D.length>1?"s":""}`]}),M&&D.length>0&&Z.jsx("div",{className:"comments-section",children:D.map(I=>{const k=e[I.author]||null,P=k?k.handle:"Unknown";return Z.jsx("div",{className:"comment-item",children:Z.jsxs("div",{className:"comment-group",children:[Z.jsxs("div",{className:"comment-header",children:[Z.jsx("span",{className:"comment-author",children:P}),Z.jsxs("span",{className:"comment-timestamp",children:[" ","• ",new Date(I.timestamp).toLocaleString()]})]}),Z.jsx("div",{className:"comment-content",dangerouslySetInnerHTML:{__html:I.content}})]})},I.id)})}),Z.jsx("div",{className:"add-comment-section",children:Z.jsx("div",{ref:I=>w.current[_.id]=I,className:"quill-editor"})}),r&&Z.jsx("button",{onClick:()=>x(_.id),disabled:!((G=s[_.id])!=null&&G.trim()),className:"add-comment-button",children:"Add Comment"})]})]},_.id)}),l&&Z.jsx("div",{className:"share-modal",children:Z.jsxs("div",{className:"share-modal-content",children:[Z.jsx("h3",{children:"Share Annotation"}),h&&Z.jsx("p",{className:"error-text",children:h}),Z.jsxs("div",{className:"share-buttons",children:[Z.jsxs("a",{href:A("x",l.split(" ").slice(0,-1).join(" "),l.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-x",title:"Share on X",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),Z.jsx("span",{children:"X (Twitter)"})]}),Z.jsxs("a",{href:A("facebook",l.split(" ").slice(0,-1).join(" "),l.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-facebook",title:"Share on Facebook",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M9.198 21.5h4v-8.01h3.604l.396-3.98h-4V7.5a1 1 0 0 1 1-1h3v-4h-3a5 5 0 0 0-5 5v2.01h-2l-.396 3.98h2.396v8.01Z"})}),Z.jsx("span",{children:"Facebook"})]}),Z.jsxs("a",{href:A("whatsapp",l.split(" ").slice(0,-1).join(" "),l.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-whatsapp",title:"Share on WhatsApp",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),Z.jsx("span",{children:"WhatsApp"})]}),Z.jsxs("a",{href:A("telegram",l.split(" ").slice(0,-1).join(" "),l.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-telegram",title:"Share on Telegram",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),Z.jsx("span",{children:"Telegram"})]}),Z.jsxs("a",{href:A("email",l.split(" ").slice(0,-1).join(" "),l.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-email",title:"Share via Email",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),Z.jsx("span",{children:"Email"})]}),Z.jsxs("button",{onClick:()=>c(l),className:"share-button-social share-copy",title:"Copy Message",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),Z.jsx("span",{children:"Copy Message"})]})]}),Z.jsx("button",{onClick:()=>a(null),className:"share-modal-close",children:"Close"})]})})]})},k5="/assets/citizenx-logo.png",N5=({url:t,isPopupUrl:e})=>{const{did:n,profile:r,loading:i,error:s,authenticate:o,signOut:l,exportIdentity:a,importIdentity:u,createProfile:f,updateProfile:h}=kx(),{annotations:p,profiles:w,error:m,loading:E,handleSaveAnnotation:S,handleDeleteAnnotation:x,handleSaveComment:v}=Nx({url:t,did:n}),[c,b]=ie.useState(""),[A,_]=ie.useState(!1),[C,O]=ie.useState(""),[D,M]=ie.useState(void 0),[G,I]=ie.useState(!1),[k,P]=ie.useState(""),[U,V]=ie.useState(!1),[z,B]=ie.useState(""),[F,$]=ie.useState(""),[Q,J]=ie.useState(null),[le,ue]=ie.useState(""),se=ie.useRef(null),he=ie.useRef(null);ie.useEffect(()=>(se.current&&!he.current&&(he.current=new W(se.current,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]},placeholder:"Enter annotation..."}),he.current.on("text-change",()=>{var tt;const Te=((tt=he.current)==null?void 0:tt.root.innerHTML)||"";b(Te==="<p><br></p>"?"":Te)})),()=>{he.current&&(he.current.off("text-change"),he.current=null)}),[]),ie.useEffect(()=>{!i&&n&&!r?(console.log("AnnotationUI: Opening Update Profile modal"),_(!0)):console.log("AnnotationUI: Profile modal conditions - loading:",i,"did:",n,"profile:",r)},[i,n,r]),ie.useEffect(()=>{console.log("AnnotationUI: annotationsLoading changed:",E)},[E]);const Ue=async()=>{c.trim()&&!e&&(await S(c),b(""),he.current&&he.current.setContents([]))},Se=async()=>{C.trim()&&(r?await h(C,D):await f(C,D),_(!1),O(""),M(void 0))},dt=async()=>{await o(),I(!1)},zt=async()=>{await l(),I(!1)},Ge=async()=>{J("export")},pt=async()=>{if(!F){alert("Please enter a passphrase");return}try{const Te=await a(F);B(Te),V(!0),J(null),$(""),I(!1)}catch(Te){console.error("Failed to export identity:",Te),alert(Te.message||"Failed to export identity")}},et=async()=>{if(!k.trim()){alert("Please paste the identity data");return}J("import")},Ot=async()=>{if(!le){alert("Please enter the passphrase");return}try{await u(k,le),P(""),ue(""),J(null),I(!1)}catch(Te){console.error("Failed to import identity:",Te),alert(Te.message||"Failed to import identity")}};return ie.useEffect(()=>{const Te=()=>{const tt=gt=>{if(gt.type==="HIGHLIGHT_ANNOTATION"&&gt.url===Xr(t)){const Tt=document.querySelector(`[data-annotation-id="${gt.annotationId}"]`);Tt&&(Tt.scrollIntoView({behavior:"smooth"}),Tt.classList.add("highlight"),setTimeout(()=>Tt.classList.remove("highlight"),3e3))}};return chrome.runtime.onMessage.addListener(tt),()=>chrome.runtime.onMessage.removeListener(tt)};if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage)return Te()},[t]),console.log("AnnotationUI: Rendering with annotations:",p,"profiles:",w,"loading:",E),Z.jsxs("div",{className:"annotation-ui-container",children:[s&&Z.jsx("div",{className:"error-text",children:s}),m&&Z.jsx("div",{className:"error-text",children:m}),Z.jsx("div",{className:"connected-section",children:Z.jsxs("div",{className:"connected-section-content",children:[Z.jsx("div",{className:"connected-user-info",children:r?Z.jsxs(Z.Fragment,{children:[r.profilePicture&&Z.jsx("img",{src:r.profilePicture,alt:"Profile",className:"profile-picture"}),Z.jsxs("p",{className:"connected-text",children:["Connected: ",r.handle]})]}):Z.jsx("p",{className:"connected-text",children:"Not connected"})}),Z.jsxs("div",{className:"settings-menu-container",children:[Z.jsx("button",{className:"settings-button",onClick:()=>I(!G),children:"⚙️"}),G&&Z.jsx("div",{className:"settings-menu",children:n?Z.jsxs(Z.Fragment,{children:[Z.jsx("button",{className:"settings-menu-button",onClick:Ge,children:"Export Identity"}),Z.jsx("button",{className:"settings-menu-button sign-out-button",onClick:zt,children:"Sign Out"})]}):Z.jsxs("div",{className:"auth-section",children:[Z.jsx("button",{className:"authenticate-button",onClick:dt,children:"Authenticate"}),Z.jsxs("div",{className:"import-section",children:[Z.jsx("textarea",{className:"import-textarea",value:k,onChange:Te=>P(Te.target.value),placeholder:"Paste identity to import..."}),Z.jsx("button",{className:"import-button",onClick:et,disabled:!k.trim(),children:"Import Identity"})]})]})})]})]})}),E&&Z.jsx("div",{className:"loading-spinner",children:Z.jsx("span",{children:"Loading annotations..."})}),!e&&Z.jsxs("div",{className:"annotation-input",children:[Z.jsx("div",{ref:se,className:"quill-editor"}),Z.jsx("button",{onClick:Ue,className:"annotation-save-button",disabled:!c.trim()||!n||E,children:"Save"})]}),Z.jsx("div",{className:"annotation-list-wrapper",children:Z.jsx(A5,{annotations:p,profiles:w,onDelete:x,onSaveComment:e||!n||E?void 0:v,currentUrl:t})}),Z.jsx("div",{className:"logo-container",children:Z.jsx("a",{href:"https://citizenx.app",target:"_blank",rel:"noopener noreferrer",children:Z.jsx("img",{src:k5,alt:"CitizenX Logo",className:"citizenx-logo"})})}),A&&Z.jsxs("div",{className:"profile-modal",children:[Z.jsx("h2",{className:"profile-modal-title",children:r?"Update Profile":"Create Profile"}),Z.jsx("input",{type:"text",value:C,onChange:Te=>O(Te.target.value),placeholder:"Enter your handle",className:"profile-modal-input"}),Z.jsx("input",{type:"file",accept:"image/*",onChange:Te=>{var gt;const tt=(gt=Te.target.files)==null?void 0:gt[0];if(tt){const Tt=new FileReader;Tt.onloadend=()=>{M(Tt.result)},Tt.readAsDataURL(tt)}},className:"profile-modal-file-input"}),D&&Z.jsx("img",{src:D,alt:"Preview",className:"profile-modal-preview"}),Z.jsxs("div",{className:"profile-modal-buttons",children:[Z.jsx("button",{onClick:Se,className:"profile-modal-save-button",children:"Save Profile"}),Z.jsx("button",{onClick:()=>_(!1),className:"profile-modal-cancel-button",children:"Cancel"})]})]}),U&&Z.jsxs("div",{className:"export-modal",children:[Z.jsx("h2",{className:"export-modal-title",children:"Export Identity"}),Z.jsx("textarea",{className:"export-modal-textarea",value:z,readOnly:!0}),Z.jsx("button",{className:"export-modal-button",onClick:()=>navigator.clipboard.writeText(z),children:"Copy to Clipboard"}),Z.jsx("button",{className:"export-modal-close-button",onClick:()=>V(!1),children:"Close"})]}),Q&&Z.jsxs("div",{className:"profile-modal",children:[Z.jsx("h2",{className:"profile-modal-title",children:Q==="export"?"Export Identity":"Import Identity"}),Z.jsx("input",{type:"password",value:Q==="export"?F:le,onChange:Te=>{Q==="export"?$(Te.target.value):ue(Te.target.value)},placeholder:"Enter passphrase",className:"profile-modal-input"}),Z.jsxs("div",{className:"profile-modal-buttons",children:[Z.jsx("button",{onClick:Q==="export"?pt:Ot,className:"profile-modal-save-button",children:Q==="export"?"Export":"Import"}),Z.jsx("button",{onClick:()=>{J(null),$(""),ue("")},className:"profile-modal-cancel-button",children:"Cancel"})]})]})]})};function _5(){const[t,e]=ie.useState(""),[n,r]=ie.useState([]),[i,s]=ie.useState({}),[o,l]=ie.useState(!1),[a,u]=ie.useState(!1),[f,h]=ie.useState(!1);return ie.useEffect(()=>{console.log("index.tsx: Initializing storage..."),co.initialize().then(()=>{console.log("index.tsx: Storage initialized"),u(!0)}).catch(E=>{console.error("index.tsx: Failed to initialize storage:",E)});const p=E=>{if(E.url){console.log("index.tsx: Fetched current tab URL:",E.url),e(E.url);const x=[/^chrome-extension:\/\//,/^chrome:\/\//,/^about:\/\//].some(v=>v.test(E.url));h(x)}};chrome.runtime.onMessage.addListener(p),chrome.runtime.sendMessage({action:"getCurrentTabUrl"});const w=()=>{console.log("index.tsx: Tab activated, fetching new URL"),chrome.runtime.sendMessage({action:"getCurrentTabUrl"})},m=()=>{console.log("index.tsx: Window focus changed, fetching new URL"),chrome.runtime.sendMessage({action:"getCurrentTabUrl"})};return chrome.tabs.onActivated.addListener(w),chrome.tabs.onUpdated.addListener(w),chrome.windows.onFocusChanged.addListener(m),()=>{chrome.runtime.onMessage.removeListener(p),chrome.tabs.onActivated.removeListener(w),chrome.tabs.onUpdated.removeListener(w),chrome.windows.onFocusChanged.removeListener(m)}},[]),ie.useEffect(()=>{if(!a||!t){console.log("useAnnotations: Waiting for storage to initialize or URL to be set");return}console.log("useAnnotations: Fetching annotations for URL:",t),l(!0),co.getAnnotations(t).then(p=>{console.log("useAnnotations: Fetched annotations:",p),r(p);const w=p.map(m=>co.getProfile(m.author).then(E=>({did:m.author,profile:E})));Promise.all(w).then(m=>{const E=m.reduce((S,{did:x,profile:v})=>(v&&(S[x]=v),S),{});s(S=>({...S,...E}))}).finally(()=>{l(!1)})}).catch(p=>{console.error("useAnnotations: Failed to fetch annotations:",p),l(!1)})},[t,a]),Z.jsx(N5,{url:t,isPopupUrl:f})}const C5=Pc.createRoot(document.getElementById("root"));C5.render(Z.jsx(_5,{}))});export default L5();
