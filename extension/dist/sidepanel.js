var Ry=Object.defineProperty;var Dy=(t,e,n)=>e in t?Ry(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var By=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var J=(t,e,n)=>Dy(t,typeof e!="symbol"?e+"":e,n);import{n as eh}from"./assets/normalizeUrl.js";var kA=By((Pt,jt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function th(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z0={exports:{}},Ca={},Q0={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),Py=Symbol.for("react.portal"),jy=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),Uy=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),qy=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),zy=Symbol.for("react.suspense"),Hy=Symbol.for("react.memo"),Gy=Symbol.for("react.lazy"),Nd=Symbol.iterator;function Vy(t){return t===null||typeof t!="object"?null:(t=Nd&&t[Nd]||t["@@iterator"],typeof t=="function"?t:null)}var X0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y0=Object.assign,J0={};function ys(t,e,n){this.props=t,this.context=e,this.refs=J0,this.updater=n||X0}ys.prototype.isReactComponent={};ys.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ys.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eg(){}eg.prototype=ys.prototype;function nh(t,e,n){this.props=t,this.context=e,this.refs=J0,this.updater=n||X0}var rh=nh.prototype=new eg;rh.constructor=nh;Y0(rh,ys.prototype);rh.isPureReactComponent=!0;var _d=Array.isArray,tg=Object.prototype.hasOwnProperty,ih={current:null},ng={key:!0,ref:!0,__self:!0,__source:!0};function rg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tg.call(e,r)&&!ng.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:$o,type:t,key:s,ref:o,props:i,_owner:ih.current}}function Ky(t,e){return{$$typeof:$o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sh(t){return typeof t=="object"&&t!==null&&t.$$typeof===$o}function Wy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cd=/\/+/g;function qu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Wy(""+t.key):e.toString(36)}function jl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $o:case Py:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qu(o,0):r,_d(i)?(n="",t!=null&&(n=t.replace(Cd,"$&/")+"/"),jl(i,e,n,"",function(u){return u})):i!=null&&(sh(i)&&(i=Ky(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_d(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+qu(s,l);o+=jl(s,e,n,a,i)}else if(a=Vy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+qu(s,l++),o+=jl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ul(t,e,n){if(t==null)return t;var r=[],i=0;return jl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Zy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Ml={transition:null},Qy={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:ih};function ig(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!sh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=ys;de.Fragment=jy;de.Profiler=Uy;de.PureComponent=nh;de.StrictMode=My;de.Suspense=zy;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qy;de.act=ig;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Y0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ih.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)tg.call(e,a)&&!ng.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:$o,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:qy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$y,_context:t},t.Consumer=t};de.createElement=rg;de.createFactory=function(t){var e=rg.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Fy,render:t}};de.isValidElement=sh;de.lazy=function(t){return{$$typeof:Gy,_payload:{_status:-1,_result:t},_init:Zy}};de.memo=function(t,e){return{$$typeof:Hy,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Ml.transition;Ml.transition={};try{t()}finally{Ml.transition=e}};de.unstable_act=ig;de.useCallback=function(t,e){return bt.current.useCallback(t,e)};de.useContext=function(t){return bt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};de.useEffect=function(t,e){return bt.current.useEffect(t,e)};de.useId=function(){return bt.current.useId()};de.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return bt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};de.useRef=function(t){return bt.current.useRef(t)};de.useState=function(t){return bt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return bt.current.useTransition()};de.version="18.3.1";Q0.exports=de;var ie=Q0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=ie,Yy=Symbol.for("react.element"),Jy=Symbol.for("react.fragment"),ev=Object.prototype.hasOwnProperty,tv=Xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nv={key:!0,ref:!0,__self:!0,__source:!0};function sg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ev.call(e,r)&&!nv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Yy,type:t,key:s,ref:o,props:i,_owner:tv.current}}Ca.Fragment=Jy;Ca.jsx=sg;Ca.jsxs=sg;Z0.exports=Ca;var Z=Z0.exports,og={exports:{}},$t={},lg={exports:{}},ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var U=B.length;B.push(q);e:for(;0<U;){var Q=U-1>>>1,Y=B[Q];if(0<i(Y,q))B[Q]=q,B[U]=Y,U=Q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var q=B[0],U=B.pop();if(U!==q){B[0]=U;e:for(var Q=0,Y=B.length,le=Y>>>1;Q<le;){var ue=2*(Q+1)-1,se=B[ue],he=ue+1,Me=B[he];if(0>i(se,U))he<Y&&0>i(Me,se)?(B[Q]=Me,B[he]=U,Q=he):(B[Q]=se,B[ue]=U,Q=ue);else if(he<Y&&0>i(Me,U))B[Q]=Me,B[he]=U,Q=he;else break e}}return q}function i(B,q){var U=B.sortIndex-q.sortIndex;return U!==0?U:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,d=null,g=3,x=!1,y=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(B){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=B)r(u),q.sortIndex=q.expirationTime,e(a,q);else break;q=n(u)}}function E(B){if(b=!1,c(B),!y)if(n(a)!==null)y=!0,G(S);else{var q=n(u);q!==null&&z(E,q.startTime-B)}}function S(B,q){y=!1,b&&(b=!1,w(I),I=-1),x=!0;var U=g;try{for(c(q),d=n(a);d!==null&&(!(d.expirationTime>q)||B&&!W());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,g=d.priorityLevel;var Y=Q(d.expirationTime<=q);q=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(a)&&r(a),c(q)}else r(a);d=n(a)}if(d!==null)var le=!0;else{var ue=n(u);ue!==null&&z(E,ue.startTime-q),le=!1}return le}finally{d=null,g=U,x=!1}}var L=!1,_=null,I=-1,j=5,F=-1;function W(){return!(t.unstable_now()-F<j)}function O(){if(_!==null){var B=t.unstable_now();F=B;var q=!0;try{q=_(!0,B)}finally{q?N():(L=!1,_=null)}}else L=!1}var N;if(typeof v=="function")N=function(){v(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,M=D.port2;D.port1.onmessage=O,N=function(){M.postMessage(null)}}else N=function(){A(O,0)};function G(B){_=B,L||(L=!0,N())}function z(B,q){I=A(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,G(S))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var U=g;g=q;try{return B()}finally{g=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var U=g;g=B;try{return q()}finally{g=U}},t.unstable_scheduleCallback=function(B,q,U){var Q=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Q+U:Q):U=Q,B){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,B={id:f++,callback:q,priorityLevel:B,startTime:U,expirationTime:Y,sortIndex:-1},U>Q?(B.sortIndex=U,e(u,B),n(a)===null&&B===n(u)&&(b?(w(I),I=-1):b=!0,z(E,U-Q))):(B.sortIndex=Y,e(a,B),y||x||(y=!0,G(S))),B},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(B){var q=g;return function(){var U=g;g=q;try{return B.apply(this,arguments)}finally{g=U}}}})(ag);lg.exports=ag;var rv=lg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=ie,Ut=rv;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ug=new Set,po={};function ci(t,e){rs(t,e),rs(t+"Capture",e)}function rs(t,e){for(po[t]=e,t=0;t<e.length;t++)ug.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ic=Object.prototype.hasOwnProperty,sv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ld={},Id={};function ov(t){return Ic.call(Id,t)?!0:Ic.call(Ld,t)?!1:sv.test(t)?Id[t]=!0:(Ld[t]=!0,!1)}function lv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function av(t,e,n,r){if(e===null||typeof e>"u"||lv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var oh=/[\-:]([a-z])/g;function lh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oh,lh);Je[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oh,lh);Je[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oh,lh);Je[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function ah(t,e,n,r){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(av(e,n,i,r)&&(n=null),r||i===null?ov(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=iv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),uh=Symbol.for("react.strict_mode"),Oc=Symbol.for("react.profiler"),cg=Symbol.for("react.provider"),fg=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),Rc=Symbol.for("react.suspense"),Dc=Symbol.for("react.suspense_list"),fh=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),hg=Symbol.for("react.offscreen"),Od=Symbol.iterator;function Bs(t){return t===null||typeof t!="object"?null:(t=Od&&t[Od]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Fu;function Vs(t){if(Fu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fu=e&&e[1]||""}return`
`+Fu+t}var zu=!1;function Hu(t,e){if(!t||zu)return"";zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function uv(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=Hu(t.type,!1),t;case 11:return t=Hu(t.type.render,!1),t;case 1:return t=Hu(t.type,!0),t;default:return""}}function Bc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Di:return"Portal";case Oc:return"Profiler";case uh:return"StrictMode";case Rc:return"Suspense";case Dc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fg:return(t.displayName||"Context")+".Consumer";case cg:return(t._context.displayName||"Context")+".Provider";case ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fh:return e=t.displayName||null,e!==null?e:Bc(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return Bc(t(e))}catch{}}return null}function cv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bc(e);case 8:return e===uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fv(t){var e=dg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fl(t){t._valueTracker||(t._valueTracker=fv(t))}function pg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pc(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gg(t,e){e=e.checked,e!=null&&ah(t,"checked",e,!1)}function jc(t,e){gg(t,e);var n=Br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mc(t,e.type,Br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mc(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ks=Array.isArray;function Ki(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Br(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Uc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Ks(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Br(n)}}function mg(t,e){var n=Br(e.value),r=Br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,vg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hv=["Webkit","ms","Moz","O"];Object.keys(Js).forEach(function(t){hv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Js[e]=Js[t]})});function wg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Js.hasOwnProperty(t)&&Js[t]?(""+e).trim():e+"px"}function xg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dv=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qc(t,e){if(e){if(dv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function hh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hc=null,Wi=null,Zi=null;function jd(t){if(t=zo(t)){if(typeof Hc!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Da(e),Hc(t.stateNode,t.type,e))}}function Eg(t){Wi?Zi?Zi.push(t):Zi=[t]:Wi=t}function bg(){if(Wi){var t=Wi,e=Zi;if(Zi=Wi=null,jd(t),e)for(t=0;t<e.length;t++)jd(e[t])}}function Sg(t,e){return t(e)}function Ag(){}var Gu=!1;function Tg(t,e,n){if(Gu)return t(e,n);Gu=!0;try{return Sg(t,e,n)}finally{Gu=!1,(Wi!==null||Zi!==null)&&(Ag(),bg())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=Da(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Gc=!1;if(tr)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Gc=!1}function pv(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var eo=!1,ea=null,ta=!1,Vc=null,gv={onError:function(t){eo=!0,ea=t}};function mv(t,e,n,r,i,s,o,l,a){eo=!1,ea=null,pv.apply(gv,arguments)}function yv(t,e,n,r,i,s,o,l,a){if(mv.apply(this,arguments),eo){if(eo){var u=ea;eo=!1,ea=null}else throw Error(X(198));ta||(ta=!0,Vc=u)}}function fi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Md(t){if(fi(t)!==t)throw Error(X(188))}function vv(t){var e=t.alternate;if(!e){if(e=fi(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Md(i),t;if(s===r)return Md(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function Ng(t){return t=vv(t),t!==null?_g(t):null}function _g(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_g(t);if(e!==null)return e;t=t.sibling}return null}var Cg=Ut.unstable_scheduleCallback,Ud=Ut.unstable_cancelCallback,wv=Ut.unstable_shouldYield,xv=Ut.unstable_requestPaint,Be=Ut.unstable_now,Ev=Ut.unstable_getCurrentPriorityLevel,dh=Ut.unstable_ImmediatePriority,Lg=Ut.unstable_UserBlockingPriority,na=Ut.unstable_NormalPriority,bv=Ut.unstable_LowPriority,Ig=Ut.unstable_IdlePriority,La=null,Bn=null;function Sv(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(La,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:kv,Av=Math.log,Tv=Math.LN2;function kv(t){return t>>>=0,t===0?32:31-(Av(t)/Tv|0)|0}var dl=64,pl=4194304;function Ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ra(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ws(l):(s&=o,s!==0&&(r=Ws(s)))}else o=n&~i,o!==0?r=Ws(o):s!==0&&(r=Ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function Nv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _v(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Nv(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Kc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Og(){var t=dl;return dl<<=1,!(dl&4194240)&&(dl=64),t}function Vu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function Cv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ph(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function Rg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dg,gh,Bg,Pg,jg,Wc=!1,gl=[],kr=null,Nr=null,_r=null,yo=new Map,vo=new Map,xr=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $d(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function js(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=zo(e),e!==null&&gh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Iv(t,e,n,r,i){switch(e){case"focusin":return kr=js(kr,t,e,n,r,i),!0;case"dragenter":return Nr=js(Nr,t,e,n,r,i),!0;case"mouseover":return _r=js(_r,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return yo.set(s,js(yo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vo.set(s,js(vo.get(s)||null,t,e,n,r,i)),!0}return!1}function Mg(t){var e=Xr(t.target);if(e!==null){var n=fi(e);if(n!==null){if(e=n.tag,e===13){if(e=kg(n),e!==null){t.blockedOn=e,jg(t.priority,function(){Bg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zc=r,n.target.dispatchEvent(r),zc=null}else return e=zo(n),e!==null&&gh(e),t.blockedOn=n,!1;e.shift()}return!0}function qd(t,e,n){Ul(t)&&n.delete(e)}function Ov(){Wc=!1,kr!==null&&Ul(kr)&&(kr=null),Nr!==null&&Ul(Nr)&&(Nr=null),_r!==null&&Ul(_r)&&(_r=null),yo.forEach(qd),vo.forEach(qd)}function Ms(t,e){t.blockedOn===e&&(t.blockedOn=null,Wc||(Wc=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Ov)))}function wo(t){function e(i){return Ms(i,t)}if(0<gl.length){Ms(gl[0],t);for(var n=1;n<gl.length;n++){var r=gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&Ms(kr,t),Nr!==null&&Ms(Nr,t),_r!==null&&Ms(_r,t),yo.forEach(e),vo.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)Mg(n),n.blockedOn===null&&xr.shift()}var Qi=ar.ReactCurrentBatchConfig,ia=!0;function Rv(t,e,n,r){var i=be,s=Qi.transition;Qi.transition=null;try{be=1,mh(t,e,n,r)}finally{be=i,Qi.transition=s}}function Dv(t,e,n,r){var i=be,s=Qi.transition;Qi.transition=null;try{be=4,mh(t,e,n,r)}finally{be=i,Qi.transition=s}}function mh(t,e,n,r){if(ia){var i=Zc(t,e,n,r);if(i===null)nc(t,e,r,sa,n),$d(t,r);else if(Iv(i,t,e,n,r))r.stopPropagation();else if($d(t,r),e&4&&-1<Lv.indexOf(t)){for(;i!==null;){var s=zo(i);if(s!==null&&Dg(s),s=Zc(t,e,n,r),s===null&&nc(t,e,r,sa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nc(t,e,r,null,n)}}var sa=null;function Zc(t,e,n,r){if(sa=null,t=hh(r),t=Xr(t),t!==null)if(e=fi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sa=t,null}function Ug(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ev()){case dh:return 1;case Lg:return 4;case na:case bv:return 16;case Ig:return 536870912;default:return 16}default:return 16}}var br=null,yh=null,$l=null;function $g(){if($l)return $l;var t,e=yh,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return $l=i.slice(t,1<r?1-r:void 0)}function ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ml(){return!0}function Fd(){return!1}function qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ml:Fd,this.isPropagationStopped=Fd,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),e}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=qt(vs),Fo=Re({},vs,{view:0,detail:0}),Bv=qt(Fo),Ku,Wu,Us,Ia=Re({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Us&&(Us&&t.type==="mousemove"?(Ku=t.screenX-Us.screenX,Wu=t.screenY-Us.screenY):Wu=Ku=0,Us=t),Ku)},movementY:function(t){return"movementY"in t?t.movementY:Wu}}),zd=qt(Ia),Pv=Re({},Ia,{dataTransfer:0}),jv=qt(Pv),Mv=Re({},Fo,{relatedTarget:0}),Zu=qt(Mv),Uv=Re({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),$v=qt(Uv),qv=Re({},vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fv=qt(qv),zv=Re({},vs,{data:0}),Hd=qt(zv),Hv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vv[t])?!!e[t]:!1}function wh(){return Kv}var Wv=Re({},Fo,{key:function(t){if(t.key){var e=Hv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(t){return t.type==="keypress"?ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zv=qt(Wv),Qv=Re({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gd=qt(Qv),Xv=Re({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),Yv=qt(Xv),Jv=Re({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ew=qt(Jv),tw=Re({},Ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nw=qt(tw),rw=[9,13,27,32],xh=tr&&"CompositionEvent"in window,to=null;tr&&"documentMode"in document&&(to=document.documentMode);var iw=tr&&"TextEvent"in window&&!to,qg=tr&&(!xh||to&&8<to&&11>=to),Vd=" ",Kd=!1;function Fg(t,e){switch(t){case"keyup":return rw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pi=!1;function sw(t,e){switch(t){case"compositionend":return zg(e);case"keypress":return e.which!==32?null:(Kd=!0,Vd);case"textInput":return t=e.data,t===Vd&&Kd?null:t;default:return null}}function ow(t,e){if(Pi)return t==="compositionend"||!xh&&Fg(t,e)?(t=$g(),$l=yh=br=null,Pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qg&&e.locale!=="ko"?null:e.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lw[t.type]:e==="textarea"}function Hg(t,e,n,r){Eg(r),e=oa(e,"onChange"),0<e.length&&(n=new vh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,xo=null;function aw(t){tm(t,0)}function Oa(t){var e=Ui(t);if(pg(e))return t}function uw(t,e){if(t==="change")return e}var Gg=!1;if(tr){var Qu;if(tr){var Xu="oninput"in document;if(!Xu){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),Xu=typeof Zd.oninput=="function"}Qu=Xu}else Qu=!1;Gg=Qu&&(!document.documentMode||9<document.documentMode)}function Qd(){no&&(no.detachEvent("onpropertychange",Vg),xo=no=null)}function Vg(t){if(t.propertyName==="value"&&Oa(xo)){var e=[];Hg(e,xo,t,hh(t)),Tg(aw,e)}}function cw(t,e,n){t==="focusin"?(Qd(),no=e,xo=n,no.attachEvent("onpropertychange",Vg)):t==="focusout"&&Qd()}function fw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oa(xo)}function hw(t,e){if(t==="click")return Oa(e)}function dw(t,e){if(t==="input"||t==="change")return Oa(e)}function pw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:pw;function Eo(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ic.call(e,i)||!vn(t[i],e[i]))return!1}return!0}function Xd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yd(t,e){var n=Xd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xd(n)}}function Kg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wg(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Eh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gw(t){var e=Wg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kg(n.ownerDocument.documentElement,n)){if(r!==null&&Eh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yd(n,s);var o=Yd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mw=tr&&"documentMode"in document&&11>=document.documentMode,ji=null,Qc=null,ro=null,Xc=!1;function Jd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xc||ji==null||ji!==Jl(r)||(r=ji,"selectionStart"in r&&Eh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&Eo(ro,r)||(ro=r,r=oa(Qc,"onSelect"),0<r.length&&(e=new vh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ji)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},Yu={},Zg={};tr&&(Zg=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Ra(t){if(Yu[t])return Yu[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zg)return Yu[t]=e[n];return t}var Qg=Ra("animationend"),Xg=Ra("animationiteration"),Yg=Ra("animationstart"),Jg=Ra("transitionend"),em=new Map,ep="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){em.set(t,e),ci(e,[t])}for(var Ju=0;Ju<ep.length;Ju++){var ec=ep[Ju],yw=ec.toLowerCase(),vw=ec[0].toUpperCase()+ec.slice(1);Mr(yw,"on"+vw)}Mr(Qg,"onAnimationEnd");Mr(Xg,"onAnimationIteration");Mr(Yg,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(Jg,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ww=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function tp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yv(r,e,void 0,t),t.currentTarget=null}function tm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;tp(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;tp(i,l,u),s=a}}}if(ta)throw t=Vc,ta=!1,Vc=null,t}function Ne(t,e){var n=e[nf];n===void 0&&(n=e[nf]=new Set);var r=t+"__bubble";n.has(r)||(nm(e,t,2,!1),n.add(r))}function tc(t,e,n){var r=0;e&&(r|=4),nm(n,t,r,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function bo(t){if(!t[vl]){t[vl]=!0,ug.forEach(function(n){n!=="selectionchange"&&(ww.has(n)||tc(n,!1,t),tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,tc("selectionchange",!1,e))}}function nm(t,e,n,r){switch(Ug(e)){case 1:var i=Rv;break;case 4:i=Dv;break;default:i=mh}n=i.bind(null,e,n,t),i=void 0,!Gc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Tg(function(){var u=s,f=hh(n),d=[];e:{var g=em.get(t);if(g!==void 0){var x=vh,y=t;switch(t){case"keypress":if(ql(n)===0)break e;case"keydown":case"keyup":x=Zv;break;case"focusin":y="focus",x=Zu;break;case"focusout":y="blur",x=Zu;break;case"beforeblur":case"afterblur":x=Zu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Yv;break;case Qg:case Xg:case Yg:x=$v;break;case Jg:x=ew;break;case"scroll":x=Bv;break;case"wheel":x=nw;break;case"copy":case"cut":case"paste":x=Fv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Gd}var b=(e&4)!==0,A=!b&&t==="scroll",w=b?g!==null?g+"Capture":null:g;b=[];for(var v=u,c;v!==null;){c=v;var E=c.stateNode;if(c.tag===5&&E!==null&&(c=E,w!==null&&(E=mo(v,w),E!=null&&b.push(So(v,E,c)))),A)break;v=v.return}0<b.length&&(g=new x(g,y,null,n,f),d.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==zc&&(y=n.relatedTarget||n.fromElement)&&(Xr(y)||y[nr]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=u,y=y?Xr(y):null,y!==null&&(A=fi(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(b=zd,E="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=Gd,E="onPointerLeave",w="onPointerEnter",v="pointer"),A=x==null?g:Ui(x),c=y==null?g:Ui(y),g=new b(E,v+"leave",x,n,f),g.target=A,g.relatedTarget=c,E=null,Xr(f)===u&&(b=new b(w,v+"enter",y,n,f),b.target=c,b.relatedTarget=A,E=b),A=E,x&&y)t:{for(b=x,w=y,v=0,c=b;c;c=Ai(c))v++;for(c=0,E=w;E;E=Ai(E))c++;for(;0<v-c;)b=Ai(b),v--;for(;0<c-v;)w=Ai(w),c--;for(;v--;){if(b===w||w!==null&&b===w.alternate)break t;b=Ai(b),w=Ai(w)}b=null}else b=null;x!==null&&np(d,g,x,b,!1),y!==null&&A!==null&&np(d,A,y,b,!0)}}e:{if(g=u?Ui(u):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var S=uw;else if(Wd(g))if(Gg)S=dw;else{S=fw;var L=cw}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=hw);if(S&&(S=S(t,u))){Hg(d,S,n,f);break e}L&&L(t,g,u),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&Mc(g,"number",g.value)}switch(L=u?Ui(u):window,t){case"focusin":(Wd(L)||L.contentEditable==="true")&&(ji=L,Qc=u,ro=null);break;case"focusout":ro=Qc=ji=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,Jd(d,n,f);break;case"selectionchange":if(mw)break;case"keydown":case"keyup":Jd(d,n,f)}var _;if(xh)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Pi?Fg(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(qg&&n.locale!=="ko"&&(Pi||I!=="onCompositionStart"?I==="onCompositionEnd"&&Pi&&(_=$g()):(br=f,yh="value"in br?br.value:br.textContent,Pi=!0)),L=oa(u,I),0<L.length&&(I=new Hd(I,t,null,n,f),d.push({event:I,listeners:L}),_?I.data=_:(_=zg(n),_!==null&&(I.data=_)))),(_=iw?sw(t,n):ow(t,n))&&(u=oa(u,"onBeforeInput"),0<u.length&&(f=new Hd("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=_))}tm(d,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(So(t,s,i)),s=mo(t,e),s!=null&&r.push(So(t,s,i))),t=t.return}return r}function Ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function np(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=mo(n,s),a!=null&&o.unshift(So(n,a,l))):i||(a=mo(n,s),a!=null&&o.push(So(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xw=/\r\n?/g,Ew=/\u0000|\uFFFD/g;function rp(t){return(typeof t=="string"?t:""+t).replace(xw,`
`).replace(Ew,"")}function wl(t,e,n){if(e=rp(e),rp(t)!==e&&n)throw Error(X(425))}function la(){}var Yc=null,Jc=null;function ef(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tf=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(t){return ip.resolve(null).then(t).catch(Aw)}:tf;function Aw(t){setTimeout(function(){throw t})}function rc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wo(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),On="__reactFiber$"+ws,Ao="__reactProps$"+ws,nr="__reactContainer$"+ws,nf="__reactEvents$"+ws,Tw="__reactListeners$"+ws,kw="__reactHandles$"+ws;function Xr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sp(t);t!==null;){if(n=t[On])return n;t=sp(t)}return e}t=n,n=t.parentNode}return null}function zo(t){return t=t[On]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ui(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Da(t){return t[Ao]||null}var rf=[],$i=-1;function Ur(t){return{current:t}}function Ce(t){0>$i||(t.current=rf[$i],rf[$i]=null,$i--)}function ke(t,e){$i++,rf[$i]=t.current,t.current=e}var Pr={},ht=Ur(Pr),Ct=Ur(!1),ni=Pr;function is(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function aa(){Ce(Ct),Ce(ht)}function op(t,e,n){if(ht.current!==Pr)throw Error(X(168));ke(ht,e),ke(Ct,n)}function rm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,cv(t)||"Unknown",i));return Re({},n,r)}function ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,ni=ht.current,ke(ht,t),ke(Ct,Ct.current),!0}function lp(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=rm(t,e,ni),r.__reactInternalMemoizedMergedChildContext=t,Ce(Ct),Ce(ht),ke(ht,t)):Ce(Ct),ke(Ct,n)}var Xn=null,Ba=!1,ic=!1;function im(t){Xn===null?Xn=[t]:Xn.push(t)}function Nw(t){Ba=!0,im(t)}function $r(){if(!ic&&Xn!==null){ic=!0;var t=0,e=be;try{var n=Xn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,Ba=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),Cg(dh,$r),i}finally{be=e,ic=!1}}return null}var qi=[],Fi=0,ca=null,fa=0,Kt=[],Wt=0,ri=null,Yn=1,Jn="";function Wr(t,e){qi[Fi++]=fa,qi[Fi++]=ca,ca=t,fa=e}function sm(t,e,n){Kt[Wt++]=Yn,Kt[Wt++]=Jn,Kt[Wt++]=ri,ri=t;var r=Yn;t=Jn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yn=1<<32-gn(e)+i|n<<i|r,Jn=s+t}else Yn=1<<s|n<<i|r,Jn=t}function bh(t){t.return!==null&&(Wr(t,1),sm(t,1,0))}function Sh(t){for(;t===ca;)ca=qi[--Fi],qi[Fi]=null,fa=qi[--Fi],qi[Fi]=null;for(;t===ri;)ri=Kt[--Wt],Kt[Wt]=null,Jn=Kt[--Wt],Kt[Wt]=null,Yn=Kt[--Wt],Kt[Wt]=null}var Mt=null,Dt=null,Le=!1,hn=null;function om(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ap(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ri!==null?{id:Yn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Dt=null,!0):!1;default:return!1}}function sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function of(t){if(Le){var e=Dt;if(e){var n=e;if(!ap(t,e)){if(sf(t))throw Error(X(418));e=Cr(n.nextSibling);var r=Mt;e&&ap(t,e)?om(r,n):(t.flags=t.flags&-4097|2,Le=!1,Mt=t)}}else{if(sf(t))throw Error(X(418));t.flags=t.flags&-4097|2,Le=!1,Mt=t}}}function up(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function xl(t){if(t!==Mt)return!1;if(!Le)return up(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ef(t.type,t.memoizedProps)),e&&(e=Dt)){if(sf(t))throw lm(),Error(X(418));for(;e;)om(t,e),e=Cr(e.nextSibling)}if(up(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Mt?Cr(t.stateNode.nextSibling):null;return!0}function lm(){for(var t=Dt;t;)t=Cr(t.nextSibling)}function ss(){Dt=Mt=null,Le=!1}function Ah(t){hn===null?hn=[t]:hn.push(t)}var _w=ar.ReactCurrentBatchConfig;function $s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function El(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cp(t){var e=t._init;return e(t._payload)}function am(t){function e(w,v){if(t){var c=w.deletions;c===null?(w.deletions=[v],w.flags|=16):c.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=Rr(w,v),w.index=0,w.sibling=null,w}function s(w,v,c){return w.index=c,t?(c=w.alternate,c!==null?(c=c.index,c<v?(w.flags|=2,v):c):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,c,E){return v===null||v.tag!==6?(v=fc(c,w.mode,E),v.return=w,v):(v=i(v,c),v.return=w,v)}function a(w,v,c,E){var S=c.type;return S===Bi?f(w,v,c.props.children,E,c.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===vr&&cp(S)===v.type)?(E=i(v,c.props),E.ref=$s(w,v,c),E.return=w,E):(E=Wl(c.type,c.key,c.props,null,w.mode,E),E.ref=$s(w,v,c),E.return=w,E)}function u(w,v,c,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==c.containerInfo||v.stateNode.implementation!==c.implementation?(v=hc(c,w.mode,E),v.return=w,v):(v=i(v,c.children||[]),v.return=w,v)}function f(w,v,c,E,S){return v===null||v.tag!==7?(v=ti(c,w.mode,E,S),v.return=w,v):(v=i(v,c),v.return=w,v)}function d(w,v,c){if(typeof v=="string"&&v!==""||typeof v=="number")return v=fc(""+v,w.mode,c),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cl:return c=Wl(v.type,v.key,v.props,null,w.mode,c),c.ref=$s(w,null,v),c.return=w,c;case Di:return v=hc(v,w.mode,c),v.return=w,v;case vr:var E=v._init;return d(w,E(v._payload),c)}if(Ks(v)||Bs(v))return v=ti(v,w.mode,c,null),v.return=w,v;El(w,v)}return null}function g(w,v,c,E){var S=v!==null?v.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return S!==null?null:l(w,v,""+c,E);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case cl:return c.key===S?a(w,v,c,E):null;case Di:return c.key===S?u(w,v,c,E):null;case vr:return S=c._init,g(w,v,S(c._payload),E)}if(Ks(c)||Bs(c))return S!==null?null:f(w,v,c,E,null);El(w,c)}return null}function x(w,v,c,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get(c)||null,l(v,w,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case cl:return w=w.get(E.key===null?c:E.key)||null,a(v,w,E,S);case Di:return w=w.get(E.key===null?c:E.key)||null,u(v,w,E,S);case vr:var L=E._init;return x(w,v,c,L(E._payload),S)}if(Ks(E)||Bs(E))return w=w.get(c)||null,f(v,w,E,S,null);El(v,E)}return null}function y(w,v,c,E){for(var S=null,L=null,_=v,I=v=0,j=null;_!==null&&I<c.length;I++){_.index>I?(j=_,_=null):j=_.sibling;var F=g(w,_,c[I],E);if(F===null){_===null&&(_=j);break}t&&_&&F.alternate===null&&e(w,_),v=s(F,v,I),L===null?S=F:L.sibling=F,L=F,_=j}if(I===c.length)return n(w,_),Le&&Wr(w,I),S;if(_===null){for(;I<c.length;I++)_=d(w,c[I],E),_!==null&&(v=s(_,v,I),L===null?S=_:L.sibling=_,L=_);return Le&&Wr(w,I),S}for(_=r(w,_);I<c.length;I++)j=x(_,w,I,c[I],E),j!==null&&(t&&j.alternate!==null&&_.delete(j.key===null?I:j.key),v=s(j,v,I),L===null?S=j:L.sibling=j,L=j);return t&&_.forEach(function(W){return e(w,W)}),Le&&Wr(w,I),S}function b(w,v,c,E){var S=Bs(c);if(typeof S!="function")throw Error(X(150));if(c=S.call(c),c==null)throw Error(X(151));for(var L=S=null,_=v,I=v=0,j=null,F=c.next();_!==null&&!F.done;I++,F=c.next()){_.index>I?(j=_,_=null):j=_.sibling;var W=g(w,_,F.value,E);if(W===null){_===null&&(_=j);break}t&&_&&W.alternate===null&&e(w,_),v=s(W,v,I),L===null?S=W:L.sibling=W,L=W,_=j}if(F.done)return n(w,_),Le&&Wr(w,I),S;if(_===null){for(;!F.done;I++,F=c.next())F=d(w,F.value,E),F!==null&&(v=s(F,v,I),L===null?S=F:L.sibling=F,L=F);return Le&&Wr(w,I),S}for(_=r(w,_);!F.done;I++,F=c.next())F=x(_,w,I,F.value,E),F!==null&&(t&&F.alternate!==null&&_.delete(F.key===null?I:F.key),v=s(F,v,I),L===null?S=F:L.sibling=F,L=F);return t&&_.forEach(function(O){return e(w,O)}),Le&&Wr(w,I),S}function A(w,v,c,E){if(typeof c=="object"&&c!==null&&c.type===Bi&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case cl:e:{for(var S=c.key,L=v;L!==null;){if(L.key===S){if(S=c.type,S===Bi){if(L.tag===7){n(w,L.sibling),v=i(L,c.props.children),v.return=w,w=v;break e}}else if(L.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===vr&&cp(S)===L.type){n(w,L.sibling),v=i(L,c.props),v.ref=$s(w,L,c),v.return=w,w=v;break e}n(w,L);break}else e(w,L);L=L.sibling}c.type===Bi?(v=ti(c.props.children,w.mode,E,c.key),v.return=w,w=v):(E=Wl(c.type,c.key,c.props,null,w.mode,E),E.ref=$s(w,v,c),E.return=w,w=E)}return o(w);case Di:e:{for(L=c.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===c.containerInfo&&v.stateNode.implementation===c.implementation){n(w,v.sibling),v=i(v,c.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=hc(c,w.mode,E),v.return=w,w=v}return o(w);case vr:return L=c._init,A(w,v,L(c._payload),E)}if(Ks(c))return y(w,v,c,E);if(Bs(c))return b(w,v,c,E);El(w,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,v!==null&&v.tag===6?(n(w,v.sibling),v=i(v,c),v.return=w,w=v):(n(w,v),v=fc(c,w.mode,E),v.return=w,w=v),o(w)):n(w,v)}return A}var os=am(!0),um=am(!1),ha=Ur(null),da=null,zi=null,Th=null;function kh(){Th=zi=da=null}function Nh(t){var e=ha.current;Ce(ha),t._currentValue=e}function lf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){da=t,Th=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Th!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(da===null)throw Error(X(308));zi=t,da.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Yr=null;function _h(t){Yr===null?Yr=[t]:Yr.push(t)}function cm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_h(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function Ch(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,_h(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function Fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}function fp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pa(t,e,n,r){var i=t.updateQueue;wr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=u=a=null,l=s;do{var g=l.lane,x=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(g=e,x=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){d=y.call(x,d,g);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,g=typeof y=="function"?y.call(x,d,g):y,g==null)break e;d=Re({},d,g);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=x,a=d):f=f.next=x,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);si|=o,t.lanes=o,t.memoizedState=d}}function hp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ho={},Pn=Ur(Ho),To=Ur(Ho),ko=Ur(Ho);function Jr(t){if(t===Ho)throw Error(X(174));return t}function Lh(t,e){switch(ke(ko,e),ke(To,t),ke(Pn,Ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}Ce(Pn),ke(Pn,e)}function ls(){Ce(Pn),Ce(To),Ce(ko)}function hm(t){Jr(ko.current);var e=Jr(Pn.current),n=$c(e,t.type);e!==n&&(ke(To,t),ke(Pn,n))}function Ih(t){To.current===t&&(Ce(Pn),Ce(To))}var Ie=Ur(0);function ga(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sc=[];function Oh(){for(var t=0;t<sc.length;t++)sc[t]._workInProgressVersionPrimary=null;sc.length=0}var zl=ar.ReactCurrentDispatcher,oc=ar.ReactCurrentBatchConfig,ii=0,Oe=null,$e=null,ze=null,ma=!1,io=!1,No=0,Cw=0;function st(){throw Error(X(321))}function Rh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Dh(t,e,n,r,i,s){if(ii=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zl.current=t===null||t.memoizedState===null?Rw:Dw,t=n(r,i),io){s=0;do{if(io=!1,No=0,25<=s)throw Error(X(301));s+=1,ze=$e=null,e.updateQueue=null,zl.current=Bw,t=n(r,i)}while(io)}if(zl.current=ya,e=$e!==null&&$e.next!==null,ii=0,ze=$e=Oe=null,ma=!1,e)throw Error(X(300));return t}function Bh(){var t=No!==0;return No=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Oe.memoizedState=ze=t:ze=ze.next=t,ze}function rn(){if($e===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=ze===null?Oe.memoizedState:ze.next;if(e!==null)ze=e,$e=t;else{if(t===null)throw Error(X(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ze===null?Oe.memoizedState=ze=t:ze=ze.next=t}return ze}function _o(t,e){return typeof e=="function"?e(t):e}function lc(t){var e=rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((ii&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Oe.lanes|=f,si|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,vn(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ac(t){var e=rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vn(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dm(){}function pm(t,e){var n=Oe,r=rn(),i=e(),s=!vn(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,Ph(ym.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Co(9,mm.bind(null,n,r,i,e),void 0,null),He===null)throw Error(X(349));ii&30||gm(n,e,i)}return i}function gm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mm(t,e,n,r){e.value=n,e.getSnapshot=r,vm(e)&&wm(t)}function ym(t,e,n){return n(function(){vm(e)&&wm(t)})}function vm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function wm(t){var e=rr(t,1);e!==null&&mn(e,t,1,-1)}function dp(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:t},e.queue=t,t=t.dispatch=Ow.bind(null,Oe,t),[e.memoizedState,t]}function Co(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xm(){return rn().memoizedState}function Hl(t,e,n,r){var i=Ln();Oe.flags|=t,i.memoizedState=Co(1|e,n,void 0,r===void 0?null:r)}function Pa(t,e,n,r){var i=rn();r=r===void 0?null:r;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,r!==null&&Rh(r,o.deps)){i.memoizedState=Co(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=Co(1|e,n,s,r)}function pp(t,e){return Hl(8390656,8,t,e)}function Ph(t,e){return Pa(2048,8,t,e)}function Em(t,e){return Pa(4,2,t,e)}function bm(t,e){return Pa(4,4,t,e)}function Sm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Am(t,e,n){return n=n!=null?n.concat([t]):null,Pa(4,4,Sm.bind(null,e,t),n)}function jh(){}function Tm(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function km(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Nm(t,e,n){return ii&21?(vn(n,e)||(n=Og(),Oe.lanes|=n,si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function Lw(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=oc.transition;oc.transition={};try{t(!1),e()}finally{be=n,oc.transition=r}}function _m(){return rn().memoizedState}function Iw(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cm(t))Lm(e,n);else if(n=cm(t,e,n,r),n!==null){var i=Et();mn(n,t,r,i),Im(n,e,r)}}function Ow(t,e,n){var r=Or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cm(t))Lm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,vn(l,o)){var a=e.interleaved;a===null?(i.next=i,_h(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=cm(t,e,i,r),n!==null&&(i=Et(),mn(n,t,r,i),Im(n,e,r))}}function Cm(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Lm(t,e){io=ma=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Im(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}var ya={readContext:nn,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Rw={readContext:nn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:pp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hl(4194308,4,Sm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hl(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Iw.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:dp,useDebugValue:jh,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=dp(!1),e=t[0];return t=Lw.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=Ln();if(Le){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),He===null)throw Error(X(349));ii&30||gm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,pp(ym.bind(null,r,s,t),[t]),r.flags|=2048,Co(9,mm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=He.identifierPrefix;if(Le){var n=Jn,r=Yn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Cw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dw={readContext:nn,useCallback:Tm,useContext:nn,useEffect:Ph,useImperativeHandle:Am,useInsertionEffect:Em,useLayoutEffect:bm,useMemo:km,useReducer:lc,useRef:xm,useState:function(){return lc(_o)},useDebugValue:jh,useDeferredValue:function(t){var e=rn();return Nm(e,$e.memoizedState,t)},useTransition:function(){var t=lc(_o)[0],e=rn().memoizedState;return[t,e]},useMutableSource:dm,useSyncExternalStore:pm,useId:_m,unstable_isNewReconciler:!1},Bw={readContext:nn,useCallback:Tm,useContext:nn,useEffect:Ph,useImperativeHandle:Am,useInsertionEffect:Em,useLayoutEffect:bm,useMemo:km,useReducer:ac,useRef:xm,useState:function(){return ac(_o)},useDebugValue:jh,useDeferredValue:function(t){var e=rn();return $e===null?e.memoizedState=t:Nm(e,$e.memoizedState,t)},useTransition:function(){var t=ac(_o)[0],e=rn().memoizedState;return[t,e]},useMutableSource:dm,useSyncExternalStore:pm,useId:_m,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ja={isMounted:function(t){return(t=t._reactInternals)?fi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Or(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(mn(e,t,i,r),Fl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Or(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(mn(e,t,i,r),Fl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Or(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(mn(e,t,r,n),Fl(e,t,r))}};function gp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Eo(n,r)||!Eo(i,s):!0}function Om(t,e,n){var r=!1,i=Pr,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(i=Lt(e)?ni:ht.current,r=e.contextTypes,s=(r=r!=null)?is(t,i):Pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ja,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ja.enqueueReplaceState(e,e.state,null)}function uf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ch(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nn(s):(s=Lt(e)?ni:ht.current,i.context=is(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(af(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ja.enqueueReplaceState(i,i.state,null),pa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,e){try{var n="",r=e;do n+=uv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Pw=typeof WeakMap=="function"?WeakMap:Map;function Rm(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wa||(wa=!0,xf=r),cf(t,e)},n}function Dm(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cf(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Pw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Qw.bind(null,t,e,n),e.then(t,t))}function vp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var jw=ar.ReactCurrentOwner,_t=!1;function wt(t,e,n,r){e.child=t===null?um(e,null,n,r):os(e,t.child,n,r)}function xp(t,e,n,r,i){n=n.render;var s=e.ref;return Xi(e,i),r=Dh(t,e,n,r,s,i),n=Bh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Le&&n&&bh(e),e.flags|=1,wt(t,e,r,i),e.child)}function Ep(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Gh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Bm(t,e,s,r,i)):(t=Wl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Eo,n(o,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=Rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Bm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Eo(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,ir(t,e,i)}return ff(t,e,n,r,i)}function Pm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Gi,Rt),Rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Gi,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(Gi,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ke(Gi,Rt),Rt|=r;return wt(t,e,i,n),e.child}function jm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ff(t,e,n,r,i){var s=Lt(n)?ni:ht.current;return s=is(e,s),Xi(e,i),n=Dh(t,e,n,r,s,i),r=Bh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Le&&r&&bh(e),e.flags|=1,wt(t,e,n,i),e.child)}function bp(t,e,n,r,i){if(Lt(n)){var s=!0;ua(e)}else s=!1;if(Xi(e,i),e.stateNode===null)Gl(t,e),Om(e,n,r),uf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nn(u):(u=Lt(n)?ni:ht.current,u=is(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&mp(e,o,r,u),wr=!1;var g=e.memoizedState;o.state=g,pa(e,r,o,i),a=e.memoizedState,l!==r||g!==a||Ct.current||wr?(typeof f=="function"&&(af(e,n,f,r),a=e.memoizedState),(l=wr||gp(e,n,l,r,g,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,fm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:cn(e.type,l),o.props=u,d=e.pendingProps,g=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=nn(a):(a=Lt(n)?ni:ht.current,a=is(e,a));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||g!==a)&&mp(e,o,r,a),wr=!1,g=e.memoizedState,o.state=g,pa(e,r,o,i);var y=e.memoizedState;l!==d||g!==y||Ct.current||wr?(typeof x=="function"&&(af(e,n,x,r),y=e.memoizedState),(u=wr||gp(e,n,u,r,g,y,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return hf(t,e,n,r,s,i)}function hf(t,e,n,r,i,s){jm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lp(e,n,!1),ir(t,e,s);r=e.stateNode,jw.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=os(e,t.child,null,s),e.child=os(e,null,l,s)):wt(t,e,l,s),e.memoizedState=r.state,i&&lp(e,n,!0),e.child}function Mm(t){var e=t.stateNode;e.pendingContext?op(t,e.pendingContext,e.pendingContext!==e.context):e.context&&op(t,e.context,!1),Lh(t,e.containerInfo)}function Sp(t,e,n,r,i){return ss(),Ah(i),e.flags|=256,wt(t,e,n,r),e.child}var df={dehydrated:null,treeContext:null,retryLane:0};function pf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Um(t,e,n){var r=e.pendingProps,i=Ie.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke(Ie,i&1),t===null)return of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$a(o,r,0,null),t=ti(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pf(n),e.memoizedState=df,t):Mh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Mw(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Rr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Rr(l,s):(s=ti(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=df,r}return s=t.child,t=s.sibling,r=Rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mh(t,e){return e=$a({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bl(t,e,n,r){return r!==null&&Ah(r),os(e,t.child,null,n),t=Mh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mw(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=uc(Error(X(422))),bl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=$a({mode:"visible",children:r.children},i,0,null),s=ti(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&os(e,t.child,null,o),e.child.memoizedState=pf(o),e.memoizedState=df,s);if(!(e.mode&1))return bl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=uc(s,r,void 0),bl(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=He,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rr(t,i),mn(r,t,i,-1))}return Hh(),r=uc(Error(X(421))),bl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Xw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Dt=Cr(i.nextSibling),Mt=e,Le=!0,hn=null,t!==null&&(Kt[Wt++]=Yn,Kt[Wt++]=Jn,Kt[Wt++]=ri,Yn=t.id,Jn=t.overflow,ri=e),e=Mh(e,r.children),e.flags|=4096,e)}function Ap(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lf(t.return,e,n)}function cc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $m(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,n,e);else if(t.tag===19)Ap(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ga(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ga(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cc(e,!0,n,null,s);break;case"together":cc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Uw(t,e,n){switch(e.tag){case 3:Mm(e),ss();break;case 5:hm(e);break;case 1:Lt(e.type)&&ua(e);break;case 4:Lh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(ha,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Um(t,e,n):(ke(Ie,Ie.current&1),t=ir(t,e,n),t!==null?t.sibling:null);ke(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $m(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,Pm(t,e,n)}return ir(t,e,n)}var qm,gf,Fm,zm;qm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};Fm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jr(Pn.current);var s=null;switch(n){case"input":i=Pc(t,i),r=Pc(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=Uc(t,i),r=Uc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=la)}qc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(po.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(po.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Ne("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};zm=function(t,e,n,r){n!==r&&(e.flags|=4)};function qs(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $w(t,e,n){var r=e.pendingProps;switch(Sh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Lt(e.type)&&aa(),ot(e),null;case 3:return r=e.stateNode,ls(),Ce(Ct),Ce(ht),Oh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Sf(hn),hn=null))),gf(t,e),ot(e),null;case 5:Ih(e);var i=Jr(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)Fm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return ot(e),null}if(t=Jr(Pn.current),xl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[Ao]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ne(Zs[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Rd(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Bd(r,s),Ne("invalid",r)}qc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),i=["children",""+l]):po.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":fl(r),Dd(r,s,!0);break;case"textarea":fl(r),Pd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=la)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[Ao]=r,qm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fc(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ne(Zs[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":Rd(t,r),i=Pc(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Bd(t,r),i=Uc(t,r),Ne("invalid",t);break;default:i=r}qc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?xg(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&vg(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&go(t,a):typeof a=="number"&&go(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(po.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ne("scroll",t):a!=null&&ah(t,s,a,o))}switch(n){case"input":fl(t),Dd(t,r,!1);break;case"textarea":fl(t),Pd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Br(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ki(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=la)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)zm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Jr(ko.current),Jr(Pn.current),xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:wl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return ot(e),null;case 13:if(Ce(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Dt!==null&&e.mode&1&&!(e.flags&128))lm(),ss(),e.flags|=98560,s=!1;else if(s=xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[On]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),s=!1}else hn!==null&&(Sf(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Fe===0&&(Fe=3):Hh())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return ls(),gf(t,e),t===null&&bo(e.stateNode.containerInfo),ot(e),null;case 10:return Nh(e.type._context),ot(e),null;case 17:return Lt(e.type)&&aa(),ot(e),null;case 19:if(Ce(Ie),s=e.memoizedState,s===null)return ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qs(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ga(t),o!==null){for(e.flags|=128,qs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Ie,Ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>us&&(e.flags|=128,r=!0,qs(s,!1),e.lanes=4194304)}else{if(!r)if(t=ga(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return ot(e),null}else 2*Be()-s.renderingStartTime>us&&n!==1073741824&&(e.flags|=128,r=!0,qs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=Ie.current,ke(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return zh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function qw(t,e){switch(Sh(e),e.tag){case 1:return Lt(e.type)&&aa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ls(),Ce(Ct),Ce(ht),Oh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ih(e),null;case 13:if(Ce(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ie),null;case 4:return ls(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var Sl=!1,ut=!1,Fw=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function mf(t,e,n){try{n()}catch(r){De(t,e,r)}}var Tp=!1;function zw(t,e){if(Yc=ia,t=Wg(),Eh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,d=t,g=null;t:for(;;){for(var x;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)g=d,d=x;for(;;){if(d===t)break t;if(g===n&&++u===i&&(l=o),g===s&&++f===r&&(a=o),(x=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=x}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jc={focusedElem:t,selectionRange:n},ia=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,A=y.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:cn(e.type,b),A);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var c=e.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(E){De(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return y=Tp,Tp=!1,y}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mf(e,n,s)}i=i.next}while(i!==r)}}function Ma(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hm(t){var e=t.alternate;e!==null&&(t.alternate=null,Hm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Ao],delete e[nf],delete e[Tw],delete e[kw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gm(t){return t.tag===5||t.tag===3||t.tag===4}function kp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=la));else if(r!==4&&(t=t.child,t!==null))for(vf(t,e,n),t=t.sibling;t!==null;)vf(t,e,n),t=t.sibling}function wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}var Ze=null,fn=!1;function pr(t,e,n){for(n=n.child;n!==null;)Vm(t,e,n),n=n.sibling}function Vm(t,e,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(La,n)}catch{}switch(n.tag){case 5:ut||Hi(n,e);case 6:var r=Ze,i=fn;Ze=null,pr(t,e,n),Ze=r,fn=i,Ze!==null&&(fn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(fn?(t=Ze,n=n.stateNode,t.nodeType===8?rc(t.parentNode,n):t.nodeType===1&&rc(t,n),wo(t)):rc(Ze,n.stateNode));break;case 4:r=Ze,i=fn,Ze=n.stateNode.containerInfo,fn=!0,pr(t,e,n),Ze=r,fn=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mf(n,e,o),i=i.next}while(i!==r)}pr(t,e,n);break;case 1:if(!ut&&(Hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,pr(t,e,n),ut=r):pr(t,e,n);break;default:pr(t,e,n)}}function Np(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fw),e.forEach(function(r){var i=Yw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,fn=!1;break e;case 3:Ze=l.stateNode.containerInfo,fn=!0;break e;case 4:Ze=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(Ze===null)throw Error(X(160));Vm(s,o,i),Ze=null,fn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){De(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Km(e,t),e=e.sibling}function Km(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),_n(t),r&4){try{so(3,t,t.return),Ma(3,t)}catch(b){De(t,t.return,b)}try{so(5,t,t.return)}catch(b){De(t,t.return,b)}}break;case 1:ln(e,t),_n(t),r&512&&n!==null&&Hi(n,n.return);break;case 5:if(ln(e,t),_n(t),r&512&&n!==null&&Hi(n,n.return),t.flags&32){var i=t.stateNode;try{go(i,"")}catch(b){De(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&gg(i,s),Fc(l,o);var u=Fc(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?xg(i,d):f==="dangerouslySetInnerHTML"?vg(i,d):f==="children"?go(i,d):ah(i,f,d,u)}switch(l){case"input":jc(i,s);break;case"textarea":mg(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Ki(i,!!s.multiple,x,!1):g!==!!s.multiple&&(s.defaultValue!=null?Ki(i,!!s.multiple,s.defaultValue,!0):Ki(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ao]=s}catch(b){De(t,t.return,b)}}break;case 6:if(ln(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){De(t,t.return,b)}}break;case 3:if(ln(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(b){De(t,t.return,b)}break;case 4:ln(e,t),_n(t);break;case 13:ln(e,t),_n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qh=Be())),r&4&&Np(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(u=ut)||f,ln(e,t),ut=u):ln(e,t),_n(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(d=ee=f;ee!==null;){switch(g=ee,x=g.child,g.tag){case 0:case 11:case 14:case 15:so(4,g,g.return);break;case 1:Hi(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){De(r,n,b)}}break;case 5:Hi(g,g.return);break;case 22:if(g.memoizedState!==null){Cp(d);continue}}x!==null?(x.return=g,ee=x):Cp(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=wg("display",o))}catch(b){De(t,t.return,b)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){De(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ln(e,t),_n(t),r&4&&Np(t);break;case 21:break;default:ln(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gm(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(go(i,""),r.flags&=-33);var s=kp(t);wf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=kp(t);vf(t,l,o);break;default:throw Error(X(161))}}catch(a){De(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hw(t,e,n){ee=t,Wm(t)}function Wm(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sl;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ut;l=Sl;var u=ut;if(Sl=o,(ut=a)&&!u)for(ee=i;ee!==null;)o=ee,a=o.child,o.tag===22&&o.memoizedState!==null?Lp(i):a!==null?(a.return=o,ee=a):Lp(i);for(;s!==null;)ee=s,Wm(s),s=s.sibling;ee=i,Sl=l,ut=u}_p(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):_p(t)}}function _p(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Ma(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&wo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}ut||e.flags&512&&yf(e)}catch(g){De(e,e.return,g)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Cp(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Lp(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ma(4,e)}catch(a){De(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){De(e,i,a)}}var s=e.return;try{yf(e)}catch(a){De(e,s,a)}break;case 5:var o=e.return;try{yf(e)}catch(a){De(e,o,a)}}}catch(a){De(e,e.return,a)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var Gw=Math.ceil,va=ar.ReactCurrentDispatcher,Uh=ar.ReactCurrentOwner,tn=ar.ReactCurrentBatchConfig,me=0,He=null,je=null,Xe=0,Rt=0,Gi=Ur(0),Fe=0,Lo=null,si=0,Ua=0,$h=0,oo=null,Nt=null,qh=0,us=1/0,Qn=null,wa=!1,xf=null,Ir=null,Al=!1,Sr=null,xa=0,lo=0,Ef=null,Vl=-1,Kl=0;function Et(){return me&6?Be():Vl!==-1?Vl:Vl=Be()}function Or(t){return t.mode&1?me&2&&Xe!==0?Xe&-Xe:_w.transition!==null?(Kl===0&&(Kl=Og()),Kl):(t=be,t!==0||(t=window.event,t=t===void 0?16:Ug(t.type)),t):1}function mn(t,e,n,r){if(50<lo)throw lo=0,Ef=null,Error(X(185));qo(t,n,r),(!(me&2)||t!==He)&&(t===He&&(!(me&2)&&(Ua|=n),Fe===4&&Er(t,Xe)),It(t,r),n===1&&me===0&&!(e.mode&1)&&(us=Be()+500,Ba&&$r()))}function It(t,e){var n=t.callbackNode;_v(t,e);var r=ra(t,t===He?Xe:0);if(r===0)n!==null&&Ud(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ud(n),e===1)t.tag===0?Nw(Ip.bind(null,t)):im(Ip.bind(null,t)),Sw(function(){!(me&6)&&$r()}),n=null;else{switch(Rg(r)){case 1:n=dh;break;case 4:n=Lg;break;case 16:n=na;break;case 536870912:n=Ig;break;default:n=na}n=n1(n,Zm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zm(t,e){if(Vl=-1,Kl=0,me&6)throw Error(X(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=ra(t,t===He?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ea(t,r);else{e=r;var i=me;me|=2;var s=Xm();(He!==t||Xe!==e)&&(Qn=null,us=Be()+500,ei(t,e));do try{Ww();break}catch(l){Qm(t,l)}while(!0);kh(),va.current=s,me=i,je!==null?e=0:(He=null,Xe=0,e=Fe)}if(e!==0){if(e===2&&(i=Kc(t),i!==0&&(r=i,e=bf(t,i))),e===1)throw n=Lo,ei(t,0),Er(t,r),It(t,Be()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,!(r&30)&&!Vw(i)&&(e=Ea(t,r),e===2&&(s=Kc(t),s!==0&&(r=s,e=bf(t,s))),e===1))throw n=Lo,ei(t,0),Er(t,r),It(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Zr(t,Nt,Qn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=qh+500-Be(),10<e)){if(ra(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tf(Zr.bind(null,t,Nt,Qn),e);break}Zr(t,Nt,Qn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gw(r/1960))-r,10<r){t.timeoutHandle=tf(Zr.bind(null,t,Nt,Qn),r);break}Zr(t,Nt,Qn);break;case 5:Zr(t,Nt,Qn);break;default:throw Error(X(329))}}}return It(t,Be()),t.callbackNode===n?Zm.bind(null,t):null}function bf(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Ea(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Sf(e)),t}function Sf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function Vw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~$h,e&=~Ua,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Ip(t){if(me&6)throw Error(X(327));Yi();var e=ra(t,0);if(!(e&1))return It(t,Be()),null;var n=Ea(t,e);if(t.tag!==0&&n===2){var r=Kc(t);r!==0&&(e=r,n=bf(t,r))}if(n===1)throw n=Lo,ei(t,0),Er(t,e),It(t,Be()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Nt,Qn),It(t,Be()),null}function Fh(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(us=Be()+500,Ba&&$r())}}function oi(t){Sr!==null&&Sr.tag===0&&!(me&6)&&Yi();var e=me;me|=1;var n=tn.transition,r=be;try{if(tn.transition=null,be=1,t)return t()}finally{be=r,tn.transition=n,me=e,!(me&6)&&$r()}}function zh(){Rt=Gi.current,Ce(Gi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Sh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&aa();break;case 3:ls(),Ce(Ct),Ce(ht),Oh();break;case 5:Ih(r);break;case 4:ls();break;case 13:Ce(Ie);break;case 19:Ce(Ie);break;case 10:Nh(r.type._context);break;case 22:case 23:zh()}n=n.return}if(He=t,je=t=Rr(t.current,null),Xe=Rt=e,Fe=0,Lo=null,$h=Ua=si=0,Nt=oo=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Yr=null}return t}function Qm(t,e){do{var n=je;try{if(kh(),zl.current=ya,ma){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ma=!1}if(ii=0,ze=$e=Oe=null,io=!1,No=0,Uh.current=null,n===null||n.return===null){Fe=1,Lo=e,je=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=vp(o);if(x!==null){x.flags&=-257,wp(x,o,l,s,e),x.mode&1&&yp(s,u,e),e=x,a=u;var y=e.updateQueue;if(y===null){var b=new Set;b.add(a),e.updateQueue=b}else y.add(a);break e}else{if(!(e&1)){yp(s,u,e),Hh();break e}a=Error(X(426))}}else if(Le&&l.mode&1){var A=vp(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),wp(A,o,l,s,e),Ah(as(a,l));break e}}s=a=as(a,l),Fe!==4&&(Fe=2),oo===null?oo=[s]:oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Rm(s,a,e);fp(s,w);break e;case 1:l=a;var v=s.type,c=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ir===null||!Ir.has(c)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Dm(s,l,e);fp(s,E);break e}}s=s.return}while(s!==null)}Jm(n)}catch(S){e=S,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function Xm(){var t=va.current;return va.current=ya,t===null?ya:t}function Hh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(si&268435455)&&!(Ua&268435455)||Er(He,Xe)}function Ea(t,e){var n=me;me|=2;var r=Xm();(He!==t||Xe!==e)&&(Qn=null,ei(t,e));do try{Kw();break}catch(i){Qm(t,i)}while(!0);if(kh(),me=n,va.current=r,je!==null)throw Error(X(261));return He=null,Xe=0,Fe}function Kw(){for(;je!==null;)Ym(je)}function Ww(){for(;je!==null&&!wv();)Ym(je)}function Ym(t){var e=t1(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?Jm(t):je=e,Uh.current=null}function Jm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qw(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,je=null;return}}else if(n=$w(n,e,Rt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Fe===0&&(Fe=5)}function Zr(t,e,n){var r=be,i=tn.transition;try{tn.transition=null,be=1,Zw(t,e,n,r)}finally{tn.transition=i,be=r}return null}function Zw(t,e,n,r){do Yi();while(Sr!==null);if(me&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Cv(t,s),t===He&&(je=He=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Al||(Al=!0,n1(na,function(){return Yi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tn.transition,tn.transition=null;var o=be;be=1;var l=me;me|=4,Uh.current=null,zw(t,n),Km(n,t),gw(Jc),ia=!!Yc,Jc=Yc=null,t.current=n,Hw(n),xv(),me=l,be=o,tn.transition=s}else t.current=n;if(Al&&(Al=!1,Sr=t,xa=i),s=t.pendingLanes,s===0&&(Ir=null),Sv(n.stateNode),It(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wa)throw wa=!1,t=xf,xf=null,t;return xa&1&&t.tag!==0&&Yi(),s=t.pendingLanes,s&1?t===Ef?lo++:(lo=0,Ef=t):lo=0,$r(),null}function Yi(){if(Sr!==null){var t=Rg(xa),e=tn.transition,n=be;try{if(tn.transition=null,be=16>t?16:t,Sr===null)var r=!1;else{if(t=Sr,Sr=null,xa=0,me&6)throw Error(X(331));var i=me;for(me|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(ee=u;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:so(8,f,s)}var d=f.child;if(d!==null)d.return=f,ee=d;else for(;ee!==null;){f=ee;var g=f.sibling,x=f.return;if(Hm(f),f===u){ee=null;break}if(g!==null){g.return=x,ee=g;break}ee=x}}}var y=s.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var A=b.sibling;b.sibling=null,b=A}while(b!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:so(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ee=w;break e}ee=s.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var c=o.child;if(o.subtreeFlags&2064&&c!==null)c.return=o,ee=c;else e:for(o=v;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ma(9,l)}}catch(S){De(l,l.return,S)}if(l===o){ee=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,ee=E;break e}ee=l.return}}if(me=i,$r(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(La,t)}catch{}r=!0}return r}finally{be=n,tn.transition=e}}return!1}function Op(t,e,n){e=as(n,e),e=Rm(t,e,1),t=Lr(t,e,1),e=Et(),t!==null&&(qo(t,1,e),It(t,e))}function De(t,e,n){if(t.tag===3)Op(t,t,n);else for(;e!==null;){if(e.tag===3){Op(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=as(n,t),t=Dm(e,t,1),e=Lr(e,t,1),t=Et(),e!==null&&(qo(e,1,t),It(e,t));break}}e=e.return}}function Qw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Xe&n)===n&&(Fe===4||Fe===3&&(Xe&130023424)===Xe&&500>Be()-qh?ei(t,0):$h|=n),It(t,e)}function e1(t,e){e===0&&(t.mode&1?(e=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):e=1);var n=Et();t=rr(t,e),t!==null&&(qo(t,e,n),It(t,n))}function Xw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),e1(t,n)}function Yw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),e1(t,n)}var t1;t1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,Uw(t,e,n);_t=!!(t.flags&131072)}else _t=!1,Le&&e.flags&1048576&&sm(e,fa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gl(t,e),t=e.pendingProps;var i=is(e,ht.current);Xi(e,n),i=Dh(null,e,r,t,i,n);var s=Bh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,ua(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ch(e),i.updater=ja,e.stateNode=i,i._reactInternals=e,uf(e,r,t,n),e=hf(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&bh(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=e2(r),t=cn(r,t),i){case 0:e=ff(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=xp(null,e,r,t,n);break e;case 14:e=Ep(null,e,r,cn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),ff(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),bp(t,e,r,i,n);case 3:e:{if(Mm(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,fm(t,e),pa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=as(Error(X(423)),e),e=Sp(t,e,r,n,i);break e}else if(r!==i){i=as(Error(X(424)),e),e=Sp(t,e,r,n,i);break e}else for(Dt=Cr(e.stateNode.containerInfo.firstChild),Mt=e,Le=!0,hn=null,n=um(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),r===i){e=ir(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return hm(e),t===null&&of(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ef(r,i)?o=null:s!==null&&ef(r,s)&&(e.flags|=32),jm(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&of(e),null;case 13:return Um(t,e,n);case 4:return Lh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=os(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),xp(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ke(ha,r._currentValue),r._currentValue=o,s!==null)if(vn(s.value,o)){if(s.children===i.children&&!Ct.current){e=ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=er(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),lf(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xi(e,n),i=nn(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=cn(r,e.pendingProps),i=cn(r.type,i),Ep(t,e,r,i,n);case 15:return Bm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Gl(t,e),e.tag=1,Lt(r)?(t=!0,ua(e)):t=!1,Xi(e,n),Om(e,r,i),uf(e,r,i,n),hf(null,e,r,!0,t,n);case 19:return $m(t,e,n);case 22:return Pm(t,e,n)}throw Error(X(156,e.tag))};function n1(t,e){return Cg(t,e)}function Jw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new Jw(t,e,n,r)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e2(t){if(typeof t=="function")return Gh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ch)return 11;if(t===fh)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Gh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ti(n.children,i,s,e);case uh:o=8,i|=8;break;case Oc:return t=Jt(12,n,e,i|2),t.elementType=Oc,t.lanes=s,t;case Rc:return t=Jt(13,n,e,i),t.elementType=Rc,t.lanes=s,t;case Dc:return t=Jt(19,n,e,i),t.elementType=Dc,t.lanes=s,t;case hg:return $a(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cg:o=10;break e;case fg:o=9;break e;case ch:o=11;break e;case fh:o=14;break e;case vr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ti(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function $a(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=hg,t.lanes=n,t.stateNode={isHidden:!1},t}function fc(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function hc(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function t2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vu(0),this.expirationTimes=Vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vh(t,e,n,r,i,s,o,l,a){return t=new t2(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ch(s),t}function n2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function r1(t){if(!t)return Pr;t=t._reactInternals;e:{if(fi(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Lt(n))return rm(t,n,e)}return e}function i1(t,e,n,r,i,s,o,l,a){return t=Vh(n,r,!0,t,i,s,o,l,a),t.context=r1(null),n=t.current,r=Et(),i=Or(n),s=er(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,qo(t,i,r),It(t,r),t}function qa(t,e,n,r){var i=e.current,s=Et(),o=Or(i);return n=r1(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(mn(t,i,o,s),Fl(t,i,o)),o}function ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kh(t,e){Rp(t,e),(t=t.alternate)&&Rp(t,e)}function r2(){return null}var s1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wh(t){this._internalRoot=t}Fa.prototype.render=Wh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));qa(t,e,null,null)};Fa.prototype.unmount=Wh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){qa(null,t,null,null)}),e[nr]=null}};function Fa(t){this._internalRoot=t}Fa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&Mg(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function za(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function i2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ba(o);s.call(u)}}var o=i1(e,r,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=o,t[nr]=o.current,bo(t.nodeType===8?t.parentNode:t),oi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=ba(a);l.call(u)}}var a=Vh(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=a,t[nr]=a.current,bo(t.nodeType===8?t.parentNode:t),oi(function(){qa(e,a,n,r)}),a}function Ha(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ba(o);l.call(a)}}qa(e,o,t,i)}else o=i2(n,e,t,i,r);return ba(o)}Dg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ws(e.pendingLanes);n!==0&&(ph(e,n|1),It(e,Be()),!(me&6)&&(us=Be()+500,$r()))}break;case 13:oi(function(){var r=rr(t,1);if(r!==null){var i=Et();mn(r,t,1,i)}}),Kh(t,1)}};gh=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=Et();mn(e,t,134217728,n)}Kh(t,134217728)}};Bg=function(t){if(t.tag===13){var e=Or(t),n=rr(t,e);if(n!==null){var r=Et();mn(n,t,e,r)}Kh(t,e)}};Pg=function(){return be};jg=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Hc=function(t,e,n){switch(e){case"input":if(jc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Da(r);if(!i)throw Error(X(90));pg(r),jc(r,i)}}}break;case"textarea":mg(t,n);break;case"select":e=n.value,e!=null&&Ki(t,!!n.multiple,e,!1)}};Sg=Fh;Ag=oi;var s2={usingClientEntryPoint:!1,Events:[zo,Ui,Da,Eg,bg,Fh]},Fs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o2={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ng(t),t===null?null:t.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||r2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{La=Tl.inject(o2),Bn=Tl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s2;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(X(200));return n2(t,e,null,n)};$t.createRoot=function(t,e){if(!Zh(t))throw Error(X(299));var n=!1,r="",i=s1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vh(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,bo(t.nodeType===8?t.parentNode:t),new Wh(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=Ng(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return oi(t)};$t.hydrate=function(t,e,n){if(!za(e))throw Error(X(200));return Ha(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=s1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=i1(e,null,t,1,n??null,i,!1,s,o),t[nr]=e.current,bo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fa(e)};$t.render=function(t,e,n){if(!za(e))throw Error(X(200));return Ha(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!za(t))throw Error(X(40));return t._reactRootContainer?(oi(function(){Ha(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};$t.unstable_batchedUpdates=Fh;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!za(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Ha(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function o1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o1)}catch(t){console.error(t)}}o1(),og.exports=$t;var l2=og.exports,l1,Bp=l2;l1=Bp.createRoot,Bp.hydrateRoot;function a2(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qh={exports:{}};Qh.exports;(function(t){(function(){function e(r,i){return i?a2(r):r.slice?e[s(r)]:function(o,l){r(o={exports:{}}),e[s(l)]=o.exports};function s(o){return o.split("/").slice(-1).toString().replace(".js","")}}var n=t;e(function(r){String.random=function(s,o){var l="";for(s=s||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";s-- >0;)l+=o.charAt(Math.floor(Math.random()*o.length));return l},String.match=function(s,o){var l,a;return typeof s!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},l=o["="]||o["*"]||o[">"]||o["<"],s===l?!0:a!==o["="]?!1:(l=o["*"]||o[">"],s.slice(0,(l||"").length)===l?!0:a!==o["*"]?!1:a!==o[">"]&&a!==o["<"]?s>=o[">"]&&s<=o["<"]:a!==o[">"]&&s>=o[">"]||a!==o["<"]&&s<=o["<"]))},String.hash=function(s,o){if(typeof s=="string"){if(o=o||0,!s.length)return o;for(var l=0,a=s.length,u;l<a;++l)u=s.charCodeAt(l),o=(o<<5)-o+u,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(s){return s?s instanceof Object&&s.constructor===Object||Object.prototype.toString.call(s).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(s,o){for(var l in s)if(i.call(s,l)&&(!o||o.indexOf(l)==-1))return!1;return!0},Object.keys=Object.keys||function(s){var o=[];for(var l in s)i.call(s,l)&&o.push(l);return o},function(){var s,o=setTimeout,l=0,a=0,u=typeof setImmediate!=""+s&&setImmediate||function(d,g){return typeof MessageChannel==""+s?o:((d=new MessageChannel).port1.onmessage=function(x){x.data==""&&g()},function(x){g=x,d.port2.postMessage("")})}(),f=o.check=o.check||typeof performance!=""+s&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(d){if(o.hold>=f.now()-l&&a++<3333){d();return}u(function(){l=f.now(),d()},a=0)}}(),function(){var s=setTimeout,o=s.turn=s.turn||function(g){l.push(g)==1&&a(d)},l=o.s=[],a=s.poll,u=0,f,d=function(){(f=l[u++])&&f(),(u==l.length||u==99)&&(l=o.s=l.slice(u),u=0),l.length&&a(d)}}(),function(){var s,o=setTimeout,l=o.turn;(o.each=o.each||function(a,u,f,d){d=d||9,function g(x,y,b){if(y=(x=(a||[]).splice(0,d)).length){for(var A=0;A<y&&s===(b=u(x[A]));A++);if(s===b){l(g);return}}f&&f(b)}()})()}()})(e,"./shim"),e(function(r){r.exports=function i(f,o,l){if(!f)return{to:i};var a,u=typeof o=="function",f=(this.tag||(this.tag={}))[f]||u&&(this.tag[f]={tag:f,to:i._={next:function(g){var x;(x=this.to)&&x.next(g)}}});if(u){var d={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:f,on:this,as:l};return(d.back=f.last||f).to=d,f.last=d}return(f=f.to)&&a!==o&&f.next(o),f}})(e,"./onto"),e(function(r){r.exports=function(i){return i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"&&i!=1/0&&i!=-1/0&&i===i||!!i&&typeof i["#"]=="string"&&Object.keys(i).length===1&&i["#"]}})(e,"./valid"),e(function(r){e("./shim");function i(){var f=+new Date;return a<f?(o=0,a=f+i.drift):a=f+(o+=1)/l+i.drift}i.drift=0;var s=-1/0,o=0,l=999,a=s,u;i.is=function(f,d,g){var x=d&&f&&f._&&f._[">"]||g;if(x)return typeof(x=x[d])=="number"?x:s},i.ify=function(f,d,g,x,y){(f=f||{})._=f._||{},y&&(f._["#"]=y);var b=f._[">"]||(f._[">"]={});return u!==d&&d!=="_"&&(typeof g=="number"&&(b[d]=g),u!==x&&(f[d]=x)),f},r.exports=i})(e,"./state"),e(function(r){e("./shim");function i(s){var o={s:{}},l=o.s;s=s||{max:999,age:1e3*9},o.check=function(u){return l[u]?a(u):!1};var a=o.track=function(u){var f=l[u]||(l[u]={});return f.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,s.age+9)),a.ed&&a.ed(u),f};return o.drop=function(u){o.to=null,o.now=+new Date;var f=Object.keys(l);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(f,function(d){var g=l[d];g&&(u||s.age)>o.now-g.was||delete l[d]},0,99)},o}r.exports=i})(e,"./dup"),e(function(r){e("./onto"),r.exports=function(o,l){if(this.on){var a=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var f=o["#"]||o,u=(this.tag||"")[f];return u?(l&&(u=this.on(f,l),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},a)),!0):void 0}var f=l&&l["#"]||i(9);if(!o)return f;var d=this.on(f,o,l);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},a),f}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(r){function i(y){return y instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:y}):new i(y)}i.is=function(y){return y instanceof i||y&&y._&&y===y._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},e("./shim"),i.valid=e("./valid"),i.state=e("./state"),i.on=e("./onto"),i.dup=e("./dup"),i.ask=e("./ask"),function(){i.create=function(N){N.root=N.root||N,N.graph=N.graph||{},N.on=N.on||i.on,N.ask=N.ask||i.ask,N.dup=N.dup||i.dup();var D=N.$.opt(N.opt);return N.once||(N.on("in",y,N),N.on("out",y,N),N.on("put",w,N),i.on("create",N),N.on("create",N)),N.once=1,D};function y(N){if(N){if(N.out===y){this.to.next(N);return}var D=this,M=D.as,G=M.at||M,z=G.$,B=G.dup,q,U=N.DBG;if((q=N["#"])||(q=N["#"]=o(9)),!B.check(q)){if(B.track(q),q=N._,N._=typeof q=="function"?q:function(){},N.$&&N.$===(N.$._||"").$||(N.$=z),N["@"]&&!N.put&&c(N),!G.ask(N["@"],N))if(U&&(U.u=+new Date),N.put){b(N);return}else N.get&&i.on.get(N,z);U&&(U.uc=+new Date),D.to.next(N),U&&(U.ua=+new Date),!(N.nts||N.NTS)&&(N.out=y,G.on("out",N),U&&(U.ue=+new Date))}}}function b(N){if(N){var D=N._||"",M=D.root=((D.$=N.$||"")._||"").root;if(N["@"]&&D.faith&&!D.miss){N.out=y,M.on("out",N);return}D.latch=M.hatch,D.match=M.hatch=[];var G=N.put,z=D.DBG=N.DBG,B=+new Date;if(W=W||B,!(G["#"]&&G["."])){z&&(z.p=B),D["#"]=N["#"],D.msg=N,D.all=0,D.stun=1;var q=Object.keys(G);console.STAT&&console.STAT(B,((z||D).pk=+new Date)-B,"put sort");var U=0,Q,Y,le,ue,se,he,Me;(function Se(dt){if(Q!=U){if(Q=U,!(le=q[U])){console.STAT&&console.STAT(B,((z||D).pd=+new Date)-B,"put"),v(D);return}(ue=G[le])?(Me=ue._)?le!==Me["#"]?he=S+L(le)+"soul not same.":(se=Me[">"])||(he=S+L(le)+"no state."):he=S+L(le)+"no meta.":he=S+L(le)+"no node.",Y=Object.keys(ue||{})}if(he){N.err=D.err=he,v(D);return}var zt=0,Ge;for(dt=dt||0;dt++<9&&(Ge=Y[zt++]);)if(Ge!=="_"){var pt=ue[Ge],et=se[Ge];if(d===et){he=S+L(Ge)+"on"+L(le)+"no state.";break}if(!a(pt)){he=S+L(Ge)+"on"+L(le)+"bad "+typeof pt+L(pt);break}A(pt,Ge,le,et,N),++F}if((Y=Y.slice(zt)).length){l(Se);return}++U,Y=null,Se(dt)})()}}}i.on.put=b;function A(N,D,M,G,z){var B=z._||"",q=B.root,U=q.graph,Q,Y=U[M]||g,le=u(Y,D,1),ue=Y[D],se=B.DBG;(Q=console.STAT)&&(!U[M]||!ue)&&(Q.has=(Q.has||0)+1);var he=j();if(G>he){setTimeout(function(){A(N,D,M,G,z)},(Q=G-he)>I?I:Q),console.STAT&&console.STAT((se||B).Hf=+new Date,Q,"future");return}if(!(G<le)&&!(!B.faith&&G===le&&(N===ue||_(N)<=_(ue))&&!B.miss)){B.stun++;var Me=z["#"]+B.all++,Se={toString:function(){return Me},_:B};Se.toJSON=Se.toString,q.dup.track(Se)["#"]=z["#"],se&&(se.ph=se.ph||+new Date),q.on("put",{"#":Se,"@":z["@"],put:{"#":M,".":D,":":N,">":G},ok:z.ok,_:B})}}function w(N){var D;(D=(N._||"").DBG)&&(D.pa=+new Date,D.pm=D.pm||+new Date);var M=this,G=M.as,z=G.graph,B=N._,q=N.put,U=q["#"],Q=q["."],Y=q[":"],le=q[">"];N["#"];var ue;(ue=B.msg)&&(ue=ue.put)&&(ue=ue[U])&&f(ue,Q,le,Y,U),z[U]=f(z[U],Q,le,Y,U),(ue=(G.next||"")[U])&&ue.on("in",N),v(B),M.to.next(N)}function v(N,D){var M;if(!N.stop&&!(!N.err&&0<--N.stun)&&(N.stop=1,!!(M=N.root))){var G=N.match;G.end=1,G===M.hatch&&(!(G=N.latch)||G.end?delete M.hatch:M.hatch=G),N.hatch&&N.hatch(),setTimeout.each(N.match,function(z){z&&z()}),!(!(D=N.msg)||N.err||D.err)&&(D.out=y,N.root.on("out",D),O())}}function c(N){var D=N["@"]||"",M;if(!(M=D._)){var G=(G=N.$)&&(G=G._)&&(G=G.root)&&(G=G.dup);if(!(G=G.check(D)))return;N["@"]=G["#"]||N["@"];return}M.acks=(M.acks||0)+1,(M.err=N.err)&&(N["@"]=M["#"],v(M)),M.ok=N.ok||M.ok,!M.stop&&!M.crack&&(M.crack=M.match&&M.match.push(function(){E(M)})),E(M)}function E(N){!N||!N.root||N.stun||N.acks!==N.all||N.root.on("in",{"@":N["#"],err:N.err,ok:N.err?d:N.ok||{"":1}})}var S="Error: Invalid graph!",L=function(N){return" '"+(""+N).slice(0,9)+"...' "},_=JSON.stringify,I=2147483647,j=i.state,F=0,W,O=function(){F>999&&F/-(W-(W=+new Date))>1&&(i.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),O=function(){F=0})}}(),function(){i.on.get=function(b,A){var w=A._,v=b.get,c=v["#"],E=w.graph[c],S=v["."],L=w.next||(w.next={}),_=L[c],I=b._||{},j=I.DBG=b.DBG;if(j&&(j.g=+new Date),!E)return w.on("get",b);if(S){if((typeof S!="string"||d===E[S])&&!((_||"").next||"")[S]){w.on("get",b);return}E=f({},S,u(E,S),E[S],c)}E&&y(b,E),w.on("get",b)};function y(b,A){var w=+new Date,v=b._||{},c=v.DBG=b.DBG,E=b["#"],S=o(9),L=Object.keys(A||"").sort(),_=((A||"")._||"")["#"];L.length;var I=b.$._.root,j=A===I.graph[_];console.STAT&&console.STAT(w,((c||v).gk=+new Date)-w,"got keys"),A&&function F(){w=+new Date;for(var W=0,O,N={},D;W<9&&(O=L[W++]);)f(N,O,u(A,O),A[O],_);L=L.slice(W),(D={})[_]=N,N=D;var M;j&&(M=function(){},M.ram=M.faith=!0),D=L.length,console.STAT&&console.STAT(w,-(w-(w=+new Date)),"got copied some"),c&&(c.ga=+new Date),I.on("in",{"@":E,"#":S,put:N,"%":D?S=o(9):d,$:I.$,_:M,DBG:c,FOO:1}),console.STAT&&console.STAT(w,+new Date-w,"got in"),D&&setTimeout.turn(F)}(),A||I.on("in",{"@":b["#"]})}i.on.get.ack=y}(),function(){i.chain.opt=function(y){y=y||{};var b=this,A=b._,w=y.peers||y;return Object.plain(y)||(y={}),Object.plain(A.opt)||(A.opt=y),typeof w=="string"&&(w=[w]),Object.plain(A.opt.peers)||(A.opt.peers={}),w instanceof Array&&(y.peers={},w.forEach(function(v){var c={};c.id=c.url=v,y.peers[v]=A.opt.peers[v]=A.opt.peers[v]||c})),s(y,function v(c){var E=this[c];if(this&&this.hasOwnProperty(c)||typeof E=="string"||Object.empty(E)){this[c]=E;return}E&&E.constructor!==Object&&!(E instanceof Array)||s(E,v)}),A.opt.from=y,i.on("opt",A),A.opt.uuid=A.opt.uuid||function(c){return i.state().toString(36).replace(".","")+String.random(c||12)},b}}();var s=function(y,b){Object.keys(y).forEach(b,y)},o=String.random,l=setTimeout.turn,a=i.valid,u=i.state.is,f=i.state.ify,d,g={},x;i.log=function(){return!i.log.off&&x.log.apply(x,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(y,b,A){return(A=i.log.once)[y]=A[y]||0,A[y]++||i.log(b)},typeof window<"u"&&((window.GUN=window.Gun=i).window=window);try{typeof n<"u"&&(n.exports=i)}catch{}r.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(x=console).only=function(y,b){return x.only.i&&y===x.only.i&&x.only.i++&&(x.log.apply(x,arguments)||b)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(r){var i=e("./root");i.chain.back=function(l,a){var u;if(l=l||1,l===-1||l===1/0)return this._.root.$;if(l===1)return(this._.back||this._).$;var f=this,d=f._;if(typeof l=="string"&&(l=l.split(".")),l instanceof Array){var g=0,x=l.length,u=d;for(g;g<x;g++)u=(u||s)[l[g]];return o!==u?a?f:u:(u=d.back)?u.$.back(l,a):void 0}if(typeof l=="function"){for(var y,u={back:d};(u=u.back)&&o===(y=l(u,a)););return y}return typeof l=="number"?(d.back||d).$.back(l-1):this};var s={},o})(e,"./back"),e(function(r){var i=e("./root");i.chain.chain=function(v){var c=this,E=c._,S=new(v||c).constructor(c),L=S._,_;return L.root=_=E.root,L.id=++_.once,L.back=c._,L.on=i.on,L.on("in",i.on.in,L),L.on("out",i.on.out,L),S};function s(v){var c,E=this.as,S=E.back,L=E.root,_;if(v.$||(v.$=E.$),this.to.next(v),E.err){E.on("in",{put:E.put=d,$:E.$});return}if(c=v.get){if(L.pass&&(L.pass[E.id]=E),E.lex&&Object.keys(E.lex).forEach(function(I){_[I]=E.lex[I]},_=v.get=v.get||{}),c["#"]||E.soul){if(c["#"]=c["#"]||E.soul,v["#"]||(v["#"]=g(9)),S=L.$.get(c["#"])._,c=c["."]){if(y(S.put,c)&&(_=S.ask&&S.ask[c],(S.ask||(S.ask={}))[c]=S.$.get(c)._,S.on("in",{get:c,put:{"#":S.soul,".":c,":":S.put[c],">":A(L.graph[S.soul],c)}}),_))return}else{if(_=S.ask&&S.ask[""],(S.ask||(S.ask={}))[""]=S,d!==S.put&&(S.on("in",S),_))return;v.$=S.$}return L.ask(u,v),L.on("in",v)}if(c["."])return E.get?(v={get:{".":E.get},$:E.$},(S.ask||(S.ask={}))[E.get]=v.$._,S.on("out",v)):(v={get:E.lex?v.get:{},$:E.$},S.on("out",v));if((E.ask||(E.ask={}))[""]=E,E.get)return c["."]=E.get,(S.ask||(S.ask={}))[E.get]=v.$._,S.on("out",v)}return S.on("out",v)}i.on.out=s;function o(v,c){c=c||this.as;var E=c.root,S=v.$||(v.$=c.$),L=(S||"")._||f,_=v.put||"",I=_["#"],j=_["."],F=d!==_["="]?_["="]:_[":"],W=_[">"]||-1/0,O;if(d!==v.put&&(d===_["#"]||d===_["."]||d===_[":"]&&d===_["="]||d===_[">"])){if(!x(_)){if(!(I=((_||"")._||"")["#"])){console.log("chain not yet supported for",_,"...",v,c);return}return S=c.root.$.get(I),setTimeout.each(Object.keys(_).sort(),function(N){N=="_"||d===(W=A(_,N))||c.on("in",{$:S,put:{"#":I,".":N,"=":_[N],">":W},VIA:v})})}c.on("in",{$:L.back.$,put:{"#":I=L.back.soul,".":j=L.has||L.get,"=":_,">":A(L.back.put,j)},via:v});return}(v.seen||"")[c.id]||((v.seen||(v.seen=function(){}))[c.id]=c,c!==L&&(Object.keys(v).forEach(function(N){_[N]=v[N]},_={}),_.get=c.get||_.get,!c.soul&&!c.has?_.$$$=_.$$$||c.$:L.soul&&(_.$=c.$,_.$$=_.$$||L.$),v=_),a(v,c),(c.soul||v.$$)&&W>=A(E.graph[I],j)&&((_=E.$.get(I)._).put=w(_.put,j,W,F,I)),!L.soul&&W>=A(E.graph[I],j)&&(O=(E.$.get(I)._.next||"")[j])&&(O.put=F,typeof(_=x(F))=="string"&&(O.put=E.$.get(_)._.put||F)),this.to&&this.to.next(v),c.any&&setTimeout.each(Object.keys(c.any),function(N){(N=c.any[N])&&N(v)},0,99),c.echo&&setTimeout.each(Object.keys(c.echo),function(N){(N=c.echo[N])&&N.on("in",v)},0,99),((v.$$||"")._||L).soul&&(O=c.next)&&(O=O[j])&&(_={},Object.keys(v).forEach(function(N){_[N]=v[N]}),_.$=(v.$$||v.$).get(_.get=j),delete _.$$,delete _.$$$,O.on("in",_)),l(v,c))}i.on.in=o;function l(v,c){if(c=c||this.as||v.$._,!(v.$$&&this!==i.on)&&!(!v.put||c.soul)){var E=v.put||"",S=E["="]||E[":"],j,L=c.root,_=L.$.get(E["#"]).get(E["."])._;if(typeof(S=x(S))!="string"){this===i.on&&((_.echo||(_.echo={}))[c.id]=c);return}if(!((_.echo||(_.echo={}))[c.id]&&!(L.pass||"")[c.id])){if(j=L.pass){if(j[S+c.id])return;j[S+c.id]=1}(_.echo||(_.echo={}))[c.id]=c,c.has&&(c.link=S);var I=L.$.get(_.link=S)._;(I.echo||(I.echo={}))[_.id]=_;var j=c.ask||"";(j[""]||c.lex)&&I.on("out",{get:{"#":S}}),setTimeout.each(Object.keys(j),function(F,W){!F||!(W=j[F])||W.on("out",{get:{"#":S,".":F}})},0,99)}}}i.on.link=l;function a(v,c){var E=v.put||"",S=d!==E["="]?E["="]:E[":"],L=c.root,_,I;if(d===S){if(c.soul&&d!==c.put||(I=(v.$$||v.$||"")._||"",v["@"]&&(d!==I.put||d!==c.put)))return;(_=c.link||v.linked)&&delete(L.$.get(_)._.echo||"")[c.id],c.has&&(c.link=null),c.put=d,setTimeout.each(Object.keys(c.next||""),function(j,F){(F=c.next[j])&&(_&&delete(L.$.get(_).get(j)._.echo||"")[F.id],F.on("in",{get:j,put:d,$:F.$}))},0,99);return}c.soul||v.$$||(_=x(S),I=v.$._||"",!((_===I.link||c.has&&!I.link)&&!((L.pass||"")[c.id]&&typeof _!="string"))&&(delete(I.echo||"")[c.id],a({get:c.get,put:d,$:v.$,linked:v.linked=v.linked||I.link},c)))}i.on.unlink=a;function u(v,c){var E=this.as,S=E.$._;S.root;var L=E.get||"",_=(v.put||"")[L["#"]]||"";if(!v.put||typeof L["."]=="string"&&d===_[L["."]]){if(d!==S.put||!S.soul&&!S.has)return;S.ack=(S.ack||0)+1,S.on("in",{get:S.get,put:S.put=d,$:S.$,"@":v["@"]});return}(v._||{}).miss=1,i.on.put(v)}var f={},d,g=String.random,x=i.valid,y=function(v,c){return v&&Object.prototype.hasOwnProperty.call(v,c)},b=i.state,A=b.is,w=b.ify})(e,"./chain"),e(function(r){var i=e("./root");i.chain.get=function(d,g,x){var y,b;if(typeof d=="string"){if(d.length==0)return(y=this.chain())._.err={err:i.log("0 length key!",d)},g&&g.call(y,y._.err),y;var A=this,w=A._,v=w.next||a;(y=v[d])||(y=d&&s(d,A)),y=y&&y.$}else if(typeof d=="function"){let I=function(j,F,W){if(!I.stun&&!((z=E.pass)&&!z[S])){var O=j.$._,N=(j.$$||"")._,D=(N||O).put,M=!O.has&&!O.soul,G={},z;if((M||f===D)&&(D=f===((z=j.put)||"")["="]?f===(z||"")[":"]?z:z[":"]:z["="]),typeof(z=i.valid(D))=="string"&&(D=f===(z=E.$.get(z)._.put)?c.not?f:D:z),!(c.not&&f===D)){if(f===c.stun){if((z=E.stun)&&z.on&&(w.$.back(function(B){if(z.on(""+B.id,G={}),(G.run||0)<I.id)return G}),!G.run&&z.on(""+O.id,G={}),!G.run&&N&&z.on(""+N.id,G={}),I.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=z.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[S]=function(){I(j,F,1)};return}if(f===D&&(W=0),(z=E.hatch)&&!z.end&&f===c.hatch&&!W){if(L[O.$._.id])return;L[O.$._.id]=1,z.push(function(){I(j,F,1)});return}L={}}if(E.pass){if(E.pass[S+O.id])return;E.pass[S+O.id]=1}if(c.on){c.ok.call(O.$,D,O.get,j,F||I);return}if(c.v2020){c.ok(j,F||I);return}Object.keys(j).forEach(function(B){z[B]=j[B]},z={}),j=z,j.put=D,c.ok.call(c.as,j,F||I)}}};if(g===!0)return o(this,d,g,x),this;y=this;var w=y._,c=g||{},E=w.root,S;c.at=w,c.ok=d;var L={};return I.at=w,(w.any||(w.any={}))[S=String.random(7)]=I,I.off=function(){I.stun=1,w.any&&delete w.any[S]},I.rid=l,I.id=c.run||++E.once,b=E.pass,(E.pass={})[S]=1,c.out=c.out||{get:{}},w.on("out",c.out),E.pass=b,y}else{if(typeof d=="number")return this.get(""+d,g,x);if(typeof(b=u(d))=="string")return this.get(b,g,x);(b=this.get.next)&&(y=b(this,d))}return y?(g&&typeof g=="function"&&y.get(g,x),y):((y=this.chain())._.err={err:i.log("Invalid get request!",d)},g&&g.call(y,y._.err),y)};function s(d,g){var x=g._,y=x.next,b=g.chain(),A=b._;return y||(y=x.next={}),y[A.get=d]=A,g===x.root.$?A.soul=d:(x.soul||x.has)&&(A.has=d),A}function o(d,g,x,y){var b=d._,A=0,w;return(w=b.soul||b.link)?g(w,y,b):b.jam?b.jam.push([g,y]):(b.jam=[[g,y]],d.get(function(c,E){if(!(f===c.put&&!b.root.opt.super&&(w=Object.keys(b.root.opt.peers).length)&&++A<=w)){E.rid(c);var S=(S=c.$)&&S._||{},L=0,_;for(w=b.jam,delete b.jam;_=w[L++];){var I=_[0];_=_[1],I&&I(S.link||S.soul||i.valid(c.put)||((c.put||{})._||{})["#"],_,c,E)}}},{out:{get:{".":!0}}}),d)}function l(d){var g=this.at||this.on;if(!d||g.soul||g.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){g.map;var x;if((x=this.seen||(this.seen={}))[d])return!0;x[d]=!0}}var a={},u=i.valid,f})(e,"./get"),e(function(r){var i=e("./root");i.chain.put=function(y,b,A){var w=this,v=w._,c=v.root;A=A||{},A.root=v.root,A.run||(A.run=c.once),s(A,v.id),A.ack=A.ack||b,A.via=A.via||w,A.data=A.data||y,A.soul||(A.soul=v.soul||typeof b=="string"&&b);var E=A.state=A.state||i.state();return typeof y=="function"?(y(function(S){A.data=S,w.put(u,u,A)}),w):A.soul?(A.$=c.$.get(A.soul),A.todo=[{it:A.data,ref:A.$}],A.turn=A.turn||d,A.ran=A.ran||o,function S(){var L=A.todo,_=L.pop(),I=_.it;_.ref&&_.ref._.id;var j,F,W,O,N;if(s(A,_.ref),(O=_.todo)&&(F=O.pop(),I=I[F],O.length&&L.push(_)),F&&(L.path||(L.path=[])).push(F),!(j=g(I))&&!(N=i.is(I))){if(!Object.plain(I)){o.err(A,"Invalid data: "+a(I)+" at "+(A.via.back(function(z){z.get&&O.push(z.get)},O=[])||O.join("."))+"."+(L.path||[]).join("."));return}for(var D=A.seen||(A.seen=[]),M=D.length;M--;)if(I===(O=D[M]).it){j=I=O.link;break}}if(F&&j)_.node=x(_.node,F,E,I);else{let z=function(B,q){var U=W.link["#"];q&&(q.off(),q.rid(B));var Q=U||B.soul||(O=(B.$$||B.$)._||"").soul||O.link||((O=O.put||"")._||"")["#"]||O["#"]||((O=B.put||"")&&B.$$?O["#"]:(O["="]||O[":"]||"")["#"]);if(!U&&s(A,B.$),!Q&&!_.link["#"]){(_.wait||(_.wait=[])).push(function(){z(B,q)});return}Q||(Q=[],(B.$$||B.$).back(function(Y){if(O=Y.soul||Y.link)return Q.push(O);Q.push(Y.get)}),Q=Q.reverse().join("/")),W.link["#"]=Q,!N&&(((A.graph||(A.graph={}))[Q]=W.node||(W.node={_:{}}))._["#"]=Q),delete A.wait[G],W.wait&&setTimeout.each(W.wait,function(Y){Y&&Y()}),A.ran(A)};if(!A.seen){o.err(A,"Data at root of graph must be a node (an object).");return}A.seen.push(W={it:I,link:{},todo:N?[]:Object.keys(I).sort().reverse(),path:(L.path||[]).slice(),up:_}),_.node=x(_.node,F,E,W.link),!N&&W.todo.length&&L.push(W);var G=A.seen.length;(A.wait||(A.wait={}))[G]="",O=(W.ref=N?I:F?_.ref.get(F):_.ref)._,(O=I&&(I._||"")["#"]||O.soul||O.link)?z({soul:O}):W.ref.get(z,{run:A.run,v2020:1,out:{get:{".":" "}}})}if(!L.length)return A.ran(A);A.turn(S)}(),w):(l(A),w)};function s(y,b){if(b){b=(b._||"").id||b;var A=y.root.stun||(y.root.stun={on:i.on}),w={},v;y.stun||(y.stun=A.on("stun",function(){})),(v=A.on(""+b))&&v.the.last.next(w),!(w.run>=y.run)&&A.on(""+b,function(c){if(y.stun.end){this.off(),this.to.next(c);return}c.run=c.run||y.run,c.stun=c.stun||y.stun})}}function o(y){if(y.err){o.end(y.stun,y.root);return}if(!(y.todo.length||y.end||!Object.empty(y.wait))){y.end=1;var b=y.$.back(-1)._,A=b.root,w=b.ask(function(S){A.on("ack",S),S.err&&!S.lack&&i.log(S),++v>(y.acks||0)&&this.off(),y.ack&&y.ack(S,this)},y.opt),v=0,c=y.stun,E;(E=function(){c&&(o.end(c,A),setTimeout.each(Object.keys(c=c.add||""),function(S){(S=c[S])&&S()}))}).hatch=E,y.ack&&!y.ok&&(y.ok=y.acks||9),y.via._.on("out",{put:y.out=y.graph,ok:y.ok&&{"@":y.ok+1},opt:y.opt,"#":w,_:E})}}o.end=function(y,b){y.end=f,y.the.to===y&&y===y.the.last&&delete b.stun,y.off()},o.err=function(y,b){(y.ack||f).call(y,y.out={err:y.err=i.log(b)}),y.ran(y)};function l(y){var b=y.via._,A;y.via=y.via.back(function(w){if(w.soul||!w.get)return w.$;A=y.data,(y.data={})[w.get]=A}),(!y.via||!y.via._.soul)&&(y.via=b.root.$.get(((y.data||"")._||"")["#"]||b.$.back("opt.uuid")())),y.via.put(y.data,y.ack,y)}function a(y,b){return y&&(b=y.constructor)&&b.name||typeof y}var u,f=function(){},d=setTimeout.turn,g=i.valid,x=i.state.ify})(e,"./put"),e(function(r){var i=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),r.exports=i})(e,"./index"),e(function(r){var i=e("./index");i.chain.on=function(l,a,u,f){var d=this,g=d._;g.root;var x;if(typeof l=="string")return a?(x=g.on(l,a,u||g,f),u&&u.$&&(u.subs||(u.subs=[])).push(x),d):g.on(l);var y=a;return(y=y===!0?{change:!0}:y||{}).not=1,y.on=1,d.get(l,y),d},i.chain.once=function(l,a){if(a=a||{},!l)return s(this);var u=this,f=u._,d=f.root;f.put;var g=String.random(7),x;return u.get(function(y,b,A,w){var v=this,c=v._,E=c.one||(c.one={});if(w.stun||E[g]==="")return;if((x=i.valid(y))===!0){S();return}if(typeof x=="string")return;clearTimeout((f.one||"")[g]),clearTimeout(E[g]),E[g]=setTimeout(S,a.wait||99);function S(L){if(!c.has&&!c.soul&&(c={put:y,get:b}),o===(x=c.put)&&(x=((A.$$||"")._||"").put),typeof i.valid(x)=="string"&&(x=d.$.get(x)._.put,x===o&&!L)){E[g]=setTimeout(function(){S(1)},a.wait||99);return}w.stun||E[g]!==""&&(E[g]="",(f.soul||f.has)&&w.off(),l.call(v,x,c.get),clearTimeout(E[g]))}},{on:1}),u};function s(l,a,u){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(u=l.chain())._.nix=l.once(function(f,d){u._.on("in",this._)}),u._.lex=l._.lex,u}i.chain.off=function(){var l=this,a=l._,u,f=a.back;if(f)return a.ack=0,(u=f.next)&&u[a.get]&&delete u[a.get],(u=f.any)&&(delete f.any,f.any={}),(u=f.ask)&&delete u[a.get],(u=f.put)&&delete u[a.get],(u=a.soul)&&delete f.root.graph[u],(u=a.map)&&Object.keys(u).forEach(function(d,g){g=u[d],g.link&&f.root.$.get(g.link).off()}),(u=a.next)&&Object.keys(u).forEach(function(d,g){g=u[d],g.$.off()}),a.on("off",{}),l};var o})(e,"./on"),e(function(r){var i=e("./index"),s=i.chain.get.next;i.chain.get.next=function(u,f){var d;return Object.plain(f)?(d=((d=f["#"])||"")["="]||d)?u.get(d):((d=u.chain()._).lex=f,u.on("in",function(g){String.match(g.get||(g.put||"")["."],f["."]||f["#"]||f)&&d.on("in",g),this.to.next(g)}),d.$):(s||l)(u,f)},i.chain.map=function(u,f,d){var g=this,x=g._,y,b;return Object.plain(u)&&(y=u["."]?u:{".":u},u=a),u?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),b=g.chain(),g.map().on(function(A,w,v,c){var E=(u||l).call(this,A,w,v,c);if(a!==E){if(A===E)return b._.on("in",v);if(i.is(E))return b._.on("in",E._);var S={};Object.keys(v.put).forEach(function(L){S[L]=v.put[L]},S),S["="]=E,b._.on("in",{get:w,put:S})}}),b):((b=x.each)||((x.each=b=g.chain())._.lex=y||b._.lex||x.lex,b._.nix=g.back("nix"),g.on("in",o,b._)),b)};function o(u){this.to.next(u);var f=this.as,d=u.$,g=d._,x=u.put,y;!g.soul&&!u.$$||(y=f.lex)&&!String.match(u.get||(x||"")["."],y["."]||y["#"]||y)||i.on.link(u,f)}var l=function(){},a})(e,"./map"),e(function(r){var i=e("./index");i.chain.set=function(s,o,l){var a=this,u=a.back(-1),f,d;return o=o||function(){},l=l||{},l.item=l.item||s,(f=((s||"")._||"")["#"])&&((s={})["#"]=f),typeof(d=i.valid(s))=="string"?a.get(f=d).put(s,o,l):i.is(s)?(a.put(function(g){s.get(function(x,y,b){if(!x)return o.call(a,{err:i.log('Only a node can be linked! Not "'+b.put+'"!')});(d={})[x]={"#":x},g(d)},!0)}),s):(Object.plain(s)&&(s=u.get(f=a.back("opt.uuid")()).put(s)),a.get(f||u.back("opt.uuid")(7)).put(s,o,l))}})(e,"./set"),e(function(r){e("./shim");var i=function(){},s=JSON.parseAsync||function(u,f,d){var g,x=+new Date;try{f(g,JSON.parse(u,d),o.sucks(+new Date-x))}catch(y){f(y)}},o=JSON.stringifyAsync||function(u,f,d,g){var x,y=+new Date;try{f(x,JSON.stringify(u,d,g),o.sucks(+new Date-y))}catch(b){f(b)}};o.sucks=function(u){u>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=i)};function l(u){var f=function(){},d=u.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var g=setTimeout.turn||setTimeout,x=u.dup,y=x.check,b=x.track,A=f.hear=function(c,E){if(c){if(d.max<=c.length)return f.say({dam:"!",err:"Message too big!"},E);f===this&&(A.d+=c.length||0,++A.c);var S=E.SH=+new Date,L=c[0],_;if(L==="["){s(c,function(I,j){if(I||!j)return f.say({dam:"!",err:"DAM JSON parse error."},E);console.STAT&&console.STAT(+new Date,j.length,"# on hear batch");var F=d.puff;(function W(){for(var O=+new Date,N=0,D;N<F&&(D=j[N++]);)f.hear(D,E);j=j.slice(N),console.STAT&&console.STAT(O,+new Date-O,"hear loop"),w(E),j.length&&g(W,0)})()}),c="";return}if(L==="{"||(c["#"]||Object.plain(c))&&(_=c)){if(_)return A.one(_,E,S);s(c,function(I,j){if(I||!j)return f.say({dam:"!",err:"DAM JSON parse error."},E);A.one(j,E,S)});return}}};A.one=function(c,E,W){var L,_,I,j,F;if(c.DBG&&(c.DBG=F={DBG:c.DBG}),F&&(F.h=W),F&&(F.hp=+new Date),(L=c["#"])||(L=c["#"]=String.random(9)),!(I=y(L))&&(_=c["##"],!(_&&(I=c["@"]||c.get&&L)&&x.check(j=I+_)))){if((c._=function(){}).via=f.leap=E,(I=c["><"])&&typeof I=="string"&&I.slice(0,99).split(",").forEach(function(O){this[O]=1},c._.yo={}),I=c.dam){(I=f.hear[I])&&I(c,E,u),b(L);return}(I=c.ok)&&(c._.near=I["/"]);var W=+new Date;F&&(F.is=W),E.SI=L,b.ed=function(O){L===O&&(b.ed=0,(O=x.s[L])&&(O.via=E,c.get&&(O.it=c)))},u.on("in",f.last=c),F&&(F.hd=+new Date),console.STAT&&console.STAT(W,+new Date-W,c.get?"msg get":c.put?"msg put":"msg"),b(L),j&&b(j),f.leap=f.last=null}},A.c=A.d=0,function(){var c=0,E;f.hash=function(_,I){var j,F,W,O=+new Date;o(_.put,function N(D,M){var G=(F||(F=W=M||"")).slice(0,32768);if(j=String.hash(G,j),F=F.slice(32768),F){g(N,0);return}console.STAT&&console.STAT(O,+new Date-O,"say json+hash"),_._.$put=W,_["##"]=j,f.say(_,I),delete _._.$put},S)};function S(_,I){var j;return I instanceof Object?(Object.keys(I).sort().forEach(L,{to:j={},on:I}),j):I}function L(_){this.to[_]=this.on[_]}f.say=function(_,I){var j;if((j=this)&&(j=j.to)&&j.next&&j.next(_),!_)return!1;var F,W,O,N=_["@"],D=_._||(_._=function(){}),M=_.DBG,G=+new Date;if(D.y=D.y||G,I||M&&(M.y=G),(F=_["#"])||(F=_["#"]=String.random(9)),!E&&b(F),!(W=_["##"])&&a!==_.put&&!D.via&&N){f.hash(_,I);return}if(!I&&N&&(I=(j=x.s[N])&&(j.via||(j=j.it)&&(j=j._)&&j.via)||(j=f.last)&&N===j["#"]&&f.leap),!I&&N)return x.s[N]?void 0:(console.STAT&&console.STAT(+new Date,++c,"total no peer to ack to"),!1);if(N&&!_.put&&!W&&((x.s[N]||"").it||"")["##"])return!1;if(!I&&f.way)return f.way(_);if(M&&(M.yh=+new Date),!(O=D.raw)){f.raw(_,I);return}if(M&&(M.yr=+new Date),!I||!I.id){if(!Object.plain(I||d.peers))return!1;var G=+new Date;d.puff;var z=d.peers,B=Object.keys(I||d.peers||{});console.STAT&&console.STAT(G,+new Date-G,"peer keys"),function Q(){var Y=+new Date;E=1;var le=D.raw;D.raw=O;for(var ue=0,se;ue<9&&(se=(B||"")[ue++]);)(se=z[se]||(I||"")[se])&&f.say(_,se);D.raw=le,E=0,B=B.slice(ue),console.STAT&&console.STAT(Y,+new Date-Y,"say loop"),B.length&&(g(Q,0),N&&b(N))}();return}if(!I.wire&&f.wire&&f.wire(I),F!==I.last){if(I.last=F,I===D.via||(j=D.yo)&&(j[I.url]||j[I.pid]||j[I.id]))return!1;if(console.STAT&&console.STAT(G,((M||D).yp=+new Date)-(D.y||G),"say prep"),!E&&N&&b(N),I.batch){if(I.tail=(j=I.tail||0)+O.length,I.tail<=d.pack){I.batch+=(j?",":"")+O;return}w(I)}I.batch="[";var q=+new Date;setTimeout(function(){console.STAT&&console.STAT(q,+new Date-q,"0ms TO"),w(I)},d.gap),v(O,I),console.STAT&&N===I.SI&&console.STAT(G,+new Date-I.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(_,I){if(!_)return"";var j=_._||{},F,W;if(W=j.raw)return W;if(typeof _=="string")return _;var O=_["##"],N=_["@"];if(O&&N){if(!j.via&&y(N+O))return!1;if(W=(x.s[N]||"").it){if(O===W["##"])return!1;W["##"]||(W["##"]=O)}}if(!_.dam&&!_["@"]){var D=0,M=[];W=d.peers;for(var G in W){var z=W[G];if(M.push(z.url||z.pid||z.id),++D>6)break}D>1&&(_["><"]=M.join())}if(_.put&&(W=_.ok)&&(_.ok={"@":(W["@"]||1)-1,"/":W["/"]==_._.near?f.near:W["/"]}),F=j.$put){W={},Object.keys(_).forEach(function(q){W[q]=_[q]}),W.put=":])([:",o(W,function(q,U){if(!q){var Q=+new Date;W=U.indexOf('"put":":])([:"'),B(a,U=U.slice(0,W+6)+F+U.slice(W+14)),console.STAT&&console.STAT(Q,+new Date-Q,"say slice")}});return}o(_,B);function B(q,U){q||(j.raw=U,f.say(_,I))}}}();function w(c){var E=c.batch,S=typeof E=="string";if(S&&(E+="]"),c.batch=c.tail=null,!!E&&!(S?3>E.length:!E.length)){if(!S)try{E=E.length===1?E[0]:JSON.stringify(E)}catch(L){return d.log("DAM JSON stringify error",L)}E&&v(E,c)}}function v(c,E){try{var S=E.wire;E.say?E.say(c):S.send&&S.send(c),f.say.d+=c.length||0,++f.say.c}catch{(E.queue=E.queue||[]).push(c)}}return f.near=0,f.hi=function(c){var E=c.wire,S;if(!E){f.wire(c.length&&{url:c,id:c}||c);return}c.id?d.peers[c.url||c.id]=c:(S=c.id=c.id||c.url||String.random(9),f.say({dam:"?",pid:u.opt.pid},d.peers[S]=c),delete x.s[c.last]),c.met||(f.near++,c.met=+new Date,u.on("hi",c)),S=c.queue,c.queue=[],setTimeout.each(S||[],function(L){v(L,c)},0,9)},f.bye=function(c){c.met&&--f.near,delete c.met,u.on("bye",c);var E=+new Date;E=E-(c.met||E),f.bye.time=((f.bye.time||E)+E)/2},f.hear["!"]=function(c,E){d.log("Error:",c.err)},f.hear["?"]=function(c,E){c.pid&&(E.pid||(E.pid=c.pid),c["@"])||(f.say({dam:"?",pid:d.pid,"@":c["#"]},E),delete x.s[E.last])},f.hear.mob=function(c,E){if(c.peers){var S=Object.keys(c.peers),L=S[Math.random()*S.length>>0];L&&(f.bye(E),f.hi(L))}},u.on("create",function(c){c.opt.pid=c.opt.pid||String.random(9),this.to.next(c),c.on("out",f.say)}),u.on("bye",function(c,E){c=d.peers[c.id||c]||c,this.to.next(c),c.bye?c.bye():(E=c.wire)&&E.close&&E.close(),delete d.peers[c.id],c.wire=null}),u.on("bye",function(c,E){this.to.next(c),(E=console.STAT)&&(E.peers=f.near),(E=c.url)&&setTimeout(function(){},d.lack||9e3)}),u.on("hi",function(c,E){if(this.to.next(c),(E=console.STAT)&&(E.peers=f.near),!d.super){var S=Object.keys(u.next||"");S.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(S,function(L){var _=u.next[L];if(d.super||(_.ask||"")[""]){f.say({get:{"#":L}},c);return}setTimeout.each(Object.keys(_.ask||""),function(I){I&&f.say({"##":String.hash((u.graph[L]||"")[I]),get:{"#":L,".":I}},c)})})}}),f}var a;try{r.exports=l}catch{}})(e,"./mesh"),e(function(r){var i=e("./index");i.Mesh=e("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var l=o.opt;if(l.WebSocket===!1)return;var a=i.window||{},u=l.WebSocket||a.WebSocket||a.webkitWebSocket||a.mozWebSocket;if(!u)return;l.WebSocket=u;var f=l.mesh=l.mesh||i.Mesh(o);f.wire||l.wire,f.wire=l.wire=d;function d(b){try{if(!b||!b.url)return w&&w(b);var A=b.url.replace(/^http/,"ws"),w=b.wire=new l.WebSocket(A);return w.onclose=function(){x(b),l.mesh.bye(b)},w.onerror=function(v){x(b)},w.onopen=function(){l.mesh.hi(b)},w.onmessage=function(v){v&&l.mesh.hear(v.data||v,b)},w}catch{l.mesh.bye(b)}}setTimeout(function(){!l.super&&o.on("out",{dam:"hi"})},1);var g=2*999;function x(b){clearTimeout(b.defer),l.peers[b.url]&&(y&&b.retry<=0||(b.retry=(b.retry||l.retry+1||60)-(-b.tried+(b.tried=+new Date)<g*4?1:0),b.defer=setTimeout(function A(){if(y&&y.hidden)return setTimeout(A,g);d(b)},g)))}var y=""+s!=typeof document&&document});var s})(e,"./websocket"),e(function(r){if(!(typeof Gun>"u")){var i=function(){},s;try{s=(Gun.window||i).localStorage}catch{}s||(Gun.log("Warning: No localStorage exists to persist data to!"),s={setItem:function(l,a){this[l]=a},removeItem:function(l){delete this[l]},getItem:function(l){return this[l]}});var o=JSON.stringifyAsync||function(l,a,u,f){var d;try{a(d,JSON.stringify(l,u,f))}catch(g){a(g)}};Gun.on("create",function l(a){this.to.next(a);var u=a.opt;a.graph;var f=[],d,g,x,y;if(u.localStorage===!1)return;u.prefix=u.file||"gun/";try{d=l[u.prefix]=l[u.prefix]||JSON.parse(x=s.getItem(u.prefix))||{}}catch{d=l[u.prefix]={}}x=(x||"").length,a.on("get",function(A){this.to.next(A);var w=A.get,v,c,E,S;!w||!(v=w["#"])||(c=d[v]||S,c&&(E=w["."])&&!Object.plain(E)&&(c=Gun.state.ify({},E,Gun.state.is(c,E),c[E],v)),Gun.on.get.ack(A,c))}),a.on("put",function(A){this.to.next(A);var w=A.put,v=w["#"],c=w["."],E=A["#"],S=A.ok||"";if(d[v]=Gun.state.ify(d[v],c,w[">"],w[":"],v),y&&x>4999880){a.on("in",{"@":E,err:"localStorage max!"});return}!A["@"]&&(!A._.via||Math.random()<S["@"]/S["/"])&&f.push(E),!g&&(g=setTimeout(b,9+x/333))});function b(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(b,99);return}var A=f;clearTimeout(g),g=!1,f=[],o(d,function(w,v){try{!w&&s.setItem(u.prefix,v)}catch(c){w=y=c||"localStorage failure"}w&&(Gun.log(w+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),a.on("localStorage:error",{err:w,get:u.prefix,put:d})),x=v.length,setTimeout.each(A,function(c){a.on("in",{"@":c,err:w,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var W;if(""+W!=typeof Gun){var e=function(O){console.warn("Warning! Deprecated internal utility will break in next version:",O)},n=Gun;n.fn=n.fn||{is:function(O){return e("fn"),!!O&&typeof O=="function"}},n.bi=n.bi||{is:function(O){return e("bi"),O instanceof Boolean||typeof O=="boolean"}},n.num=n.num||{is:function(O){return e("num"),!r(O)&&(O-parseFloat(O)+1>=0||O===1/0||O===-1/0)}},n.text=n.text||{is:function(O){return e("text"),typeof O=="string"}},n.text.ify=n.text.ify||function(O){return e("text.ify"),n.text.is(O)?O:typeof JSON<"u"?JSON.stringify(O):O&&O.toString?O.toString():O},n.text.random=n.text.random||function(O,N){e("text.random");var D="";for(O=O||24,N=N||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";O>0;)D+=N.charAt(Math.floor(Math.random()*N.length)),O--;return D},n.text.match=n.text.match||function(O,N){var D,M;return e("text.match"),typeof O!="string"?!1:(typeof N=="string"&&(N={"=":N}),N=N||{},D=N["="]||N["*"]||N[">"]||N["<"],O===D?!0:M!==N["="]?!1:(D=N["*"]||N[">"]||N["<"],O.slice(0,(D||"").length)===D?!0:M!==N["*"]?!1:M!==N[">"]&&M!==N["<"]?O>=N[">"]&&O<=N["<"]:M!==N[">"]&&O>=N[">"]||M!==N["<"]&&O<=N["<"]))},n.text.hash=n.text.hash||function(O,N){if(e("text.hash"),typeof O=="string"){if(N=N||0,!O.length)return N;for(var D=0,M=O.length,G;D<M;++D)G=O.charCodeAt(D),N=(N<<5)-N+G,N|=0;return N}},n.list=n.list||{is:function(O){return e("list"),O instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(O){return e("list.sort"),function(N,D){return!N||!D?0:(N=N[O],D=D[O],N<D?-1:N>D?1:0)}},n.list.map=n.list.map||function(O,N,D){return e("list.map"),j(O,N,D)},n.list.index=1,n.obj=n.boj||{is:function(O){return e("obj"),O?O instanceof Object&&O.constructor===Object||Object.prototype.toString.call(O).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},n.obj.put=n.obj.put||function(O,N,D){return e("obj.put"),(O||{})[N]=D,O},n.obj.has=n.obj.has||function(O,N){return e("obj.has"),O&&Object.prototype.hasOwnProperty.call(O,N)},n.obj.del=n.obj.del||function(O,N){if(e("obj.del"),!!O)return O[N]=null,delete O[N],O},n.obj.as=n.obj.as||function(O,N,D,M){return e("obj.as"),O[N]=O[N]||(M===D?{}:D)},n.obj.ify=n.obj.ify||function(O){if(e("obj.ify"),E(O))return O;try{O=JSON.parse(O)}catch{O={}}return O},function(){var O;function N(D,M){L(this,M)&&O!==this[M]||(this[M]=D)}n.obj.to=n.obj.to||function(D,M){return e("obj.to"),M=M||{},j(D,N,M),M}}(),n.obj.copy=n.obj.copy||function(O){return e("obj.copy"),O&&JSON.parse(JSON.stringify(O))},function(){function O(N,D){var M=this.n,G;if(!(M&&(D===M||E(M)&&L(M,D)))&&G!==D)return!0}n.obj.empty=n.obj.empty||function(N,D){return e("obj.empty"),N?!j(N,O,{n:D}):!0}}(),function(){function O(M,G){if(arguments.length===2){O.r=O.r||{},O.r[M]=G;return}O.r=O.r||[],O.r.push(M)}var N=Object.keys,D;Object.keys=Object.keys||function(M){return D(M,function(G,z,B){B(z)})},n.obj.map=D=n.obj.map||function(M,G,z){e("obj.map");var B,q=0,U,Q,Y,le,ue=typeof G=="function";if(O.r=B,N&&E(M)&&(Y=N(M),le=!0),z=z||{},r(M)||Y)for(U=(Y||M).length;q<U;q++){var se=q+n.list.index;if(ue){if(Q=le?G.call(z,M[Y[q]],Y[q],O):G.call(z,M[q],se,O),Q!==B)return Q}else if(G===M[le?Y[q]:q])return Y?Y[q]:se}else for(q in M)if(ue){if(L(M,q)&&(Q=z?G.call(z,M[q],q,O):G(M[q],q,O),Q!==B))return Q}else if(G===M[q])return q;return ue?O.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(O){return e("time"),O?O instanceof Date:+new Date().getTime()};var v=n.fn.is,r=n.list.is,c=n.obj,E=c.is,L=c.has,j=c.map,i={};i.is=function(O){return e("val.is"),O===W?!1:O===null?!0:O===1/0?!1:l(O)||o(O)||y(O)?!0:i.link.is(O)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(N){if(e("val.link.is"),N&&N[s]&&!N._&&E(N)){var D={};if(j(N,O,D),D.id)return D.id}return!1};function O(N,D){var M=this;if(M.id)return M.id=!1;if(D==s&&l(N))M.id=N;else return M.id=!1}}(),i.link.ify=function(O){return e("val.link.ify"),I({},s,O)},n.obj.has._=".";var s=i.link._,W,o=n.bi.is,y=n.num.is,l=n.text.is,c=n.obj,E=c.is,I=c.put,j=c.map;n.val=n.val||i;var a={_:"_"};a.soul=function(O,N){return e("node.soul"),O&&O._&&O._[N||d]},a.soul.ify=function(O,N){return e("node.soul.ify"),N=typeof N=="string"?{soul:N}:N||{},O=O||{},O._=O._||{},O._[d]=N.soul||O._[d]||f(),O},a.soul._=i.link._,function(){a.is=function(N,D,M){e("node.is");var G;return E(N)&&(G=a.soul(N))?!j(N,O,{as:M,cb:D,s:G,n:N}):!1};function O(N,D){if(D!==a._){if(!i.is(N))return!0;this.cb&&this.cb.call(this.as,N,D,this.n,this.s)}}}(),function(){a.ify=function(N,D,M){return e("node.ify"),D?typeof D=="string"?D={soul:D}:typeof D=="function"&&(D={map:D}):D={},D.map&&(D.node=D.map.call(M,N,W,D.node||{})),(D.node=a.soul.ify(D.node||{},D))&&j(N,O,{o:D,as:M}),D.node};function O(N,D){var M=this.o,G,z;if(M.map){G=M.map.call(this.as,N,""+D,M.node),z===G?S(M.node,D):M.node&&(M.node[D]=G);return}i.is(N)&&(M.node[D]=N)}}();var c=n.obj,E=c.is,S=c.del,j=c.map,u=n.text,f=u.random,d=a.soul._,W;n.node=n.node||a;var g=n.state;g.lex=function(){return e("state.lex"),g().toString(36).replace(".","")},g.to=function(O,N,D){e("state.to");var M=(O||{})[N];return E(M)&&(M=F(M)),g.ify(D,N,g.is(O,N),M,a.soul(O))},function(){g.map=function(N,D,M){e("state.map");var G,z=E(z=N||D)?z:null;return N=v(N=N||D)?N:null,z&&!N?(D=y(D)?D:g(),z[A]=z[A]||{},j(z,O,{o:z,s:D}),z):(M=M||E(D)?D:G,D=y(D)?D:g(),function(B,q,U,Q){if(!N)return O.call({o:U,s:D},B,q),B;N.call(M||this||{},B,q,U,Q),!(L(U,q)&&G===U[q])&&O.call({o:U,s:D},B,q)})};function O(N,D){A!==D&&g.ify(this.o,D,this.s)}}();var c=n.obj;c.as;var L=c.has,E=c.is,j=c.map,F=c.copy,x=n.num,y=x.is,b=n.fn,v=b.is,A=a._,W,w={};(function(){w.is=function(D,M,G,z){return e("graph.is"),!D||!E(D)||_(D)?!1:!j(D,O,{cb:M,fn:G,as:z})};function O(D,M){if(!D||M!==a.soul(D)||!a.is(D,this.fn,this.as))return!0;this.cb&&(N.n=D,N.as=this.as,this.cb.call(N.as,D,M,N))}function N(D){D&&a.is(N.n,D,N.as)}})(),function(){w.ify=function(z,B,q){e("graph.ify");var U={path:[],obj:z};return B?typeof B=="string"?B={soul:B}:typeof B=="function"&&(B.map=B):B={},typeof q=="string"&&(B.soul=B.soul||q,q=W),B.soul&&(U.link=i.link.ify(B.soul)),B.shell=(q||{}).shell,B.graph=B.graph||{},B.seen=B.seen||[],B.as=B.as||q,O(B,U),B.root=U.node,B.graph};function O(z,B){var q;return(q=G(z,B))?q:(B.env=z,B.soul=D,a.ify(B.obj,N,B)&&(B.link=B.link||i.link.ify(a.soul(B.node)),B.obj!==z.shell&&(z.graph[i.link.is(B.link)]=B.node)),B)}function N(z,B,q){var U=this,Q=U.env,Y,le;if(a._===B&&L(z,i.link._))return q._;if(Y=M(z,B,q,U,Q)){if(B||(U.node=U.node||q||{},L(z,a._)&&a.soul(z)&&(U.node._=F(z._)),U.node=a.soul.ify(U.node,i.link.is(U.link)),U.link=U.link||i.link.ify(a.soul(U.node))),(le=Q.map)&&(le.call(Q.as||{},z,B,q,U),L(q,B))){if(z=q[B],W===z){S(q,B);return}if(!(Y=M(z,B,q,U,Q)))return}if(!B)return U.node;if(Y===!0)return z;if(le=O(Q,{obj:z,path:U.path.concat(B)}),!!le.node)return le.link}}function D(z){var B=this,q=i.link.is(B.link),U=B.env.graph;B.link=B.link||i.link.ify(z),B.link[i.link._]=z,B.node&&B.node[a._]&&(B.node[a._][i.link._]=z),L(U,q)&&(U[z]=U[q],S(U,q))}function M(z,B,q,U,Q){var Y;if(i.is(z))return!0;if(E(z))return 1;if(Y=Q.invalid)return z=Y.call(Q.as||{},z,B,q),M(z,B,q,U,Q);Q.err="Invalid value at '"+U.path.concat(B).join(".")+"'!",n.list.is(z)&&(Q.err+=" Use `.set(item)` instead of an Array.")}function G(z,B){for(var q=z.seen,U=q.length,Q;U--;)if(Q=q[U],B.obj===Q.obj)return Q;q.push(B)}}(),w.node=function(O){e("graph.node");var N=a.soul(O);if(N)return I({},N,O)},function(){w.to=function(N,D,M){if(e("graph.to"),!!N){var G={};return M=M||{seen:{}},j(N[D],O,{obj:G,graph:N,opt:M}),G}};function O(N,D){var M,G;if(a._===D){if(_(N,i.link._))return;this.obj[D]=F(N);return}if(!(M=i.link.is(N))){this.obj[D]=N;return}if(G=this.opt.seen[M]){this.obj[D]=G;return}this.obj[D]=this.opt.seen[M]=w.to(this.graph,M,this.opt)}}();var v=n.fn.is,c=n.obj,E=c.is,S=c.del,L=c.has,_=c.empty,I=c.put,j=c.map,F=c.copy,W;n.graph=n.graph||w}}()})(Qh);var a1=Qh.exports,u2=a1;const c2=th(u2);(function(){var t=typeof window<"u"?window.Gun:a1;t.on("opt",function(e){this.to.next(e);var n=e.opt;if(e.once||!t.Mesh||n.RTCPeerConnection===!1)return;var r;typeof window<"u"&&(r=window),typeof Dn<"u"&&(r=Dn),r=r||{};var i=n.RTCPeerConnection||r.RTCPeerConnection||r.webkitRTCPeerConnection||r.mozRTCPeerConnection,s=n.RTCSessionDescription||r.RTCSessionDescription||r.webkitRTCSessionDescription||r.mozRTCSessionDescription,o=n.RTCIceCandidate||r.RTCIceCandidate||r.webkitRTCIceCandidate||r.mozRTCIceCandidate;if(!i||!s||!o)return;n.RTCPeerConnection=i,n.RTCSessionDescription=s,n.RTCIceCandidate=o,n.rtc=n.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},n.rtc.dataChannel=n.rtc.dataChannel||{ordered:!1,maxRetransmits:2},n.rtc.sdp=n.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},n.rtc.max=n.rtc.max||55,n.rtc.room=n.rtc.room||t.window&&(location.hash.slice(1)||location.pathname.slice(1)),n.announce=function(u){n.rtc.start=+new Date,e.$.get("/RTC/"+n.rtc.room+"<?99").get("+").put(n.pid,function(f){!f.ok||!f.ok.rtc||a(f)},{acks:n.rtc.max}).on(function(f,d,g){f===n.pid||n.rtc.start>g.put[">"]||a({"#":""+g["#"],ok:{rtc:{id:f}}})})};var l=n.mesh=n.mesh||t.Mesh(e);e.on("create",function(u){this.to.next(u),setTimeout(n.announce,1)});function a(u){if(this&&this.off&&this.off(),!!u.ok){var f=u.ok.rtc,d,g;if(!(!f||!f.id||f.id===n.pid)){if(g=f.answer)return!(d=n.peers[f.id]||a[f.id])||d.remoteSet?void 0:(g.sdp=g.sdp.replace(/\\r\\n/g,`\r
`),d.setRemoteDescription(d.remoteSet=new n.RTCSessionDescription(g)));if(g=f.candidate)return d=n.peers[f.id]||a[f.id]||a({ok:{rtc:{id:f.id}}}),d.addIceCandidate(new n.RTCIceCandidate(g));if(!a[f.id]){(d=new n.RTCPeerConnection(n.rtc)).id=f.id;var x=d.wire=d.createDataChannel("dc",n.rtc.dataChannel);if(a[f.id]=d,x.to=setTimeout(function(){delete a[f.id]},1e3*60),x.onclose=function(){l.bye(d)},x.onerror=function(y){},x.onopen=function(y){delete a[f.id],l.hi(d)},x.onmessage=function(y){y&&l.hear(y.data||y,d)},d.onicecandidate=function(y){y.candidate&&e.on("out",{"@":u["#"],ok:{rtc:{candidate:y.candidate,id:n.pid}}})},d.ondatachannel=function(y){var b=y.channel;b.onmessage=x.onmessage,b.onopen=x.onopen,b.onclose=x.onclose},g=f.offer){f.offer.sdp=f.offer.sdp.replace(/\\r\\n/g,`\r
`),d.setRemoteDescription(new n.RTCSessionDescription(g)),d.createAnswer(function(y){d.setLocalDescription(y),e.on("out",{"@":u["#"],ok:{rtc:{answer:y,id:n.pid}}})},function(){},n.rtc.sdp);return}return d.createOffer(function(y){d.setLocalDescription(y),e.on("out",{"@":u["#"],"#":e.ask(a),ok:{rtc:{offer:y,id:n.pid}}})},function(){},n.rtc.sdp),d}}}}})})();class f2{constructor(e={}){J(this,"gun");J(this,"options");J(this,"annotationCallbacks",new Map);this.options={peers:e.peers||["https://citizen-x-bootsrap.onrender.com/gun"],radisk:e.radisk??!0},this.gun=c2({peers:this.options.peers,radisk:this.options.radisk,localStorage:!1,file:"gun-data",webrtc:!0}),this.discoverPeers()}async initialize(){return console.log("GunRepository: Initializing..."),new Promise(e=>{this.gun.on("hi",n=>{console.log("GunRepository: Connected to peer:",n),e()})})}discoverPeers(){this.fetchKnownPeers().then(e=>{e.length>0&&(console.log("GunRepository: Discovered initial peers:",e),this.gun.opt({peers:e}))}),this.gun.get("knownPeers").map().on((e,n)=>{if(e&&e.url&&e.timestamp){if(Date.now()-e.timestamp>10*60*1e3){console.log("GunRepository: Removing expired peer:",e.url),this.gun.get("knownPeers").get(n).put(null);return}this.fetchKnownPeers().then(s=>{console.log("GunRepository: Updated peers list:",s),this.gun.opt({peers:s})})}else this.fetchKnownPeers().then(r=>{console.log("GunRepository: Updated peers list after removal:",r),this.gun.opt({peers:r})})})}async fetchKnownPeers(){return new Promise(e=>{const n=[];this.gun.get("knownPeers").map().once(r=>{r&&r.url&&r.timestamp&&Date.now()-r.timestamp<=10*60*1e3&&n.push(r.url)}),setTimeout(()=>e(n),200)})}getGunInstance(){return this.gun}addPeers(e){const n=this.options.peers||[],r=[...new Set([...n,...e])];this.options.peers=r,this.gun.opt({peers:r}),console.log("Updated peers:",r)}async getCurrentDID(){return new Promise(e=>{const n=localStorage.getItem("currentDID");console.log("GunRepository: Retrieved cached DID from localStorage:",n),n?this.gun.get(`user_${n}`).get("did").once(r=>{r&&r.did===n?(console.log("GunRepository: Confirmed DID in user-specific namespace:",n),e(n)):(console.log("GunRepository: DID not found in user-specific namespace, clearing localStorage"),localStorage.removeItem("currentDID"),e(null))}):e(null)})}async setCurrentDID(e){return new Promise((n,r)=>{localStorage.setItem("currentDID",e),console.log("GunRepository: Set current DID in localStorage:",e),this.gun.get(`user_${e}`).get("did").put({did:e},i=>{i.err?(console.error("GunRepository: Failed to set user-specific DID:",i.err),r(new Error(i.err))):(console.log("GunRepository: Set user-specific DID in Gun.js:",e),n())})})}async clearCurrentDID(){return new Promise(e=>{localStorage.removeItem("currentDID"),console.log("GunRepository: Cleared current DID from localStorage"),e()})}async saveProfile(e){return new Promise((n,r)=>{this.gun.get(`user_${e.did}`).get("profile").put(e,i=>{i.err?(console.error("GunRepository: Failed to save profile:",i.err),r(new Error(i.err))):(console.log("GunRepository: Saved profile:",e),n())})})}async getProfile(e,n=5,r=1e3){for(let i=1;i<=n;i++){const s=await new Promise(o=>{this.gun.get(`user_${e}`).get("profile").once(l=>{l&&l.did&&l.handle?(console.log("GunRepository: Loaded profile for DID:",e,l),o({did:l.did,handle:l.handle,profilePicture:l.profilePicture})):(console.warn("GunRepository: Profile not found for DID on attempt",i,e,l),o(null))})});if(s)return s;console.log(`GunRepository: Retrying getProfile for DID: ${e}, attempt ${i}/${n}`),await new Promise(o=>setTimeout(o,r))}return console.error("GunRepository: Failed to load profile for DID after retries:",e),null}async getAnnotations(e,n){const r=[],i=this.gun.get("annotations").get(e),s=3;for(let o=1;o<=s;o++){const l=new Set;let a=!1;if(await new Promise(u=>{i.map().once(async f=>{if(f&&!l.has(f.id)){l.add(f.id),a=!0;const d=await new Promise(x=>{const y=[];i.get(f.id).get("comments").map().once(b=>{b&&y.push({id:b.id,content:b.content,author:b.author,timestamp:b.timestamp,authorHandle:b.authorHandle,source:b.source})}),setTimeout(()=>x(y),500)}),g={id:f.id,url:f.url,content:f.content,author:f.author,timestamp:f.timestamp,comments:d,authorHandle:f.authorHandle,authorProfilePicture:f.authorProfilePicture};r.push(g),console.log("GunRepository: Loaded annotation:",g)}}),setTimeout(()=>{console.log("GunRepository: Initial annotations loaded for URL:",e,r,"Has new data:",a,"Attempt:",o),u()},2e3)}),a||o===s)break;console.log("GunRepository: Retrying annotations fetch for URL:",e,"Attempt:",o),await new Promise(u=>setTimeout(u,1e3))}return n&&(this.annotationCallbacks.has(e)||this.annotationCallbacks.set(e,[]),this.annotationCallbacks.get(e).push(n),i.map().on(async(o,l)=>{if(console.log("Real-time update received for URL:",e,"Annotation:",o),o){const a=await new Promise(d=>{const g=[];i.get(o.id).get("comments").map().once(x=>{x&&g.push({id:x.id,content:x.content,author:x.author,timestamp:x.timestamp,authorHandle:x.authorHandle,source:x.source})}),setTimeout(()=>d(g),500)}),u=r.filter(d=>d.id!==o.id);u.push({id:o.id,url:o.url,content:o.content,author:o.author,timestamp:o.timestamp,comments:a,authorHandle:o.authorHandle,authorProfilePicture:o.authorProfilePicture}),r.splice(0,r.length,...u),console.log("GunRepository: Real-time update for URL:",e,r),(this.annotationCallbacks.get(e)||[]).forEach(d=>d([...r]))}else{const a=r.filter(f=>f.id!==l);r.splice(0,r.length,...a),console.log("GunRepository: Real-time deletion for URL:",e,r),(this.annotationCallbacks.get(e)||[]).forEach(f=>f([...r]))}})),[...r]}async saveAnnotation(e){const{comments:n,...r}=e;if(await new Promise((i,s)=>{this.gun.get("annotations").get(e.url).get(e.id).put(r,o=>{o.err?(console.error("GunRepository: Failed to save annotation:",o.err),s(new Error(o.err))):(console.log("GunRepository: Saved annotation:",r),i())})}),n&&n.length>0)for(const i of n)await this.saveComment(e.url,e.id,i)}async deleteAnnotation(e,n){return new Promise((r,i)=>{this.gun.get("annotations").get(e).get(n).put(null,s=>{s.err?(console.error("GunRepository: Failed to delete annotation:",s.err),i(new Error(s.err))):(console.log("GunRepository: Deleted annotation:",n),r())})})}async saveComment(e,n,r){return new Promise((i,s)=>{const o={id:r.id,content:r.content,author:r.author,timestamp:r.timestamp,authorHandle:r.authorHandle,source:r.source};this.gun.get("annotations").get(e).get(n).get("comments").get(r.id).put(o,l=>{l.err?(console.error("GunRepository: Failed to save comment:",l.err),s(new Error(l.err))):(console.log("GunRepository: Saved comment:",r),i())})})}}class h2{constructor(){J(this,"repository");const e=["https://citizen-x-bootsrap.onrender.com/gun"];this.repository=new f2({peers:e,radisk:!1}),this.discoverPeers()}async initialize(){await this.repository.initialize()}async discoverPeers(){const e=this.repository.getGunInstance(),n=await new Promise(r=>{const i=new Set;e.get("knownPeers").map().once(s=>{s&&s.url&&s.timestamp&&Date.now()-s.timestamp<=10*60*1e3&&i.add(s.url)}),setTimeout(()=>r(Array.from(i)),2e3)});console.log("Discovered peers:",n),n.length>0&&this.repository.addPeers(n)}async getCurrentDID(){return this.repository.getCurrentDID()}async setCurrentDID(e){await this.repository.setCurrentDID(e)}async clearCurrentDID(){await this.repository.clearCurrentDID()}async saveProfile(e){await this.repository.saveProfile(e)}async getProfile(e){return this.repository.getProfile(e)}async getAnnotations(e,n){return this.repository.getAnnotations(e,n)}async saveAnnotation(e){await this.repository.saveAnnotation(e)}async deleteAnnotation(e,n){await this.repository.deleteAnnotation(e,n)}async saveComment(e,n,r){await this.repository.saveComment(e,n,r)}}function u1(){const[t,e]=ie.useState(null),[n,r]=ie.useState(null),[i,s]=ie.useState(!0);return ie.useEffect(()=>{(async()=>{try{console.log("useStorage: Starting storage initialization");const l=new h2;await l.initialize(),console.log("useStorage: Storage initialized successfully"),e(l),r(null)}catch(l){console.error("useStorage: Failed to initialize storage:",l.message||l),r("Failed to initialize storage: "+(l.message||"Unknown error")),e(null)}finally{s(!1)}})()},[]),{storage:t,error:n,isLoading:i}}var Af={exports:{}};function d2(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,l=t.charAt(0),a=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var y=0,b=0,A=0,w=x.length;A!==w&&x[A]===0;)A++,y++;for(var v=(w-A)*u+1>>>0,c=new Uint8Array(v);A!==w;){for(var E=x[A],S=0,L=v-1;(E!==0||S<b)&&L!==-1;L--,S++)E+=256*c[L]>>>0,c[L]=E%o>>>0,E=E/o>>>0;if(E!==0)throw new Error("Non-zero carry");b=S,A++}for(var _=v-b;_!==v&&c[_]===0;)_++;for(var I=l.repeat(y);_<v;++_)I+=t.charAt(c[_]);return I}function d(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var y=0;if(x[y]!==" "){for(var b=0,A=0;x[y]===l;)b++,y++;for(var w=(x.length-y)*a+1>>>0,v=new Uint8Array(w);x[y];){var c=e[x.charCodeAt(y)];if(c===255)return;for(var E=0,S=w-1;(c!==0||E<A)&&S!==-1;S--,E++)c+=o*v[S]>>>0,v[S]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");A=E,y++}if(x[y]!==" "){for(var L=w-A;L!==w&&v[L]===0;)L++;for(var _=new Uint8Array(b+(w-L)),I=b;L!==w;)_[I++]=v[L++];return _}}}function g(x){var y=d(x);if(y)return y;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:d,decode:g}}var p2=d2;const g2=new TextDecoder,m2=t=>g2.decode(t),y2=new TextEncoder,v2=t=>y2.encode(t);function w2(t,e){const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}var Xh={decodeText:m2,encodeText:v2,concat:w2};const{encodeText:x2}=Xh;let E2=class{constructor(e,n,r,i){this.name=e,this.code=n,this.codeBuf=x2(this.code),this.alphabet=i,this.codec=r(i)}encode(e){return this.codec.encode(e)}decode(e){for(const n of e)if(this.alphabet&&this.alphabet.indexOf(n)<0)throw new Error(`invalid character '${n}' in '${e}'`);return this.codec.decode(e)}};var b2=E2;const S2=(t,e,n)=>{const r={};for(let u=0;u<e.length;++u)r[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let o=0,l=0,a=0;for(let u=0;u<i;++u){const f=r[t[u]];if(f===void 0)throw new SyntaxError("Invalid character "+t[u]);l=l<<n|f,o+=n,o>=8&&(o-=8,s[a++]=255&l>>o)}if(o>=n||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return s},A2=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,l=0;for(let a=0;a<t.length;++a)for(l=l<<8|t[a],o+=8;o>n;)o-=n,s+=e[i&l>>o];if(o&&(s+=e[i&l<<n-o]),r)for(;s.length*n&7;)s+="=";return s},T2=t=>e=>({encode(n){return A2(n,e,t)},decode(n){return S2(n,e,t)}});var k2={rfc4648:T2};const zs=p2,N2=b2,{rfc4648:We}=k2,{decodeText:_2,encodeText:C2}=Xh,L2=()=>({encode:_2,decode:C2}),c1=[["identity","\0",L2,""],["base2","0",We(1),"01"],["base8","7",We(3),"01234567"],["base10","9",zs,"0123456789"],["base16","f",We(4),"0123456789abcdef"],["base16upper","F",We(4),"0123456789ABCDEF"],["base32hex","v",We(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",We(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",We(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",We(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",We(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",We(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",We(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",We(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",We(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",zs,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",zs,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",zs,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",zs,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],f1=c1.reduce((t,e)=>(t[e[0]]=new N2(e[0],e[1],e[2],e[3]),t),{}),I2=c1.reduce((t,e)=>(t[e[1]]=f1[e[0]],t),{});var O2={names:f1,codes:I2};(function(t,e){const n=O2,{encodeText:r,decodeText:i,concat:s}=Xh;function o(b,A){if(!A)throw new Error("requires an encoded Uint8Array");const{name:w,codeBuf:v}=d(b);return f(w,A),s([v,A],v.length+A.length)}function l(b,A){const w=d(b),v=r(w.encode(A));return s([w.codeBuf,v],w.codeBuf.length+v.length)}function a(b){b instanceof Uint8Array&&(b=i(b));const A=b[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(A)&&(b=b.toLowerCase()),d(b[0]).decode(b.substring(1))}function u(b){if(b instanceof Uint8Array&&(b=i(b)),Object.prototype.toString.call(b)!=="[object String]")return!1;try{return d(b[0]).name}catch{return!1}}function f(b,A){d(b).decode(i(A))}function d(b){if(Object.prototype.hasOwnProperty.call(n.names,b))return n.names[b];if(Object.prototype.hasOwnProperty.call(n.codes,b))return n.codes[b];throw new Error(`Unsupported encoding: ${b}`)}function g(b){return b instanceof Uint8Array&&(b=i(b)),d(b[0])}e=t.exports=o,e.encode=l,e.decode=a,e.isEncoded=u,e.encoding=d,e.encodingFromData=g;const x=Object.freeze(n.names),y=Object.freeze(n.codes);e.names=x,e.codes=y})(Af,Af.exports);var h1=Af.exports;/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const at=2n**255n-19n,Zl=2n**252n+27742317777372353535851937790883648493n,Pp=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,jp=0x6666666666666666666666666666666666666666666666666666666666666658n,R2=37095705934669439343138083508754565189542113879843219016388785533085940283555n,kl={a:-1n,d:R2,h:8},Qe=(t="")=>{throw new Error(t)},d1=t=>typeof t=="string",D2=t=>t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array",Io=(t,e)=>!D2(t)||typeof e=="number"&&e>0&&t.length!==e?Qe("Uint8Array of valid length expected"):t,cs=t=>new Uint8Array(t),Yh=(t,e)=>Io(d1(t)?ed(t):cs(Io(t)),e),ae=(t,e=at)=>{let n=t%e;return n>=0n?n:e+n},Mp=t=>t instanceof Xt?t:Qe("Point expected");class Xt{constructor(e,n,r,i){this.ex=e,this.ey=n,this.ez=r,this.et=i}static fromAffine(e){return new Xt(e.x,e.y,1n,ae(e.x*e.y))}static fromHex(e,n=!1){const{d:r}=kl;e=Yh(e,32);const i=e.slice(),s=e[31];i[31]=s&-129;const o=g1(i);n&&!(0n<=o&&o<2n**256n)&&Qe("bad y coord 1"),!n&&!(0n<=o&&o<at)&&Qe("bad y coord 2");const l=ae(o*o),a=ae(l-1n),u=ae(r*l+1n);let{isValid:f,value:d}=j2(a,u);f||Qe("bad y coordinate 3");const g=(d&1n)===1n,x=(s&128)!==0;return!n&&d===0n&&x&&Qe("bad y coord 3"),x!==g&&(d=ae(-d)),new Xt(d,o,1n,ae(d*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:n,ey:r,ez:i}=this,{ex:s,ey:o,ez:l}=Mp(e),a=ae(n*l),u=ae(s*i),f=ae(r*l),d=ae(o*i);return a===u&&f===d}is0(){return this.equals(Qs)}negate(){return new Xt(ae(-this.ex),this.ey,this.ez,ae(-this.et))}double(){const{ex:e,ey:n,ez:r}=this,{a:i}=kl,s=ae(e*e),o=ae(n*n),l=ae(2n*ae(r*r)),a=ae(i*s),u=e+n,f=ae(ae(u*u)-s-o),d=a+o,g=d-l,x=a-o,y=ae(f*g),b=ae(d*x),A=ae(f*x),w=ae(g*d);return new Xt(y,b,w,A)}add(e){const{ex:n,ey:r,ez:i,et:s}=this,{ex:o,ey:l,ez:a,et:u}=Mp(e),{a:f,d}=kl,g=ae(n*o),x=ae(r*l),y=ae(s*d*u),b=ae(i*a),A=ae((n+r)*(o+l)-g-x),w=ae(b-y),v=ae(b+y),c=ae(x-f*g),E=ae(A*w),S=ae(v*c),L=ae(A*c),_=ae(w*v);return new Xt(E,S,_,L)}mul(e,n=!0){if(e===0n)return n===!0?Qe("cannot multiply by 0"):Qs;if(typeof e=="bigint"&&0n<e&&e<Zl||Qe("invalid scalar, must be < L"),!n&&this.is0()||e===1n)return this;if(this.equals(fs))return G2(e).p;let r=Qs,i=fs;for(let s=this;e>0n;s=s.double(),e>>=1n)e&1n?r=r.add(s):n&&(i=i.add(s));return r}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(kl.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(Zl/2n,!1).double();return Zl%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:n,ez:r}=this;if(this.equals(Qs))return{x:0n,y:1n};const i=m1(r,at);return ae(r*i)!==1n&&Qe("invalid inverse"),{x:ae(e*i),y:ae(n*i)}}toRawBytes(){const{x:e,y:n}=this.toAffine(),r=B2(n);return r[31]|=e&1n?128:0,r}toHex(){return Jh(this.toRawBytes())}}Xt.BASE=new Xt(Pp,jp,1n,ae(Pp*jp));Xt.ZERO=new Xt(0n,1n,1n,0n);const{BASE:fs,ZERO:Qs}=Xt,p1=(t,e)=>t.toString(16).padStart(e,"0"),Jh=t=>Array.from(Io(t)).map(e=>p1(e,2)).join(""),Kn={_0:48,_9:57,A:65,F:70,a:97,f:102},Up=t=>{if(t>=Kn._0&&t<=Kn._9)return t-Kn._0;if(t>=Kn.A&&t<=Kn.F)return t-(Kn.A-10);if(t>=Kn.a&&t<=Kn.f)return t-(Kn.a-10)},ed=t=>{const e="hex invalid";if(!d1(t))return Qe(e);const n=t.length,r=n/2;if(n%2)return Qe(e);const i=cs(r);for(let s=0,o=0;s<r;s++,o+=2){const l=Up(t.charCodeAt(o)),a=Up(t.charCodeAt(o+1));if(l===void 0||a===void 0)return Qe(e);i[s]=l*16+a}return i},B2=t=>ed(p1(t,32*2)).reverse(),g1=t=>BigInt("0x"+Jh(cs(Io(t)).reverse())),$p=(...t)=>{const e=cs(t.reduce((r,i)=>r+Io(i).length,0));let n=0;return t.forEach(r=>{e.set(r,n),n+=r.length}),e},m1=(t,e)=>{(t===0n||e<=0n)&&Qe("no inverse n="+t+" mod="+e);let n=ae(t,e),r=e,i=0n,s=1n;for(;n!==0n;){const o=r/n,l=r%n,a=i-s*o;r=n,n=l,i=s,s=a}return r===1n?ae(i,e):Qe("no inverse")},Cn=(t,e)=>{let n=t;for(;e-- >0n;)n*=n,n%=at;return n},P2=t=>{const n=t*t%at*t%at,r=Cn(n,2n)*n%at,i=Cn(r,1n)*t%at,s=Cn(i,5n)*i%at,o=Cn(s,10n)*s%at,l=Cn(o,20n)*o%at,a=Cn(l,40n)*l%at,u=Cn(a,80n)*a%at,f=Cn(u,80n)*a%at,d=Cn(f,10n)*s%at;return{pow_p_5_8:Cn(d,2n)*t%at,b2:n}},qp=19681161376707505956807079304988542015446066515923890162744021073123829784752n,j2=(t,e)=>{const n=ae(e*e*e),r=ae(n*n*e),i=P2(t*r).pow_p_5_8;let s=ae(t*n*i);const o=ae(e*s*s),l=s,a=ae(s*qp),u=o===t,f=o===ae(-t),d=o===ae(-t*qp);return u&&(s=l),(f||d)&&(s=a),(ae(s)&1n)===1n&&(s=ae(-s)),{isValid:u||f,value:s}},M2=t=>ae(g1(t),Zl);let ao;const U2=(...t)=>wn.sha512Async(...t),$2=(...t)=>typeof ao=="function"?ao(...t):Qe("etc.sha512Sync not set"),y1=t=>{const e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const n=t.slice(32,64),r=M2(e),i=fs.mul(r),s=i.toRawBytes();return{head:e,prefix:n,scalar:r,point:i,pointBytes:s}},q2=t=>U2(Yh(t,32)).then(y1),v1=t=>y1($2(Yh(t,32))),F2=t=>v1(t).pointBytes,Fp=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,wn={bytesToHex:Jh,hexToBytes:ed,concatBytes:$p,mod:ae,invert:m1,randomBytes:(t=32)=>{const e=Fp();return(!e||!e.getRandomValues)&&Qe("crypto.getRandomValues must be defined"),e.getRandomValues(cs(t))},sha512Async:async(...t)=>{const e=Fp(),n=e&&e.subtle;n||Qe("etc.sha512Async or crypto.subtle must be defined");const r=$p(...t);return cs(await n.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(wn,{sha512Sync:{configurable:!1,get(){return ao},set(t){ao||(ao=t)}}});const z2={getExtendedPublicKeyAsync:q2,getExtendedPublicKey:v1,randomPrivateKey:()=>wn.randomBytes(32),precompute:(t=8,e=fs)=>(e.multiply(3n),e)},Qr=8,H2=()=>{const t=[],e=256/Qr+1;let n=fs,r=n;for(let i=0;i<e;i++){r=n,t.push(r);for(let s=1;s<2**(Qr-1);s++)r=r.add(n),t.push(r);n=r.double()}return t};let zp;const G2=t=>{const e=zp||(zp=H2()),n=(f,d)=>{let g=d.negate();return f?g:d};let r=Qs,i=fs;const s=1+256/Qr,o=2**(Qr-1),l=BigInt(2**Qr-1),a=2**Qr,u=BigInt(Qr);for(let f=0;f<s;f++){const d=f*o;let g=Number(t&l);t>>=u,g>o&&(g-=a,t+=1n);const x=d,y=d+Math.abs(g)-1,b=f%2!==0,A=g<0;g===0?i=i.add(n(b,e[x])):r=r.add(n(A,e[y]))}return{p:r,f:i}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function td(t,...e){if(!V2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Hp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function K2(t,e){td(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Tf(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function dc(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function W2(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function w1(t){return typeof t=="string"&&(t=W2(t)),td(t),t}let Z2=class{};function Q2(t){const e=r=>t().update(w1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function X2(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,u=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+u,l,r)}class Y2 extends Z2{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=dc(this.buffer)}update(e){Hp(this),e=w1(e),td(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=dc(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Hp(this),K2(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Tf(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;X2(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=dc(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)l.setUint32(4*d,f[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=l,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const lt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Nl=BigInt(2**32-1),Gp=BigInt(32);function J2(t,e=!1){return e?{h:Number(t&Nl),l:Number(t>>Gp&Nl)}:{h:Number(t>>Gp&Nl)|0,l:Number(t&Nl)|0}}function ex(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l}=J2(t[s],e);[r[s],i[s]]=[o,l]}return[r,i]}const Vp=(t,e,n)=>t>>>n,Kp=(t,e,n)=>t<<32-n|e>>>n,Ti=(t,e,n)=>t>>>n|e<<32-n,ki=(t,e,n)=>t<<32-n|e>>>n,_l=(t,e,n)=>t<<64-n|e>>>n-32,Cl=(t,e,n)=>t>>>n-32|e<<64-n;function Wn(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const tx=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),nx=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,rx=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ix=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,sx=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ox=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,x1=ex(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),lx=x1[0],ax=x1[1],gr=new Uint32Array(80),mr=new Uint32Array(80);class ux extends Y2{constructor(e=64){super(128,e,16,!1),this.Ah=lt[0]|0,this.Al=lt[1]|0,this.Bh=lt[2]|0,this.Bl=lt[3]|0,this.Ch=lt[4]|0,this.Cl=lt[5]|0,this.Dh=lt[6]|0,this.Dl=lt[7]|0,this.Eh=lt[8]|0,this.El=lt[9]|0,this.Fh=lt[10]|0,this.Fl=lt[11]|0,this.Gh=lt[12]|0,this.Gl=lt[13]|0,this.Hh=lt[14]|0,this.Hl=lt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:l,Dl:a,Eh:u,El:f,Fh:d,Fl:g,Gh:x,Gl:y,Hh:b,Hl:A}=this;return[e,n,r,i,s,o,l,a,u,f,d,g,x,y,b,A]}set(e,n,r,i,s,o,l,a,u,f,d,g,x,y,b,A){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=d|0,this.Fl=g|0,this.Gh=x|0,this.Gl=y|0,this.Hh=b|0,this.Hl=A|0}process(e,n){for(let c=0;c<16;c++,n+=4)gr[c]=e.getUint32(n),mr[c]=e.getUint32(n+=4);for(let c=16;c<80;c++){const E=gr[c-15]|0,S=mr[c-15]|0,L=Ti(E,S,1)^Ti(E,S,8)^Vp(E,S,7),_=ki(E,S,1)^ki(E,S,8)^Kp(E,S,7),I=gr[c-2]|0,j=mr[c-2]|0,F=Ti(I,j,19)^_l(I,j,61)^Vp(I,j,6),W=ki(I,j,19)^Cl(I,j,61)^Kp(I,j,6),O=rx(_,W,mr[c-7],mr[c-16]),N=ix(O,L,F,gr[c-7],gr[c-16]);gr[c]=N|0,mr[c]=O|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:l,Cl:a,Dh:u,Dl:f,Eh:d,El:g,Fh:x,Fl:y,Gh:b,Gl:A,Hh:w,Hl:v}=this;for(let c=0;c<80;c++){const E=Ti(d,g,14)^Ti(d,g,18)^_l(d,g,41),S=ki(d,g,14)^ki(d,g,18)^Cl(d,g,41),L=d&x^~d&b,_=g&y^~g&A,I=sx(v,S,_,ax[c],mr[c]),j=ox(I,w,E,L,lx[c],gr[c]),F=I|0,W=Ti(r,i,28)^_l(r,i,34)^_l(r,i,39),O=ki(r,i,28)^Cl(r,i,34)^Cl(r,i,39),N=r&s^r&l^s&l,D=i&o^i&a^o&a;w=b|0,v=A|0,b=x|0,A=y|0,x=d|0,y=g|0,{h:d,l:g}=Wn(u|0,f|0,j|0,F|0),u=l|0,f=a|0,l=s|0,a=o|0,s=r|0,o=i|0;const M=tx(F,O,D);r=nx(M,j,W,N),i=M|0}({h:r,l:i}=Wn(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Wn(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:a}=Wn(this.Ch|0,this.Cl|0,l|0,a|0),{h:u,l:f}=Wn(this.Dh|0,this.Dl|0,u|0,f|0),{h:d,l:g}=Wn(this.Eh|0,this.El|0,d|0,g|0),{h:x,l:y}=Wn(this.Fh|0,this.Fl|0,x|0,y|0),{h:b,l:A}=Wn(this.Gh|0,this.Gl|0,b|0,A|0),{h:w,l:v}=Wn(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,i,s,o,l,a,u,f,d,g,x,y,b,A,w,v)}roundClean(){Tf(gr,mr)}destroy(){Tf(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const cx=Q2(()=>new ux),Ga=cx;var kf={},Va={};Va.byteLength=dx;Va.toByteArray=gx;Va.fromByteArray=vx;var Rn=[],Vt=[],fx=typeof Uint8Array<"u"?Uint8Array:Array,pc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ni=0,hx=pc.length;Ni<hx;++Ni)Rn[Ni]=pc[Ni],Vt[pc.charCodeAt(Ni)]=Ni;Vt[45]=62;Vt[95]=63;function E1(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function dx(t){var e=E1(t),n=e[0],r=e[1];return(n+r)*3/4-r}function px(t,e,n){return(e+n)*3/4-n}function gx(t){var e,n=E1(t),r=n[0],i=n[1],s=new fx(px(t,r,i)),o=0,l=i>0?r-4:r,a;for(a=0;a<l;a+=4)e=Vt[t.charCodeAt(a)]<<18|Vt[t.charCodeAt(a+1)]<<12|Vt[t.charCodeAt(a+2)]<<6|Vt[t.charCodeAt(a+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Vt[t.charCodeAt(a)]<<2|Vt[t.charCodeAt(a+1)]>>4,s[o++]=e&255),i===1&&(e=Vt[t.charCodeAt(a)]<<10|Vt[t.charCodeAt(a+1)]<<4|Vt[t.charCodeAt(a+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function mx(t){return Rn[t>>18&63]+Rn[t>>12&63]+Rn[t>>6&63]+Rn[t&63]}function yx(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(mx(r));return i.join("")}function vx(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,l=n-r;o<l;o+=s)i.push(yx(t,o,o+s>l?l:o+s));return r===1?(e=t[n-1],i.push(Rn[e>>2]+Rn[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Rn[e>>10]+Rn[e>>4&63]+Rn[e<<2&63]+"=")),i.join("")}var nd={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */nd.read=function(t,e,n,r,i){var s,o,l=i*8-r-1,a=(1<<l)-1,u=a>>1,f=-7,d=n?i-1:0,g=n?-1:1,x=t[e+d];for(d+=g,s=x&(1<<-f)-1,x>>=-f,f+=l;f>0;s=s*256+t[e+d],d+=g,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=o*256+t[e+d],d+=g,f-=8);if(s===0)s=1-u;else{if(s===a)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(x?-1:1)*o*Math.pow(2,s-r)};nd.write=function(t,e,n,r,i,s){var o,l,a,u=s*8-i-1,f=(1<<u)-1,d=f>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=r?0:s-1,y=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+d>=1?e+=g/a:e+=g*Math.pow(2,1-d),e*a>=2&&(o++,a/=2),o+d>=f?(l=0,o=f):o+d>=1?(l=(e*a-1)*Math.pow(2,i),o=o+d):(l=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+x]=l&255,x+=y,l/=256,i-=8);for(o=o<<i|l,u+=i;u>0;t[n+x]=o&255,x+=y,o/=256,u-=8);t[n+x-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Va,n=nd,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const T=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(T,h),T.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(T){if(T>i)throw new RangeError('The value "'+T+'" is invalid for option "size"');const h=new Uint8Array(T);return Object.setPrototypeOf(h,l.prototype),h}function l(T,h,m){if(typeof T=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(T)}return a(T,h,m)}l.poolSize=8192;function a(T,h,m){if(typeof T=="string")return g(T,h);if(ArrayBuffer.isView(T))return y(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(mt(T,ArrayBuffer)||T&&mt(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mt(T,SharedArrayBuffer)||T&&mt(T.buffer,SharedArrayBuffer)))return b(T,h,m);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=T.valueOf&&T.valueOf();if(C!=null&&C!==T)return l.from(C,h,m);const P=A(T);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return l.from(T[Symbol.toPrimitive]("string"),h,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}l.from=function(T,h,m){return a(T,h,m)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function f(T,h,m){return u(T),T<=0?o(T):h!==void 0?typeof m=="string"?o(T).fill(h,m):o(T).fill(h):o(T)}l.alloc=function(T,h,m){return f(T,h,m)};function d(T){return u(T),o(T<0?0:w(T)|0)}l.allocUnsafe=function(T){return d(T)},l.allocUnsafeSlow=function(T){return d(T)};function g(T,h){if((typeof h!="string"||h==="")&&(h="utf8"),!l.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const m=c(T,h)|0;let C=o(m);const P=C.write(T,h);return P!==m&&(C=C.slice(0,P)),C}function x(T){const h=T.length<0?0:w(T.length)|0,m=o(h);for(let C=0;C<h;C+=1)m[C]=T[C]&255;return m}function y(T){if(mt(T,Uint8Array)){const h=new Uint8Array(T);return b(h.buffer,h.byteOffset,h.byteLength)}return x(T)}function b(T,h,m){if(h<0||T.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<h+(m||0))throw new RangeError('"length" is outside of buffer bounds');let C;return h===void 0&&m===void 0?C=new Uint8Array(T):m===void 0?C=new Uint8Array(T,h):C=new Uint8Array(T,h,m),Object.setPrototypeOf(C,l.prototype),C}function A(T){if(l.isBuffer(T)){const h=w(T.length)|0,m=o(h);return m.length===0||T.copy(m,0,0,h),m}if(T.length!==void 0)return typeof T.length!="number"||fr(T.length)?o(0):x(T);if(T.type==="Buffer"&&Array.isArray(T.data))return x(T.data)}function w(T){if(T>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return T|0}function v(T){return+T!=T&&(T=0),l.alloc(+T)}l.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==l.prototype},l.compare=function(h,m){if(mt(h,Uint8Array)&&(h=l.from(h,h.offset,h.byteLength)),mt(m,Uint8Array)&&(m=l.from(m,m.offset,m.byteLength)),!l.isBuffer(h)||!l.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===m)return 0;let C=h.length,P=m.length;for(let $=0,V=Math.min(C,P);$<V;++$)if(h[$]!==m[$]){C=h[$],P=m[$];break}return C<P?-1:P<C?1:0},l.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(h,m){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return l.alloc(0);let C;if(m===void 0)for(m=0,C=0;C<h.length;++C)m+=h[C].length;const P=l.allocUnsafe(m);let $=0;for(C=0;C<h.length;++C){let V=h[C];if(mt(V,Uint8Array))$+V.length>P.length?(l.isBuffer(V)||(V=l.from(V)),V.copy(P,$)):Uint8Array.prototype.set.call(P,V,$);else if(l.isBuffer(V))V.copy(P,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=V.length}return P};function c(T,h){if(l.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||mt(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const m=T.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;let P=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return gt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Fn(T).length;default:if(P)return C?-1:gt(T).length;h=(""+h).toLowerCase(),P=!0}}l.byteLength=c;function E(T,h,m){let C=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,h>>>=0,m<=h))return"";for(T||(T="utf8");;)switch(T){case"hex":return q(this,h,m);case"utf8":case"utf-8":return D(this,h,m);case"ascii":return z(this,h,m);case"latin1":case"binary":return B(this,h,m);case"base64":return N(this,h,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,h,m);default:if(C)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),C=!0}}l.prototype._isBuffer=!0;function S(T,h,m){const C=T[h];T[h]=T[m],T[m]=C}l.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<h;m+=2)S(this,m,m+1);return this},l.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<h;m+=4)S(this,m,m+3),S(this,m+1,m+2);return this},l.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<h;m+=8)S(this,m,m+7),S(this,m+1,m+6),S(this,m+2,m+5),S(this,m+3,m+4);return this},l.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?D(this,0,h):E.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(h){if(!l.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:l.compare(this,h)===0},l.prototype.inspect=function(){let h="";const m=t.INSPECT_MAX_BYTES;return h=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(h+=" ... "),"<Buffer "+h+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(h,m,C,P,$){if(mt(h,Uint8Array)&&(h=l.from(h,h.offset,h.byteLength)),!l.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(m===void 0&&(m=0),C===void 0&&(C=h?h.length:0),P===void 0&&(P=0),$===void 0&&($=this.length),m<0||C>h.length||P<0||$>this.length)throw new RangeError("out of range index");if(P>=$&&m>=C)return 0;if(P>=$)return-1;if(m>=C)return 1;if(m>>>=0,C>>>=0,P>>>=0,$>>>=0,this===h)return 0;let V=$-P,ce=C-m;const we=Math.min(V,ce),xe=this.slice(P,$),Ee=h.slice(m,C);for(let pe=0;pe<we;++pe)if(xe[pe]!==Ee[pe]){V=xe[pe],ce=Ee[pe];break}return V<ce?-1:ce<V?1:0};function L(T,h,m,C,P){if(T.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,fr(m)&&(m=P?0:T.length-1),m<0&&(m=T.length+m),m>=T.length){if(P)return-1;m=T.length-1}else if(m<0)if(P)m=0;else return-1;if(typeof h=="string"&&(h=l.from(h,C)),l.isBuffer(h))return h.length===0?-1:_(T,h,m,C,P);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(T,h,m):Uint8Array.prototype.lastIndexOf.call(T,h,m):_(T,[h],m,C,P);throw new TypeError("val must be string, number or Buffer")}function _(T,h,m,C,P){let $=1,V=T.length,ce=h.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(T.length<2||h.length<2)return-1;$=2,V/=2,ce/=2,m/=2}function we(Ee,pe){return $===1?Ee[pe]:Ee.readUInt16BE(pe*$)}let xe;if(P){let Ee=-1;for(xe=m;xe<V;xe++)if(we(T,xe)===we(h,Ee===-1?0:xe-Ee)){if(Ee===-1&&(Ee=xe),xe-Ee+1===ce)return Ee*$}else Ee!==-1&&(xe-=xe-Ee),Ee=-1}else for(m+ce>V&&(m=V-ce),xe=m;xe>=0;xe--){let Ee=!0;for(let pe=0;pe<ce;pe++)if(we(T,xe+pe)!==we(h,pe)){Ee=!1;break}if(Ee)return xe}return-1}l.prototype.includes=function(h,m,C){return this.indexOf(h,m,C)!==-1},l.prototype.indexOf=function(h,m,C){return L(this,h,m,C,!0)},l.prototype.lastIndexOf=function(h,m,C){return L(this,h,m,C,!1)};function I(T,h,m,C){m=Number(m)||0;const P=T.length-m;C?(C=Number(C),C>P&&(C=P)):C=P;const $=h.length;C>$/2&&(C=$/2);let V;for(V=0;V<C;++V){const ce=parseInt(h.substr(V*2,2),16);if(fr(ce))return V;T[m+V]=ce}return V}function j(T,h,m,C){return An(gt(h,T.length-m),T,m,C)}function F(T,h,m,C){return An(At(h),T,m,C)}function W(T,h,m,C){return An(Fn(h),T,m,C)}function O(T,h,m,C){return An(Es(h,T.length-m),T,m,C)}l.prototype.write=function(h,m,C,P){if(m===void 0)P="utf8",C=this.length,m=0;else if(C===void 0&&typeof m=="string")P=m,C=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(C)?(C=C>>>0,P===void 0&&(P="utf8")):(P=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-m;if((C===void 0||C>$)&&(C=$),h.length>0&&(C<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let V=!1;for(;;)switch(P){case"hex":return I(this,h,m,C);case"utf8":case"utf-8":return j(this,h,m,C);case"ascii":case"latin1":case"binary":return F(this,h,m,C);case"base64":return W(this,h,m,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,h,m,C);default:if(V)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),V=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(T,h,m){return h===0&&m===T.length?e.fromByteArray(T):e.fromByteArray(T.slice(h,m))}function D(T,h,m){m=Math.min(T.length,m);const C=[];let P=h;for(;P<m;){const $=T[P];let V=null,ce=$>239?4:$>223?3:$>191?2:1;if(P+ce<=m){let we,xe,Ee,pe;switch(ce){case 1:$<128&&(V=$);break;case 2:we=T[P+1],(we&192)===128&&(pe=($&31)<<6|we&63,pe>127&&(V=pe));break;case 3:we=T[P+1],xe=T[P+2],(we&192)===128&&(xe&192)===128&&(pe=($&15)<<12|(we&63)<<6|xe&63,pe>2047&&(pe<55296||pe>57343)&&(V=pe));break;case 4:we=T[P+1],xe=T[P+2],Ee=T[P+3],(we&192)===128&&(xe&192)===128&&(Ee&192)===128&&(pe=($&15)<<18|(we&63)<<12|(xe&63)<<6|Ee&63,pe>65535&&pe<1114112&&(V=pe))}}V===null?(V=65533,ce=1):V>65535&&(V-=65536,C.push(V>>>10&1023|55296),V=56320|V&1023),C.push(V),P+=ce}return G(C)}const M=4096;function G(T){const h=T.length;if(h<=M)return String.fromCharCode.apply(String,T);let m="",C=0;for(;C<h;)m+=String.fromCharCode.apply(String,T.slice(C,C+=M));return m}function z(T,h,m){let C="";m=Math.min(T.length,m);for(let P=h;P<m;++P)C+=String.fromCharCode(T[P]&127);return C}function B(T,h,m){let C="";m=Math.min(T.length,m);for(let P=h;P<m;++P)C+=String.fromCharCode(T[P]);return C}function q(T,h,m){const C=T.length;(!h||h<0)&&(h=0),(!m||m<0||m>C)&&(m=C);let P="";for(let $=h;$<m;++$)P+=Ht[T[$]];return P}function U(T,h,m){const C=T.slice(h,m);let P="";for(let $=0;$<C.length-1;$+=2)P+=String.fromCharCode(C[$]+C[$+1]*256);return P}l.prototype.slice=function(h,m){const C=this.length;h=~~h,m=m===void 0?C:~~m,h<0?(h+=C,h<0&&(h=0)):h>C&&(h=C),m<0?(m+=C,m<0&&(m=0)):m>C&&(m=C),m<h&&(m=h);const P=this.subarray(h,m);return Object.setPrototypeOf(P,l.prototype),P};function Q(T,h,m){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+h>m)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(h,m,C){h=h>>>0,m=m>>>0,C||Q(h,m,this.length);let P=this[h],$=1,V=0;for(;++V<m&&($*=256);)P+=this[h+V]*$;return P},l.prototype.readUintBE=l.prototype.readUIntBE=function(h,m,C){h=h>>>0,m=m>>>0,C||Q(h,m,this.length);let P=this[h+--m],$=1;for(;m>0&&($*=256);)P+=this[h+--m]*$;return P},l.prototype.readUint8=l.prototype.readUInt8=function(h,m){return h=h>>>0,m||Q(h,1,this.length),this[h]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(h,m){return h=h>>>0,m||Q(h,2,this.length),this[h]|this[h+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(h,m){return h=h>>>0,m||Q(h,2,this.length),this[h]<<8|this[h+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(h,m){return h=h>>>0,m||Q(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(h,m){return h=h>>>0,m||Q(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},l.prototype.readBigUInt64LE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const P=m+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,$=this[++h]+this[++h]*2**8+this[++h]*2**16+C*2**24;return BigInt(P)+(BigInt($)<<BigInt(32))}),l.prototype.readBigUInt64BE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const P=m*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],$=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+C;return(BigInt(P)<<BigInt(32))+BigInt($)}),l.prototype.readIntLE=function(h,m,C){h=h>>>0,m=m>>>0,C||Q(h,m,this.length);let P=this[h],$=1,V=0;for(;++V<m&&($*=256);)P+=this[h+V]*$;return $*=128,P>=$&&(P-=Math.pow(2,8*m)),P},l.prototype.readIntBE=function(h,m,C){h=h>>>0,m=m>>>0,C||Q(h,m,this.length);let P=m,$=1,V=this[h+--P];for(;P>0&&($*=256);)V+=this[h+--P]*$;return $*=128,V>=$&&(V-=Math.pow(2,8*m)),V},l.prototype.readInt8=function(h,m){return h=h>>>0,m||Q(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},l.prototype.readInt16LE=function(h,m){h=h>>>0,m||Q(h,2,this.length);const C=this[h]|this[h+1]<<8;return C&32768?C|4294901760:C},l.prototype.readInt16BE=function(h,m){h=h>>>0,m||Q(h,2,this.length);const C=this[h+1]|this[h]<<8;return C&32768?C|4294901760:C},l.prototype.readInt32LE=function(h,m){return h=h>>>0,m||Q(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},l.prototype.readInt32BE=function(h,m){return h=h>>>0,m||Q(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},l.prototype.readBigInt64LE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const P=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(C<<24);return(BigInt(P)<<BigInt(32))+BigInt(m+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),l.prototype.readBigInt64BE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const P=(m<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(P)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+C)}),l.prototype.readFloatLE=function(h,m){return h=h>>>0,m||Q(h,4,this.length),n.read(this,h,!0,23,4)},l.prototype.readFloatBE=function(h,m){return h=h>>>0,m||Q(h,4,this.length),n.read(this,h,!1,23,4)},l.prototype.readDoubleLE=function(h,m){return h=h>>>0,m||Q(h,8,this.length),n.read(this,h,!0,52,8)},l.prototype.readDoubleBE=function(h,m){return h=h>>>0,m||Q(h,8,this.length),n.read(this,h,!1,52,8)};function Y(T,h,m,C,P,$){if(!l.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>P||h<$)throw new RangeError('"value" argument is out of bounds');if(m+C>T.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(h,m,C,P){if(h=+h,m=m>>>0,C=C>>>0,!P){const ce=Math.pow(2,8*C)-1;Y(this,h,m,C,ce,0)}let $=1,V=0;for(this[m]=h&255;++V<C&&($*=256);)this[m+V]=h/$&255;return m+C},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(h,m,C,P){if(h=+h,m=m>>>0,C=C>>>0,!P){const ce=Math.pow(2,8*C)-1;Y(this,h,m,C,ce,0)}let $=C-1,V=1;for(this[m+$]=h&255;--$>=0&&(V*=256);)this[m+$]=h/V&255;return m+C},l.prototype.writeUint8=l.prototype.writeUInt8=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,1,255,0),this[m]=h&255,m+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,2,65535,0),this[m]=h&255,this[m+1]=h>>>8,m+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,2,65535,0),this[m]=h>>>8,this[m+1]=h&255,m+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,4,4294967295,0),this[m+3]=h>>>24,this[m+2]=h>>>16,this[m+1]=h>>>8,this[m]=h&255,m+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,4,4294967295,0),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=h&255,m+4};function le(T,h,m,C,P){pt(h,C,P,T,m,7);let $=Number(h&BigInt(4294967295));T[m++]=$,$=$>>8,T[m++]=$,$=$>>8,T[m++]=$,$=$>>8,T[m++]=$;let V=Number(h>>BigInt(32)&BigInt(4294967295));return T[m++]=V,V=V>>8,T[m++]=V,V=V>>8,T[m++]=V,V=V>>8,T[m++]=V,m}function ue(T,h,m,C,P){pt(h,C,P,T,m,7);let $=Number(h&BigInt(4294967295));T[m+7]=$,$=$>>8,T[m+6]=$,$=$>>8,T[m+5]=$,$=$>>8,T[m+4]=$;let V=Number(h>>BigInt(32)&BigInt(4294967295));return T[m+3]=V,V=V>>8,T[m+2]=V,V=V>>8,T[m+1]=V,V=V>>8,T[m]=V,m+8}l.prototype.writeBigUInt64LE=yt(function(h,m=0){return le(this,h,m,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=yt(function(h,m=0){return ue(this,h,m,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(h,m,C,P){if(h=+h,m=m>>>0,!P){const we=Math.pow(2,8*C-1);Y(this,h,m,C,we-1,-we)}let $=0,V=1,ce=0;for(this[m]=h&255;++$<C&&(V*=256);)h<0&&ce===0&&this[m+$-1]!==0&&(ce=1),this[m+$]=(h/V>>0)-ce&255;return m+C},l.prototype.writeIntBE=function(h,m,C,P){if(h=+h,m=m>>>0,!P){const we=Math.pow(2,8*C-1);Y(this,h,m,C,we-1,-we)}let $=C-1,V=1,ce=0;for(this[m+$]=h&255;--$>=0&&(V*=256);)h<0&&ce===0&&this[m+$+1]!==0&&(ce=1),this[m+$]=(h/V>>0)-ce&255;return m+C},l.prototype.writeInt8=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,1,127,-128),h<0&&(h=255+h+1),this[m]=h&255,m+1},l.prototype.writeInt16LE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,2,32767,-32768),this[m]=h&255,this[m+1]=h>>>8,m+2},l.prototype.writeInt16BE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,2,32767,-32768),this[m]=h>>>8,this[m+1]=h&255,m+2},l.prototype.writeInt32LE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,4,2147483647,-2147483648),this[m]=h&255,this[m+1]=h>>>8,this[m+2]=h>>>16,this[m+3]=h>>>24,m+4},l.prototype.writeInt32BE=function(h,m,C){return h=+h,m=m>>>0,C||Y(this,h,m,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=h&255,m+4},l.prototype.writeBigInt64LE=yt(function(h,m=0){return le(this,h,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=yt(function(h,m=0){return ue(this,h,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(T,h,m,C,P,$){if(m+C>T.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function he(T,h,m,C,P){return h=+h,m=m>>>0,P||se(T,h,m,4),n.write(T,h,m,C,23,4),m+4}l.prototype.writeFloatLE=function(h,m,C){return he(this,h,m,!0,C)},l.prototype.writeFloatBE=function(h,m,C){return he(this,h,m,!1,C)};function Me(T,h,m,C,P){return h=+h,m=m>>>0,P||se(T,h,m,8),n.write(T,h,m,C,52,8),m+8}l.prototype.writeDoubleLE=function(h,m,C){return Me(this,h,m,!0,C)},l.prototype.writeDoubleBE=function(h,m,C){return Me(this,h,m,!1,C)},l.prototype.copy=function(h,m,C,P){if(!l.isBuffer(h))throw new TypeError("argument should be a Buffer");if(C||(C=0),!P&&P!==0&&(P=this.length),m>=h.length&&(m=h.length),m||(m=0),P>0&&P<C&&(P=C),P===C||h.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),h.length-m<P-C&&(P=h.length-m+C);const $=P-C;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,C,P):Uint8Array.prototype.set.call(h,this.subarray(C,P),m),$},l.prototype.fill=function(h,m,C,P){if(typeof h=="string"){if(typeof m=="string"?(P=m,m=0,C=this.length):typeof C=="string"&&(P=C,C=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!l.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(h.length===1){const V=h.charCodeAt(0);(P==="utf8"&&V<128||P==="latin1")&&(h=V)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(m<0||this.length<m||this.length<C)throw new RangeError("Out of range index");if(C<=m)return this;m=m>>>0,C=C===void 0?this.length:C>>>0,h||(h=0);let $;if(typeof h=="number")for($=m;$<C;++$)this[$]=h;else{const V=l.isBuffer(h)?h:l.from(h,P),ce=V.length;if(ce===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for($=0;$<C-m;++$)this[$+m]=V[$%ce]}return this};const Se={};function dt(T,h,m){Se[T]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(T,h){return`The "${T}" argument must be of type number. Received type ${typeof h}`},TypeError),dt("ERR_OUT_OF_RANGE",function(T,h,m){let C=`The value of "${T}" is out of range.`,P=m;return Number.isInteger(m)&&Math.abs(m)>2**32?P=zt(String(m)):typeof m=="bigint"&&(P=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(P=zt(P)),P+="n"),C+=` It must be ${h}. Received ${P}`,C},RangeError);function zt(T){let h="",m=T.length;const C=T[0]==="-"?1:0;for(;m>=C+4;m-=3)h=`_${T.slice(m-3,m)}${h}`;return`${T.slice(0,m)}${h}`}function Ge(T,h,m){et(h,"offset"),(T[h]===void 0||T[h+m]===void 0)&&Ot(h,T.length-(m+1))}function pt(T,h,m,C,P,$){if(T>m||T<h){const V=typeof h=="bigint"?"n":"";let ce;throw h===0||h===BigInt(0)?ce=`>= 0${V} and < 2${V} ** ${($+1)*8}${V}`:ce=`>= -(2${V} ** ${($+1)*8-1}${V}) and < 2 ** ${($+1)*8-1}${V}`,new Se.ERR_OUT_OF_RANGE("value",ce,T)}Ge(C,P,$)}function et(T,h){if(typeof T!="number")throw new Se.ERR_INVALID_ARG_TYPE(h,"number",T)}function Ot(T,h,m){throw Math.floor(T)!==T?(et(T,m),new Se.ERR_OUT_OF_RANGE("offset","an integer",T)):h<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,T)}const Ae=/[^+/0-9A-Za-z-_]/g;function tt(T){if(T=T.split("=")[0],T=T.trim().replace(Ae,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function gt(T,h){h=h||1/0;let m;const C=T.length;let P=null;const $=[];for(let V=0;V<C;++V){if(m=T.charCodeAt(V),m>55295&&m<57344){if(!P){if(m>56319){(h-=3)>-1&&$.push(239,191,189);continue}else if(V+1===C){(h-=3)>-1&&$.push(239,191,189);continue}P=m;continue}if(m<56320){(h-=3)>-1&&$.push(239,191,189),P=m;continue}m=(P-55296<<10|m-56320)+65536}else P&&(h-=3)>-1&&$.push(239,191,189);if(P=null,m<128){if((h-=1)<0)break;$.push(m)}else if(m<2048){if((h-=2)<0)break;$.push(m>>6|192,m&63|128)}else if(m<65536){if((h-=3)<0)break;$.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((h-=4)<0)break;$.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return $}function At(T){const h=[];for(let m=0;m<T.length;++m)h.push(T.charCodeAt(m)&255);return h}function Es(T,h){let m,C,P;const $=[];for(let V=0;V<T.length&&!((h-=2)<0);++V)m=T.charCodeAt(V),C=m>>8,P=m%256,$.push(P),$.push(C);return $}function Fn(T){return e.toByteArray(tt(T))}function An(T,h,m,C){let P;for(P=0;P<C&&!(P+m>=h.length||P>=T.length);++P)h[P+m]=T[P];return P}function mt(T,h){return T instanceof h||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===h.name}function fr(T){return T!==T}const Ht=function(){const T="0123456789abcdef",h=new Array(256);for(let m=0;m<16;++m){const C=m*16;for(let P=0;P<16;++P)h[C+P]=T[m]+T[P]}return h}();function yt(T){return typeof BigInt>"u"?bs:T}function bs(){throw new Error("BigInt not supported")}})(kf);wn.sha512Sync=(...t)=>Ga(wn.concatBytes(...t));wn.sha512Async=(...t)=>Promise.resolve(Ga(wn.concatBytes(...t)));const Ji=[237,1];async function wx(){try{const t=z2.randomPrivateKey(),e=await F2(t),n=new Uint8Array(Ji.length+e.length);n.set(Ji,0),n.set(e,Ji.length);const r=h1.encode("base58btc",n),s=`did:key:${kf.Buffer.from(r).toString("utf8")}`,o=kf.Buffer.from(t).toString("hex");return console.log("Generated DID:",s),{did:s,privateKey:o}}catch(t){throw console.error("Error generating DID:",t),new Error("Failed to generate DID")}}function gc(t){try{if(!t.startsWith("did:key:"))throw new Error("Invalid DID format: must start with did:key:");const e=t.split("did:key:")[1];if(!e||!e.startsWith("z"))throw new Error("Invalid DID: identifier must be multibase-encoded (base58btc, prefix z)");const n=h1.decode(e);if(console.log("Decoded DID identifier bytes:",Array.from(n)),n[0]!==Ji[0]||n[1]!==Ji[1])throw new Error("Invalid DID: key type must be Ed25519");if(n.length!==32+Ji.length)throw new Error("Invalid DID: Ed25519 public key must be 32 bytes");return!0}catch(e){return console.error("DID validation error:",e.message),!1}}var Vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ll=0;Ll<Vi.length;Ll++)Xs[Vi.charCodeAt(Ll)]=Ll;var mc=function(t){var e=new Uint8Array(t),n,r=e.length,i="";for(n=0;n<r;n+=3)i+=Vi[e[n]>>2],i+=Vi[(e[n]&3)<<4|e[n+1]>>4],i+=Vi[(e[n+1]&15)<<2|e[n+2]>>6],i+=Vi[e[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},yc=function(t){var e=t.length*.75,n=t.length,r,i=0,s,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=new ArrayBuffer(e),f=new Uint8Array(u);for(r=0;r<n;r+=4)s=Xs[t.charCodeAt(r)],o=Xs[t.charCodeAt(r+1)],l=Xs[t.charCodeAt(r+2)],a=Xs[t.charCodeAt(r+3)],f[i++]=s<<2|o>>4,f[i++]=(o&15)<<4|l>>2,f[i++]=(l&3)<<6|a&63;return u};wn.sha512Sync=(...t)=>Ga(wn.concatBytes(...t));wn.sha512Async=(...t)=>Promise.resolve(Ga(wn.concatBytes(...t)));function Nf(t){return new TextEncoder().encode(t).buffer}function xx(t){return new TextDecoder().decode(t)}async function Ex(t,e){try{const n=await crypto.subtle.importKey("raw",Nf(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),r=crypto.getRandomValues(new Uint8Array(16)),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},i,Nf(t)),l={salt:mc(r.buffer),iv:mc(s.buffer),encryptedData:mc(o)};return console.log("crypto: Exported data:",l),JSON.stringify(l)}catch(n){throw console.error("crypto: Failed to export data:",n),new Error("Failed to export data: "+(n.message||"Unknown error"))}}async function bx(t,e){try{const n=JSON.parse(t),{salt:r,iv:i,encryptedData:s}=n,o=await crypto.subtle.importKey("raw",Nf(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),l=await crypto.subtle.deriveKey({name:"PBKDF2",salt:yc(r),iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["decrypt"]),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:yc(i)},l,yc(s)),u=xx(a);return console.log("crypto: Decrypted data:",u),u}catch(n){throw console.error("crypto: Failed to import data:",n),new Error("Failed to decrypt data: "+(n.message||"Unknown error"))}}const Sx=()=>{const{storage:t,error:e,isLoading:n}=u1(),[r,i]=ie.useState(null),[s,o]=ie.useState(null),[l,a]=ie.useState(null),[u,f]=ie.useState(!0),[d,g]=ie.useState(null);ie.useEffect(()=>{(async()=>{if(!n){if(!t){g("Storage not initialized"),f(!1);return}try{const E=await t.getCurrentDID();if(E)if(gc(E)){i(E),console.log("useUserProfile: Loaded DID from storage:",E);const S=await new Promise(_=>{chrome.storage.local.get(["privateKey"],I=>{_(I.privateKey||null)})});S?(o(S),console.log("useUserProfile: Loaded private key from storage")):console.warn("useUserProfile: Private key not found in storage");const L=await t.getProfile(E);L?(a(L),console.log("useUserProfile: Loaded profile from storage:",L)):console.warn("useUserProfile: Profile not found for DID:",E)}else console.warn("useUserProfile: Invalid DID in storage, clearing..."),await t.clearCurrentDID(),await new Promise(S=>{chrome.storage.local.remove("privateKey",()=>S())})}catch(E){console.error("useUserProfile: Failed to initialize:",E),g("Failed to initialize user profile")}finally{f(!1)}}})()},[t,n]);const x=ie.useCallback(async()=>{if(n){g("Storage is still initializing");return}if(!t){g("Storage not initialized");return}try{if(f(!0),g(null),!r){const{did:c,privateKey:E}=await wx();if(gc(c))i(c),o(E),await t.setCurrentDID(c),await new Promise(S=>{chrome.storage.local.set({privateKey:E},()=>S())}),console.log("useUserProfile: Created and saved new DID:",c);else throw new Error("Generated DID is invalid")}}catch(c){console.error("useUserProfile: Authentication failed:",c),g("Authentication failed")}finally{f(!1)}},[t,n,r]),y=ie.useCallback(async()=>{if(n){g("Storage is still initializing");return}if(!t){g("Storage not initialized");return}try{await t.clearCurrentDID(),await new Promise(c=>{chrome.storage.local.remove("privateKey",()=>c())}),i(null),o(null),a(null),g(null),console.log("useUserProfile: Signed out")}catch(c){console.error("useUserProfile: Sign out failed:",c),g("Sign out failed")}},[t,n]),b=ie.useCallback(async c=>{if(n)throw new Error("Storage is still initializing");if(!t)throw new Error("Storage not initialized");if(!r||!s)throw new Error("Not authenticated");try{const S=JSON.stringify({did:r,privateKey:s,profile:l||{did:r,handle:"Unknown"}}),L=await Ex(S,c);return console.log("useUserProfile: Exported identity:",L),L}catch(E){throw console.error("useUserProfile: Export identity failed:",E),new Error("Failed to export identity: "+(E.message||"Unknown error"))}},[n,t,r,s,l]),A=ie.useCallback(async(c,E)=>{if(n)throw new Error("Storage is still initializing");if(!t)throw new Error("Storage not initialized");try{const S=await bx(c,E),{did:L,privateKey:_,profile:I}=JSON.parse(S);if(!gc(L))throw new Error("Invalid DID format");if(i(L),o(_),await t.setCurrentDID(L),await new Promise(j=>{chrome.storage.local.set({privateKey:_},()=>j())}),console.log("useUserProfile: Imported identity:",L),I&&I.did)await t.saveProfile(I),a(I),console.log("useUserProfile: Restored profile after import:",I);else{const j=await t.getProfile(L);j&&(a(j),console.log("useUserProfile: Loaded profile after import:",j))}}catch(S){console.error("useUserProfile: Import identity failed:",S);let L="Failed to import identity";throw S.message.includes("OperationError")||S.message.includes("Failed to decrypt")?L="Failed to import identity: Incorrect passphrase or corrupted data":S.message.includes("Invalid DID format")?L="Failed to import identity: Invalid DID format":L="Failed to import identity: "+(S.message||"Unknown error"),new Error(L)}},[n,t]),w=ie.useCallback(async(c,E)=>{if(n){g("Storage is still initializing");return}if(!t||!r){g("Not authenticated or storage not initialized");return}try{const S={did:r,handle:c,profilePicture:E};console.log("useUserProfile: Saving profile to storage:",S),await t.saveProfile(S),a(S),g(null)}catch(S){console.error("useUserProfile: Failed to create profile:",S),g("Failed to create profile")}},[n,t,r]),v=ie.useCallback(async(c,E)=>{if(n){g("Storage is still initializing");return}if(!t||!r){g("Not authenticated or storage not initialized");return}try{const S={did:r,handle:c,profilePicture:E};console.log("useUserProfile: Updating profile in storage:",S),await t.saveProfile(S),a(S),g(null)}catch(S){console.error("useUserProfile: Failed to update profile:",S),g("Failed to update profile")}},[n,t,r]);return{did:r,profile:l,loading:u||n,error:d||e,authenticate:x,signOut:y,exportIdentity:b,importIdentity:A,createProfile:w,updateProfile:v}},Ax=({url:t,did:e})=>{const{storage:n}=u1(),[r,i]=ie.useState({}),[s,o]=ie.useState({}),[l,a]=ie.useState(null),[u,f]=ie.useState(!1),[d,g]=ie.useState(!1),[x,y]=ie.useState(null);ie.useEffect(()=>{if(!n){console.log("useAnnotations: Waiting for storage to initialize");return}console.log("useAnnotations: Starting fetch for annotations"),x&&clearTimeout(x);const c=setTimeout(async()=>{f(!0),g(!0);try{const E=await n.getAnnotations(t,S=>{i(L=>({...L,[t]:S}))});i(S=>({...S,[t]:E}))}catch(E){console.error("useAnnotations: Failed to fetch annotations:",E),a("Failed to fetch annotations")}finally{f(!1),g(!1),console.log("useAnnotations: Set loading to false (isFetching false)")}},300);return y(c),()=>{c&&clearTimeout(c)}},[n,t]),ie.useEffect(()=>{if(!n||!e||!r[t])return;(async()=>{try{const S=[...new Set(r[t].map(I=>I.author))].map(async I=>{if(!s[I]){const j=await n.getProfile(I);if(j)return console.log("useAnnotations: Loaded profile for DID:",I,j),{did:I,profile:j}}return null}),_=(await Promise.all(S)).filter(I=>I!==null).reduce((I,{did:j,profile:F})=>(I[j]={did:j,handle:F.handle,profilePicture:F.profilePicture},I),{});o(I=>({...I,..._})),console.log("useAnnotations: Initial profiles loaded:",_)}catch(E){console.error("useAnnotations: Failed to fetch profiles:",E),a("Failed to fetch profiles")}})()},[n,e,r[t],s]);const b=ie.useCallback(async c=>{if(!n||!e){a("Not authenticated or storage not initialized");return}try{console.log("useAnnotations: Starting save annotation"),f(!0),g(!0);const E=Date.now(),L={id:`${e}-${E}`,url:t,content:c,author:e,timestamp:E,comments:[]};console.log("useAnnotations: Saving annotation to storage:",L),await n.saveAnnotation(L),i(I=>({...I,[t]:[...I[t]||[],L]}));const _=await n.getAnnotations(t);if(i(I=>({...I,[t]:_})),!s[e]){const I=await n.getProfile(e);I&&o(j=>({...j,[e]:{did:e,handle:I.handle,profilePicture:I.profilePicture}}))}a(null)}catch(E){console.error("useAnnotations: Failed to save annotation:",E),a("Failed to save annotation")}finally{f(!1),g(!1)}},[n,e,t,s]),A=ie.useCallback(async c=>{if(!n||!e){a("Not authenticated or storage not initialized");return}try{f(!0),g(!0),await n.deleteAnnotation(t,c),i(S=>({...S,[t]:(S[t]||[]).filter(L=>L.id!==c)}));const E=await n.getAnnotations(t);i(S=>({...S,[t]:E})),a(null)}catch(E){console.error("useAnnotations: Failed to delete annotation:",E),a("Failed to delete annotation")}finally{f(!1),g(!1)}},[n,e,t]),w=ie.useCallback(async(c,E)=>{if(!n||!e){a("Not authenticated or storage not initialized");return}try{f(!0),g(!0);const S=Date.now(),_={id:`${e}-${S}`,content:E,author:e,timestamp:S};await n.saveComment(t,c,_);const I=await n.getAnnotations(t);i(j=>({...j,[t]:I})),a(null)}catch(S){console.error("useAnnotations: Failed to save comment:",S),a("Failed to save comment")}finally{f(!1),g(!1)}},[n,e,t]);return{annotations:r[t]||[],profiles:s,error:l,loading:u,handleSaveAnnotation:b,handleDeleteAnnotation:A,handleSaveComment:w}};var b1=typeof global=="object"&&global&&global.Object===Object&&global,Tx=typeof self=="object"&&self&&self.Object===Object&&self,qn=b1||Tx||Function("return this")(),jr=qn.Symbol,S1=Object.prototype,kx=S1.hasOwnProperty,Nx=S1.toString,Hs=jr?jr.toStringTag:void 0;function _x(t){var e=kx.call(t,Hs),n=t[Hs];try{t[Hs]=void 0;var r=!0}catch{}var i=Nx.call(t);return r&&(e?t[Hs]=n:delete t[Hs]),i}var Cx=Object.prototype,Lx=Cx.toString;function Ix(t){return Lx.call(t)}var Ox="[object Null]",Rx="[object Undefined]",Wp=jr?jr.toStringTag:void 0;function xs(t){return t==null?t===void 0?Rx:Ox:Wp&&Wp in Object(t)?_x(t):Ix(t)}function sr(t){return t!=null&&typeof t=="object"}var li=Array.isArray;function qr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function A1(t){return t}var Dx="[object AsyncFunction]",Bx="[object Function]",Px="[object GeneratorFunction]",jx="[object Proxy]";function rd(t){if(!qr(t))return!1;var e=xs(t);return e==Bx||e==Px||e==Dx||e==jx}var vc=qn["__core-js_shared__"],Zp=function(){var t=/[^.]+$/.exec(vc&&vc.keys&&vc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Mx(t){return!!Zp&&Zp in t}var Ux=Function.prototype,$x=Ux.toString;function hi(t){if(t!=null){try{return $x.call(t)}catch{}try{return t+""}catch{}}return""}var qx=/[\\^$.*+?()[\]{}|]/g,Fx=/^\[object .+?Constructor\]$/,zx=Function.prototype,Hx=Object.prototype,Gx=zx.toString,Vx=Hx.hasOwnProperty,Kx=RegExp("^"+Gx.call(Vx).replace(qx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wx(t){if(!qr(t)||Mx(t))return!1;var e=rd(t)?Kx:Fx;return e.test(hi(t))}function Zx(t,e){return t==null?void 0:t[e]}function di(t,e){var n=Zx(t,e);return Wx(n)?n:void 0}var _f=di(qn,"WeakMap"),Qp=Object.create,Qx=function(){function t(){}return function(e){if(!qr(e))return{};if(Qp)return Qp(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Xx(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Yx(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Jx=800,eE=16,tE=Date.now;function nE(t){var e=0,n=0;return function(){var r=tE(),i=eE-(r-n);if(n=r,i>0){if(++e>=Jx)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function rE(t){return function(){return t}}var Sa=function(){try{var t=di(Object,"defineProperty");return t({},"",{}),t}catch{}}(),iE=Sa?function(t,e){return Sa(t,"toString",{configurable:!0,enumerable:!1,value:rE(e),writable:!0})}:A1,sE=nE(iE);function oE(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var lE=9007199254740991,aE=/^(?:0|[1-9]\d*)$/;function T1(t,e){var n=typeof t;return e=e??lE,!!e&&(n=="number"||n!="symbol"&&aE.test(t))&&t>-1&&t%1==0&&t<e}function id(t,e,n){e=="__proto__"&&Sa?Sa(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Go(t,e){return t===e||t!==t&&e!==e}var uE=Object.prototype,cE=uE.hasOwnProperty;function k1(t,e,n){var r=t[e];(!(cE.call(t,e)&&Go(r,n))||n===void 0&&!(e in t))&&id(t,e,n)}function fE(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],a=void 0;a===void 0&&(a=t[l]),i?id(n,l,a):k1(n,l,a)}return n}var Xp=Math.max;function hE(t,e,n){return e=Xp(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Xp(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),Xx(t,this,l)}}function dE(t,e){return sE(hE(t,e,A1),t+"")}var pE=9007199254740991;function N1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pE}function Ka(t){return t!=null&&N1(t.length)&&!rd(t)}function gE(t,e,n){if(!qr(n))return!1;var r=typeof e;return(r=="number"?Ka(n)&&T1(e,n.length):r=="string"&&e in n)?Go(n[e],t):!1}function mE(t){return dE(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&gE(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}var yE=Object.prototype;function sd(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||yE;return t===n}function vE(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var wE="[object Arguments]";function Yp(t){return sr(t)&&xs(t)==wE}var _1=Object.prototype,xE=_1.hasOwnProperty,EE=_1.propertyIsEnumerable,Cf=Yp(function(){return arguments}())?Yp:function(t){return sr(t)&&xE.call(t,"callee")&&!EE.call(t,"callee")};function bE(){return!1}var C1=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Jp=C1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,SE=Jp&&Jp.exports===C1,e0=SE?qn.Buffer:void 0,AE=e0?e0.isBuffer:void 0,Oo=AE||bE,TE="[object Arguments]",kE="[object Array]",NE="[object Boolean]",_E="[object Date]",CE="[object Error]",LE="[object Function]",IE="[object Map]",OE="[object Number]",RE="[object Object]",DE="[object RegExp]",BE="[object Set]",PE="[object String]",jE="[object WeakMap]",ME="[object ArrayBuffer]",UE="[object DataView]",$E="[object Float32Array]",qE="[object Float64Array]",FE="[object Int8Array]",zE="[object Int16Array]",HE="[object Int32Array]",GE="[object Uint8Array]",VE="[object Uint8ClampedArray]",KE="[object Uint16Array]",WE="[object Uint32Array]",_e={};_e[$E]=_e[qE]=_e[FE]=_e[zE]=_e[HE]=_e[GE]=_e[VE]=_e[KE]=_e[WE]=!0;_e[TE]=_e[kE]=_e[ME]=_e[NE]=_e[UE]=_e[_E]=_e[CE]=_e[LE]=_e[IE]=_e[OE]=_e[RE]=_e[DE]=_e[BE]=_e[PE]=_e[jE]=!1;function ZE(t){return sr(t)&&N1(t.length)&&!!_e[xs(t)]}function od(t){return function(e){return t(e)}}var L1=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,uo=L1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,QE=uo&&uo.exports===L1,wc=QE&&b1.process,hs=function(){try{var t=uo&&uo.require&&uo.require("util").types;return t||wc&&wc.binding&&wc.binding("util")}catch{}}(),t0=hs&&hs.isTypedArray,ld=t0?od(t0):ZE,XE=Object.prototype,YE=XE.hasOwnProperty;function I1(t,e){var n=li(t),r=!n&&Cf(t),i=!n&&!r&&Oo(t),s=!n&&!r&&!i&&ld(t),o=n||r||i||s,l=o?vE(t.length,String):[],a=l.length;for(var u in t)(e||YE.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||T1(u,a)))&&l.push(u);return l}function O1(t,e){return function(n){return t(e(n))}}var JE=O1(Object.keys,Object),eb=Object.prototype,tb=eb.hasOwnProperty;function nb(t){if(!sd(t))return JE(t);var e=[];for(var n in Object(t))tb.call(t,n)&&n!="constructor"&&e.push(n);return e}function rb(t){return Ka(t)?I1(t):nb(t)}function ib(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var sb=Object.prototype,ob=sb.hasOwnProperty;function lb(t){if(!qr(t))return ib(t);var e=sd(t),n=[];for(var r in t)r=="constructor"&&(e||!ob.call(t,r))||n.push(r);return n}function R1(t){return Ka(t)?I1(t,!0):lb(t)}var Ro=di(Object,"create");function ab(){this.__data__=Ro?Ro(null):{},this.size=0}function ub(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var cb="__lodash_hash_undefined__",fb=Object.prototype,hb=fb.hasOwnProperty;function db(t){var e=this.__data__;if(Ro){var n=e[t];return n===cb?void 0:n}return hb.call(e,t)?e[t]:void 0}var pb=Object.prototype,gb=pb.hasOwnProperty;function mb(t){var e=this.__data__;return Ro?e[t]!==void 0:gb.call(e,t)}var yb="__lodash_hash_undefined__";function vb(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ro&&e===void 0?yb:e,this}function ai(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ai.prototype.clear=ab;ai.prototype.delete=ub;ai.prototype.get=db;ai.prototype.has=mb;ai.prototype.set=vb;function wb(){this.__data__=[],this.size=0}function Wa(t,e){for(var n=t.length;n--;)if(Go(t[n][0],e))return n;return-1}var xb=Array.prototype,Eb=xb.splice;function bb(t){var e=this.__data__,n=Wa(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Eb.call(e,n,1),--this.size,!0}function Sb(t){var e=this.__data__,n=Wa(e,t);return n<0?void 0:e[n][1]}function Ab(t){return Wa(this.__data__,t)>-1}function Tb(t,e){var n=this.__data__,r=Wa(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ur(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ur.prototype.clear=wb;ur.prototype.delete=bb;ur.prototype.get=Sb;ur.prototype.has=Ab;ur.prototype.set=Tb;var Do=di(qn,"Map");function kb(){this.size=0,this.__data__={hash:new ai,map:new(Do||ur),string:new ai}}function Nb(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Za(t,e){var n=t.__data__;return Nb(e)?n[typeof e=="string"?"string":"hash"]:n.map}function _b(t){var e=Za(this,t).delete(t);return this.size-=e?1:0,e}function Cb(t){return Za(this,t).get(t)}function Lb(t){return Za(this,t).has(t)}function Ib(t,e){var n=Za(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function pi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pi.prototype.clear=kb;pi.prototype.delete=_b;pi.prototype.get=Cb;pi.prototype.has=Lb;pi.prototype.set=Ib;function Ob(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var D1=O1(Object.getPrototypeOf,Object),Rb="[object Object]",Db=Function.prototype,Bb=Object.prototype,B1=Db.toString,Pb=Bb.hasOwnProperty,jb=B1.call(Object);function Mb(t){if(!sr(t)||xs(t)!=Rb)return!1;var e=D1(t);if(e===null)return!0;var n=Pb.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&B1.call(n)==jb}function Ub(){this.__data__=new ur,this.size=0}function $b(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function qb(t){return this.__data__.get(t)}function Fb(t){return this.__data__.has(t)}var zb=200;function Hb(t,e){var n=this.__data__;if(n instanceof ur){var r=n.__data__;if(!Do||r.length<zb-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new pi(r)}return n.set(t,e),this.size=n.size,this}function jn(t){var e=this.__data__=new ur(t);this.size=e.size}jn.prototype.clear=Ub;jn.prototype.delete=$b;jn.prototype.get=qb;jn.prototype.has=Fb;jn.prototype.set=Hb;var P1=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,n0=P1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,Gb=n0&&n0.exports===P1,r0=Gb?qn.Buffer:void 0,i0=r0?r0.allocUnsafe:void 0;function j1(t,e){if(e)return t.slice();var n=t.length,r=i0?i0(n):new t.constructor(n);return t.copy(r),r}function Vb(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function Kb(){return[]}var Wb=Object.prototype,Zb=Wb.propertyIsEnumerable,s0=Object.getOwnPropertySymbols,Qb=s0?function(t){return t==null?[]:(t=Object(t),Vb(s0(t),function(e){return Zb.call(t,e)}))}:Kb;function Xb(t,e,n){var r=e(t);return li(t)?r:Ob(r,n(t))}function Lf(t){return Xb(t,rb,Qb)}var If=di(qn,"DataView"),Of=di(qn,"Promise"),Rf=di(qn,"Set"),o0="[object Map]",Yb="[object Object]",l0="[object Promise]",a0="[object Set]",u0="[object WeakMap]",c0="[object DataView]",Jb=hi(If),eS=hi(Do),tS=hi(Of),nS=hi(Rf),rS=hi(_f),dn=xs;(If&&dn(new If(new ArrayBuffer(1)))!=c0||Do&&dn(new Do)!=o0||Of&&dn(Of.resolve())!=l0||Rf&&dn(new Rf)!=a0||_f&&dn(new _f)!=u0)&&(dn=function(t){var e=xs(t),n=e==Yb?t.constructor:void 0,r=n?hi(n):"";if(r)switch(r){case Jb:return c0;case eS:return o0;case tS:return l0;case nS:return a0;case rS:return u0}return e});var iS=Object.prototype,sS=iS.hasOwnProperty;function oS(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&sS.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Aa=qn.Uint8Array;function ad(t){var e=new t.constructor(t.byteLength);return new Aa(e).set(new Aa(t)),e}function lS(t,e){var n=ad(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var aS=/\w*$/;function uS(t){var e=new t.constructor(t.source,aS.exec(t));return e.lastIndex=t.lastIndex,e}var f0=jr?jr.prototype:void 0,h0=f0?f0.valueOf:void 0;function cS(t){return h0?Object(h0.call(t)):{}}function M1(t,e){var n=e?ad(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var fS="[object Boolean]",hS="[object Date]",dS="[object Map]",pS="[object Number]",gS="[object RegExp]",mS="[object Set]",yS="[object String]",vS="[object Symbol]",wS="[object ArrayBuffer]",xS="[object DataView]",ES="[object Float32Array]",bS="[object Float64Array]",SS="[object Int8Array]",AS="[object Int16Array]",TS="[object Int32Array]",kS="[object Uint8Array]",NS="[object Uint8ClampedArray]",_S="[object Uint16Array]",CS="[object Uint32Array]";function LS(t,e,n){var r=t.constructor;switch(e){case wS:return ad(t);case fS:case hS:return new r(+t);case xS:return lS(t);case ES:case bS:case SS:case AS:case TS:case kS:case NS:case _S:case CS:return M1(t,n);case dS:return new r;case pS:case yS:return new r(t);case gS:return uS(t);case mS:return new r;case vS:return cS(t)}}function U1(t){return typeof t.constructor=="function"&&!sd(t)?Qx(D1(t)):{}}var IS="[object Map]";function OS(t){return sr(t)&&dn(t)==IS}var d0=hs&&hs.isMap,RS=d0?od(d0):OS,DS="[object Set]";function BS(t){return sr(t)&&dn(t)==DS}var p0=hs&&hs.isSet,PS=p0?od(p0):BS,jS=1,$1="[object Arguments]",MS="[object Array]",US="[object Boolean]",$S="[object Date]",qS="[object Error]",q1="[object Function]",FS="[object GeneratorFunction]",zS="[object Map]",HS="[object Number]",F1="[object Object]",GS="[object RegExp]",VS="[object Set]",KS="[object String]",WS="[object Symbol]",ZS="[object WeakMap]",QS="[object ArrayBuffer]",XS="[object DataView]",YS="[object Float32Array]",JS="[object Float64Array]",e3="[object Int8Array]",t3="[object Int16Array]",n3="[object Int32Array]",r3="[object Uint8Array]",i3="[object Uint8ClampedArray]",s3="[object Uint16Array]",o3="[object Uint32Array]",Te={};Te[$1]=Te[MS]=Te[QS]=Te[XS]=Te[US]=Te[$S]=Te[YS]=Te[JS]=Te[e3]=Te[t3]=Te[n3]=Te[zS]=Te[HS]=Te[F1]=Te[GS]=Te[VS]=Te[KS]=Te[WS]=Te[r3]=Te[i3]=Te[s3]=Te[o3]=!0;Te[qS]=Te[q1]=Te[ZS]=!1;function Ql(t,e,n,r,i,s){var o,l=e&jS;if(o!==void 0)return o;if(!qr(t))return t;var a=li(t);if(a)o=oS(t);else{var u=dn(t),f=u==q1||u==FS;if(Oo(t))return j1(t,l);if(u==F1||u==$1||f&&!i)o=f?{}:U1(t);else{if(!Te[u])return i?t:{};o=LS(t,u,l)}}s||(s=new jn);var d=s.get(t);if(d)return d;s.set(t,o),PS(t)?t.forEach(function(y){o.add(Ql(y,e,n,y,t,s))}):RS(t)&&t.forEach(function(y,b){o.set(b,Ql(y,e,n,b,t,s))});var g=Lf,x=a?void 0:g(t);return oE(x||t,function(y,b){x&&(b=y,y=t[b]),k1(o,b,Ql(y,e,n,b,t,s))}),o}var l3=1,a3=4;function es(t){return Ql(t,l3|a3)}var u3="__lodash_hash_undefined__";function c3(t){return this.__data__.set(t,u3),this}function f3(t){return this.__data__.has(t)}function Ta(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pi;++e<n;)this.add(t[e])}Ta.prototype.add=Ta.prototype.push=c3;Ta.prototype.has=f3;function h3(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function d3(t,e){return t.has(e)}var p3=1,g3=2;function z1(t,e,n,r,i,s){var o=n&p3,l=t.length,a=e.length;if(l!=a&&!(o&&a>l))return!1;var u=s.get(t),f=s.get(e);if(u&&f)return u==e&&f==t;var d=-1,g=!0,x=n&g3?new Ta:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var y=t[d],b=e[d];if(r)var A=o?r(b,y,d,e,t,s):r(y,b,d,t,e,s);if(A!==void 0){if(A)continue;g=!1;break}if(x){if(!h3(e,function(w,v){if(!d3(x,v)&&(y===w||i(y,w,n,r,s)))return x.push(v)})){g=!1;break}}else if(!(y===b||i(y,b,n,r,s))){g=!1;break}}return s.delete(t),s.delete(e),g}function m3(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function y3(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var v3=1,w3=2,x3="[object Boolean]",E3="[object Date]",b3="[object Error]",S3="[object Map]",A3="[object Number]",T3="[object RegExp]",k3="[object Set]",N3="[object String]",_3="[object Symbol]",C3="[object ArrayBuffer]",L3="[object DataView]",g0=jr?jr.prototype:void 0,xc=g0?g0.valueOf:void 0;function I3(t,e,n,r,i,s,o){switch(n){case L3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C3:return!(t.byteLength!=e.byteLength||!s(new Aa(t),new Aa(e)));case x3:case E3:case A3:return Go(+t,+e);case b3:return t.name==e.name&&t.message==e.message;case T3:case N3:return t==e+"";case S3:var l=m3;case k3:var a=r&v3;if(l||(l=y3),t.size!=e.size&&!a)return!1;var u=o.get(t);if(u)return u==e;r|=w3,o.set(t,e);var f=z1(l(t),l(e),r,i,s,o);return o.delete(t),f;case _3:if(xc)return xc.call(t)==xc.call(e)}return!1}var O3=1,R3=Object.prototype,D3=R3.hasOwnProperty;function B3(t,e,n,r,i,s){var o=n&O3,l=Lf(t),a=l.length,u=Lf(e),f=u.length;if(a!=f&&!o)return!1;for(var d=a;d--;){var g=l[d];if(!(o?g in e:D3.call(e,g)))return!1}var x=s.get(t),y=s.get(e);if(x&&y)return x==e&&y==t;var b=!0;s.set(t,e),s.set(e,t);for(var A=o;++d<a;){g=l[d];var w=t[g],v=e[g];if(r)var c=o?r(v,w,g,e,t,s):r(w,v,g,t,e,s);if(!(c===void 0?w===v||i(w,v,n,r,s):c)){b=!1;break}A||(A=g=="constructor")}if(b&&!A){var E=t.constructor,S=e.constructor;E!=S&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof S=="function"&&S instanceof S)&&(b=!1)}return s.delete(t),s.delete(e),b}var P3=1,m0="[object Arguments]",y0="[object Array]",Il="[object Object]",j3=Object.prototype,v0=j3.hasOwnProperty;function M3(t,e,n,r,i,s){var o=li(t),l=li(e),a=o?y0:dn(t),u=l?y0:dn(e);a=a==m0?Il:a,u=u==m0?Il:u;var f=a==Il,d=u==Il,g=a==u;if(g&&Oo(t)){if(!Oo(e))return!1;o=!0,f=!1}if(g&&!f)return s||(s=new jn),o||ld(t)?z1(t,e,n,r,i,s):I3(t,e,a,n,r,i,s);if(!(n&P3)){var x=f&&v0.call(t,"__wrapped__"),y=d&&v0.call(e,"__wrapped__");if(x||y){var b=x?t.value():t,A=y?e.value():e;return s||(s=new jn),i(b,A,n,r,s)}}return g?(s||(s=new jn),B3(t,e,n,r,i,s)):!1}function H1(t,e,n,r,i){return t===e?!0:t==null||e==null||!sr(t)&&!sr(e)?t!==t&&e!==e:M3(t,e,n,r,H1,i)}function U3(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),l=o.length;l--;){var a=o[++i];if(n(s[a],a,s)===!1)break}return e}}var $3=U3();function Df(t,e,n){(n!==void 0&&!Go(t[e],n)||n===void 0&&!(e in t))&&id(t,e,n)}function q3(t){return sr(t)&&Ka(t)}function Bf(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function F3(t){return fE(t,R1(t))}function z3(t,e,n,r,i,s,o){var l=Bf(t,n),a=Bf(e,n),u=o.get(a);if(u){Df(t,n,u);return}var f=s?s(l,a,n+"",t,e,o):void 0,d=f===void 0;if(d){var g=li(a),x=!g&&Oo(a),y=!g&&!x&&ld(a);f=a,g||x||y?li(l)?f=l:q3(l)?f=Yx(l):x?(d=!1,f=j1(a,!0)):y?(d=!1,f=M1(a,!0)):f=[]:Mb(a)||Cf(a)?(f=l,Cf(l)?f=F3(l):(!qr(l)||rd(l))&&(f=U1(a))):d=!1}d&&(o.set(a,f),i(f,a,r,s,o),o.delete(a)),Df(t,n,f)}function G1(t,e,n,r,i){t!==e&&$3(e,function(s,o){if(i||(i=new jn),qr(s))z3(t,e,o,n,G1,r,i);else{var l=r?r(Bf(t,o),s,o+"",t,e,i):void 0;l===void 0&&(l=s),Df(t,o,l)}},R1)}function ud(t,e){return H1(t,e)}var Dr=mE(function(t,e,n){G1(t,e,n)}),re=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(re||{});class Un{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=re.TYPE&re.ATTRIBUTE;this.scope=r.scope!=null?r.scope&re.LEVEL|i:re.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class ts extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const V1=class Pf{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new ts(`Unable to create ${n} blot`);const s=i,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(r),l=new s(e,o,r);return Pf.blots.set(l.domNode,l),l}find(e,n=!1){return Pf.find(e,n)}query(e,n=re.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&re.LEVEL&re.BLOCK?r=this.types.block:e&re.LEVEL&re.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&re.LEVEL&r.scope&&n&re.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new ts("Invalid definition");if(r&&n.blotName==="abstract")throw new ts("Cannot register abstract class");const s=r?n.blotName:i?n.attrName:void 0;return this.types[s]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};V1.blots=new WeakMap;let ds=V1;function w0(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class H3 extends Un{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){w0(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(w0(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const En=H3;function Ec(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class G3 extends Un{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[Ec(this.keyName)]=n,!0):!1}remove(e){e.style[Ec(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[Ec(this.keyName)];return this.canAdd(e,n)?n:""}}const Fr=G3;class V3{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=ds.find(this.domNode);if(e==null)return;const n=Un.keys(this.domNode),r=En.keys(this.domNode),i=Fr.keys(this.domNode);n.concat(r).concat(i).forEach(s=>{const o=e.scroll.query(s,re.ATTRIBUTE);o instanceof Un&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const Qa=V3,K1=class{constructor(e,n){this.scroll=e,this.domNode=n,ds.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new ts("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),ds.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const s=this.isolate(e,n);if(this.scroll.query(r,re.BLOT)!=null&&i)s.wrap(r,i);else if(this.scroll.query(r,re.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);s.wrap(o),o.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),s=this.split(e);this.parent.insertBefore(i,s||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new ts(`Cannot wrap ${e}`);return r.appendChild(this),r}};K1.blotName="abstract";let W1=K1;const Z1=class extends W1{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Z1.scope=re.INLINE_BLOT;let K3=Z1;const ct=K3;class W3{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const s=i.length();if(e<s||n&&e===s&&(i.next==null||i.next.length()!==0))return[i,e];e-=s,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,s]=this.find(e);let o=e-s;const l=this.iterator(i);let a=l();for(;a&&o<e+n;){const u=a.length();e>o?r(a,e-o,Math.min(n,o+u-e)):r(a,0,Math.min(u,e+n-o)),o+=u,a=l()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function x0(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(re.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const Q1=class yr extends W1{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,yr.uiClass&&this.uiNode.classList.add(yr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new W3,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=x0(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof ts)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,s)=>{r.deleteAt(i,s)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof yr?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],s=r;return this.children.forEachAt(n,r,(o,l,a)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&i.push(o),o instanceof yr&&(i=i.concat(o.descendants(e,l,s))),s-=a}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===re.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof yr?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(s,o,l)=>{s.formatAt(o,l,r,i)})}insertAt(e,n,r){const[i,s]=this.children.find(e);if(i)i.insertAt(s,n,r);else{const o=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),s=[[this,e]];return r instanceof yr?s.concat(r.path(i,n)):(r!=null&&s.push([r,i]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof yr&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,s,o)=>{const l=i.split(s,n);l!=null&&r.appendChild(l)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(r.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(s);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),r.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,o)=>s===o?0:s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let o=null;s.nextSibling!=null&&(o=this.scroll.find(s.nextSibling));const l=x0(s,this.scroll);(l.next!==o||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,o||void 0))}),this.enforceAllowedChildren()}};Q1.uiClass="";let Z3=Q1;const yn=Z3;function Q3(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const _i=class Ci extends yn{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Ci.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Qa(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof Ci||(r=r.wrap(Ci.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,re.INLINE);if(r==null)return;r instanceof Un?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,re.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof Ci&&r.prev===this&&Q3(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof Ci&&this.attributes.move(r),r}};_i.allowedChildren=[_i,ct],_i.blotName="inline",_i.scope=re.INLINE_BLOT,_i.tagName="SPAN";let X3=_i;const cd=X3,Li=class jf extends yn{static create(e){return super.create(e)}static formats(e,n){const r=n.query(jf.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Qa(this.domNode)}format(e,n){const r=this.scroll.query(e,re.BLOCK);r!=null&&(r instanceof Un?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(jf.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,re.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,re.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const s=this.scroll.create(n,r);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Li.blotName="block",Li.scope=re.BLOCK_BLOT,Li.tagName="P",Li.allowedChildren=[cd,Li,ct];let Y3=Li;const Bo=Y3,Mf=class extends yn{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Mf.blotName="container",Mf.scope=re.BLOCK_BLOT;let J3=Mf;const Xa=J3;class e4 extends ct{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ft=e4,t4={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},n4=100,Ii=class extends yn{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,t4),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=re.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const s=(a,u=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),u&&s(a.parent))},o=a=>{r.has(a.domNode)&&(a instanceof yn&&a.children.forEach(o),r.delete(a.domNode),a.optimize(n))};let l=e;for(let a=0;l.length>0;a+=1){if(a>=n4)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(u=>{const f=this.find(u.target,!0);f!=null&&(f.domNode===u.target&&(u.type==="childList"?(s(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(d=>{const g=this.find(d,!1);s(g,!1),g instanceof yn&&g.children.forEach(x=>{s(x,!1)})})):u.type==="attributes"&&s(f.prev)),s(f))}),this.children.forEach(o),l=Array.from(this.observer.takeRecords()),i=l.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const s=this.find(i.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(i),null):(r.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};Ii.blotName="scroll",Ii.defaultChild=Bo,Ii.allowedChildren=[Bo,Xa],Ii.scope=re.BLOCK_BLOT,Ii.tagName="DIV";let r4=Ii;const fd=r4,Uf=class X1 extends ct{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof X1&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Uf.blotName="text",Uf.scope=re.INLINE_BLOT;let i4=Uf;const ka=i4,s4=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Un,AttributorStore:Qa,BlockBlot:Bo,ClassAttributor:En,ContainerBlot:Xa,EmbedBlot:Ft,InlineBlot:cd,LeafBlot:ct,ParentBlot:yn,Registry:ds,Scope:re,ScrollBlot:fd,StyleAttributor:Fr,TextBlot:ka},Symbol.toStringTag,{value:"Module"}));var $f={exports:{}},Bt=-1,xt=1,qe=0;function Po(t,e,n,r,i){if(t===e)return t?[[qe,t]]:[];if(n!=null){var s=p4(t,e,n);if(s)return s}var o=hd(t,e),l=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=Ya(t,e);var a=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var u=o4(t,e);return l&&u.unshift([qe,l]),a&&u.push([qe,a]),dd(u,i),r&&u4(u),u}function o4(t,e){var n;if(!t)return[[xt,e]];if(!e)return[[Bt,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,s=r.indexOf(i);if(s!==-1)return n=[[xt,r.substring(0,s)],[qe,i],[xt,r.substring(s+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Bt),n;if(i.length===1)return[[Bt,t],[xt,e]];var o=a4(t,e);if(o){var l=o[0],a=o[1],u=o[2],f=o[3],d=o[4],g=Po(l,u),x=Po(a,f);return g.concat([[qe,d]],x)}return l4(t,e)}function l4(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,o=2*i,l=new Array(o),a=new Array(o),u=0;u<o;u++)l[u]=-1,a[u]=-1;l[s+1]=0,a[s+1]=0;for(var f=n-r,d=f%2!==0,g=0,x=0,y=0,b=0,A=0;A<i;A++){for(var w=-A+g;w<=A-x;w+=2){var v=s+w,c;w===-A||w!==A&&l[v-1]<l[v+1]?c=l[v+1]:c=l[v-1]+1;for(var E=c-w;c<n&&E<r&&t.charAt(c)===e.charAt(E);)c++,E++;if(l[v]=c,c>n)x+=2;else if(E>r)g+=2;else if(d){var S=s+f-w;if(S>=0&&S<o&&a[S]!==-1){var L=n-a[S];if(c>=L)return E0(t,e,c,E)}}}for(var _=-A+y;_<=A-b;_+=2){var S=s+_,L;_===-A||_!==A&&a[S-1]<a[S+1]?L=a[S+1]:L=a[S-1]+1;for(var I=L-_;L<n&&I<r&&t.charAt(n-L-1)===e.charAt(r-I-1);)L++,I++;if(a[S]=L,L>n)b+=2;else if(I>r)y+=2;else if(!d){var v=s+f-_;if(v>=0&&v<o&&l[v]!==-1){var c=l[v],E=s+c-v;if(L=n-L,c>=L)return E0(t,e,c,E)}}}}return[[Bt,t],[xt,e]]}function E0(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),o=t.substring(n),l=e.substring(r),a=Po(i,s),u=Po(o,l);return a.concat(u)}function hd(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return Y1(t.charCodeAt(i-1))&&i--,i}function b0(t,e){var n=t.length,r=e.length;if(n==0||r==0)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var s=0,o=1;;){var l=t.substring(i-o),a=e.indexOf(l);if(a==-1)return s;o+=a,(a==0||t.substring(i-o)==e.substring(0,o))&&(s=o,o++)}}function Ya(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return J1(t.charCodeAt(t.length-i))&&i--,i}function a4(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function i(x,y,b){for(var A=x.substring(b,b+Math.floor(x.length/4)),w=-1,v="",c,E,S,L;(w=y.indexOf(A,w+1))!==-1;){var _=hd(x.substring(b),y.substring(w)),I=Ya(x.substring(0,b),y.substring(0,w));v.length<I+_&&(v=y.substring(w-I,w)+y.substring(w,w+_),c=x.substring(0,b-I),E=x.substring(b+_),S=y.substring(0,w-I),L=y.substring(w+_))}return v.length*2>=x.length?[c,E,S,L,v]:null}var s=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),l;if(!s&&!o)return null;o?s?l=s[4].length>o[4].length?s:o:l=o:l=s;var a,u,f,d;t.length>e.length?(a=l[0],u=l[1],f=l[2],d=l[3]):(f=l[0],d=l[1],a=l[2],u=l[3]);var g=l[4];return[a,u,f,d,g]}function u4(t){for(var e=!1,n=[],r=0,i=null,s=0,o=0,l=0,a=0,u=0;s<t.length;)t[s][0]==qe?(n[r++]=s,o=a,l=u,a=0,u=0,i=t[s][1]):(t[s][0]==xt?a+=t[s][1].length:u+=t[s][1].length,i&&i.length<=Math.max(o,l)&&i.length<=Math.max(a,u)&&(t.splice(n[r-1],0,[Bt,i]),t[n[r-1]+1][0]=xt,r--,r--,s=r>0?n[r-1]:-1,o=0,l=0,a=0,u=0,i=null,e=!0)),s++;for(e&&dd(t),h4(t),s=1;s<t.length;){if(t[s-1][0]==Bt&&t[s][0]==xt){var f=t[s-1][1],d=t[s][1],g=b0(f,d),x=b0(d,f);g>=x?(g>=f.length/2||g>=d.length/2)&&(t.splice(s,0,[qe,d.substring(0,g)]),t[s-1][1]=f.substring(0,f.length-g),t[s+1][1]=d.substring(g),s++):(x>=f.length/2||x>=d.length/2)&&(t.splice(s,0,[qe,f.substring(0,x)]),t[s-1][0]=xt,t[s-1][1]=d.substring(0,d.length-x),t[s+1][0]=Bt,t[s+1][1]=f.substring(x),s++),s++}s++}}var S0=/[^a-zA-Z0-9]/,A0=/\s/,T0=/[\r\n]/,c4=/\n\r?\n$/,f4=/^\r?\n\r?\n/;function h4(t){function e(x,y){if(!x||!y)return 6;var b=x.charAt(x.length-1),A=y.charAt(0),w=b.match(S0),v=A.match(S0),c=w&&b.match(A0),E=v&&A.match(A0),S=c&&b.match(T0),L=E&&A.match(T0),_=S&&x.match(c4),I=L&&y.match(f4);return _||I?5:S||L?4:w&&!c&&E?3:c||E?2:w||v?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==qe&&t[n+1][0]==qe){var r=t[n-1][1],i=t[n][1],s=t[n+1][1],o=Ya(r,i);if(o){var l=i.substring(i.length-o);r=r.substring(0,r.length-o),i=l+i.substring(0,i.length-o),s=l+s}for(var a=r,u=i,f=s,d=e(r,i)+e(i,s);i.charAt(0)===s.charAt(0);){r+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var g=e(r,i)+e(i,s);g>=d&&(d=g,a=r,u=i,f=s)}t[n-1][1]!=a&&(a?t[n-1][1]=a:(t.splice(n-1,1),n--),t[n][1]=u,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}}function dd(t,e){t.push([qe,""]);for(var n=0,r=0,i=0,s="",o="",l;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case xt:i++,o+=t[n][1],n++;break;case Bt:r++,s+=t[n][1],n++;break;case qe:var a=n-i-r-1;if(e){if(a>=0&&ty(t[a][1])){var u=t[a][1].slice(-1);if(t[a][1]=t[a][1].slice(0,-1),s=u+s,o=u+o,!t[a][1]){t.splice(a,1),n--;var f=a-1;t[f]&&t[f][0]===xt&&(i++,o=t[f][1]+o,f--),t[f]&&t[f][0]===Bt&&(r++,s=t[f][1]+s,f--),a=f}}if(ey(t[n][1])){var u=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),s+=u,o+=u}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(l=hd(o,s),l!==0&&(a>=0?t[a][1]+=o.substring(0,l):(t.splice(0,0,[qe,o.substring(0,l)]),n++),o=o.substring(l),s=s.substring(l)),l=Ya(o,s),l!==0&&(t[n][1]=o.substring(o.length-l)+t[n][1],o=o.substring(0,o.length-l),s=s.substring(0,s.length-l)));var d=i+r;s.length===0&&o.length===0?(t.splice(n-d,d),n=n-d):s.length===0?(t.splice(n-d,d,[xt,o]),n=n-d+1):o.length===0?(t.splice(n-d,d,[Bt,s]),n=n-d+1):(t.splice(n-d,d,[Bt,s],[xt,o]),n=n-d+2)}n!==0&&t[n-1][0]===qe?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",o="";break}}t[t.length-1][1]===""&&t.pop();var g=!1;for(n=1;n<t.length-1;)t[n-1][0]===qe&&t[n+1][0]===qe&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),g=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),g=!0)),n++;g&&dd(t,e)}function Y1(t){return t>=55296&&t<=56319}function J1(t){return t>=56320&&t<=57343}function ey(t){return J1(t.charCodeAt(0))}function ty(t){return Y1(t.charCodeAt(t.length-1))}function d4(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function bc(t,e,n,r){return ty(t)||ey(r)?null:d4([[qe,t],[Bt,e],[xt,n],[qe,r]])}function p4(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,s=t.length,o=e.length;if(r.length===0&&(i===null||i.length===0)){var l=r.index,a=t.slice(0,l),u=t.slice(l),f=i?i.index:null;e:{var d=l+o-s;if(f!==null&&f!==d||d<0||d>o)break e;var g=e.slice(0,d),x=e.slice(d);if(x!==u)break e;var y=Math.min(l,d),b=a.slice(0,y),A=g.slice(0,y);if(b!==A)break e;var w=a.slice(y),v=g.slice(y);return bc(b,w,v,u)}e:{if(f!==null&&f!==l)break e;var c=l,g=e.slice(0,c),x=e.slice(c);if(g!==a)break e;var E=Math.min(s-c,o-c),S=u.slice(u.length-E),L=x.slice(x.length-E);if(S!==L)break e;var w=u.slice(0,u.length-E),v=x.slice(0,x.length-E);return bc(a,w,v,S)}}if(r.length>0&&i&&i.length===0)e:{var b=t.slice(0,r.index),S=t.slice(r.index+r.length),y=b.length,E=S.length;if(o<y+E)break e;var A=e.slice(0,y),L=e.slice(o-E);if(b!==A||S!==L)break e;var w=t.slice(y,s-E),v=e.slice(y,o-E);return bc(b,w,v,S)}return null}function Ja(t,e,n,r){return Po(t,e,n,r,!0)}Ja.INSERT=xt;Ja.DELETE=Bt;Ja.EQUAL=qe;var g4=Ja,Na={exports:{}};Na.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",l="[object Boolean]",a="[object Date]",u="[object Error]",f="[object Function]",d="[object GeneratorFunction]",g="[object Map]",x="[object Number]",y="[object Object]",b="[object Promise]",A="[object RegExp]",w="[object Set]",v="[object String]",c="[object Symbol]",E="[object WeakMap]",S="[object ArrayBuffer]",L="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",j="[object Int8Array]",F="[object Int16Array]",W="[object Int32Array]",O="[object Uint8Array]",N="[object Uint8ClampedArray]",D="[object Uint16Array]",M="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,z=/\w*$/,B=/^\[object .+?Constructor\]$/,q=/^(?:0|[1-9]\d*)$/,U={};U[s]=U[o]=U[S]=U[L]=U[l]=U[a]=U[_]=U[I]=U[j]=U[F]=U[W]=U[g]=U[x]=U[y]=U[A]=U[w]=U[v]=U[c]=U[O]=U[N]=U[D]=U[M]=!0,U[u]=U[f]=U[E]=!1;var Q=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,Y=typeof self=="object"&&self&&self.Object===Object&&self,le=Q||Y||Function("return this")(),ue=e&&!e.nodeType&&e,se=ue&&!0&&t&&!t.nodeType&&t,he=se&&se.exports===ue;function Me(p,k){return p.set(k[0],k[1]),p}function Se(p,k){return p.add(k),p}function dt(p,k){for(var R=-1,H=p?p.length:0;++R<H&&k(p[R],R,p)!==!1;);return p}function zt(p,k){for(var R=-1,H=k.length,fe=p.length;++R<H;)p[fe+R]=k[R];return p}function Ge(p,k,R,H){for(var fe=-1,oe=p?p.length:0;++fe<oe;)R=k(R,p[fe],fe,p);return R}function pt(p,k){for(var R=-1,H=Array(p);++R<p;)H[R]=k(R);return H}function et(p,k){return p==null?void 0:p[k]}function Ot(p){var k=!1;if(p!=null&&typeof p.toString!="function")try{k=!!(p+"")}catch{}return k}function Ae(p){var k=-1,R=Array(p.size);return p.forEach(function(H,fe){R[++k]=[fe,H]}),R}function tt(p,k){return function(R){return p(k(R))}}function gt(p){var k=-1,R=Array(p.size);return p.forEach(function(H){R[++k]=H}),R}var At=Array.prototype,Es=Function.prototype,Fn=Object.prototype,An=le["__core-js_shared__"],mt=function(){var p=/[^.]+$/.exec(An&&An.keys&&An.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),fr=Es.toString,Ht=Fn.hasOwnProperty,yt=Fn.toString,bs=RegExp("^"+fr.call(Ht).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=he?le.Buffer:void 0,h=le.Symbol,m=le.Uint8Array,C=tt(Object.getPrototypeOf,Object),P=Object.create,$=Fn.propertyIsEnumerable,V=At.splice,ce=Object.getOwnPropertySymbols,we=T?T.isBuffer:void 0,xe=tt(Object.keys,Object),Ee=on(le,"DataView"),pe=on(le,"Map"),sn=on(le,"Promise"),vi=on(le,"Set"),Ss=on(le,"WeakMap"),zr=on(Object,"create"),As=vt(Ee),Hr=vt(pe),Ts=vt(sn),ks=vt(vi),Ns=vt(Ss),hr=h?h.prototype:void 0,Qo=hr?hr.valueOf:void 0;function zn(p){var k=-1,R=p?p.length:0;for(this.clear();++k<R;){var H=p[k];this.set(H[0],H[1])}}function iu(){this.__data__=zr?zr(null):{}}function su(p){return this.has(p)&&delete this.__data__[p]}function ou(p){var k=this.__data__;if(zr){var R=k[p];return R===r?void 0:R}return Ht.call(k,p)?k[p]:void 0}function Xo(p){var k=this.__data__;return zr?k[p]!==void 0:Ht.call(k,p)}function _s(p,k){var R=this.__data__;return R[p]=zr&&k===void 0?r:k,this}zn.prototype.clear=iu,zn.prototype.delete=su,zn.prototype.get=ou,zn.prototype.has=Xo,zn.prototype.set=_s;function Ve(p){var k=-1,R=p?p.length:0;for(this.clear();++k<R;){var H=p[k];this.set(H[0],H[1])}}function lu(){this.__data__=[]}function au(p){var k=this.__data__,R=xi(k,p);if(R<0)return!1;var H=k.length-1;return R==H?k.pop():V.call(k,R,1),!0}function uu(p){var k=this.__data__,R=xi(k,p);return R<0?void 0:k[R][1]}function cu(p){return xi(this.__data__,p)>-1}function fu(p,k){var R=this.__data__,H=xi(R,p);return H<0?R.push([p,k]):R[H][1]=k,this}Ve.prototype.clear=lu,Ve.prototype.delete=au,Ve.prototype.get=uu,Ve.prototype.has=cu,Ve.prototype.set=fu;function nt(p){var k=-1,R=p?p.length:0;for(this.clear();++k<R;){var H=p[k];this.set(H[0],H[1])}}function hu(){this.__data__={hash:new zn,map:new(pe||Ve),string:new zn}}function du(p){return Vr(this,p).delete(p)}function pu(p){return Vr(this,p).get(p)}function gu(p){return Vr(this,p).has(p)}function mu(p,k){return Vr(this,p).set(p,k),this}nt.prototype.clear=hu,nt.prototype.delete=du,nt.prototype.get=pu,nt.prototype.has=gu,nt.prototype.set=mu;function Tt(p){this.__data__=new Ve(p)}function yu(){this.__data__=new Ve}function vu(p){return this.__data__.delete(p)}function wu(p){return this.__data__.get(p)}function xu(p){return this.__data__.has(p)}function Eu(p,k){var R=this.__data__;if(R instanceof Ve){var H=R.__data__;if(!pe||H.length<n-1)return H.push([p,k]),this;R=this.__data__=new nt(H)}return R.set(p,k),this}Tt.prototype.clear=yu,Tt.prototype.delete=vu,Tt.prototype.get=wu,Tt.prototype.has=xu,Tt.prototype.set=Eu;function wi(p,k){var R=Os(p)||bi(p)?pt(p.length,String):[],H=R.length,fe=!!H;for(var oe in p)Ht.call(p,oe)&&!(fe&&(oe=="length"||Bu(oe,H)))&&R.push(oe);return R}function Yo(p,k,R){var H=p[k];(!(Ht.call(p,k)&&rl(H,R))||R===void 0&&!(k in p))&&(p[k]=R)}function xi(p,k){for(var R=p.length;R--;)if(rl(p[R][0],k))return R;return-1}function Tn(p,k){return p&&Is(k,Ds(k),p)}function Cs(p,k,R,H,fe,oe,ye){var ge;if(H&&(ge=oe?H(p,fe,oe,ye):H(p)),ge!==void 0)return ge;if(!Nn(p))return p;var Pe=Os(p);if(Pe){if(ge=Ru(p),!k)return Lu(p,ge)}else{var ve=Gn(p),rt=ve==f||ve==d;if(il(p))return Ei(p,k);if(ve==y||ve==s||rt&&!oe){if(Ot(p))return oe?p:{};if(ge=kn(rt?{}:p),!k)return Iu(p,Tn(ge,p))}else{if(!U[ve])return oe?p:{};ge=Du(p,ve,Cs,k)}}ye||(ye=new Tt);var kt=ye.get(p);if(kt)return kt;if(ye.set(p,ge),!Pe)var Ue=R?Ou(p):Ds(p);return dt(Ue||p,function(it,Ke){Ue&&(Ke=it,it=p[Ke]),Yo(ge,Ke,Cs(it,k,R,H,Ke,p,ye))}),ge}function bu(p){return Nn(p)?P(p):{}}function Su(p,k,R){var H=k(p);return Os(p)?H:zt(H,R(p))}function Au(p){return yt.call(p)}function Tu(p){if(!Nn(p)||ju(p))return!1;var k=Rs(p)||Ot(p)?bs:B;return k.test(vt(p))}function ku(p){if(!tl(p))return xe(p);var k=[];for(var R in Object(p))Ht.call(p,R)&&R!="constructor"&&k.push(R);return k}function Ei(p,k){if(k)return p.slice();var R=new p.constructor(p.length);return p.copy(R),R}function Ls(p){var k=new p.constructor(p.byteLength);return new m(k).set(new m(p)),k}function Gr(p,k){var R=k?Ls(p.buffer):p.buffer;return new p.constructor(R,p.byteOffset,p.byteLength)}function Jo(p,k,R){var H=k?R(Ae(p),!0):Ae(p);return Ge(H,Me,new p.constructor)}function el(p){var k=new p.constructor(p.source,z.exec(p));return k.lastIndex=p.lastIndex,k}function Nu(p,k,R){var H=k?R(gt(p),!0):gt(p);return Ge(H,Se,new p.constructor)}function _u(p){return Qo?Object(Qo.call(p)):{}}function Cu(p,k){var R=k?Ls(p.buffer):p.buffer;return new p.constructor(R,p.byteOffset,p.length)}function Lu(p,k){var R=-1,H=p.length;for(k||(k=Array(H));++R<H;)k[R]=p[R];return k}function Is(p,k,R,H){R||(R={});for(var fe=-1,oe=k.length;++fe<oe;){var ye=k[fe],ge=void 0;Yo(R,ye,ge===void 0?p[ye]:ge)}return R}function Iu(p,k){return Is(p,Hn(p),k)}function Ou(p){return Su(p,Ds,Hn)}function Vr(p,k){var R=p.__data__;return Pu(k)?R[typeof k=="string"?"string":"hash"]:R.map}function on(p,k){var R=et(p,k);return Tu(R)?R:void 0}var Hn=ce?tt(ce,Object):Uu,Gn=Au;(Ee&&Gn(new Ee(new ArrayBuffer(1)))!=L||pe&&Gn(new pe)!=g||sn&&Gn(sn.resolve())!=b||vi&&Gn(new vi)!=w||Ss&&Gn(new Ss)!=E)&&(Gn=function(p){var k=yt.call(p),R=k==y?p.constructor:void 0,H=R?vt(R):void 0;if(H)switch(H){case As:return L;case Hr:return g;case Ts:return b;case ks:return w;case Ns:return E}return k});function Ru(p){var k=p.length,R=p.constructor(k);return k&&typeof p[0]=="string"&&Ht.call(p,"index")&&(R.index=p.index,R.input=p.input),R}function kn(p){return typeof p.constructor=="function"&&!tl(p)?bu(C(p)):{}}function Du(p,k,R,H){var fe=p.constructor;switch(k){case S:return Ls(p);case l:case a:return new fe(+p);case L:return Gr(p,H);case _:case I:case j:case F:case W:case O:case N:case D:case M:return Cu(p,H);case g:return Jo(p,H,R);case x:case v:return new fe(p);case A:return el(p);case w:return Nu(p,H,R);case c:return _u(p)}}function Bu(p,k){return k=k??i,!!k&&(typeof p=="number"||q.test(p))&&p>-1&&p%1==0&&p<k}function Pu(p){var k=typeof p;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?p!=="__proto__":p===null}function ju(p){return!!mt&&mt in p}function tl(p){var k=p&&p.constructor,R=typeof k=="function"&&k.prototype||Fn;return p===R}function vt(p){if(p!=null){try{return fr.call(p)}catch{}try{return p+""}catch{}}return""}function nl(p){return Cs(p,!0,!0)}function rl(p,k){return p===k||p!==p&&k!==k}function bi(p){return Mu(p)&&Ht.call(p,"callee")&&(!$.call(p,"callee")||yt.call(p)==s)}var Os=Array.isArray;function Si(p){return p!=null&&sl(p.length)&&!Rs(p)}function Mu(p){return ol(p)&&Si(p)}var il=we||$u;function Rs(p){var k=Nn(p)?yt.call(p):"";return k==f||k==d}function sl(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=i}function Nn(p){var k=typeof p;return!!p&&(k=="object"||k=="function")}function ol(p){return!!p&&typeof p=="object"}function Ds(p){return Si(p)?wi(p):ku(p)}function Uu(){return[]}function $u(){return!1}t.exports=nl})(Na,Na.exports);var ny=Na.exports,_a={exports:{}};_a.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,l="[object Arguments]",a="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",d="[object Date]",g="[object Error]",x="[object Function]",y="[object GeneratorFunction]",b="[object Map]",A="[object Number]",w="[object Null]",v="[object Object]",c="[object Promise]",E="[object Proxy]",S="[object RegExp]",L="[object Set]",_="[object String]",I="[object Symbol]",j="[object Undefined]",F="[object WeakMap]",W="[object ArrayBuffer]",O="[object DataView]",N="[object Float32Array]",D="[object Float64Array]",M="[object Int8Array]",G="[object Int16Array]",z="[object Int32Array]",B="[object Uint8Array]",q="[object Uint8ClampedArray]",U="[object Uint16Array]",Q="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,se={};se[N]=se[D]=se[M]=se[G]=se[z]=se[B]=se[q]=se[U]=se[Q]=!0,se[l]=se[a]=se[W]=se[f]=se[O]=se[d]=se[g]=se[x]=se[b]=se[A]=se[v]=se[S]=se[L]=se[_]=se[F]=!1;var he=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,Me=typeof self=="object"&&self&&self.Object===Object&&self,Se=he||Me||Function("return this")(),dt=e&&!e.nodeType&&e,zt=dt&&!0&&t&&!t.nodeType&&t,Ge=zt&&zt.exports===dt,pt=Ge&&he.process,et=function(){try{return pt&&pt.binding&&pt.binding("util")}catch{}}(),Ot=et&&et.isTypedArray;function Ae(p,k){for(var R=-1,H=p==null?0:p.length,fe=0,oe=[];++R<H;){var ye=p[R];k(ye,R,p)&&(oe[fe++]=ye)}return oe}function tt(p,k){for(var R=-1,H=k.length,fe=p.length;++R<H;)p[fe+R]=k[R];return p}function gt(p,k){for(var R=-1,H=p==null?0:p.length;++R<H;)if(k(p[R],R,p))return!0;return!1}function At(p,k){for(var R=-1,H=Array(p);++R<p;)H[R]=k(R);return H}function Es(p){return function(k){return p(k)}}function Fn(p,k){return p.has(k)}function An(p,k){return p==null?void 0:p[k]}function mt(p){var k=-1,R=Array(p.size);return p.forEach(function(H,fe){R[++k]=[fe,H]}),R}function fr(p,k){return function(R){return p(k(R))}}function Ht(p){var k=-1,R=Array(p.size);return p.forEach(function(H){R[++k]=H}),R}var yt=Array.prototype,bs=Function.prototype,T=Object.prototype,h=Se["__core-js_shared__"],m=bs.toString,C=T.hasOwnProperty,P=function(){var p=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),$=T.toString,V=RegExp("^"+m.call(C).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=Ge?Se.Buffer:void 0,we=Se.Symbol,xe=Se.Uint8Array,Ee=T.propertyIsEnumerable,pe=yt.splice,sn=we?we.toStringTag:void 0,vi=Object.getOwnPropertySymbols,Ss=ce?ce.isBuffer:void 0,zr=fr(Object.keys,Object),As=Hn(Se,"DataView"),Hr=Hn(Se,"Map"),Ts=Hn(Se,"Promise"),ks=Hn(Se,"Set"),Ns=Hn(Se,"WeakMap"),hr=Hn(Object,"create"),Qo=vt(As),zn=vt(Hr),iu=vt(Ts),su=vt(ks),ou=vt(Ns),Xo=we?we.prototype:void 0,_s=Xo?Xo.valueOf:void 0;function Ve(p){var k=-1,R=p==null?0:p.length;for(this.clear();++k<R;){var H=p[k];this.set(H[0],H[1])}}function lu(){this.__data__=hr?hr(null):{},this.size=0}function au(p){var k=this.has(p)&&delete this.__data__[p];return this.size-=k?1:0,k}function uu(p){var k=this.__data__;if(hr){var R=k[p];return R===r?void 0:R}return C.call(k,p)?k[p]:void 0}function cu(p){var k=this.__data__;return hr?k[p]!==void 0:C.call(k,p)}function fu(p,k){var R=this.__data__;return this.size+=this.has(p)?0:1,R[p]=hr&&k===void 0?r:k,this}Ve.prototype.clear=lu,Ve.prototype.delete=au,Ve.prototype.get=uu,Ve.prototype.has=cu,Ve.prototype.set=fu;function nt(p){var k=-1,R=p==null?0:p.length;for(this.clear();++k<R;){var H=p[k];this.set(H[0],H[1])}}function hu(){this.__data__=[],this.size=0}function du(p){var k=this.__data__,R=Ei(k,p);if(R<0)return!1;var H=k.length-1;return R==H?k.pop():pe.call(k,R,1),--this.size,!0}function pu(p){var k=this.__data__,R=Ei(k,p);return R<0?void 0:k[R][1]}function gu(p){return Ei(this.__data__,p)>-1}function mu(p,k){var R=this.__data__,H=Ei(R,p);return H<0?(++this.size,R.push([p,k])):R[H][1]=k,this}nt.prototype.clear=hu,nt.prototype.delete=du,nt.prototype.get=pu,nt.prototype.has=gu,nt.prototype.set=mu;function Tt(p){var k=-1,R=p==null?0:p.length;for(this.clear();++k<R;){var H=p[k];this.set(H[0],H[1])}}function yu(){this.size=0,this.__data__={hash:new Ve,map:new(Hr||nt),string:new Ve}}function vu(p){var k=on(this,p).delete(p);return this.size-=k?1:0,k}function wu(p){return on(this,p).get(p)}function xu(p){return on(this,p).has(p)}function Eu(p,k){var R=on(this,p),H=R.size;return R.set(p,k),this.size+=R.size==H?0:1,this}Tt.prototype.clear=yu,Tt.prototype.delete=vu,Tt.prototype.get=wu,Tt.prototype.has=xu,Tt.prototype.set=Eu;function wi(p){var k=-1,R=p==null?0:p.length;for(this.__data__=new Tt;++k<R;)this.add(p[k])}function Yo(p){return this.__data__.set(p,r),this}function xi(p){return this.__data__.has(p)}wi.prototype.add=wi.prototype.push=Yo,wi.prototype.has=xi;function Tn(p){var k=this.__data__=new nt(p);this.size=k.size}function Cs(){this.__data__=new nt,this.size=0}function bu(p){var k=this.__data__,R=k.delete(p);return this.size=k.size,R}function Su(p){return this.__data__.get(p)}function Au(p){return this.__data__.has(p)}function Tu(p,k){var R=this.__data__;if(R instanceof nt){var H=R.__data__;if(!Hr||H.length<n-1)return H.push([p,k]),this.size=++R.size,this;R=this.__data__=new Tt(H)}return R.set(p,k),this.size=R.size,this}Tn.prototype.clear=Cs,Tn.prototype.delete=bu,Tn.prototype.get=Su,Tn.prototype.has=Au,Tn.prototype.set=Tu;function ku(p,k){var R=bi(p),H=!R&&rl(p),fe=!R&&!H&&Si(p),oe=!R&&!H&&!fe&&ol(p),ye=R||H||fe||oe,ge=ye?At(p.length,String):[],Pe=ge.length;for(var ve in p)C.call(p,ve)&&!(ye&&(ve=="length"||fe&&(ve=="offset"||ve=="parent")||oe&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||Du(ve,Pe)))&&ge.push(ve);return ge}function Ei(p,k){for(var R=p.length;R--;)if(nl(p[R][0],k))return R;return-1}function Ls(p,k,R){var H=k(p);return bi(p)?H:tt(H,R(p))}function Gr(p){return p==null?p===void 0?j:w:sn&&sn in Object(p)?Gn(p):tl(p)}function Jo(p){return Nn(p)&&Gr(p)==l}function el(p,k,R,H,fe){return p===k?!0:p==null||k==null||!Nn(p)&&!Nn(k)?p!==p&&k!==k:Nu(p,k,R,H,el,fe)}function Nu(p,k,R,H,fe,oe){var ye=bi(p),ge=bi(k),Pe=ye?a:kn(p),ve=ge?a:kn(k);Pe=Pe==l?v:Pe,ve=ve==l?v:ve;var rt=Pe==v,kt=ve==v,Ue=Pe==ve;if(Ue&&Si(p)){if(!Si(k))return!1;ye=!0,rt=!1}if(Ue&&!rt)return oe||(oe=new Tn),ye||ol(p)?Is(p,k,R,H,fe,oe):Iu(p,k,Pe,R,H,fe,oe);if(!(R&i)){var it=rt&&C.call(p,"__wrapped__"),Ke=kt&&C.call(k,"__wrapped__");if(it||Ke){var dr=it?p.value():p,Vn=Ke?k.value():k;return oe||(oe=new Tn),fe(dr,Vn,R,H,oe)}}return Ue?(oe||(oe=new Tn),Ou(p,k,R,H,fe,oe)):!1}function _u(p){if(!sl(p)||Pu(p))return!1;var k=il(p)?V:le;return k.test(vt(p))}function Cu(p){return Nn(p)&&Rs(p.length)&&!!se[Gr(p)]}function Lu(p){if(!ju(p))return zr(p);var k=[];for(var R in Object(p))C.call(p,R)&&R!="constructor"&&k.push(R);return k}function Is(p,k,R,H,fe,oe){var ye=R&i,ge=p.length,Pe=k.length;if(ge!=Pe&&!(ye&&Pe>ge))return!1;var ve=oe.get(p);if(ve&&oe.get(k))return ve==k;var rt=-1,kt=!0,Ue=R&s?new wi:void 0;for(oe.set(p,k),oe.set(k,p);++rt<ge;){var it=p[rt],Ke=k[rt];if(H)var dr=ye?H(Ke,it,rt,k,p,oe):H(it,Ke,rt,p,k,oe);if(dr!==void 0){if(dr)continue;kt=!1;break}if(Ue){if(!gt(k,function(Vn,Kr){if(!Fn(Ue,Kr)&&(it===Vn||fe(it,Vn,R,H,oe)))return Ue.push(Kr)})){kt=!1;break}}else if(!(it===Ke||fe(it,Ke,R,H,oe))){kt=!1;break}}return oe.delete(p),oe.delete(k),kt}function Iu(p,k,R,H,fe,oe,ye){switch(R){case O:if(p.byteLength!=k.byteLength||p.byteOffset!=k.byteOffset)return!1;p=p.buffer,k=k.buffer;case W:return!(p.byteLength!=k.byteLength||!oe(new xe(p),new xe(k)));case f:case d:case A:return nl(+p,+k);case g:return p.name==k.name&&p.message==k.message;case S:case _:return p==k+"";case b:var ge=mt;case L:var Pe=H&i;if(ge||(ge=Ht),p.size!=k.size&&!Pe)return!1;var ve=ye.get(p);if(ve)return ve==k;H|=s,ye.set(p,k);var rt=Is(ge(p),ge(k),H,fe,oe,ye);return ye.delete(p),rt;case I:if(_s)return _s.call(p)==_s.call(k)}return!1}function Ou(p,k,R,H,fe,oe){var ye=R&i,ge=Vr(p),Pe=ge.length,ve=Vr(k),rt=ve.length;if(Pe!=rt&&!ye)return!1;for(var kt=Pe;kt--;){var Ue=ge[kt];if(!(ye?Ue in k:C.call(k,Ue)))return!1}var it=oe.get(p);if(it&&oe.get(k))return it==k;var Ke=!0;oe.set(p,k),oe.set(k,p);for(var dr=ye;++kt<Pe;){Ue=ge[kt];var Vn=p[Ue],Kr=k[Ue];if(H)var kd=ye?H(Kr,Vn,Ue,k,p,oe):H(Vn,Kr,Ue,p,k,oe);if(!(kd===void 0?Vn===Kr||fe(Vn,Kr,R,H,oe):kd)){Ke=!1;break}dr||(dr=Ue=="constructor")}if(Ke&&!dr){var ll=p.constructor,al=k.constructor;ll!=al&&"constructor"in p&&"constructor"in k&&!(typeof ll=="function"&&ll instanceof ll&&typeof al=="function"&&al instanceof al)&&(Ke=!1)}return oe.delete(p),oe.delete(k),Ke}function Vr(p){return Ls(p,Ds,Ru)}function on(p,k){var R=p.__data__;return Bu(k)?R[typeof k=="string"?"string":"hash"]:R.map}function Hn(p,k){var R=An(p,k);return _u(R)?R:void 0}function Gn(p){var k=C.call(p,sn),R=p[sn];try{p[sn]=void 0;var H=!0}catch{}var fe=$.call(p);return H&&(k?p[sn]=R:delete p[sn]),fe}var Ru=vi?function(p){return p==null?[]:(p=Object(p),Ae(vi(p),function(k){return Ee.call(p,k)}))}:Uu,kn=Gr;(As&&kn(new As(new ArrayBuffer(1)))!=O||Hr&&kn(new Hr)!=b||Ts&&kn(Ts.resolve())!=c||ks&&kn(new ks)!=L||Ns&&kn(new Ns)!=F)&&(kn=function(p){var k=Gr(p),R=k==v?p.constructor:void 0,H=R?vt(R):"";if(H)switch(H){case Qo:return O;case zn:return b;case iu:return c;case su:return L;case ou:return F}return k});function Du(p,k){return k=k??o,!!k&&(typeof p=="number"||ue.test(p))&&p>-1&&p%1==0&&p<k}function Bu(p){var k=typeof p;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?p!=="__proto__":p===null}function Pu(p){return!!P&&P in p}function ju(p){var k=p&&p.constructor,R=typeof k=="function"&&k.prototype||T;return p===R}function tl(p){return $.call(p)}function vt(p){if(p!=null){try{return m.call(p)}catch{}try{return p+""}catch{}}return""}function nl(p,k){return p===k||p!==p&&k!==k}var rl=Jo(function(){return arguments}())?Jo:function(p){return Nn(p)&&C.call(p,"callee")&&!Ee.call(p,"callee")},bi=Array.isArray;function Os(p){return p!=null&&Rs(p.length)&&!il(p)}var Si=Ss||$u;function Mu(p,k){return el(p,k)}function il(p){if(!sl(p))return!1;var k=Gr(p);return k==x||k==y||k==u||k==E}function Rs(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=o}function sl(p){var k=typeof p;return p!=null&&(k=="object"||k=="function")}function Nn(p){return p!=null&&typeof p=="object"}var ol=Ot?Es(Ot):Cu;function Ds(p){return Os(p)?ku(p):Lu(p)}function Uu(){return[]}function $u(){return!1}t.exports=Mu})(_a,_a.exports);var ry=_a.exports,pd={};Object.defineProperty(pd,"__esModule",{value:!0});const m4=ny,y4=ry;var qf;(function(t){function e(s={},o={},l=!1){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});let a=m4(o);l||(a=Object.keys(a).reduce((u,f)=>(a[f]!=null&&(u[f]=a[f]),u),{}));for(const u in s)s[u]!==void 0&&o[u]===void 0&&(a[u]=s[u]);return Object.keys(a).length>0?a:void 0}t.compose=e;function n(s={},o={}){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});const l=Object.keys(s).concat(Object.keys(o)).reduce((a,u)=>(y4(s[u],o[u])||(a[u]=o[u]===void 0?null:o[u]),a),{});return Object.keys(l).length>0?l:void 0}t.diff=n;function r(s={},o={}){s=s||{};const l=Object.keys(o).reduce((a,u)=>(o[u]!==s[u]&&s[u]!==void 0&&(a[u]=o[u]),a),{});return Object.keys(s).reduce((a,u)=>(s[u]!==o[u]&&o[u]===void 0&&(a[u]=null),a),l)}t.invert=r;function i(s,o,l=!1){if(typeof s!="object")return o;if(typeof o!="object")return;if(!l)return o;const a=Object.keys(o).reduce((u,f)=>(s[f]===void 0&&(u[f]=o[f]),u),{});return Object.keys(a).length>0?a:void 0}t.transform=i})(qf||(qf={}));pd.default=qf;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});var Ff;(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(Ff||(Ff={}));eu.default=Ff;var gd={};Object.defineProperty(gd,"__esModule",{value:!0});const k0=eu;class v4{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const n=this.ops[this.index];if(n){const r=this.offset,i=k0.default.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};{const s={};return n.attributes&&(s.attributes=n.attributes),typeof n.retain=="number"?s.retain=e:typeof n.retain=="object"&&n.retain!==null?s.retain=n.retain:typeof n.insert=="string"?s.insert=n.insert.substr(r,e):s.insert=n.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?k0.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,n=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(i)}}else return[]}}gd.default=v4;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=g4,r=ny,i=ry,s=pd;e.AttributeMap=s.default;const o=eu;e.Op=o.default;const l=gd;e.OpIterator=l.default;const a="\0",u=(d,g)=>{if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);const x=Object.keys(d)[0];if(!x||x!==Object.keys(g)[0])throw new Error(`embed types not matched: ${x} != ${Object.keys(g)[0]}`);return[x,d[x],g[x]]};class f{constructor(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]}static registerEmbed(g,x){this.handlers[g]=x}static unregisterEmbed(g){delete this.handlers[g]}static getHandler(g){const x=this.handlers[g];if(!x)throw new Error(`no handlers for embed type "${g}"`);return x}insert(g,x){const y={};return typeof g=="string"&&g.length===0?this:(y.insert=g,x!=null&&typeof x=="object"&&Object.keys(x).length>0&&(y.attributes=x),this.push(y))}delete(g){return g<=0?this:this.push({delete:g})}retain(g,x){if(typeof g=="number"&&g<=0)return this;const y={retain:g};return x!=null&&typeof x=="object"&&Object.keys(x).length>0&&(y.attributes=x),this.push(y)}push(g){let x=this.ops.length,y=this.ops[x-1];if(g=r(g),typeof y=="object"){if(typeof g.delete=="number"&&typeof y.delete=="number")return this.ops[x-1]={delete:y.delete+g.delete},this;if(typeof y.delete=="number"&&g.insert!=null&&(x-=1,y=this.ops[x-1],typeof y!="object"))return this.ops.unshift(g),this;if(i(g.attributes,y.attributes)){if(typeof g.insert=="string"&&typeof y.insert=="string")return this.ops[x-1]={insert:y.insert+g.insert},typeof g.attributes=="object"&&(this.ops[x-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof y.retain=="number")return this.ops[x-1]={retain:y.retain+g.retain},typeof g.attributes=="object"&&(this.ops[x-1].attributes=g.attributes),this}}return x===this.ops.length?this.ops.push(g):this.ops.splice(x,0,g),this}chop(){const g=this.ops[this.ops.length-1];return g&&typeof g.retain=="number"&&!g.attributes&&this.ops.pop(),this}filter(g){return this.ops.filter(g)}forEach(g){this.ops.forEach(g)}map(g){return this.ops.map(g)}partition(g){const x=[],y=[];return this.forEach(b=>{(g(b)?x:y).push(b)}),[x,y]}reduce(g,x){return this.ops.reduce(g,x)}changeLength(){return this.reduce((g,x)=>x.insert?g+o.default.length(x):x.delete?g-x.delete:g,0)}length(){return this.reduce((g,x)=>g+o.default.length(x),0)}slice(g=0,x=1/0){const y=[],b=new l.default(this.ops);let A=0;for(;A<x&&b.hasNext();){let w;A<g?w=b.next(g-A):(w=b.next(x-A),y.push(w)),A+=o.default.length(w)}return new f(y)}compose(g){const x=new l.default(this.ops),y=new l.default(g.ops),b=[],A=y.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){let v=A.retain;for(;x.peekType()==="insert"&&x.peekLength()<=v;)v-=x.peekLength(),b.push(x.next());A.retain-v>0&&y.next(A.retain-v)}const w=new f(b);for(;x.hasNext()||y.hasNext();)if(y.peekType()==="insert")w.push(y.next());else if(x.peekType()==="delete")w.push(x.next());else{const v=Math.min(x.peekLength(),y.peekLength()),c=x.next(v),E=y.next(v);if(E.retain){const S={};if(typeof c.retain=="number")S.retain=typeof E.retain=="number"?v:E.retain;else if(typeof E.retain=="number")c.retain==null?S.insert=c.insert:S.retain=c.retain;else{const _=c.retain==null?"insert":"retain",[I,j,F]=u(c[_],E.retain),W=f.getHandler(I);S[_]={[I]:W.compose(j,F,_==="retain")}}const L=s.default.compose(c.attributes,E.attributes,typeof c.retain=="number");if(L&&(S.attributes=L),w.push(S),!y.hasNext()&&i(w.ops[w.ops.length-1],S)){const _=new f(x.rest());return w.concat(_).chop()}}else typeof E.delete=="number"&&(typeof c.retain=="number"||typeof c.retain=="object"&&c.retain!==null)&&w.push(E)}return w.chop()}concat(g){const x=new f(this.ops.slice());return g.ops.length>0&&(x.push(g.ops[0]),x.ops=x.ops.concat(g.ops.slice(1))),x}diff(g,x){if(this.ops===g.ops)return new f;const y=[this,g].map(c=>c.map(E=>{if(E.insert!=null)return typeof E.insert=="string"?E.insert:a;const S=c===g?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")),b=new f,A=n(y[0],y[1],x,!0),w=new l.default(this.ops),v=new l.default(g.ops);return A.forEach(c=>{let E=c[1].length;for(;E>0;){let S=0;switch(c[0]){case n.INSERT:S=Math.min(v.peekLength(),E),b.push(v.next(S));break;case n.DELETE:S=Math.min(E,w.peekLength()),w.next(S),b.delete(S);break;case n.EQUAL:S=Math.min(w.peekLength(),v.peekLength(),E);const L=w.next(S),_=v.next(S);i(L.insert,_.insert)?b.retain(S,s.default.diff(L.attributes,_.attributes)):b.push(_).delete(S);break}E-=S}}),b.chop()}eachLine(g,x=`
`){const y=new l.default(this.ops);let b=new f,A=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const w=y.peek(),v=o.default.length(w)-y.peekLength(),c=typeof w.insert=="string"?w.insert.indexOf(x,v)-v:-1;if(c<0)b.push(y.next());else if(c>0)b.push(y.next(c));else{if(g(b,y.next(1).attributes||{},A)===!1)return;A+=1,b=new f}}b.length()>0&&g(b,{},A)}invert(g){const x=new f;return this.reduce((y,b)=>{if(b.insert)x.delete(o.default.length(b));else{if(typeof b.retain=="number"&&b.attributes==null)return x.retain(b.retain),y+b.retain;if(b.delete||typeof b.retain=="number"){const A=b.delete||b.retain;return g.slice(y,y+A).forEach(v=>{b.delete?x.push(v):b.retain&&b.attributes&&x.retain(o.default.length(v),s.default.invert(b.attributes,v.attributes))}),y+A}else if(typeof b.retain=="object"&&b.retain!==null){const A=g.slice(y,y+1),w=new l.default(A.ops).next(),[v,c,E]=u(b.retain,w.insert),S=f.getHandler(v);return x.retain({[v]:S.invert(c,E)},s.default.invert(b.attributes,w.attributes)),y+1}}return y},0),x.chop()}transform(g,x=!1){if(x=!!x,typeof g=="number")return this.transformPosition(g,x);const y=g,b=new l.default(this.ops),A=new l.default(y.ops),w=new f;for(;b.hasNext()||A.hasNext();)if(b.peekType()==="insert"&&(x||A.peekType()!=="insert"))w.retain(o.default.length(b.next()));else if(A.peekType()==="insert")w.push(A.next());else{const v=Math.min(b.peekLength(),A.peekLength()),c=b.next(v),E=A.next(v);if(c.delete)continue;if(E.delete)w.push(E);else{const S=c.retain,L=E.retain;let _=typeof L=="object"&&L!==null?L:v;if(typeof S=="object"&&S!==null&&typeof L=="object"&&L!==null){const I=Object.keys(S)[0];if(I===Object.keys(L)[0]){const j=f.getHandler(I);j&&(_={[I]:j.transform(S[I],L[I],x)})}}w.retain(_,s.default.transform(c.attributes,E.attributes,x))}}return w.chop()}transformPosition(g,x=!1){x=!!x;const y=new l.default(this.ops);let b=0;for(;y.hasNext()&&b<=g;){const A=y.peekLength(),w=y.peekType();if(y.next(),w==="delete"){g-=Math.min(A,g-b);continue}else w==="insert"&&(b<g||!x)&&(g+=A);b+=A}return g}}f.Op=o.default,f.OpIterator=l.default,f.AttributeMap=s.default,f.handlers={},e.default=f,t.exports=f,t.exports.default=f})($f,$f.exports);var en=$f.exports;const ne=th(en);class bn extends Ft{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}bn.blotName="break";bn.tagName="BR";let xn=class extends ka{};const w4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function tu(t){return t.replace(/[&<>"']/g,e=>w4[e])}const In=class In extends cd{static compare(e,n){const r=In.order.indexOf(e),i=In.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(In.compare(this.statics.blotName,r)<0&&this.scroll.query(r,re.BLOT)){const s=this.isolate(e,n);i&&s.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof In&&In.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};J(In,"allowedChildren",[In,bn,Ft,xn]),J(In,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let $n=In;const N0=1;class Ye extends Bo{constructor(){super(...arguments);J(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=iy(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,i,s){r<=0||(this.scroll.query(i,re.BLOCK)?n+r===this.length()&&this.format(i,s):super.formatAt(n,Math.min(r,this.length()-n-1),i,s),this.cache={})}insertAt(n,r,i){if(i!=null){super.insertAt(n,r,i),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),o=s.shift();o.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let l=this;s.reduce((a,u)=>(l=l.split(a,!0),l.insertAt(0,u),u.length),n+o.length)}insertBefore(n,r){const{head:i}=this.children;super.insertBefore(n,r),i instanceof bn&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+N0),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-N0)){const s=this.clone();return n===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(n,r);return this.cache={},i}}Ye.blotName="block";Ye.tagName="P";Ye.defaultChild=bn;Ye.allowedChildren=[bn,$n,Ft,xn];class Yt extends Ft{attach(){super.attach(),this.attributes=new Qa(this.domNode)}delta(){return new ne().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,re.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),s=i.pop(),o=i.map(a=>{const u=this.scroll.create(Ye.blotName);return u.insertAt(0,a),u}),l=this.split(e);o.forEach(a=>{this.parent.insertBefore(a,l)}),s&&this.parent.insertBefore(this.scroll.create("text",s),l)}}Yt.scope=re.BLOCK_BLOT;function iy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(ct).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),Zt(r,{},e)),new ne).insert(`
`,Zt(t))}function Zt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Zt(t.parent,e,n)}const Gt=class Gt extends Ft{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(Gt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==re.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Gt.CONTENTS.length,r.optimize(),r.formatAt(i,Gt.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof xn?this.prev:null,r=n?n.length():0,i=this.next instanceof xn?this.next:null,s=i?i.text:"",{textNode:o}=this,l=o.data.split(Gt.CONTENTS).join("");o.data=Gt.CONTENTS;let a;if(n)a=n,(l||i)&&(n.insertAt(n.length(),l+s),i&&i.remove());else if(i)a=i,i.insertAt(0,l);else{const u=document.createTextNode(l);a=this.scroll.create(u),this.parent.insertBefore(a,this)}if(this.remove(),e){const u=(g,x)=>n&&g===n.domNode?x:g===o?r+x-1:i&&g===i.domNode?r+l.length+x:null,f=u(e.start.node,e.start.offset),d=u(e.end.node,e.end.offset);if(f!==null&&d!==null)return{startNode:a.domNode,startOffset:f,endNode:a.domNode,endOffset:d}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Gt.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};J(Gt,"blotName","cursor"),J(Gt,"className","ql-cursor"),J(Gt,"tagName","span"),J(Gt,"CONTENTS","\uFEFF");let ps=Gt;var sy={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(a,u,f){this.fn=a,this.context=u,this.once=f||!1}function s(a,u,f,d,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,d||a,g),y=n?n+u:u;return a._events[y]?a._events[y].fn?a._events[y]=[a._events[y],x]:a._events[y].push(x):(a._events[y]=x,a._eventsCount++),a}function o(a,u){--a._eventsCount===0?a._events=new r:delete a._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,x=d.length,y=new Array(x);g<x;g++)y[g]=d[g].fn;return y},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,g,x,y){var b=n?n+u:u;if(!this._events[b])return!1;var A=this._events[b],w=arguments.length,v,c;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),w){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,f),!0;case 3:return A.fn.call(A.context,f,d),!0;case 4:return A.fn.call(A.context,f,d,g),!0;case 5:return A.fn.call(A.context,f,d,g,x),!0;case 6:return A.fn.call(A.context,f,d,g,x,y),!0}for(c=1,v=new Array(w-1);c<w;c++)v[c-1]=arguments[c];A.fn.apply(A.context,v)}else{var E=A.length,S;for(c=0;c<E;c++)switch(A[c].once&&this.removeListener(u,A[c].fn,void 0,!0),w){case 1:A[c].fn.call(A[c].context);break;case 2:A[c].fn.call(A[c].context,f);break;case 3:A[c].fn.call(A[c].context,f,d);break;case 4:A[c].fn.call(A[c].context,f,d,g);break;default:if(!v)for(S=1,v=new Array(w-1);S<w;S++)v[S-1]=arguments[S];A[c].fn.apply(A[c].context,v)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,g){var x=n?n+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===f&&(!g||y.once)&&(!d||y.context===d)&&o(this,x);else{for(var b=0,A=[],w=y.length;b<w;b++)(y[b].fn!==f||g&&!y[b].once||d&&y[b].context!==d)&&A.push(y[b]);A.length?this._events[x]=A.length===1?A[0]:A:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(sy);var x4=sy.exports;const E4=th(x4),zf=new WeakMap,Hf=["error","warn","log","info"];let Gf="warn";function oy(t){if(Gf&&Hf.indexOf(t)<=Hf.indexOf(Gf)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function cr(t){return Hf.reduce((e,n)=>(e[n]=oy.bind(console,n,t),e),{})}cr.level=t=>{Gf=t};oy.level=cr.level;const Sc=cr("quill:events"),b4=["selectionchange","mousedown","mouseup","click"];b4.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=zf.get(i);s&&s.emitter&&s.emitter.handleDOM(...n)})})});class te extends E4{constructor(){super(),this.domListeners={},this.on("error",Sc.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Sc.log.call(Sc,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(s=>{let{node:o,handler:l}=s;(e.target===o||o.contains(e.target))&&l(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}J(te,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),J(te,"sources",{API:"api",SILENT:"silent",USER:"user"});const Ac=cr("quill:selection");class ui{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class S4{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ui(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,te.sources.USER),1)}),this.emitter.on(te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(te.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const o=s.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(o?te.sources.SILENT:i)}catch{}})}),this.emitter.on(te.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:s,startOffset:o,endNode:l,endOffset:a}=i.range;this.setNativeRange(s,o,l,a),this.update(te.sources.SILENT)}}),this.update(te.sources.SILENT)}handleComposition(){this.emitter.on(te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,re.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof ct){const s=i.split(r.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[s,o]=this.scroll.leaf(e);if(s==null)return null;if(n>0&&o===s.length()){const[f]=this.scroll.leaf(e+1);if(f){const[d]=this.scroll.line(e),[g]=this.scroll.line(e+1);d===g&&(s=f,o=0)}}[i,o]=s.position(o,!0);const l=document.createRange();if(n>0)return l.setStart(i,o),[s,o]=this.scroll.leaf(e+n),s==null?null:([i,o]=s.position(o,!0),l.setEnd(i,o),l.getBoundingClientRect());let a="left",u;if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(l.setStart(i,o),l.setEnd(i,o+1)):(l.setStart(i,o-1),l.setEnd(i,o),a="right"),u=l.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;u=s.domNode.getBoundingClientRect(),o>0&&(a="right")}return{bottom:u.top+u.height,height:u.height,left:u[a],right:u[a],top:u.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Ac.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Tc(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(o=>{const[l,a]=o,u=this.scroll.find(l,!0),f=u.offset(this.scroll);return a===0?f:u instanceof ct?f+u.index(l,a):f+u.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),s=Math.min(i,...r);return new ui(s,i-s)}normalizeNative(e){if(!Tc(this.root,e.startContainer)||!e.collapsed&&!Tc(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:s}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;r.node=i,r.offset=s}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,s)=>{i=Math.min(n-1,i);const[o,l]=this.scroll.leaf(i);return o?o.position(l,s):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Ac.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||s||e!==l.startContainer||n!==l.startOffset||r!==l.endContainer||i!==l.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const a=document.createRange();a.setStart(e,n),a.setEnd(r,i),o.removeAllRanges(),o.addRange(a)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.sources.API;if(typeof n=="string"&&(r=n,n=!1),Ac.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!ud(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const s=[te.events.SELECTION_CHANGE,es(this.lastRange),es(n),e];this.emitter.emit(te.events.EDITOR_CHANGE,...s),e!==te.sources.SILENT&&this.emitter.emit(...s)}}}function Tc(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const A4=/^[ -~]*$/;class T4{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=_0(e),i=new ne;return N4(r.ops.slice()).reduce((o,l)=>{const a=en.Op.length(l);let u=l.attributes||{},f=!1,d=!1;if(l.insert!=null){if(i.retain(a),typeof l.insert=="string"){const y=l.insert;d=!y.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(Yt,o)[0]),this.scroll.insertAt(o,y);const[b,A]=this.scroll.line(o);let w=Dr({},Zt(b));if(b instanceof Ye){const[v]=b.descendant(ct,A);v&&(w=Dr(w,Zt(v)))}u=en.AttributeMap.diff(w,u)||{}}else if(typeof l.insert=="object"){const y=Object.keys(l.insert)[0];if(y==null)return o;const b=this.scroll.query(y,re.INLINE)!=null;if(b)(n<=o||this.scroll.descendant(Yt,o)[0])&&(d=!0);else if(o>0){const[A,w]=this.scroll.descendant(ct,o-1);A instanceof xn?A.value()[w]!==`
`&&(f=!0):A instanceof Ft&&A.statics.scope===re.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(o,y,l.insert[y]),b){const[A]=this.scroll.descendant(ct,o);if(A){const w=Dr({},Zt(A));u=en.AttributeMap.diff(w,u)||{}}}}n+=a}else if(i.push(l),l.retain!==null&&typeof l.retain=="object"){const y=Object.keys(l.retain)[0];if(y==null)return o;this.scroll.updateEmbedAt(o,y,l.retain[y])}Object.keys(u).forEach(y=>{this.scroll.formatAt(o,a,y,u[y])});const g=f?1:0,x=d?1:0;return n+=g+x,i.retain(g),i.delete(x),o+a+g+x},0),i.reduce((o,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(o,l.delete),o):o+en.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new ne().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(s=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(s,r[s])})}),this.scroll.optimize();const i=new ne().retain(e).retain(n,es(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(s=>{this.scroll.formatAt(e,n,s,r[s])});const i=new ne().retain(e).retain(n,es(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new ne)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(l=>{const[a]=l;a instanceof Ye?r.push(a):a instanceof ct&&i.push(a)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(ct,e,n));const[s,o]=[r,i].map(l=>{const a=l.shift();if(a==null)return{};let u=Zt(a);for(;Object.keys(u).length>0;){const f=l.shift();if(f==null)return u;u=k4(Zt(f),u)}return u});return{...s,...o}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const s=r.length();return r.length()>=i+n&&!(i===0&&n===s)?jo(r,i,n,!0):jo(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=_0(n),i=new ne().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new ne().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new ne().retain(e).insert(n,es(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Ye.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof bn}removeFormat(e,n){const r=this.getText(e,n),[i,s]=this.scroll.line(e+n);let o=0,l=new ne;i!=null&&(o=i.length()-s,l=i.delta().slice(s,s+o-1).insert(`
`));const u=this.getContents(e,n+o).diff(new ne().insert(r).concat(l)),f=new ne().retain(e).concat(u);return this.applyDelta(f)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(A4)&&this.scroll.find(n[0].target)){const s=this.scroll.find(n[0].target),o=Zt(s),l=s.offset(this.scroll),a=n[0].oldValue.replace(ps.CONTENTS,""),u=new ne().insert(a),f=new ne().insert(s.value()),d=r&&{oldRange:C0(r.oldRange,-l),newRange:C0(r.newRange,-l)};e=new ne().retain(l).concat(u.diff(f,d)).reduce((x,y)=>y.insert?x.insert(y.insert,o):x.push(y),new ne),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!ud(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Oi(t,e,n){if(t.length===0){const[x]=kc(n.pop());return e<=0?`</li></${x}>`:`</li></${x}>${Oi([],e-1,n)}`}const[{child:r,offset:i,length:s,indent:o,type:l},...a]=t,[u,f]=kc(l);if(o>e)return n.push(l),o===e+1?`<${u}><li${f}>${jo(r,i,s)}${Oi(a,o,n)}`:`<${u}><li>${Oi(t,e+1,n)}`;const d=n[n.length-1];if(o===e&&l===d)return`</li><li${f}>${jo(r,i,s)}${Oi(a,o,n)}`;const[g]=kc(n.pop());return`</li></${g}>${Oi(t,e-1,n)}`}function jo(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof xn)return tu(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof yn){if(t.statics.blotName==="list-container"){const u=[];return t.children.forEachAt(e,n,(f,d,g)=>{const x="formats"in f&&typeof f.formats=="function"?f.formats():{};u.push({child:f,offset:d,length:g,indent:x.indent||0,type:x.list})}),Oi(u,-1,[])}const i=[];if(t.children.forEachAt(e,n,(u,f,d)=>{i.push(jo(u,f,d))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:o}=t.domNode,[l,a]=s.split(`>${o}<`);return l==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${a}`:`${l}>${i.join("")}<${a}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function k4(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function kc(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function _0(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new ne)}function C0(t,e){let{index:n,length:r}=t;return new ui(n+e,r)}function N4(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,s)=>{s&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class Sn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}J(Sn,"DEFAULTS",{});const Ol="\uFEFF";class md extends Ft{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Ol),this.rightGuard=document.createTextNode(Ol),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(Ol).join("");if(e===this.leftGuard)if(this.prev instanceof xn){const s=this.prev.length();this.prev.insertAt(s,i),n={startNode:this.prev.domNode,startOffset:s+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof xn?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=Ol,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class _4{constructor(e,n){J(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof md)&&(this.emitter.emit(te.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(te.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(te.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(te.events.COMPOSITION_END,e),this.isComposing=!1}}const fo=class fo{constructor(e,n){J(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};J(fo,"DEFAULTS",{modules:{}}),J(fo,"themes",{default:fo});let gs=fo;const C4=t=>t.parentElement||t.getRootNode().host||null,L4=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},Rl=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},L0=(t,e,n,r,i,s)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+s:0,I4=(t,e)=>{var s,o,l;const n=t.ownerDocument;let r=e,i=t;for(;i;){const a=i===n.body,u=a?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??n.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??n.documentElement.clientHeight,left:0}:L4(i),f=getComputedStyle(i),d=L0(r.left,r.right,u.left,u.right,Rl(f.scrollPaddingLeft),Rl(f.scrollPaddingRight)),g=L0(r.top,r.bottom,u.top,u.bottom,Rl(f.scrollPaddingTop),Rl(f.scrollPaddingBottom));if(d||g)if(a)(l=n.defaultView)==null||l.scrollBy(d,g);else{const{scrollLeft:x,scrollTop:y}=i;g&&(i.scrollTop+=g),d&&(i.scrollLeft+=d);const b=i.scrollLeft-x,A=i.scrollTop-y;r={left:r.left-b,top:r.top-A,right:r.right-b,bottom:r.bottom-A}}i=a||f.position==="fixed"?null:C4(i)}},O4=100,R4=["block","break","cursor","inline","scroll","text"],D4=(t,e,n)=>{const r=new ds;return R4.forEach(i=>{const s=e.query(i);s&&r.register(s)}),t.forEach(i=>{let s=e.query(i);s||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;s;)if(r.register(s),s="blotName"in s?s.requiredContainer??null:null,o+=1,o>O4){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},ns=cr("quill"),Dl=new ds;yn.uiClass="ql-ui";const un=class un{static debug(e){e===!0&&(e="log"),cr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return zf.get(e)||Dl.find(e,n)}static import(e){return this.imports[e]==null&&ns.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&ns.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Dl.register(n),typeof n.register=="function"&&n.register(Dl)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=B4(e,n),this.container=this.options.container,this.container==null){ns.error("Invalid Quill container",e);return}this.options.debug&&un.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",zf.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new te;const i=fd.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new T4(this.scroll),this.selection=new S4(this.scroll,this.emitter),this.composition=new _4(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(te.events.EDITOR_CHANGE,o=>{o===te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(te.events.SCROLL_UPDATE,(o,l)=>{const a=this.selection.lastRange,[u]=this.selection.getRange(),f=a&&u?{oldRange:a,newRange:u}:void 0;an.call(this,()=>this.editor.update(null,l,f),o)}),this.emitter.on(te.events.SCROLL_EMBED_UPDATE,(o,l)=>{const a=this.selection.lastRange,[u]=this.selection.getRange(),f=a&&u?{oldRange:a,newRange:u}:void 0;an.call(this,()=>{const d=new ne().retain(o.offset(this)).retain({[o.statics.blotName]:l});return this.editor.update(d,[],f)},un.sources.USER)}),r){const o=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Zn(e,n,r),an.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.sources.API;return an.call(this,()=>{const i=this.getSelection(!0);let s=new ne;if(i==null)return s;if(this.scroll.query(e,re.BLOCK))s=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),s;s=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,te.sources.SILENT),s},r)}formatLine(e,n,r,i,s){let o;return[e,n,o,s]=Zn(e,n,r,i,s),an.call(this,()=>this.editor.formatLine(e,n,o),s,e,0)}formatText(e,n,r,i,s){let o;return[e,n,o,s]=Zn(e,n,r,i,s),an.call(this,()=>this.editor.formatText(e,n,o),s,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Zn(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Zn(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Zn(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:un.sources.API;return an.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,s){let o;return[e,,o,s]=Zn(e,0,r,i,s),an.call(this,()=>this.editor.insertText(e,n,o),s,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Zn(e,n,r),an.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){I4(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;return an.call(this,()=>{e=new ne(e);const r=this.getLength(),i=this.editor.deleteText(0,r),s=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(o)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||un.sources.API):([e,n,,r]=Zn(e,n,r),this.selection.setRange(new ui(Math.max(0,e),n),r),r!==te.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;const r=new ne().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;return an.call(this,()=>(e=new ne(e),this.editor.applyDelta(e)),n,!0)}};J(un,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Dl,theme:"default"}),J(un,"events",te.events),J(un,"sources",te.sources),J(un,"version","2.0.3"),J(un,"imports",{delta:ne,parchment:s4,"core/module":Sn,"core/theme":gs});let K=un;function I0(t){return typeof t=="string"?document.querySelector(t):t}function Nc(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function O0(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function B4(t,e){const n=I0(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===K.DEFAULTS.theme?gs:K.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:s,...o}=K.DEFAULTS,{modules:l,...a}=i.DEFAULTS;let u=Nc(e.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const f=Dr({},Nc(s),Nc(l),u),d={...o,...O0(a),...O0(e)};let g=e.registry;return g?e.formats&&ns.warn('Ignoring "formats" option because "registry" is specified'):g=e.formats?D4(e.formats,d.registry,ns):d.registry,{...d,registry:g,container:n,theme:i,modules:Object.entries(f).reduce((x,y)=>{let[b,A]=y;if(!A)return x;const w=K.import(`modules/${b}`);return w==null?(ns.error(`Cannot load ${b} module. Are you sure you registered it?`),x):{...x,[b]:Dr({},w.DEFAULTS||{},A)}},{}),bounds:I0(d.bounds)}}function an(t,e,n,r){if(!this.isEnabled()&&e===te.sources.USER&&!this.allowReadOnlyEdits)return new ne;let i=n==null?null:this.getSelection();const s=this.editor.delta,o=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=R0(i,o,e):r!==0&&(i=R0(i,n,r,e)),this.setSelection(i,te.sources.SILENT)),o.length()>0){const l=[te.events.TEXT_CHANGE,o,s,e];this.emitter.emit(te.events.EDITOR_CHANGE,...l),e!==te.sources.SILENT&&this.emitter.emit(...l)}return o}function Zn(t,e,n,r,i){let s={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(s=n,i=r):typeof n=="string"&&(r!=null?s[n]=r:i=n),i=i||te.sources.API,[t,e,s,i]}function R0(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let s,o;return e&&typeof e.transformPosition=="function"?[s,o]=[t.index,t.index+t.length].map(l=>e.transformPosition(l,r!==te.sources.USER)):[s,o]=[t.index,t.index+t.length].map(l=>l<e||l===e&&r===te.sources.USER?l:i>=0?l+i:Math.max(e,l+i)),new ui(s,o-s)}class gi extends Xa{}function D0(t){return t instanceof Ye||t instanceof Yt}function B0(t){return typeof t.updateContent=="function"}class Ri extends fd{constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(te.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(te.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(te.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[s]=this.line(e+n);if(super.deleteAt(e,n),s!=null&&r!==s&&i>0){if(r instanceof Yt||s instanceof Yt){this.optimize();return}const o=s.children.head instanceof bn?null:s.children.head;r.moveChildren(s,o),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,re.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===re.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new ne().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const s=r.shift();if(s){const a=s.type==="block"&&(s.delta.length()===0||!this.descendant(Yt,e)[0]&&e<this.length()),u=s.type==="block"?s.delta:new ne().insert({[s.key]:s.value});_c(this,e,u);const f=s.type==="block"?1:0,d=e+u.length()+f;a&&this.insertAt(d-1,`
`);const g=Zt(this.line(e)[0]),x=en.AttributeMap.diff(g,s.attributes)||{};Object.keys(x).forEach(y=>{this.formatAt(d-1,1,y,x[y])}),e=d}let[o,l]=this.children.find(e);if(r.length&&(o&&(o=o.split(l),l=0),r.forEach(a=>{if(a.type==="block"){const u=this.createBlock(a.attributes,o||void 0);_c(u,0,a.delta)}else{const u=this.create(a.key,a.value);this.insertBefore(u,o||void 0),Object.keys(a.attributes).forEach(f=>{u.format(f,a.attributes[f])})}})),i.type==="block"&&i.delta.length()){const a=o?o.offset(o.scroll)+l:this.length();_c(this,a,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof ct?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(D0,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,s,o)=>{let l=[],a=o;return i.children.forEachAt(s,o,(u,f,d)=>{D0(u)?l.push(u):u instanceof Xa&&(l=l.concat(r(u,f,a))),a-=d}),l};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(te.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=te.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const s=this.find(i,!0);return s&&!B0(s)}),e.length>0&&this.emitter.emit(te.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(te.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(s=>s instanceof Yt,e);i&&i.statics.blotName===n&&B0(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new ne;return e.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const o=s.split(`
`);o.slice(0,-1).forEach(a=>{r.insert(a,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new ne});const l=o[o.length-1];l&&r.insert(l,i.attributes)}else{const o=Object.keys(s)[0];if(!o)return;this.query(o,re.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new ne,n.push({type:"blockEmbed",key:o,value:s[o],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(l=>{let[a,u]=l;this.query(a,re.BLOCK&re.BLOT)!=null?r=a:i[a]=u});const s=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(s,n||void 0);const o=s.length();return Object.entries(i).forEach(l=>{let[a,u]=l;s.formatAt(0,o,a,u)}),s}}J(Ri,"blotName","scroll"),J(Ri,"className","ql-editor"),J(Ri,"tagName","DIV"),J(Ri,"defaultChild",Ye),J(Ri,"allowedChildren",[Ye,Yt,gi]);function _c(t,e,n){n.reduce((r,i)=>{const s=en.Op.length(i);let o=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const l=i.insert;t.insertAt(r,l);const[a]=t.descendant(ct,r),u=Zt(a);o=en.AttributeMap.diff(u,o)||{}}else if(typeof i.insert=="object"){const l=Object.keys(i.insert)[0];if(l==null)return r;if(t.insertAt(r,l,i.insert[l]),t.scroll.query(l,re.INLINE)!=null){const[u]=t.descendant(ct,r),f=Zt(u);o=en.AttributeMap.diff(f,o)||{}}}}return Object.keys(o).forEach(l=>{t.formatAt(r,s,l,o[l])}),r+s},e)}const yd={scope:re.BLOCK,whitelist:["right","center","justify"]},P4=new Un("align","align",yd),ly=new En("align","ql-align",yd),ay=new Fr("align","text-align",yd);class uy extends Fr{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const j4=new En("color","ql-color",{scope:re.INLINE}),vd=new uy("color","color",{scope:re.INLINE}),M4=new En("background","ql-bg",{scope:re.INLINE}),wd=new uy("background","background-color",{scope:re.INLINE});class mi extends gi{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${tu(this.code(e,n))}
</pre>`}}class ft extends Ye{static register(){K.register(mi)}}J(ft,"TAB","  ");class xd extends $n{}xd.blotName="code";xd.tagName="CODE";ft.blotName="code-block";ft.className="ql-code-block";ft.tagName="DIV";mi.blotName="code-block-container";mi.className="ql-code-block-container";mi.tagName="DIV";mi.allowedChildren=[ft];ft.allowedChildren=[xn,bn,ps];ft.requiredContainer=mi;const Ed={scope:re.BLOCK,whitelist:["rtl"]},cy=new Un("direction","dir",Ed),fy=new En("direction","ql-direction",Ed),hy=new Fr("direction","direction",Ed),dy={scope:re.INLINE,whitelist:["serif","monospace"]},py=new En("font","ql-font",dy);class U4 extends Fr{value(e){return super.value(e).replace(/["']/g,"")}}const gy=new U4("font","font-family",dy),my=new En("size","ql-size",{scope:re.INLINE,whitelist:["small","large","huge"]}),yy=new Fr("size","font-size",{scope:re.INLINE,whitelist:["10px","18px","32px"]}),$4=cr("quill:keyboard"),q4=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class nu extends Sn{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=z4(e);if(i==null){$4.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(o=>{const l={...i,key:o,...n,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(w=>nu.match(e,w));if(i.length===0)return;const s=K.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[l,a]=this.quill.getLine(o.index),[u,f]=this.quill.getLeaf(o.index),[d,g]=o.length===0?[u,f]:this.quill.getLeaf(o.index+o.length),x=u instanceof ka?u.value().slice(0,f):"",y=d instanceof ka?d.value().slice(g):"",b={collapsed:o.length===0,empty:o.length===0&&l.length()<=1,format:this.quill.getFormat(o),line:l,offset:a,prefix:x,suffix:y,event:e};i.some(w=>{if(w.collapsed!=null&&w.collapsed!==b.collapsed||w.empty!=null&&w.empty!==b.empty||w.offset!=null&&w.offset!==b.offset)return!1;if(Array.isArray(w.format)){if(w.format.every(v=>b.format[v]==null))return!1}else if(typeof w.format=="object"&&!Object.keys(w.format).every(v=>w.format[v]===!0?b.format[v]!=null:w.format[v]===!1?b.format[v]==null:ud(w.format[v],b.format[v])))return!1;return w.prefix!=null&&!w.prefix.test(b.prefix)||w.suffix!=null&&!w.suffix.test(b.suffix)?!1:w.handler.call(this,o,b,w)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(e.index);let o=new ne().retain(e.index-r).delete(r);if(n.offset===0){const[l]=this.quill.getLine(e.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const u=s.formats(),f=this.quill.getFormat(e.index-1,1);if(i=en.AttributeMap.diff(u,f)||{},Object.keys(i).length>0){const d=new ne().retain(e.index+s.length()-2).retain(1,i);o=o.compose(d)}}}this.quill.updateContents(o,K.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[s]=this.quill.getLine(e.index);let o=new ne().retain(e.index).delete(r);if(n.offset>=s.length()-1){const[l]=this.quill.getLine(e.index+1);if(l){const a=s.formats(),u=this.quill.getFormat(e.index,1);i=en.AttributeMap.diff(a,u)||{},Object.keys(i).length>0&&(o=o.retain(l.length()-1).retain(1,i))}}this.quill.updateContents(o,K.sources.USER),this.quill.focus()}handleDeleteRange(e){bd({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((s,o)=>(this.quill.scroll.query(o,re.BLOCK)&&!Array.isArray(n.format[o])&&(s[o]=n.format[o]),s),{}),i=new ne().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(e.index+1,K.sources.SILENT),this.quill.focus()}}const F4={bindings:{bold:Cc("bold"),italic:Cc("italic"),underline:Cc("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",K.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",K.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",K.sources.USER):e.format.list!=null&&this.quill.format("list",!1,K.sources.USER)}},"indent code-block":P0(!0),"outdent code-block":P0(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,K.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new ne().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,K.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,K.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,K.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,K.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new ne().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(t.index+1,K.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new ne().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(t.index+1,K.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,s]=e.getTable(t),o=H4(n,r,i,s);if(o==null)return;let l=n.offset();if(o<0){const a=new ne().retain(l).insert(`
`);this.quill.updateContents(a,K.sources.USER),this.quill.setSelection(t.index+1,t.length,K.sources.SILENT)}else if(o>0){l+=n.length();const a=new ne().retain(l).insert(`
`);this.quill.updateContents(a,K.sources.USER),this.quill.setSelection(l,K.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,K.sources.USER):this.quill.setSelection(i+r.length(),K.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",K.sources.USER),this.quill.history.cutoff();const o=new ne().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:s});return this.quill.updateContents(o,K.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,K.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const s=new ne().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,K.sources.USER),this.quill.setSelection(t.index-1,K.sources.SILENT),!1}return!0}},"embed left":Bl("ArrowLeft",!1),"embed left shift":Bl("ArrowLeft",!0),"embed right":Bl("ArrowRight",!1),"embed right shift":Bl("ArrowRight",!0),"table down":j0(!1),"table up":j0(!0)}};nu.DEFAULTS=F4;function P0(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,s,K.sources.USER),this.quill.setSelection(e.index+s.length,K.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:l,length:a}=e;o.forEach((u,f)=>{t?(u.insertAt(0,s),f===0?l+=s.length:a+=s.length):u.domNode.textContent.startsWith(s)&&(u.deleteAt(0,s.length),f===0?l-=s.length:a-=s.length)}),this.quill.update(K.sources.USER),this.quill.setSelection(l,a,K.sources.SILENT)}}}function Bl(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[s]=this.quill.getLeaf(i);return s instanceof Ft?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,K.sources.USER):this.quill.setSelection(r.index-1,K.sources.USER):e?this.quill.setSelection(r.index,r.length+1,K.sources.USER):this.quill.setSelection(r.index+r.length+1,K.sources.USER),!1):!0}}}function Cc(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],K.sources.USER)}}}function j0(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,s=i.parent[r];if(s!=null){if(s.statics.blotName==="table-row"){let o=s.children.head,l=i;for(;l.prev!=null;)l=l.prev,o=o.next;const a=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(a,0,K.sources.USER)}}else{const o=i.table()[r];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,K.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,K.sources.USER))}return!1}}}function z4(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=es(t);else return null;return t.shortKey&&(t[q4]=t.shortKey,delete t.shortKey),t}function bd(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const s=r[0].formats(),o=r[r.length-1].formats();i=en.AttributeMap.diff(o,s)||{}}e.deleteText(n,K.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,K.sources.USER),e.setSelection(n.index,K.sources.SILENT)}function H4(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const G4=/font-weight:\s*normal/,V4=["P","OL","UL"],M0=t=>t&&V4.includes(t.tagName),K4=t=>{Array.from(t.querySelectorAll("br")).filter(e=>M0(e.previousElementSibling)&&M0(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},W4=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(G4)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function Z4(t){t.querySelector('[id^="docs-internal-guid-"]')&&(W4(t),K4(t))}const Q4=/\bmso-list:[^;]*ignore/i,X4=/\bmso-list:[^;]*\bl(\d+)/i,Y4=/\bmso-list:[^;]*\blevel(\d+)/i,J4=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(X4);if(!r)return null;const i=Number(r[1]),s=n==null?void 0:n.match(Y4),o=s?Number(s[1]):1,l=new RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),a=e.match(l),u=a&&a[1]==="bullet"?"bullet":"ordered";return{id:i,indent:o,type:u,element:t}},e5=t=>{var o,l;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(a=>{(a.getAttribute("style")||"").match(Q4)?n.push(a):r.push(a)}),n.forEach(a=>{var u;return(u=a.parentNode)==null?void 0:u.removeChild(a)});const i=t.documentElement.innerHTML,s=r.map(a=>J4(a,i)).filter(a=>a);for(;s.length;){const a=[];let u=s.shift();for(;u;)a.push(u),u=s.length&&((o=s[0])==null?void 0:o.element)===u.element.nextElementSibling&&s[0].id===u.id?s.shift():null;const f=document.createElement("ul");a.forEach(x=>{const y=document.createElement("li");y.setAttribute("data-list",x.type),x.indent>1&&y.setAttribute("class",`ql-indent-${x.indent-1}`),y.innerHTML=x.element.innerHTML,f.appendChild(y)});const d=(l=a[0])==null?void 0:l.element,{parentNode:g}=d??{};d&&(g==null||g.replaceChild(f,d)),a.slice(1).forEach(x=>{let{element:y}=x;g==null||g.removeChild(y)})}};function t5(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&e5(t)}const n5=[t5,Z4],r5=t=>{t.documentElement&&n5.forEach(e=>{e(t)})},i5=cr("quill:clipboard"),s5=[[Node.TEXT_NODE,y5],[Node.TEXT_NODE,$0],["br",c5],[Node.ELEMENT_NODE,$0],[Node.ELEMENT_NODE,u5],[Node.ELEMENT_NODE,a5],[Node.ELEMENT_NODE,g5],["li",d5],["ol, ul",p5],["pre",f5],["tr",m5],["b",Lc("bold")],["i",Lc("italic")],["strike",Lc("strike")],["style",h5]],o5=[P4,cy].reduce((t,e)=>(t[e.keyName]=e,t),{}),U0=[ay,wd,vd,hy,gy,yy].reduce((t,e)=>(t[e.keyName]=e,t),{});class vy extends Sn{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],s5.concat(this.options.matchers??[]).forEach(r=>{let[i,s]=r;this.addMatcher(i,s)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[ft.blotName])return new ne().insert(r||"",{[ft.blotName]:i[ft.blotName]});if(!n)return new ne().insert(r||"",i);const s=this.convertHTML(n);return Vo(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new ne().retain(s.length()-1).delete(1)):s}normalizeHTML(e){r5(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[s,o]=this.prepareMatching(r,i);return Sd(this.quill.scroll,r,s,o,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,K.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new ne().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),K.sources.SILENT)}}onCaptureCopy(e){var o,l;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:s}=this.onCopy(r,n);(o=e.clipboardData)==null||o.setData("text/plain",s),(l=e.clipboardData)==null||l.setData("text/html",i),n&&bd({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var o,l,a,u,f;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(o=e.clipboardData)==null?void 0:o.getData("text/html");let i=(l=e.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!i){const d=(a=e.clipboardData)==null?void 0:a.getData("text/uri-list");d&&(i=this.normalizeURIList(d))}const s=Array.from(((u=e.clipboardData)==null?void 0:u.files)||[]);if(!r&&s.length>0){this.quill.uploader.upload(n,s);return}if(r&&s.length>0){const d=new DOMParser().parseFromString(r,"text/html");if(d.body.childElementCount===1&&((f=d.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(n,s);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const s=this.quill.getFormat(e.index),o=this.convert({text:r,html:i},s);i5.log("onPaste",o,{text:r,html:i});const l=new ne().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(l,K.sources.USER),this.quill.setSelection(l.length()-e.length,K.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(s=>{const[o,l]=s;switch(o){case Node.TEXT_NODE:i.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(e.querySelectorAll(o)).forEach(a=>{if(n.has(a)){const u=n.get(a);u==null||u.push(l)}else n.set(a,[l])});break}}),[r,i]}}J(vy,"DEFAULTS",{matchers:[]});function yi(t,e,n,r){return r.query(e)?t.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[e])return i.push(s);const o=n?{[e]:n}:{};return i.insert(s.insert,{...o,...s.attributes})},new ne):t}function Vo(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function Ar(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Ft?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function l5(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Ar(t.previousElementSibling,e)&&!Ar(t.nextElementSibling,e)}const Pl=new WeakMap;function wy(t){return t==null?!1:(Pl.has(t)||(t.tagName==="PRE"?Pl.set(t,!0):Pl.set(t,wy(t.parentNode))),Pl.get(t))}function Sd(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((s,o)=>o(e,s,t),new ne):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,o)=>{let l=Sd(t,o,n,r,i);return o.nodeType===e.ELEMENT_NODE&&(l=n.reduce((a,u)=>u(o,a,t),l),l=(i.get(o)||[]).reduce((a,u)=>u(o,a,t),l)),s.concat(l)},new ne):new ne}function Lc(t){return(e,n,r)=>yi(n,t,!0,r)}function a5(t,e,n){const r=Un.keys(t),i=En.keys(t),s=Fr.keys(t),o={};return r.concat(i).concat(s).forEach(l=>{let a=n.query(l,re.ATTRIBUTE);a!=null&&(o[a.attrName]=a.value(t),o[a.attrName])||(a=o5[l],a!=null&&(a.attrName===l||a.keyName===l)&&(o[a.attrName]=a.value(t)||void 0),a=U0[l],a!=null&&(a.attrName===l||a.keyName===l)&&(a=U0[l],o[a.attrName]=a.value(t)||void 0))}),Object.entries(o).reduce((l,a)=>{let[u,f]=a;return yi(l,u,f,n)},e)}function u5(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof Ft){const i={},s=r.value(t);if(s!=null)return i[r.blotName]=s,new ne().insert(i,r.formats(t,n))}else if(r.prototype instanceof Bo&&!Vo(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return yi(e,r.blotName,r.formats(t,n),n);return e}function c5(t,e){return Vo(e,`
`)||e.insert(`
`),e}function f5(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return yi(e,"code-block",i,n)}function h5(){return new ne}function d5(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Vo(e,`
`))return e;let i=-1,s=t.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?e:e.reduce((o,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?o.push(l):o.insert(l.insert,{indent:i,...l.attributes||{}}):o,new ne)}function p5(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const s=r.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),yi(e,"list",i,n)}function $0(t,e,n){if(!Vo(e,`
`)){if(Ar(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Ar(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof Yt)return e.insert(`
`);r=r.firstChild}}}return e}function g5(t,e,n){var s;const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,l)=>{let[a,u]=l;return yi(o,a,u,n)},e),parseFloat(i.textIndent||0)>0?new ne().insert("	").concat(e):e}function m5(t,e,n){var i,s;const r=((i=t.parentElement)==null?void 0:i.tagName)==="TABLE"?t.parentElement:(s=t.parentElement)==null?void 0:s.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return yi(e,"table",l,n)}return e}function y5(t,e,n){var i;let r=t.data;if(((i=t.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(r.trim());if(!wy(t)){if(r.trim().length===0&&r.includes(`
`)&&!l5(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&Ar(t.parentElement,n)||t.previousSibling instanceof Element&&Ar(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&Ar(t.parentElement,n)||t.nextSibling instanceof Element&&Ar(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(" "," ")}return e.insert(r)}class xy extends Sn{constructor(n,r){super(n,r);J(this,"lastRecorded",0);J(this,"ignoreChange",!1);J(this,"stack",{undo:[],redo:[]});J(this,"currentRange",null);this.quill.on(K.events.EDITOR_CHANGE,(i,s,o,l)=>{i===K.events.SELECTION_CHANGE?s&&l!==K.sources.SILENT&&(this.currentRange=s):i===K.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===K.sources.USER?this.record(s,o):this.transform(s)),this.currentRange=Vf(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const i=this.stack[n].pop();if(!i)return;const s=this.quill.getContents(),o=i.delta.invert(s);this.stack[r].push({delta:o,range:Vf(i.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,K.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let i=n.invert(r),s=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(i=i.compose(l.delta),s=l.range)}else this.lastRecorded=o;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){q0(this.stack.undo,n),q0(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,K.sources.USER);else{const r=w5(this.quill.scroll,n.delta);this.quill.setSelection(r,K.sources.USER)}}}J(xy,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function q0(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Vf(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function v5(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,re.BLOCK)!=null):!1}function w5(t,e){const n=e.reduce((i,s)=>i+(s.delete||0),0);let r=e.length()-n;return v5(t,e)&&(r-=1),r}function Vf(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class Ey extends Sn{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var o;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(l.offsetNode,l.offset),i.setEnd(l.offsetNode,l.offset)}const s=i&&e.selection.normalizeNative(i);if(s){const l=e.selection.normalizedToRange(s);(o=r.dataTransfer)!=null&&o.files&&this.upload(l,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}Ey.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((s,o)=>s.insert({image:o}),new ne().retain(t.index).delete(t.length));this.quill.updateContents(i,te.sources.USER),this.quill.setSelection(t.index+r.length,te.sources.SILENT)})}};const x5=["insertText","insertReplacementText"];class E5 extends Sn{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(K.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){bd({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new ne().retain(e.index).insert(n,r),K.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,K.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!x5.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=b5(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function b5(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const S5=/Mac/i.test(navigator.platform),A5=100,T5=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||S5&&t.key==="a"&&t.ctrlKey===!0);class k5 extends Sn{constructor(n,r){super(n,r);J(this,"isListening",!1);J(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:i,event:s}=r;if(!(i instanceof yn)||!i.uiNode)return!0;const o=getComputedStyle(i.domNode).direction==="rtl";return o&&s.key!=="ArrowRight"||!o&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(s.shiftKey?1:0),K.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&T5(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+A5,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof yn)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(s)}}K.register({"blots/block":Ye,"blots/block/embed":Yt,"blots/break":bn,"blots/container":gi,"blots/cursor":ps,"blots/embed":md,"blots/inline":$n,"blots/scroll":Ri,"blots/text":xn,"modules/clipboard":vy,"modules/history":xy,"modules/keyboard":nu,"modules/uploader":Ey,"modules/input":E5,"modules/uiNode":k5});class N5 extends En{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const _5=new N5("indent","ql-indent",{scope:re.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Kf extends Ye{}J(Kf,"blotName","blockquote"),J(Kf,"tagName","blockquote");class Wf extends Ye{static formats(e){return this.tagName.indexOf(e.tagName)+1}}J(Wf,"blotName","header"),J(Wf,"tagName",["H1","H2","H3","H4","H5","H6"]);class Ko extends gi{}Ko.blotName="list-container";Ko.tagName="OL";class Wo extends Ye{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){K.register(Ko)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=s=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),s.preventDefault()):o==="unchecked"&&(this.format("list","checked"),s.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}Wo.blotName="list";Wo.tagName="LI";Ko.allowedChildren=[Wo];Wo.requiredContainer=Ko;class Mo extends $n{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}J(Mo,"blotName","bold"),J(Mo,"tagName",["STRONG","B"]);class Zf extends Mo{}J(Zf,"blotName","italic"),J(Zf,"tagName",["EM","I"]);class Tr extends $n{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return by(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}J(Tr,"blotName","link"),J(Tr,"tagName","A"),J(Tr,"SANITIZED_URL","about:blank"),J(Tr,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function by(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class Qf extends $n{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}J(Qf,"blotName","script"),J(Qf,"tagName",["SUB","SUP"]);class Xf extends Mo{}J(Xf,"blotName","strike"),J(Xf,"tagName",["S","STRIKE"]);class Yf extends $n{}J(Yf,"blotName","underline"),J(Yf,"tagName","U");class Xl extends md{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}J(Xl,"blotName","formula"),J(Xl,"className","ql-formula"),J(Xl,"tagName","SPAN");const F0=["alt","height","width"];class Jf extends Ft{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return F0.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return by(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){F0.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}}J(Jf,"blotName","image"),J(Jf,"tagName","IMG");const z0=["height","width"];class Yl extends Yt{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return z0.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return Tr.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){z0.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}J(Yl,"blotName","video"),J(Yl,"className","ql-video"),J(Yl,"tagName","IFRAME");const Ys=new En("code-token","hljs",{scope:re.INLINE});class or extends $n{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(ft.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Ys.add(this.domNode,r)}format(e,n){e!==or.blotName?super.format(e,n):n?Ys.add(this.domNode,n):(Ys.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ys.value(this.domNode)||this.unwrap()}}or.blotName="code-token";or.className="ql-token";class Qt extends ft{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),or.blotName,!1),super.replaceWith(e,n)}}class co extends mi{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Qt.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===Qt.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,s=Qt.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const o=this.children.reduce((a,u)=>a.concat(iy(u,!1)),new ne),l=e(i,s);o.diff(l).reduce((a,u)=>{let{retain:f,attributes:d}=u;return f?(d&&Object.keys(d).forEach(g=>{[Qt.blotName,or.blotName].includes(g)&&this.formatAt(a,f,g,d[g])}),a+f):a},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?Qt.formats(r.domNode):"plain"}">
${tu(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Qt.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}co.allowedChildren=[Qt];Qt.requiredContainer=co;Qt.allowedChildren=[or,ps,xn,bn];const C5=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class Sy extends Sn{static register(){K.register(or,!0),K.register(Qt,!0),K.register(co,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:s}=i;return r[s]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(K.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof co))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:s}=r;const o=n.ownerDocument.createElement("option");o.textContent=s,o.setAttribute("value",i),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(Qt.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Qt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(K.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(K.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(co):[e]).forEach(s=>{s.highlight(this.highlightBlot,n)}),this.quill.update(K.sources.SILENT),r!=null&&this.quill.setSelection(r,K.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return tu(e).split(`
`).reduce((i,s,o)=>(o!==0&&i.insert(`
`,{[ft.blotName]:n}),i.insert(s)),new ne);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(ft.className),r.innerHTML=C5(this.options.hljs,n,e),Sd(this.quill.scroll,r,[(i,s)=>{const o=Ys.value(i);return o?s.compose(new ne().retain(s.length(),{[or.blotName]:o})):s}],[(i,s)=>i.data.split(`
`).reduce((o,l,a)=>(a!==0&&o.insert(`
`,{[ft.blotName]:n}),o.insert(l)),s)],new WeakMap)}}Sy.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const ho=class ho extends Ye{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",Ad()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===ho.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};J(ho,"blotName","table"),J(ho,"tagName","TD");let pn=ho;class lr extends gi{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const s=this.splitAfter(n);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}J(lr,"blotName","table-row"),J(lr,"tagName","TR");class Mn extends gi{}J(Mn,"blotName","table-body"),J(Mn,"tagName","TBODY");class ms extends gi{balanceCells(){const e=this.descendants(lr),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=pn.formats(r.children.head.domNode));const s=this.scroll.create(pn.blotName,i);r.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(Mn);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[n]=this.descendant(Mn);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),s=pn.formats(r.children.head.domNode),o=this.scroll.create(pn.blotName,s);r.insertBefore(o,i)})}insertRow(e){const[n]=this.descendant(Mn);if(n==null||n.children.head==null)return;const r=Ad(),i=this.scroll.create(lr.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(pn.blotName,r);i.appendChild(o)});const s=n.children.at(e);n.insertBefore(i,s)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}J(ms,"blotName","table-container"),J(ms,"tagName","TABLE");ms.allowedChildren=[Mn];Mn.requiredContainer=ms;Mn.allowedChildren=[lr];lr.requiredContainer=Mn;lr.allowedChildren=[pn];pn.requiredContainer=lr;function Ad(){return`row-${Math.random().toString(36).slice(2,6)}`}class L5 extends Sn{static register(){K.register(pn),K.register(lr),K.register(Mn),K.register(ms)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ms).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(K.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(K.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(K.sources.USER),this.quill.setSelection(n,K.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==pn.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const o=s.cellOffset();r.insertColumn(o+e),this.quill.update(K.sources.USER);let l=i.rowOffset();e===0&&(l+=1),this.quill.setSelection(n.index+l,n.length,K.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const o=i.rowOffset();r.insertRow(o+e),this.quill.update(K.sources.USER),e>0?this.quill.setSelection(n,K.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,K.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(s=>{const o=new Array(n).fill(`
`).join("");return s.insert(o,{table:Ad()})},new ne().retain(r.index));this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(r.index,K.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(K.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(K.events.TEXT_CHANGE,(r,i,s)=>{s===K.sources.USER&&this.balanceTables()}),!0):!1)})}}const H0=cr("quill:toolbar");class Td extends Sn{constructor(e,n){var r,i;if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),I5(s,this.options.container),(i=(r=e.container)==null?void 0:r.parentNode)==null||i.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){H0.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var l;const o=(l=this.options.handlers)==null?void 0:l[s];o&&this.addHandler(s,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(K.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){H0.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];l.hasAttribute("selected")?s=!1:s=l.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,s);else if(this.quill.scroll.query(n).prototype instanceof Ft){if(s=prompt(`Enter ${n}`),!s)return;this.quill.updateContents(new ne().retain(o.index).delete(o.length).insert({[n]:s}),K.sources.USER)}else this.quill.format(n,s,K.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,s]=r;if(s.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[i]==null)o=s.querySelector("option[selected]");else if(!Array.isArray(n[i])){let l=n[i];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),o=s.querySelector(`option[value="${l}"]`)}o==null?(s.value="",s.selectedIndex=-1):o.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const o=n[i],l=o===s.getAttribute("value")||o!=null&&o.toString()===s.getAttribute("value")||o==null&&!s.getAttribute("value");s.classList.toggle("ql-active",l),s.setAttribute("aria-pressed",l.toString())}else{const o=n[i]!=null;s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}})}}Td.DEFAULTS={};function G0(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function I5(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")G0(r,i);else{const s=Object.keys(i)[0],o=i[s];Array.isArray(o)?O5(r,s,o):G0(r,s,o)}}),t.appendChild(r)})}function O5(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),r.appendChild(s)}),t.appendChild(r)}Td.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,re.INLINE)!=null&&this.quill.format(n,!1,K.sources.USER)})}else this.quill.removeFormat(t.index,t.length,K.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",K.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,K.sources.USER),this.quill.format("direction",t,K.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,K.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,K.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,K.sources.USER):this.quill.format("list","unchecked",K.sources.USER):this.quill.format("list",t,K.sources.USER)}}};const R5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',D5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',B5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',P5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',j5='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',M5='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',U5='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',$5='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',V0='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',q5='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',F5='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',z5='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',H5='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',G5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',V5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',K5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',W5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Z5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Q5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',X5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Y5='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',J5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',eA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',tA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',nA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',rA='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',iA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',sA='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',oA='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',lA='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',aA='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',uA='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',cA='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Uo={align:{"":R5,center:D5,right:B5,justify:P5},background:j5,blockquote:M5,bold:U5,clean:$5,code:V0,"code-block":V0,color:q5,direction:{"":F5,rtl:z5},formula:H5,header:{1:G5,2:V5,3:K5,4:W5,5:Z5,6:Q5},italic:X5,image:Y5,indent:{"+1":J5,"-1":eA},link:tA,list:{bullet:nA,check:rA,ordered:iA},script:{sub:sA,super:oA},strike:lA,table:aA,underline:uA,video:cA},fA='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let K0=0;function W0(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class ru{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),W0(this.label,"aria-expanded"),W0(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=fA,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${K0}`,K0+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class Ay extends ru{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class Ty extends ru{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const hA=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class ky{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,hA(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let o=0;if(s.right>i.right&&(o=i.right-s.right,this.root.style.left=`${n+o}px`),s.left<i.left&&(o=i.left-s.left,this.root.style.left=`${n+o}px`),s.bottom>i.bottom){const l=s.bottom-s.top,a=e.bottom-e.top+l;this.root.style.top=`${r-a}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const dA=[!1,"center","right","justify"],pA=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],gA=[!1,"serif","monospace"],mA=["1","2","3",!1],yA=["small",!1,"large","huge"];class Zo extends gs{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),n[s]!=null))if(s==="direction")r.innerHTML=n[s][""]+n[s].rtl;else if(typeof n[s]=="string")r.innerHTML=n[s];else{const o=r.value||"";o!=null&&n[s][o]&&(r.innerHTML=n[s][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Gs(i,dA),typeof n.align=="object"))return new Ty(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Gs(i,pA,s==="background"?"#ffffff":"#000000"),new Ay(i,n[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Gs(i,gA):i.classList.contains("ql-header")?Gs(i,mA):i.classList.contains("ql-size")&&Gs(i,yA)),new ru(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(te.events.EDITOR_CHANGE,r)}}Zo.DEFAULTS=Dr({},gs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Ny extends ky{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,te.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=vA(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",te.sources.USER),this.quill.setSelection(r+2,te.sources.USER)}break}}this.textbox.value="",this.hide()}}function vA(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Gs(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const wA=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class _y extends Ny{constructor(e,n){super(e,n),this.quill.on(te.events.EDITOR_CHANGE,(r,i,s,o)=>{if(r===te.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&o===te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(i.index,i.length);if(l.length===1){const a=this.quill.getBounds(i);a!=null&&this.position(a)}else{const a=l[l.length-1],u=this.quill.getIndex(a),f=Math.min(a.length()-1,i.index+i.length-u),d=this.quill.getBounds(new ui(u,f));d!=null&&this.position(d)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}J(_y,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Cy extends Zo{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=wA),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new _y(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Uo),this.buildPickers(e.container.querySelectorAll("select"),Uo))}}Cy.DEFAULTS=Dr({},Zo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,K.sources.USER)}}}}});const xA=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Ly extends Ny{constructor(){super(...arguments);J(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,te.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(te.events.SELECTION_CHANGE,(n,r,i)=>{if(n!=null){if(n.length===0&&i===te.sources.USER){const[s,o]=this.quill.scroll.descendant(Tr,n.index);if(s!=null){this.linkRange=new ui(n.index-o,s.length());const l=Tr.formats(s.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}J(Ly,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Iy extends Zo{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=xA),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Uo),this.buildPickers(e.container.querySelectorAll("select"),Uo),this.tooltip=new Ly(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}Iy.DEFAULTS=Dr({},Zo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,K.sources.USER)}}}}});K.register({"attributors/attribute/direction":cy,"attributors/class/align":ly,"attributors/class/background":M4,"attributors/class/color":j4,"attributors/class/direction":fy,"attributors/class/font":py,"attributors/class/size":my,"attributors/style/align":ay,"attributors/style/background":wd,"attributors/style/color":vd,"attributors/style/direction":hy,"attributors/style/font":gy,"attributors/style/size":yy},!0);K.register({"formats/align":ly,"formats/direction":fy,"formats/indent":_5,"formats/background":wd,"formats/color":vd,"formats/font":py,"formats/size":my,"formats/blockquote":Kf,"formats/code-block":ft,"formats/header":Wf,"formats/list":Wo,"formats/bold":Mo,"formats/code":xd,"formats/italic":Zf,"formats/link":Tr,"formats/script":Qf,"formats/strike":Xf,"formats/underline":Yf,"formats/formula":Xl,"formats/image":Jf,"formats/video":Yl,"modules/syntax":Sy,"modules/table":L5,"modules/toolbar":Td,"themes/bubble":Cy,"themes/snow":Iy,"ui/icons":Uo,"ui/picker":ru,"ui/icon-picker":Ty,"ui/color-picker":Ay,"ui/tooltip":ky},!0);const EA=({annotations:t,profiles:e,onDelete:n,onSaveComment:r})=>{const[i,s]=ie.useState({}),[o,l]=ie.useState(null),a=ie.useRef({}),u=ie.useRef({}),[f,d]=ie.useState({});ie.useEffect(()=>(t.forEach(w=>{const v=w.id,c=a.current[v];c&&!u.current[v]&&(u.current[v]=new K(c,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]},placeholder:"Add a comment..."}),u.current[v].on("text-change",()=>{const E=u.current[v].root.innerHTML||"";s(S=>({...S,[v]:E==="<p><br></p>"?"":E}))}))}),()=>{t.forEach(w=>{const v=w.id;u.current[v]&&(u.current[v].off("text-change"),u.current[v]=null)})}),[t]),ie.useEffect(()=>{const w={};t.forEach(v=>{f[v.id]===void 0&&(w[v.id]=!1)}),d(v=>({...v,...w}))},[t]);const g=async w=>{const v=i[w]||"";if(v.trim()&&r){console.log("AnnotationList: Saving comment for annotation:",w,v),await r(w,v),s(E=>({...E,[w]:""}));const c=u.current[w];c&&c.setContents([])}},x=async w=>{var L;const v=eh(w.url),c=`https://citizenx.app/check-extension?annotationId=${w.id}&url=${encodeURIComponent(v)}`,E=`Check out this annotation: "${w.content.substring(0,100)}..." by ${((L=e[w.author])==null?void 0:L.handle)||"Unknown"} #CitizenX`,S=navigator.platform.toLowerCase().includes("mac");if(navigator.share&&!S)try{await navigator.share({title:"CitizenX Annotation",text:E,url:c})}catch(_){console.error("AnnotationList: Share failed:",_),l(`${E} ${c}`)}else l(`${E} ${c}`)},y=async w=>{await navigator.clipboard.writeText(w),alert("Link copied to clipboard!"),l(null)},b=w=>{d(v=>({...v,[w]:!v[w]}))},A=(w,v,c)=>{const E=encodeURIComponent(v),S=encodeURIComponent(c);switch(w){case"x":return`https://twitter.com/intent/tweet?text=${E}&url=${S}`;case"facebook":return`https://www.facebook.com/sharer/sharer.php?u=${S}"e=${E}`;case"whatsapp":return`https://api.whatsapp.com/send?text=${E}%20${S}`;case"telegram":return`https://t.me/share/url?url=${S}&text=${E}`;case"email":return`mailto:?subject=CitizenX%20Annotation&body=${E}%20${S}`;default:return"#"}};return Z.jsxs("div",{className:"annotation-list",children:[t.map(w=>{var L;const v=e[w.author]||null,c=v?v.handle:"Unknown";console.log("AnnotationList: Rendering annotation:",w,"Author handle:",c);const E=w.comments?[...w.comments].sort((_,I)=>_.timestamp-I.timestamp):[],S=f[w.id]||!1;return Z.jsxs("div",{className:"annotation-item","data-annotation-id":w.id,children:[Z.jsxs("div",{className:"annotation-header",children:[Z.jsx("span",{className:"annotation-author",children:c}),Z.jsxs("span",{className:"annotation-timestamp",children:[" ","• ",new Date(w.timestamp).toLocaleString()]}),Z.jsx("button",{onClick:()=>n(w.id),className:"delete-button",children:"Delete"}),Z.jsx("button",{onClick:()=>x(w),className:"share-button",children:"Share"})]}),Z.jsx("div",{className:"annotation-content",dangerouslySetInnerHTML:{__html:w.content||"No content"}}),E.length>0&&Z.jsxs(Z.Fragment,{children:[Z.jsxs("button",{className:"comments-toggle-button",onClick:()=>b(w.id),children:[S?"−":"+"," ",S?"Hide comments":`Show ${E.length} comment${E.length>1?"s":""}`]}),S&&Z.jsx("div",{className:"comments-section",children:E.map(_=>{const I=e[_.author]||null,j=I?I.handle:"Unknown";return Z.jsx("div",{className:"comment-item",children:Z.jsxs("div",{className:"comment-group",children:[Z.jsxs("div",{className:"comment-header",children:[Z.jsx("span",{className:"comment-author",children:j}),Z.jsxs("span",{className:"comment-timestamp",children:[" ","• ",new Date(_.timestamp).toLocaleString()]})]}),Z.jsx("div",{className:"comment-content",dangerouslySetInnerHTML:{__html:_.content}})]})},_.id)})})]}),r&&Z.jsxs("div",{className:"add-comment-section",children:[Z.jsx("div",{ref:_=>a.current[w.id]=_,className:"quill-editor"}),Z.jsx("button",{onClick:()=>g(w.id),disabled:!((L=i[w.id])!=null&&L.trim()),className:"add-comment-button",children:"Add Comment"})]})]},w.id)}),o&&Z.jsx("div",{className:"share-modal",children:Z.jsxs("div",{className:"share-modal-content",children:[Z.jsx("h3",{children:"Share Annotation"}),Z.jsxs("div",{className:"share-buttons",children:[Z.jsxs("a",{href:A("x",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-x",title:"Share on X",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),Z.jsx("span",{children:"X (Twitter)"})]}),Z.jsxs("a",{href:A("facebook",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-whatsapp",title:"Share on Facebook",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M9.198 21.5h4v-8.01h3.604l.396-3.98h-4V7.5a1 1 0 0 1 1-1h3v-4h-3a5 5 0 0 0-5 5v2.01h-2l-.396 3.98h2.396v8.01Z"})}),Z.jsx("span",{children:"Facebook"})]}),Z.jsxs("a",{href:A("whatsapp",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-whatsapp",title:"Share on WhatsApp",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),Z.jsx("span",{children:"WhatsApp"})]}),Z.jsxs("a",{href:A("telegram",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-telegram",title:"Share on Telegram",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),Z.jsx("span",{children:"Telegram"})]}),Z.jsxs("a",{href:A("email",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-email",title:"Share via Email",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),Z.jsx("span",{children:"Email"})]}),Z.jsxs("button",{onClick:()=>y(o),className:"share-button-social share-copy",title:"Copy Message",children:[Z.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Z.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),Z.jsx("span",{children:"Copy Message"})]})]}),Z.jsx("button",{onClick:()=>l(null),className:"share-modal-close",children:"Close"})]})})]})},bA="/assets/citizenx-logo.png",SA=({url:t,isPopupUrl:e})=>{const{did:n,profile:r,loading:i,error:s,authenticate:o,signOut:l,exportIdentity:a,importIdentity:u,createProfile:f,updateProfile:d}=Sx(),{annotations:g,profiles:x,error:y,loading:b,handleSaveAnnotation:A,handleDeleteAnnotation:w,handleSaveComment:v}=Ax({url:t,did:n}),[c,E]=ie.useState(""),[S,L]=ie.useState(!1),[_,I]=ie.useState(""),[j,F]=ie.useState(void 0),[W,O]=ie.useState(!1),[N,D]=ie.useState(""),[M,G]=ie.useState(!1),[z,B]=ie.useState(""),[q,U]=ie.useState(""),[Q,Y]=ie.useState(null),[le,ue]=ie.useState(""),se=ie.useRef(null),he=ie.useRef(null);ie.useEffect(()=>(se.current&&!he.current&&(he.current=new K(se.current,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]},placeholder:"Enter annotation..."}),he.current.on("text-change",()=>{var tt;const Ae=((tt=he.current)==null?void 0:tt.root.innerHTML)||"";E(Ae==="<p><br></p>"?"":Ae)})),()=>{he.current&&(he.current.off("text-change"),he.current=null)}),[]),ie.useEffect(()=>{!i&&n&&!r?(console.log("AnnotationUI: Opening Update Profile modal"),L(!0)):console.log("AnnotationUI: Profile modal conditions - loading:",i,"did:",n,"profile:",r)},[i,n,r]),ie.useEffect(()=>{console.log("AnnotationUI: annotationsLoading changed:",b)},[b]);const Me=async()=>{c.trim()&&!e&&(await A(c),E(""),he.current&&he.current.setContents([]))},Se=async()=>{_.trim()&&(r?await d(_,j):await f(_,j),L(!1),I(""),F(void 0))},dt=async()=>{await o(),O(!1)},zt=async()=>{await l(),O(!1)},Ge=async()=>{Y("export")},pt=async()=>{if(!q){alert("Please enter a passphrase");return}try{const Ae=await a(q);B(Ae),G(!0),Y(null),U(""),O(!1)}catch(Ae){console.error("Failed to export identity:",Ae),alert(Ae.message||"Failed to export identity")}},et=async()=>{if(!N.trim()){alert("Please paste the identity data");return}Y("import")},Ot=async()=>{if(!le){alert("Please enter the passphrase");return}try{await u(N,le),D(""),ue(""),Y(null),O(!1)}catch(Ae){console.error("Failed to import identity:",Ae),alert(Ae.message||"Failed to import identity")}};return ie.useEffect(()=>{const Ae=()=>{const tt=gt=>{if(gt.type==="HIGHLIGHT_ANNOTATION"&&gt.url===eh(t)){const At=document.querySelector(`[data-annotation-id="${gt.annotationId}"]`);At&&(At.scrollIntoView({behavior:"smooth"}),At.classList.add("highlight"),setTimeout(()=>At.classList.remove("highlight"),3e3))}};return chrome.runtime.onMessage.addListener(tt),()=>chrome.runtime.onMessage.removeListener(tt)};if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage)return Ae()},[t]),console.log("AnnotationUI: Rendering with annotations:",g,"profiles:",x,"loading:",b),Z.jsxs("div",{className:"annotation-ui-container",children:[s&&Z.jsx("div",{className:"error-text",children:s}),y&&Z.jsx("div",{className:"error-text",children:y}),Z.jsx("div",{className:"connected-section",children:Z.jsxs("div",{className:"connected-section-content",children:[Z.jsx("div",{className:"connected-user-info",children:r?Z.jsxs(Z.Fragment,{children:[r.profilePicture&&Z.jsx("img",{src:r.profilePicture,alt:"Profile",className:"profile-picture"}),Z.jsxs("p",{className:"connected-text",children:["Connected: ",r.handle]})]}):Z.jsx("p",{className:"connected-text",children:"Not connected"})}),Z.jsxs("div",{className:"settings-menu-container",children:[Z.jsx("button",{className:"settings-button",onClick:()=>O(!W),children:"⚙️"}),W&&Z.jsx("div",{className:"settings-menu",children:n?Z.jsxs(Z.Fragment,{children:[Z.jsx("button",{className:"settings-menu-button",onClick:Ge,children:"Export Identity"}),Z.jsx("button",{className:"settings-menu-button sign-out-button",onClick:zt,children:"Sign Out"})]}):Z.jsxs("div",{className:"auth-section",children:[Z.jsx("button",{className:"authenticate-button",onClick:dt,children:"Authenticate"}),Z.jsxs("div",{className:"import-section",children:[Z.jsx("textarea",{className:"import-textarea",value:N,onChange:Ae=>D(Ae.target.value),placeholder:"Paste identity to import..."}),Z.jsx("button",{className:"import-button",onClick:et,disabled:!N.trim(),children:"Import Identity"})]})]})})]})]})}),b&&Z.jsx("div",{className:"loading-spinner",children:Z.jsx("span",{children:"Loading annotations..."})}),!e&&Z.jsxs("div",{className:"annotation-input",children:[Z.jsx("div",{ref:se,className:"quill-editor"}),Z.jsx("button",{onClick:Me,className:"annotation-save-button",disabled:!c.trim()||!n||b,children:"Save"})]}),Z.jsx("div",{className:"annotation-list-wrapper",children:Z.jsx(EA,{annotations:g,profiles:x,onDelete:w,onSaveComment:e||!n||b?void 0:v})}),Z.jsx("div",{className:"logo-container",children:Z.jsx("a",{href:"https://citizenx.app",target:"_blank",rel:"noopener noreferrer",children:Z.jsx("img",{src:bA,alt:"CitizenX Logo",className:"citizenx-logo"})})}),S&&Z.jsxs("div",{className:"profile-modal",children:[Z.jsx("h2",{className:"profile-modal-title",children:r?"Update Profile":"Create Profile"}),Z.jsx("input",{type:"text",value:_,onChange:Ae=>I(Ae.target.value),placeholder:"Enter your handle",className:"profile-modal-input"}),Z.jsx("input",{type:"file",accept:"image/*",onChange:Ae=>{var gt;const tt=(gt=Ae.target.files)==null?void 0:gt[0];if(tt){const At=new FileReader;At.onloadend=()=>{F(At.result)},At.readAsDataURL(tt)}},className:"profile-modal-file-input"}),j&&Z.jsx("img",{src:j,alt:"Preview",className:"profile-modal-preview"}),Z.jsxs("div",{className:"profile-modal-buttons",children:[Z.jsx("button",{onClick:Se,className:"profile-modal-save-button",children:"Save Profile"}),Z.jsx("button",{onClick:()=>L(!1),className:"profile-modal-cancel-button",children:"Cancel"})]})]}),M&&Z.jsxs("div",{className:"export-modal",children:[Z.jsx("h2",{className:"export-modal-title",children:"Export Identity"}),Z.jsx("textarea",{className:"export-modal-textarea",value:z,readOnly:!0}),Z.jsx("button",{className:"export-modal-button",onClick:()=>navigator.clipboard.writeText(z),children:"Copy to Clipboard"}),Z.jsx("button",{className:"export-modal-close-button",onClick:()=>G(!1),children:"Close"})]}),Q&&Z.jsxs("div",{className:"profile-modal",children:[Z.jsx("h2",{className:"profile-modal-title",children:Q==="export"?"Export Identity":"Import Identity"}),Z.jsx("input",{type:"password",value:Q==="export"?q:le,onChange:Ae=>{Q==="export"?U(Ae.target.value):ue(Ae.target.value)},placeholder:"Enter passphrase",className:"profile-modal-input"}),Z.jsxs("div",{className:"profile-modal-buttons",children:[Z.jsx("button",{onClick:Q==="export"?pt:Ot,className:"profile-modal-save-button",children:Q==="export"?"Export":"Import"}),Z.jsx("button",{onClick:()=>{Y(null),U(""),ue("")},className:"profile-modal-cancel-button",children:"Cancel"})]})]})]})},AA=()=>{const[t,e]=ie.useState(null),[n,r]=ie.useState(null),[i,s]=ie.useState(!1),o=async()=>{try{const l=await new Promise((a,u)=>{const f=setTimeout(()=>{u(new Error("Timeout: No response from background script"))},5e3);chrome.runtime.sendMessage({action:"getCurrentTabUrl"},d=>{clearTimeout(f),a(d)})});if(l&&l.url){console.log("index.tsx: Fetched current tab URL:",l.url);const a=eh(l.url);a?(e(a),s(l.url.startsWith("chrome-extension://"))):(r("Failed to normalize URL"),e(""),s(!0))}else console.log("index.tsx: No URL received from background script:",(l==null?void 0:l.error)||"Unknown error"),e(""),s(!1)}catch(l){console.error("index.tsx: Failed to get current tab URL:",l),e(""),s(!1)}};return ie.useEffect(()=>(o(),chrome.tabs.onActivated.addListener(()=>{console.log("index.tsx: Tab activated, fetching new URL"),o()}),chrome.windows.onFocusChanged.addListener(l=>{l!==chrome.windows.WINDOW_ID_NONE&&(console.log("index.tsx: Window focus changed, fetching new URL"),o())}),chrome.tabs.onUpdated.addListener((l,a,u)=>{a.url&&(console.log("index.tsx: Tab URL updated, fetching new URL"),o())}),()=>{}),[]),n?Z.jsx("div",{style:{padding:"1rem",color:"#e11d48"},children:n}):t===null?Z.jsx("div",{style:{padding:"1rem"},children:"Loading..."}):Z.jsx(SA,{url:t,isPopupUrl:i})},Oy=document.getElementById("root");if(!Oy)throw new Error("Root container not found");const TA=l1(Oy);TA.render(Z.jsx(AA,{}))});export default kA();
