var Dy=Object.defineProperty;var By=(t,e,n)=>e in t?Dy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jy=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Y=(t,e,n)=>By(t,typeof e!="symbol"?e+"":e,n);import{n as Pi}from"./assets/normalizeUrl.js";var _T=jy((Bt,jt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jg={exports:{}},Oa={},e0={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=Symbol.for("react.element"),Uy=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),qy=Symbol.for("react.profiler"),Fy=Symbol.for("react.provider"),zy=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),Gy=Symbol.for("react.suspense"),Vy=Symbol.for("react.memo"),Ky=Symbol.for("react.lazy"),Id=Symbol.iterator;function Wy(t){return t===null||typeof t!="object"?null:(t=Id&&t[Id]||t["@@iterator"],typeof t=="function"?t:null)}var t0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n0=Object.assign,r0={};function ws(t,e,n){this.props=t,this.context=e,this.refs=r0,this.updater=n||t0}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function i0(){}i0.prototype=ws.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=r0,this.updater=n||t0}var lh=oh.prototype=new i0;lh.constructor=oh;n0(lh,ws.prototype);lh.isPureReactComponent=!0;var Od=Array.isArray,s0=Object.prototype.hasOwnProperty,ah={current:null},o0={key:!0,ref:!0,__self:!0,__source:!0};function l0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)s0.call(e,r)&&!o0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zo,type:t,key:s,ref:o,props:i,_owner:ah.current}}function Zy(t,e){return{$$typeof:zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===zo}function Qy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rd=/\/+/g;function Hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qy(""+t.key):e.toString(36)}function $l(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zo:case Uy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Hu(o,0):r,Od(i)?(n="",t!=null&&(n=t.replace(Rd,"$&/")+"/"),$l(i,e,n,"",function(u){return u})):i!=null&&(uh(i)&&(i=Zy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Od(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Hu(s,l);o+=$l(s,e,n,a,i)}else if(a=Wy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Hu(s,l++),o+=$l(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hl(t,e,n){if(t==null)return t;var r=[],i=0;return $l(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},ql={transition:null},Yy={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:ah};function a0(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:hl,forEach:function(t,e,n){hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hl(t,function(){e++}),e},toArray:function(t){return hl(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=ws;de.Fragment=My;de.Profiler=qy;de.PureComponent=oh;de.StrictMode=$y;de.Suspense=Gy;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yy;de.act=a0;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=n0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ah.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)s0.call(e,a)&&!o0.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:zo,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:zy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fy,_context:t},t.Consumer=t};de.createElement=l0;de.createFactory=function(t){var e=l0.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Hy,render:t}};de.isValidElement=uh;de.lazy=function(t){return{$$typeof:Ky,_payload:{_status:-1,_result:t},_init:Xy}};de.memo=function(t,e){return{$$typeof:Vy,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};de.unstable_act=a0;de.useCallback=function(t,e){return bt.current.useCallback(t,e)};de.useContext=function(t){return bt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};de.useEffect=function(t,e){return bt.current.useEffect(t,e)};de.useId=function(){return bt.current.useId()};de.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return bt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};de.useRef=function(t){return bt.current.useRef(t)};de.useState=function(t){return bt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return bt.current.useTransition()};de.version="18.3.1";e0.exports=de;var ie=e0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=ie,ev=Symbol.for("react.element"),tv=Symbol.for("react.fragment"),nv=Object.prototype.hasOwnProperty,rv=Jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iv={key:!0,ref:!0,__self:!0,__source:!0};function u0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nv.call(e,r)&&!iv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ev,type:t,key:s,ref:o,props:i,_owner:rv.current}}Oa.Fragment=tv;Oa.jsx=u0;Oa.jsxs=u0;Jg.exports=Oa;var Q=Jg.exports,Pc={},c0={exports:{}},$t={},f0={exports:{}},h0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,q){var M=D.length;D.push(q);e:for(;0<M;){var Z=M-1>>>1,J=D[Z];if(0<i(J,q))D[Z]=q,D[M]=J,M=Z;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var q=D[0],M=D.pop();if(M!==q){D[0]=M;e:for(var Z=0,J=D.length,le=J>>>1;Z<le;){var ue=2*(Z+1)-1,se=D[ue],he=ue+1,Ue=D[he];if(0>i(se,M))he<J&&0>i(Ue,se)?(D[Z]=Ue,D[he]=M,Z=he):(D[Z]=se,D[ue]=M,Z=ue);else if(he<J&&0>i(Ue,M))D[Z]=Ue,D[he]=M,Z=he;else break e}}return q}function i(D,q){var M=D.sortIndex-q.sortIndex;return M!==0?M:D.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,d=null,p=3,x=!1,y=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(D){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=D)r(u),q.sortIndex=q.expirationTime,e(a,q);else break;q=n(u)}}function b(D){if(E=!1,c(D),!y)if(n(a)!==null)y=!0,G(T);else{var q=n(u);q!==null&&F(b,q.startTime-D)}}function T(D,q){y=!1,E&&(E=!1,w(O),O=-1),x=!0;var M=p;try{for(c(q),d=n(a);d!==null&&(!(d.expirationTime>q)||D&&!W());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,p=d.priorityLevel;var J=Z(d.expirationTime<=q);q=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(a)&&r(a),c(q)}else r(a);d=n(a)}if(d!==null)var le=!0;else{var ue=n(u);ue!==null&&F(b,ue.startTime-q),le=!1}return le}finally{d=null,p=M,x=!1}}var L=!1,_=null,O=-1,j=5,H=-1;function W(){return!(t.unstable_now()-H<j)}function I(){if(_!==null){var D=t.unstable_now();H=D;var q=!0;try{q=_(!0,D)}finally{q?N():(L=!1,_=null)}}else L=!1}var N;if(typeof v=="function")N=function(){v(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,U=P.port2;P.port1.onmessage=I,N=function(){U.postMessage(null)}}else N=function(){S(I,0)};function G(D){_=D,L||(L=!0,N())}function F(D,q){O=S(function(){D(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,G(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var M=p;p=q;try{return D()}finally{p=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=p;p=D;try{return q()}finally{p=M}},t.unstable_scheduleCallback=function(D,q,M){var Z=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Z+M:Z):M=Z,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=M+J,D={id:f++,callback:q,priorityLevel:D,startTime:M,expirationTime:J,sortIndex:-1},M>Z?(D.sortIndex=M,e(u,D),n(a)===null&&D===n(u)&&(E?(w(O),O=-1):E=!0,F(b,M-Z))):(D.sortIndex=J,e(a,D),y||x||(y=!0,G(T))),D},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(D){var q=p;return function(){var M=p;p=q;try{return D.apply(this,arguments)}finally{p=M}}}})(h0);f0.exports=h0;var sv=f0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov=ie,Mt=sv;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d0=new Set,yo={};function ci(t,e){ss(t,e),ss(t+"Capture",e)}function ss(t,e){for(yo[t]=e,t=0;t<e.length;t++)d0.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dc=Object.prototype.hasOwnProperty,lv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pd={},Dd={};function av(t){return Dc.call(Dd,t)?!0:Dc.call(Pd,t)?!1:lv.test(t)?Dd[t]=!0:(Pd[t]=!0,!1)}function uv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cv(t,e,n,r){if(e===null||typeof e>"u"||uv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,fh);Je[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,fh);Je[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,fh);Je[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cv(e,n,i,r)&&(n=null),r||i===null?av(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=ov.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),Bc=Symbol.for("react.profiler"),p0=Symbol.for("react.provider"),g0=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),jc=Symbol.for("react.suspense"),Uc=Symbol.for("react.suspense_list"),gh=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),m0=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function js(t){return t===null||typeof t!="object"?null:(t=Bd&&t[Bd]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Gu;function Ws(t){if(Gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gu=e&&e[1]||""}return`
`+Gu+t}var Vu=!1;function Ku(t,e){if(!t||Vu)return"";Vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ws(t):""}function fv(t){switch(t.tag){case 5:return Ws(t.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return t=Ku(t.type,!1),t;case 11:return t=Ku(t.type.render,!1),t;case 1:return t=Ku(t.type,!0),t;default:return""}}function Mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Di:return"Portal";case Bc:return"Profiler";case dh:return"StrictMode";case jc:return"Suspense";case Uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g0:return(t.displayName||"Context")+".Consumer";case p0:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gh:return e=t.displayName||null,e!==null?e:Mc(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return Mc(t(e))}catch{}}return null}function hv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mc(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dv(t){var e=y0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pl(t){t._valueTracker||(t._valueTracker=dv(t))}function v0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $c(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w0(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function qc(t,e){w0(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fc(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ud(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fc(t,e,n){(e!=="number"||na(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zs=Array.isArray;function Zi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Md(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Zs(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function x0(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $d(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,b0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pv=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(t){pv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),to[e]=to[t]})});function S0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||to.hasOwnProperty(t)&&to[t]?(""+e).trim():e+"px"}function T0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=S0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var gv=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gc(t,e){if(e){if(gv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Vc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wc=null,Qi=null,Xi=null;function qd(t){if(t=Vo(t)){if(typeof Wc!="function")throw Error(X(280));var e=t.stateNode;e&&(e=ja(e),Wc(t.stateNode,t.type,e))}}function A0(t){Qi?Xi?Xi.push(t):Xi=[t]:Qi=t}function k0(){if(Qi){var t=Qi,e=Xi;if(Xi=Qi=null,qd(t),e)for(t=0;t<e.length;t++)qd(e[t])}}function N0(t,e){return t(e)}function _0(){}var Wu=!1;function C0(t,e,n){if(Wu)return t(e,n);Wu=!0;try{return N0(t,e,n)}finally{Wu=!1,(Qi!==null||Xi!==null)&&(_0(),k0())}}function wo(t,e){var n=t.stateNode;if(n===null)return null;var r=ja(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Zc=!1;if(tr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Zc=!1}function mv(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var no=!1,ra=null,ia=!1,Qc=null,yv={onError:function(t){no=!0,ra=t}};function vv(t,e,n,r,i,s,o,l,a){no=!1,ra=null,mv.apply(yv,arguments)}function wv(t,e,n,r,i,s,o,l,a){if(vv.apply(this,arguments),no){if(no){var u=ra;no=!1,ra=null}else throw Error(X(198));ia||(ia=!0,Qc=u)}}function fi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fd(t){if(fi(t)!==t)throw Error(X(188))}function xv(t){var e=t.alternate;if(!e){if(e=fi(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fd(i),t;if(s===r)return Fd(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function I0(t){return t=xv(t),t!==null?O0(t):null}function O0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=O0(t);if(e!==null)return e;t=t.sibling}return null}var R0=Mt.unstable_scheduleCallback,zd=Mt.unstable_cancelCallback,Ev=Mt.unstable_shouldYield,bv=Mt.unstable_requestPaint,De=Mt.unstable_now,Sv=Mt.unstable_getCurrentPriorityLevel,yh=Mt.unstable_ImmediatePriority,P0=Mt.unstable_UserBlockingPriority,sa=Mt.unstable_NormalPriority,Tv=Mt.unstable_LowPriority,D0=Mt.unstable_IdlePriority,Ra=null,Dn=null;function Av(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Ra,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:_v,kv=Math.log,Nv=Math.LN2;function _v(t){return t>>>=0,t===0?32:31-(kv(t)/Nv|0)|0}var ml=64,yl=4194304;function Qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Qs(l):(s&=o,s!==0&&(r=Qs(s)))}else o=n&~i,o!==0?r=Qs(o):s!==0&&(r=Qs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function Cv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Cv(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Xc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function B0(){var t=ml;return ml<<=1,!(ml&4194240)&&(ml=64),t}function Zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function Iv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function j0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var U0,wh,M0,$0,q0,Yc=!1,vl=[],kr=null,Nr=null,_r=null,xo=new Map,Eo=new Map,xr=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Ms(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vo(e),e!==null&&wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Rv(t,e,n,r,i){switch(e){case"focusin":return kr=Ms(kr,t,e,n,r,i),!0;case"dragenter":return Nr=Ms(Nr,t,e,n,r,i),!0;case"mouseover":return _r=Ms(_r,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xo.set(s,Ms(xo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Eo.set(s,Ms(Eo.get(s)||null,t,e,n,r,i)),!0}return!1}function F0(t){var e=Xr(t.target);if(e!==null){var n=fi(e);if(n!==null){if(e=n.tag,e===13){if(e=L0(n),e!==null){t.blockedOn=e,q0(t.priority,function(){M0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kc=r,n.target.dispatchEvent(r),Kc=null}else return e=Vo(n),e!==null&&wh(e),t.blockedOn=n,!1;e.shift()}return!0}function Gd(t,e,n){Fl(t)&&n.delete(e)}function Pv(){Yc=!1,kr!==null&&Fl(kr)&&(kr=null),Nr!==null&&Fl(Nr)&&(Nr=null),_r!==null&&Fl(_r)&&(_r=null),xo.forEach(Gd),Eo.forEach(Gd)}function $s(t,e){t.blockedOn===e&&(t.blockedOn=null,Yc||(Yc=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Pv)))}function bo(t){function e(i){return $s(i,t)}if(0<vl.length){$s(vl[0],t);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&$s(kr,t),Nr!==null&&$s(Nr,t),_r!==null&&$s(_r,t),xo.forEach(e),Eo.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)F0(n),n.blockedOn===null&&xr.shift()}var Yi=ar.ReactCurrentBatchConfig,la=!0;function Dv(t,e,n,r){var i=be,s=Yi.transition;Yi.transition=null;try{be=1,xh(t,e,n,r)}finally{be=i,Yi.transition=s}}function Bv(t,e,n,r){var i=be,s=Yi.transition;Yi.transition=null;try{be=4,xh(t,e,n,r)}finally{be=i,Yi.transition=s}}function xh(t,e,n,r){if(la){var i=Jc(t,e,n,r);if(i===null)sc(t,e,r,aa,n),Hd(t,r);else if(Rv(i,t,e,n,r))r.stopPropagation();else if(Hd(t,r),e&4&&-1<Ov.indexOf(t)){for(;i!==null;){var s=Vo(i);if(s!==null&&U0(s),s=Jc(t,e,n,r),s===null&&sc(t,e,r,aa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sc(t,e,r,null,n)}}var aa=null;function Jc(t,e,n,r){if(aa=null,t=mh(r),t=Xr(t),t!==null)if(e=fi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return aa=t,null}function z0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sv()){case yh:return 1;case P0:return 4;case sa:case Tv:return 16;case D0:return 536870912;default:return 16}default:return 16}}var br=null,Eh=null,zl=null;function H0(){if(zl)return zl;var t,e=Eh,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return zl=i.slice(t,1<r?1-r:void 0)}function Hl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function Vd(){return!1}function qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wl:Vd,this.isPropagationStopped=Vd,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=qt(xs),Go=Re({},xs,{view:0,detail:0}),jv=qt(Go),Qu,Xu,qs,Pa=Re({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(Qu=t.screenX-qs.screenX,Xu=t.screenY-qs.screenY):Xu=Qu=0,qs=t),Qu)},movementY:function(t){return"movementY"in t?t.movementY:Xu}}),Kd=qt(Pa),Uv=Re({},Pa,{dataTransfer:0}),Mv=qt(Uv),$v=Re({},Go,{relatedTarget:0}),Yu=qt($v),qv=Re({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=qt(qv),zv=Re({},xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hv=qt(zv),Gv=Re({},xs,{data:0}),Wd=qt(Gv),Vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wv[t])?!!e[t]:!1}function Sh(){return Zv}var Qv=Re({},Go,{key:function(t){if(t.key){var e=Vv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?Hl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xv=qt(Qv),Yv=Re({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=qt(Yv),Jv=Re({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),ew=qt(Jv),tw=Re({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=qt(tw),rw=Re({},Pa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iw=qt(rw),sw=[9,13,27,32],Th=tr&&"CompositionEvent"in window,ro=null;tr&&"documentMode"in document&&(ro=document.documentMode);var ow=tr&&"TextEvent"in window&&!ro,G0=tr&&(!Th||ro&&8<ro&&11>=ro),Qd=" ",Xd=!1;function V0(t,e){switch(t){case"keyup":return sw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function lw(t,e){switch(t){case"compositionend":return K0(e);case"keypress":return e.which!==32?null:(Xd=!0,Qd);case"textInput":return t=e.data,t===Qd&&Xd?null:t;default:return null}}function aw(t,e){if(ji)return t==="compositionend"||!Th&&V0(t,e)?(t=H0(),zl=Eh=br=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G0&&e.locale!=="ko"?null:e.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uw[t.type]:e==="textarea"}function W0(t,e,n,r){A0(r),e=ua(e,"onChange"),0<e.length&&(n=new bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var io=null,So=null;function cw(t){sm(t,0)}function Da(t){var e=$i(t);if(v0(e))return t}function fw(t,e){if(t==="change")return e}var Z0=!1;if(tr){var Ju;if(tr){var ec="oninput"in document;if(!ec){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),ec=typeof Jd.oninput=="function"}Ju=ec}else Ju=!1;Z0=Ju&&(!document.documentMode||9<document.documentMode)}function ep(){io&&(io.detachEvent("onpropertychange",Q0),So=io=null)}function Q0(t){if(t.propertyName==="value"&&Da(So)){var e=[];W0(e,So,t,mh(t)),C0(cw,e)}}function hw(t,e,n){t==="focusin"?(ep(),io=e,So=n,io.attachEvent("onpropertychange",Q0)):t==="focusout"&&ep()}function dw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Da(So)}function pw(t,e){if(t==="click")return Da(e)}function gw(t,e){if(t==="input"||t==="change")return Da(e)}function mw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:mw;function To(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dc.call(e,i)||!vn(t[i],e[i]))return!1}return!0}function tp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function np(t,e){var n=tp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tp(n)}}function X0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y0(){for(var t=window,e=na();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=na(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yw(t){var e=Y0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&X0(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=np(n,s);var o=np(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vw=tr&&"documentMode"in document&&11>=document.documentMode,Ui=null,ef=null,so=null,tf=!1;function rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tf||Ui==null||Ui!==na(r)||(r=Ui,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),so&&To(so,r)||(so=r,r=ua(ef,"onSelect"),0<r.length&&(e=new bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ui)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},tc={},J0={};tr&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Ba(t){if(tc[t])return tc[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J0)return tc[t]=e[n];return t}var em=Ba("animationend"),tm=Ba("animationiteration"),nm=Ba("animationstart"),rm=Ba("transitionend"),im=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){im.set(t,e),ci(e,[t])}for(var nc=0;nc<ip.length;nc++){var rc=ip[nc],ww=rc.toLowerCase(),xw=rc[0].toUpperCase()+rc.slice(1);Ur(ww,"on"+xw)}Ur(em,"onAnimationEnd");Ur(tm,"onAnimationIteration");Ur(nm,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(rm,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function sp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wv(r,e,void 0,t),t.currentTarget=null}function sm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;sp(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;sp(i,l,u),s=a}}}if(ia)throw t=Qc,ia=!1,Qc=null,t}function Ne(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var r=t+"__bubble";n.has(r)||(om(e,t,2,!1),n.add(r))}function ic(t,e,n){var r=0;e&&(r|=4),om(n,t,r,e)}var El="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[El]){t[El]=!0,d0.forEach(function(n){n!=="selectionchange"&&(Ew.has(n)||ic(n,!1,t),ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[El]||(e[El]=!0,ic("selectionchange",!1,e))}}function om(t,e,n,r){switch(z0(e)){case 1:var i=Dv;break;case 4:i=Bv;break;default:i=xh}n=i.bind(null,e,n,t),i=void 0,!Zc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}C0(function(){var u=s,f=mh(n),d=[];e:{var p=im.get(t);if(p!==void 0){var x=bh,y=t;switch(t){case"keypress":if(Hl(n)===0)break e;case"keydown":case"keyup":x=Xv;break;case"focusin":y="focus",x=Yu;break;case"focusout":y="blur",x=Yu;break;case"beforeblur":case"afterblur":x=Yu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Mv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ew;break;case em:case tm:case nm:x=Fv;break;case rm:x=nw;break;case"scroll":x=jv;break;case"wheel":x=iw;break;case"copy":case"cut":case"paste":x=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Zd}var E=(e&4)!==0,S=!E&&t==="scroll",w=E?p!==null?p+"Capture":null:p;E=[];for(var v=u,c;v!==null;){c=v;var b=c.stateNode;if(c.tag===5&&b!==null&&(c=b,w!==null&&(b=wo(v,w),b!=null&&E.push(ko(v,b,c)))),S)break;v=v.return}0<E.length&&(p=new x(p,y,null,n,f),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&n!==Kc&&(y=n.relatedTarget||n.fromElement)&&(Xr(y)||y[nr]))break e;if((x||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=u,y=y?Xr(y):null,y!==null&&(S=fi(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(E=Kd,b="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=Zd,b="onPointerLeave",w="onPointerEnter",v="pointer"),S=x==null?p:$i(x),c=y==null?p:$i(y),p=new E(b,v+"leave",x,n,f),p.target=S,p.relatedTarget=c,b=null,Xr(f)===u&&(E=new E(w,v+"enter",y,n,f),E.target=c,E.relatedTarget=S,b=E),S=b,x&&y)t:{for(E=x,w=y,v=0,c=E;c;c=Ti(c))v++;for(c=0,b=w;b;b=Ti(b))c++;for(;0<v-c;)E=Ti(E),v--;for(;0<c-v;)w=Ti(w),c--;for(;v--;){if(E===w||w!==null&&E===w.alternate)break t;E=Ti(E),w=Ti(w)}E=null}else E=null;x!==null&&op(d,p,x,E,!1),y!==null&&S!==null&&op(d,S,y,E,!0)}}e:{if(p=u?$i(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var T=fw;else if(Yd(p))if(Z0)T=gw;else{T=dw;var L=hw}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=pw);if(T&&(T=T(t,u))){W0(d,T,n,f);break e}L&&L(t,p,u),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&Fc(p,"number",p.value)}switch(L=u?$i(u):window,t){case"focusin":(Yd(L)||L.contentEditable==="true")&&(Ui=L,ef=u,so=null);break;case"focusout":so=ef=Ui=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,rp(d,n,f);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":rp(d,n,f)}var _;if(Th)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else ji?V0(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(G0&&n.locale!=="ko"&&(ji||O!=="onCompositionStart"?O==="onCompositionEnd"&&ji&&(_=H0()):(br=f,Eh="value"in br?br.value:br.textContent,ji=!0)),L=ua(u,O),0<L.length&&(O=new Wd(O,t,null,n,f),d.push({event:O,listeners:L}),_?O.data=_:(_=K0(n),_!==null&&(O.data=_)))),(_=ow?lw(t,n):aw(t,n))&&(u=ua(u,"onBeforeInput"),0<u.length&&(f=new Wd("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=_))}sm(d,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wo(t,n),s!=null&&r.unshift(ko(t,s,i)),s=wo(t,e),s!=null&&r.push(ko(t,s,i))),t=t.return}return r}function Ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=wo(n,s),a!=null&&o.unshift(ko(n,a,l))):i||(a=wo(n,s),a!=null&&o.push(ko(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bw=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace(bw,`
`).replace(Sw,"")}function bl(t,e,n){if(e=lp(e),lp(t)!==e&&n)throw Error(X(425))}function ca(){}var nf=null,rf=null;function sf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,Tw=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(t){return ap.resolve(null).then(t).catch(kw)}:of;function kw(t){setTimeout(function(){throw t})}function oc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),bo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bo(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function up(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),On="__reactFiber$"+Es,No="__reactProps$"+Es,nr="__reactContainer$"+Es,lf="__reactEvents$"+Es,Nw="__reactListeners$"+Es,_w="__reactHandles$"+Es;function Xr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=up(t);t!==null;){if(n=t[On])return n;t=up(t)}return e}t=n,n=t.parentNode}return null}function Vo(t){return t=t[On]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function ja(t){return t[No]||null}var af=[],qi=-1;function Mr(t){return{current:t}}function Ce(t){0>qi||(t.current=af[qi],af[qi]=null,qi--)}function ke(t,e){qi++,af[qi]=t.current,t.current=e}var Br={},ht=Mr(Br),Ct=Mr(!1),ni=Br;function os(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function fa(){Ce(Ct),Ce(ht)}function cp(t,e,n){if(ht.current!==Br)throw Error(X(168));ke(ht,e),ke(Ct,n)}function lm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,hv(t)||"Unknown",i));return Re({},n,r)}function ha(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,ni=ht.current,ke(ht,t),ke(Ct,Ct.current),!0}function fp(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=lm(t,e,ni),r.__reactInternalMemoizedMergedChildContext=t,Ce(Ct),Ce(ht),ke(ht,t)):Ce(Ct),ke(Ct,n)}var Xn=null,Ua=!1,lc=!1;function am(t){Xn===null?Xn=[t]:Xn.push(t)}function Cw(t){Ua=!0,am(t)}function $r(){if(!lc&&Xn!==null){lc=!0;var t=0,e=be;try{var n=Xn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,Ua=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),R0(yh,$r),i}finally{be=e,lc=!1}}return null}var Fi=[],zi=0,da=null,pa=0,Kt=[],Wt=0,ri=null,Yn=1,Jn="";function Wr(t,e){Fi[zi++]=pa,Fi[zi++]=da,da=t,pa=e}function um(t,e,n){Kt[Wt++]=Yn,Kt[Wt++]=Jn,Kt[Wt++]=ri,ri=t;var r=Yn;t=Jn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yn=1<<32-gn(e)+i|n<<i|r,Jn=s+t}else Yn=1<<s|n<<i|r,Jn=t}function kh(t){t.return!==null&&(Wr(t,1),um(t,1,0))}function Nh(t){for(;t===da;)da=Fi[--zi],Fi[zi]=null,pa=Fi[--zi],Fi[zi]=null;for(;t===ri;)ri=Kt[--Wt],Kt[Wt]=null,Jn=Kt[--Wt],Kt[Wt]=null,Yn=Kt[--Wt],Kt[Wt]=null}var Ut=null,Pt=null,Le=!1,hn=null;function cm(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Pt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ri!==null?{id:Yn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Pt=null,!0):!1;default:return!1}}function uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cf(t){if(Le){var e=Pt;if(e){var n=e;if(!hp(t,e)){if(uf(t))throw Error(X(418));e=Cr(n.nextSibling);var r=Ut;e&&hp(t,e)?cm(r,n):(t.flags=t.flags&-4097|2,Le=!1,Ut=t)}}else{if(uf(t))throw Error(X(418));t.flags=t.flags&-4097|2,Le=!1,Ut=t}}}function dp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Sl(t){if(t!==Ut)return!1;if(!Le)return dp(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sf(t.type,t.memoizedProps)),e&&(e=Pt)){if(uf(t))throw fm(),Error(X(418));for(;e;)cm(t,e),e=Cr(e.nextSibling)}if(dp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Ut?Cr(t.stateNode.nextSibling):null;return!0}function fm(){for(var t=Pt;t;)t=Cr(t.nextSibling)}function ls(){Pt=Ut=null,Le=!1}function _h(t){hn===null?hn=[t]:hn.push(t)}var Lw=ar.ReactCurrentBatchConfig;function Fs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Tl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pp(t){var e=t._init;return e(t._payload)}function hm(t){function e(w,v){if(t){var c=w.deletions;c===null?(w.deletions=[v],w.flags|=16):c.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=Rr(w,v),w.index=0,w.sibling=null,w}function s(w,v,c){return w.index=c,t?(c=w.alternate,c!==null?(c=c.index,c<v?(w.flags|=2,v):c):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,c,b){return v===null||v.tag!==6?(v=pc(c,w.mode,b),v.return=w,v):(v=i(v,c),v.return=w,v)}function a(w,v,c,b){var T=c.type;return T===Bi?f(w,v,c.props.children,b,c.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vr&&pp(T)===v.type)?(b=i(v,c.props),b.ref=Fs(w,v,c),b.return=w,b):(b=Xl(c.type,c.key,c.props,null,w.mode,b),b.ref=Fs(w,v,c),b.return=w,b)}function u(w,v,c,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==c.containerInfo||v.stateNode.implementation!==c.implementation?(v=gc(c,w.mode,b),v.return=w,v):(v=i(v,c.children||[]),v.return=w,v)}function f(w,v,c,b,T){return v===null||v.tag!==7?(v=ti(c,w.mode,b,T),v.return=w,v):(v=i(v,c),v.return=w,v)}function d(w,v,c){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pc(""+v,w.mode,c),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dl:return c=Xl(v.type,v.key,v.props,null,w.mode,c),c.ref=Fs(w,null,v),c.return=w,c;case Di:return v=gc(v,w.mode,c),v.return=w,v;case vr:var b=v._init;return d(w,b(v._payload),c)}if(Zs(v)||js(v))return v=ti(v,w.mode,c,null),v.return=w,v;Tl(w,v)}return null}function p(w,v,c,b){var T=v!==null?v.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return T!==null?null:l(w,v,""+c,b);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case dl:return c.key===T?a(w,v,c,b):null;case Di:return c.key===T?u(w,v,c,b):null;case vr:return T=c._init,p(w,v,T(c._payload),b)}if(Zs(c)||js(c))return T!==null?null:f(w,v,c,b,null);Tl(w,c)}return null}function x(w,v,c,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(c)||null,l(v,w,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return w=w.get(b.key===null?c:b.key)||null,a(v,w,b,T);case Di:return w=w.get(b.key===null?c:b.key)||null,u(v,w,b,T);case vr:var L=b._init;return x(w,v,c,L(b._payload),T)}if(Zs(b)||js(b))return w=w.get(c)||null,f(v,w,b,T,null);Tl(v,b)}return null}function y(w,v,c,b){for(var T=null,L=null,_=v,O=v=0,j=null;_!==null&&O<c.length;O++){_.index>O?(j=_,_=null):j=_.sibling;var H=p(w,_,c[O],b);if(H===null){_===null&&(_=j);break}t&&_&&H.alternate===null&&e(w,_),v=s(H,v,O),L===null?T=H:L.sibling=H,L=H,_=j}if(O===c.length)return n(w,_),Le&&Wr(w,O),T;if(_===null){for(;O<c.length;O++)_=d(w,c[O],b),_!==null&&(v=s(_,v,O),L===null?T=_:L.sibling=_,L=_);return Le&&Wr(w,O),T}for(_=r(w,_);O<c.length;O++)j=x(_,w,O,c[O],b),j!==null&&(t&&j.alternate!==null&&_.delete(j.key===null?O:j.key),v=s(j,v,O),L===null?T=j:L.sibling=j,L=j);return t&&_.forEach(function(W){return e(w,W)}),Le&&Wr(w,O),T}function E(w,v,c,b){var T=js(c);if(typeof T!="function")throw Error(X(150));if(c=T.call(c),c==null)throw Error(X(151));for(var L=T=null,_=v,O=v=0,j=null,H=c.next();_!==null&&!H.done;O++,H=c.next()){_.index>O?(j=_,_=null):j=_.sibling;var W=p(w,_,H.value,b);if(W===null){_===null&&(_=j);break}t&&_&&W.alternate===null&&e(w,_),v=s(W,v,O),L===null?T=W:L.sibling=W,L=W,_=j}if(H.done)return n(w,_),Le&&Wr(w,O),T;if(_===null){for(;!H.done;O++,H=c.next())H=d(w,H.value,b),H!==null&&(v=s(H,v,O),L===null?T=H:L.sibling=H,L=H);return Le&&Wr(w,O),T}for(_=r(w,_);!H.done;O++,H=c.next())H=x(_,w,O,H.value,b),H!==null&&(t&&H.alternate!==null&&_.delete(H.key===null?O:H.key),v=s(H,v,O),L===null?T=H:L.sibling=H,L=H);return t&&_.forEach(function(I){return e(w,I)}),Le&&Wr(w,O),T}function S(w,v,c,b){if(typeof c=="object"&&c!==null&&c.type===Bi&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case dl:e:{for(var T=c.key,L=v;L!==null;){if(L.key===T){if(T=c.type,T===Bi){if(L.tag===7){n(w,L.sibling),v=i(L,c.props.children),v.return=w,w=v;break e}}else if(L.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vr&&pp(T)===L.type){n(w,L.sibling),v=i(L,c.props),v.ref=Fs(w,L,c),v.return=w,w=v;break e}n(w,L);break}else e(w,L);L=L.sibling}c.type===Bi?(v=ti(c.props.children,w.mode,b,c.key),v.return=w,w=v):(b=Xl(c.type,c.key,c.props,null,w.mode,b),b.ref=Fs(w,v,c),b.return=w,w=b)}return o(w);case Di:e:{for(L=c.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===c.containerInfo&&v.stateNode.implementation===c.implementation){n(w,v.sibling),v=i(v,c.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=gc(c,w.mode,b),v.return=w,w=v}return o(w);case vr:return L=c._init,S(w,v,L(c._payload),b)}if(Zs(c))return y(w,v,c,b);if(js(c))return E(w,v,c,b);Tl(w,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,v!==null&&v.tag===6?(n(w,v.sibling),v=i(v,c),v.return=w,w=v):(n(w,v),v=pc(c,w.mode,b),v.return=w,w=v),o(w)):n(w,v)}return S}var as=hm(!0),dm=hm(!1),ga=Mr(null),ma=null,Hi=null,Ch=null;function Lh(){Ch=Hi=ma=null}function Ih(t){var e=ga.current;Ce(ga),t._currentValue=e}function ff(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ji(t,e){ma=t,Ch=Hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Ch!==t)if(t={context:t,memoizedValue:e,next:null},Hi===null){if(ma===null)throw Error(X(308));Hi=t,ma.dependencies={lanes:0,firstContext:t}}else Hi=Hi.next=t;return e}var Yr=null;function Oh(t){Yr===null?Yr=[t]:Yr.push(t)}function pm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Oh(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function Rh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,Oh(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function Gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function gp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ya(t,e,n,r){var i=t.updateQueue;wr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=u=a=null,l=s;do{var p=l.lane,x=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,E=l;switch(p=e,x=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){d=y.call(x,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(x,d,p):y,p==null)break e;d=Re({},d,p);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else x={eventTime:x,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=x,a=d):f=f.next=x,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);si|=o,t.lanes=o,t.memoizedState=d}}function mp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ko={},Bn=Mr(Ko),_o=Mr(Ko),Co=Mr(Ko);function Jr(t){if(t===Ko)throw Error(X(174));return t}function Ph(t,e){switch(ke(Co,e),ke(_o,t),ke(Bn,Ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}Ce(Bn),ke(Bn,e)}function us(){Ce(Bn),Ce(_o),Ce(Co)}function mm(t){Jr(Co.current);var e=Jr(Bn.current),n=Hc(e,t.type);e!==n&&(ke(_o,t),ke(Bn,n))}function Dh(t){_o.current===t&&(Ce(Bn),Ce(_o))}var Ie=Mr(0);function va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function Bh(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Vl=ar.ReactCurrentDispatcher,uc=ar.ReactCurrentBatchConfig,ii=0,Oe=null,$e=null,ze=null,wa=!1,oo=!1,Lo=0,Iw=0;function st(){throw Error(X(321))}function jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Uh(t,e,n,r,i,s){if(ii=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vl.current=t===null||t.memoizedState===null?Dw:Bw,t=n(r,i),oo){s=0;do{if(oo=!1,Lo=0,25<=s)throw Error(X(301));s+=1,ze=$e=null,e.updateQueue=null,Vl.current=jw,t=n(r,i)}while(oo)}if(Vl.current=xa,e=$e!==null&&$e.next!==null,ii=0,ze=$e=Oe=null,wa=!1,e)throw Error(X(300));return t}function Mh(){var t=Lo!==0;return Lo=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Oe.memoizedState=ze=t:ze=ze.next=t,ze}function rn(){if($e===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=ze===null?Oe.memoizedState:ze.next;if(e!==null)ze=e,$e=t;else{if(t===null)throw Error(X(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ze===null?Oe.memoizedState=ze=t:ze=ze.next=t}return ze}function Io(t,e){return typeof e=="function"?e(t):e}function cc(t){var e=rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((ii&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Oe.lanes|=f,si|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,vn(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fc(t){var e=rn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vn(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ym(){}function vm(t,e){var n=Oe,r=rn(),i=e(),s=!vn(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,$h(Em.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Oo(9,xm.bind(null,n,r,i,e),void 0,null),He===null)throw Error(X(349));ii&30||wm(n,e,i)}return i}function wm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xm(t,e,n,r){e.value=n,e.getSnapshot=r,bm(e)&&Sm(t)}function Em(t,e,n){return n(function(){bm(e)&&Sm(t)})}function bm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function Sm(t){var e=rr(t,1);e!==null&&mn(e,t,1,-1)}function yp(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=Pw.bind(null,Oe,t),[e.memoizedState,t]}function Oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tm(){return rn().memoizedState}function Kl(t,e,n,r){var i=Ln();Oe.flags|=t,i.memoizedState=Oo(1|e,n,void 0,r===void 0?null:r)}function Ma(t,e,n,r){var i=rn();r=r===void 0?null:r;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,r!==null&&jh(r,o.deps)){i.memoizedState=Oo(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=Oo(1|e,n,s,r)}function vp(t,e){return Kl(8390656,8,t,e)}function $h(t,e){return Ma(2048,8,t,e)}function Am(t,e){return Ma(4,2,t,e)}function km(t,e){return Ma(4,4,t,e)}function Nm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _m(t,e,n){return n=n!=null?n.concat([t]):null,Ma(4,4,Nm.bind(null,e,t),n)}function qh(){}function Cm(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lm(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Im(t,e,n){return ii&21?(vn(n,e)||(n=B0(),Oe.lanes|=n,si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function Ow(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=uc.transition;uc.transition={};try{t(!1),e()}finally{be=n,uc.transition=r}}function Om(){return rn().memoizedState}function Rw(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rm(t))Pm(e,n);else if(n=pm(t,e,n,r),n!==null){var i=Et();mn(n,t,r,i),Dm(n,e,r)}}function Pw(t,e,n){var r=Or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rm(t))Pm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,vn(l,o)){var a=e.interleaved;a===null?(i.next=i,Oh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=pm(t,e,i,r),n!==null&&(i=Et(),mn(n,t,r,i),Dm(n,e,r))}}function Rm(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Pm(t,e){oo=wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var xa={readContext:nn,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Dw={readContext:nn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:vp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4194308,4,Nm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kl(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rw.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:yp,useDebugValue:qh,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=yp(!1),e=t[0];return t=Ow.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=Ln();if(Le){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),He===null)throw Error(X(349));ii&30||wm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,vp(Em.bind(null,r,s,t),[t]),r.flags|=2048,Oo(9,xm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=He.identifierPrefix;if(Le){var n=Jn,r=Yn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Iw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bw={readContext:nn,useCallback:Cm,useContext:nn,useEffect:$h,useImperativeHandle:_m,useInsertionEffect:Am,useLayoutEffect:km,useMemo:Lm,useReducer:cc,useRef:Tm,useState:function(){return cc(Io)},useDebugValue:qh,useDeferredValue:function(t){var e=rn();return Im(e,$e.memoizedState,t)},useTransition:function(){var t=cc(Io)[0],e=rn().memoizedState;return[t,e]},useMutableSource:ym,useSyncExternalStore:vm,useId:Om,unstable_isNewReconciler:!1},jw={readContext:nn,useCallback:Cm,useContext:nn,useEffect:$h,useImperativeHandle:_m,useInsertionEffect:Am,useLayoutEffect:km,useMemo:Lm,useReducer:fc,useRef:Tm,useState:function(){return fc(Io)},useDebugValue:qh,useDeferredValue:function(t){var e=rn();return $e===null?e.memoizedState=t:Im(e,$e.memoizedState,t)},useTransition:function(){var t=fc(Io)[0],e=rn().memoizedState;return[t,e]},useMutableSource:ym,useSyncExternalStore:vm,useId:Om,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $a={isMounted:function(t){return(t=t._reactInternals)?fi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Or(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(mn(e,t,i,r),Gl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Or(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(mn(e,t,i,r),Gl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Or(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(mn(e,t,r,n),Gl(e,t,r))}};function wp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(i,s):!0}function Bm(t,e,n){var r=!1,i=Br,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(i=Lt(e)?ni:ht.current,r=e.contextTypes,s=(r=r!=null)?os(t,i):Br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$a,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$a.enqueueReplaceState(e,e.state,null)}function df(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nn(s):(s=Lt(e)?ni:ht.current,i.context=os(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$a.enqueueReplaceState(i,i.state,null),ya(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function cs(t,e){try{var n="",r=e;do n+=fv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Uw=typeof WeakMap=="function"?WeakMap:Map;function jm(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ba||(ba=!0,Tf=r),pf(t,e)},n}function Um(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pf(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ep(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Uw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Yw.bind(null,t,e,n),e.then(t,t))}function bp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var Mw=ar.ReactCurrentOwner,_t=!1;function wt(t,e,n,r){e.child=t===null?dm(e,null,n,r):as(e,t.child,n,r)}function Tp(t,e,n,r,i){n=n.render;var s=e.ref;return Ji(e,i),r=Uh(t,e,n,r,s,i),n=Mh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Le&&n&&kh(e),e.flags|=1,wt(t,e,r,i),e.child)}function Ap(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Zh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mm(t,e,s,r,i)):(t=Xl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=Rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(To(s,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,ir(t,e,i)}return gf(t,e,n,r,i)}function $m(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Vi,Rt),Rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Vi,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(Vi,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ke(Vi,Rt),Rt|=r;return wt(t,e,i,n),e.child}function qm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,r,i){var s=Lt(n)?ni:ht.current;return s=os(e,s),Ji(e,i),n=Uh(t,e,n,r,s,i),r=Mh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Le&&r&&kh(e),e.flags|=1,wt(t,e,n,i),e.child)}function kp(t,e,n,r,i){if(Lt(n)){var s=!0;ha(e)}else s=!1;if(Ji(e,i),e.stateNode===null)Wl(t,e),Bm(e,n,r),df(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nn(u):(u=Lt(n)?ni:ht.current,u=os(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&xp(e,o,r,u),wr=!1;var p=e.memoizedState;o.state=p,ya(e,r,o,i),a=e.memoizedState,l!==r||p!==a||Ct.current||wr?(typeof f=="function"&&(hf(e,n,f,r),a=e.memoizedState),(l=wr||wp(e,n,l,r,p,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:cn(e.type,l),o.props=u,d=e.pendingProps,p=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=nn(a):(a=Lt(n)?ni:ht.current,a=os(e,a));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||p!==a)&&xp(e,o,r,a),wr=!1,p=e.memoizedState,o.state=p,ya(e,r,o,i);var y=e.memoizedState;l!==d||p!==y||Ct.current||wr?(typeof x=="function"&&(hf(e,n,x,r),y=e.memoizedState),(u=wr||wp(e,n,u,r,p,y,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return mf(t,e,n,r,s,i)}function mf(t,e,n,r,i,s){qm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fp(e,n,!1),ir(t,e,s);r=e.stateNode,Mw.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=as(e,t.child,null,s),e.child=as(e,null,l,s)):wt(t,e,l,s),e.memoizedState=r.state,i&&fp(e,n,!0),e.child}function Fm(t){var e=t.stateNode;e.pendingContext?cp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cp(t,e.context,!1),Ph(t,e.containerInfo)}function Np(t,e,n,r,i){return ls(),_h(i),e.flags|=256,wt(t,e,n,r),e.child}var yf={dehydrated:null,treeContext:null,retryLane:0};function vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function zm(t,e,n){var r=e.pendingProps,i=Ie.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke(Ie,i&1),t===null)return cf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=za(o,r,0,null),t=ti(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vf(n),e.memoizedState=yf,t):Fh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $w(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Rr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Rr(l,s):(s=ti(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yf,r}return s=t.child,t=s.sibling,r=Rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fh(t,e){return e=za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&_h(r),as(e,t.child,null,n),t=Fh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $w(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hc(Error(X(422))),Al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=za({mode:"visible",children:r.children},i,0,null),s=ti(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&as(e,t.child,null,o),e.child.memoizedState=vf(o),e.memoizedState=yf,s);if(!(e.mode&1))return Al(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=hc(s,r,void 0),Al(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=He,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rr(t,i),mn(r,t,i,-1))}return Wh(),r=hc(Error(X(421))),Al(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pt=Cr(i.nextSibling),Ut=e,Le=!0,hn=null,t!==null&&(Kt[Wt++]=Yn,Kt[Wt++]=Jn,Kt[Wt++]=ri,Yn=t.id,Jn=t.overflow,ri=e),e=Fh(e,r.children),e.flags|=4096,e)}function _p(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ff(t.return,e,n)}function dc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Hm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_p(t,n,e);else if(t.tag===19)_p(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&va(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&va(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dc(e,!0,n,null,s);break;case"together":dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qw(t,e,n){switch(e.tag){case 3:Fm(e),ls();break;case 5:mm(e);break;case 1:Lt(e.type)&&ha(e);break;case 4:Ph(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(ga,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?zm(t,e,n):(ke(Ie,Ie.current&1),t=ir(t,e,n),t!==null?t.sibling:null);ke(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,n)}return ir(t,e,n)}var Gm,wf,Vm,Km;Gm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};Vm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jr(Bn.current);var s=null;switch(n){case"input":i=$c(t,i),r=$c(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=zc(t,i),r=zc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ca)}Gc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yo.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Ne("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Km=function(t,e,n,r){n!==r&&(e.flags|=4)};function zs(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fw(t,e,n){var r=e.pendingProps;switch(Nh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Lt(e.type)&&fa(),ot(e),null;case 3:return r=e.stateNode,us(),Ce(Ct),Ce(ht),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Nf(hn),hn=null))),wf(t,e),ot(e),null;case 5:Dh(e);var i=Jr(Co.current);if(n=e.type,t!==null&&e.stateNode!=null)Vm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return ot(e),null}if(t=Jr(Bn.current),Sl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[No]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Xs.length;i++)Ne(Xs[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":jd(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Md(r,s),Ne("invalid",r)}Gc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),i=["children",""+l]):yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":pl(r),Ud(r,s,!0);break;case"textarea":pl(r),$d(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ca)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[No]=r,Gm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vc(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xs.length;i++)Ne(Xs[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":jd(t,r),i=$c(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Md(t,r),i=zc(t,r),Ne("invalid",t);break;default:i=r}Gc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?T0(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&b0(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&vo(t,a):typeof a=="number"&&vo(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yo.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ne("scroll",t):a!=null&&hh(t,s,a,o))}switch(n){case"input":pl(t),Ud(t,r,!1);break;case"textarea":pl(t),$d(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ca)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Km(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Jr(Co.current),Jr(Bn.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return ot(e),null;case 13:if(Ce(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Pt!==null&&e.mode&1&&!(e.flags&128))fm(),ls(),e.flags|=98560,s=!1;else if(s=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[On]=e}else ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),s=!1}else hn!==null&&(Nf(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Fe===0&&(Fe=3):Wh())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return us(),wf(t,e),t===null&&Ao(e.stateNode.containerInfo),ot(e),null;case 10:return Ih(e.type._context),ot(e),null;case 17:return Lt(e.type)&&fa(),ot(e),null;case 19:if(Ce(Ie),s=e.memoizedState,s===null)return ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zs(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=va(t),o!==null){for(e.flags|=128,zs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Ie,Ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&De()>fs&&(e.flags|=128,r=!0,zs(s,!1),e.lanes=4194304)}else{if(!r)if(t=va(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return ot(e),null}else 2*De()-s.renderingStartTime>fs&&n!==1073741824&&(e.flags|=128,r=!0,zs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=De(),e.sibling=null,n=Ie.current,ke(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Kh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function zw(t,e){switch(Nh(e),e.tag){case 1:return Lt(e.type)&&fa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return us(),Ce(Ct),Ce(ht),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dh(e),null;case 13:if(Ce(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ie),null;case 4:return us(),null;case 10:return Ih(e.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var kl=!1,ut=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function xf(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Cp=!1;function Gw(t,e){if(nf=la,t=Y0(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,d=t,p=null;t:for(;;){for(var x;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)p=d,d=x;for(;;){if(d===t)break t;if(p===n&&++u===i&&(l=o),p===s&&++f===r&&(a=o),(x=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=x}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(rf={focusedElem:t,selectionRange:n},la=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,S=y.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?E:cn(e.type,E),S);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var c=e.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(b){Pe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return y=Cp,Cp=!1,y}function lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xf(e,n,s)}i=i.next}while(i!==r)}}function qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wm(t){var e=t.alternate;e!==null&&(t.alternate=null,Wm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[No],delete e[lf],delete e[Nw],delete e[_w])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zm(t){return t.tag===5||t.tag===3||t.tag===4}function Lp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ca));else if(r!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}function Sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}var Ze=null,fn=!1;function pr(t,e,n){for(n=n.child;n!==null;)Qm(t,e,n),n=n.sibling}function Qm(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Ra,n)}catch{}switch(n.tag){case 5:ut||Gi(n,e);case 6:var r=Ze,i=fn;Ze=null,pr(t,e,n),Ze=r,fn=i,Ze!==null&&(fn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(fn?(t=Ze,n=n.stateNode,t.nodeType===8?oc(t.parentNode,n):t.nodeType===1&&oc(t,n),bo(t)):oc(Ze,n.stateNode));break;case 4:r=Ze,i=fn,Ze=n.stateNode.containerInfo,fn=!0,pr(t,e,n),Ze=r,fn=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xf(n,e,o),i=i.next}while(i!==r)}pr(t,e,n);break;case 1:if(!ut&&(Gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,pr(t,e,n),ut=r):pr(t,e,n);break;default:pr(t,e,n)}}function Ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hw),e.forEach(function(r){var i=e2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,fn=!1;break e;case 3:Ze=l.stateNode.containerInfo,fn=!0;break e;case 4:Ze=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(Ze===null)throw Error(X(160));Qm(s,o,i),Ze=null,fn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xm(e,t),e=e.sibling}function Xm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),_n(t),r&4){try{lo(3,t,t.return),qa(3,t)}catch(E){Pe(t,t.return,E)}try{lo(5,t,t.return)}catch(E){Pe(t,t.return,E)}}break;case 1:ln(e,t),_n(t),r&512&&n!==null&&Gi(n,n.return);break;case 5:if(ln(e,t),_n(t),r&512&&n!==null&&Gi(n,n.return),t.flags&32){var i=t.stateNode;try{vo(i,"")}catch(E){Pe(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&w0(i,s),Vc(l,o);var u=Vc(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?T0(i,d):f==="dangerouslySetInnerHTML"?b0(i,d):f==="children"?vo(i,d):hh(i,f,d,u)}switch(l){case"input":qc(i,s);break;case"textarea":x0(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Zi(i,!!s.multiple,x,!1):p!==!!s.multiple&&(s.defaultValue!=null?Zi(i,!!s.multiple,s.defaultValue,!0):Zi(i,!!s.multiple,s.multiple?[]:"",!1))}i[No]=s}catch(E){Pe(t,t.return,E)}}break;case 6:if(ln(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Pe(t,t.return,E)}}break;case 3:if(ln(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(E){Pe(t,t.return,E)}break;case 4:ln(e,t),_n(t);break;case 13:ln(e,t),_n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gh=De())),r&4&&Ip(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(u=ut)||f,ln(e,t),ut=u):ln(e,t),_n(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(d=ee=f;ee!==null;){switch(p=ee,x=p.child,p.tag){case 0:case 11:case 14:case 15:lo(4,p,p.return);break;case 1:Gi(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){Pe(r,n,E)}}break;case 5:Gi(p,p.return);break;case 22:if(p.memoizedState!==null){Rp(d);continue}}x!==null?(x.return=p,ee=x):Rp(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=S0("display",o))}catch(E){Pe(t,t.return,E)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){Pe(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ln(e,t),_n(t),r&4&&Ip(t);break;case 21:break;default:ln(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zm(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vo(i,""),r.flags&=-33);var s=Lp(t);Sf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Lp(t);bf(t,l,o);break;default:throw Error(X(161))}}catch(a){Pe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vw(t,e,n){ee=t,Ym(t)}function Ym(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kl;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ut;l=kl;var u=ut;if(kl=o,(ut=a)&&!u)for(ee=i;ee!==null;)o=ee,a=o.child,o.tag===22&&o.memoizedState!==null?Pp(i):a!==null?(a.return=o,ee=a):Pp(i);for(;s!==null;)ee=s,Ym(s),s=s.sibling;ee=i,kl=l,ut=u}Op(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):Op(t)}}function Op(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||qa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&bo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}ut||e.flags&512&&Ef(e)}catch(p){Pe(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Rp(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Pp(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qa(4,e)}catch(a){Pe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Pe(e,i,a)}}var s=e.return;try{Ef(e)}catch(a){Pe(e,s,a)}break;case 5:var o=e.return;try{Ef(e)}catch(a){Pe(e,o,a)}}}catch(a){Pe(e,e.return,a)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var Kw=Math.ceil,Ea=ar.ReactCurrentDispatcher,zh=ar.ReactCurrentOwner,tn=ar.ReactCurrentBatchConfig,me=0,He=null,je=null,Xe=0,Rt=0,Vi=Mr(0),Fe=0,Ro=null,si=0,Fa=0,Hh=0,ao=null,Nt=null,Gh=0,fs=1/0,Qn=null,ba=!1,Tf=null,Ir=null,Nl=!1,Sr=null,Sa=0,uo=0,Af=null,Zl=-1,Ql=0;function Et(){return me&6?De():Zl!==-1?Zl:Zl=De()}function Or(t){return t.mode&1?me&2&&Xe!==0?Xe&-Xe:Lw.transition!==null?(Ql===0&&(Ql=B0()),Ql):(t=be,t!==0||(t=window.event,t=t===void 0?16:z0(t.type)),t):1}function mn(t,e,n,r){if(50<uo)throw uo=0,Af=null,Error(X(185));Ho(t,n,r),(!(me&2)||t!==He)&&(t===He&&(!(me&2)&&(Fa|=n),Fe===4&&Er(t,Xe)),It(t,r),n===1&&me===0&&!(e.mode&1)&&(fs=De()+500,Ua&&$r()))}function It(t,e){var n=t.callbackNode;Lv(t,e);var r=oa(t,t===He?Xe:0);if(r===0)n!==null&&zd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zd(n),e===1)t.tag===0?Cw(Dp.bind(null,t)):am(Dp.bind(null,t)),Aw(function(){!(me&6)&&$r()}),n=null;else{switch(j0(r)){case 1:n=yh;break;case 4:n=P0;break;case 16:n=sa;break;case 536870912:n=D0;break;default:n=sa}n=o1(n,Jm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jm(t,e){if(Zl=-1,Ql=0,me&6)throw Error(X(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var r=oa(t,t===He?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ta(t,r);else{e=r;var i=me;me|=2;var s=t1();(He!==t||Xe!==e)&&(Qn=null,fs=De()+500,ei(t,e));do try{Qw();break}catch(l){e1(t,l)}while(!0);Lh(),Ea.current=s,me=i,je!==null?e=0:(He=null,Xe=0,e=Fe)}if(e!==0){if(e===2&&(i=Xc(t),i!==0&&(r=i,e=kf(t,i))),e===1)throw n=Ro,ei(t,0),Er(t,r),It(t,De()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ww(i)&&(e=Ta(t,r),e===2&&(s=Xc(t),s!==0&&(r=s,e=kf(t,s))),e===1))throw n=Ro,ei(t,0),Er(t,r),It(t,De()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Zr(t,Nt,Qn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=Gh+500-De(),10<e)){if(oa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=of(Zr.bind(null,t,Nt,Qn),e);break}Zr(t,Nt,Qn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kw(r/1960))-r,10<r){t.timeoutHandle=of(Zr.bind(null,t,Nt,Qn),r);break}Zr(t,Nt,Qn);break;case 5:Zr(t,Nt,Qn);break;default:throw Error(X(329))}}}return It(t,De()),t.callbackNode===n?Jm.bind(null,t):null}function kf(t,e){var n=ao;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Ta(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Nf(e)),t}function Nf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function Ww(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Hh,e&=~Fa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Dp(t){if(me&6)throw Error(X(327));es();var e=oa(t,0);if(!(e&1))return It(t,De()),null;var n=Ta(t,e);if(t.tag!==0&&n===2){var r=Xc(t);r!==0&&(e=r,n=kf(t,r))}if(n===1)throw n=Ro,ei(t,0),Er(t,e),It(t,De()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Nt,Qn),It(t,De()),null}function Vh(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(fs=De()+500,Ua&&$r())}}function oi(t){Sr!==null&&Sr.tag===0&&!(me&6)&&es();var e=me;me|=1;var n=tn.transition,r=be;try{if(tn.transition=null,be=1,t)return t()}finally{be=r,tn.transition=n,me=e,!(me&6)&&$r()}}function Kh(){Rt=Vi.current,Ce(Vi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Tw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Nh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fa();break;case 3:us(),Ce(Ct),Ce(ht),Bh();break;case 5:Dh(r);break;case 4:us();break;case 13:Ce(Ie);break;case 19:Ce(Ie);break;case 10:Ih(r.type._context);break;case 22:case 23:Kh()}n=n.return}if(He=t,je=t=Rr(t.current,null),Xe=Rt=e,Fe=0,Ro=null,Hh=Fa=si=0,Nt=ao=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Yr=null}return t}function e1(t,e){do{var n=je;try{if(Lh(),Vl.current=xa,wa){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wa=!1}if(ii=0,ze=$e=Oe=null,oo=!1,Lo=0,zh.current=null,n===null||n.return===null){Fe=1,Ro=e,je=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=bp(o);if(x!==null){x.flags&=-257,Sp(x,o,l,s,e),x.mode&1&&Ep(s,u,e),e=x,a=u;var y=e.updateQueue;if(y===null){var E=new Set;E.add(a),e.updateQueue=E}else y.add(a);break e}else{if(!(e&1)){Ep(s,u,e),Wh();break e}a=Error(X(426))}}else if(Le&&l.mode&1){var S=bp(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Sp(S,o,l,s,e),_h(cs(a,l));break e}}s=a=cs(a,l),Fe!==4&&(Fe=2),ao===null?ao=[s]:ao.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=jm(s,a,e);gp(s,w);break e;case 1:l=a;var v=s.type,c=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ir===null||!Ir.has(c)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Um(s,l,e);gp(s,b);break e}}s=s.return}while(s!==null)}r1(n)}catch(T){e=T,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function t1(){var t=Ea.current;return Ea.current=xa,t===null?xa:t}function Wh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(si&268435455)&&!(Fa&268435455)||Er(He,Xe)}function Ta(t,e){var n=me;me|=2;var r=t1();(He!==t||Xe!==e)&&(Qn=null,ei(t,e));do try{Zw();break}catch(i){e1(t,i)}while(!0);if(Lh(),me=n,Ea.current=r,je!==null)throw Error(X(261));return He=null,Xe=0,Fe}function Zw(){for(;je!==null;)n1(je)}function Qw(){for(;je!==null&&!Ev();)n1(je)}function n1(t){var e=s1(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?r1(t):je=e,zh.current=null}function r1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zw(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,je=null;return}}else if(n=Fw(n,e,Rt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Fe===0&&(Fe=5)}function Zr(t,e,n){var r=be,i=tn.transition;try{tn.transition=null,be=1,Xw(t,e,n,r)}finally{tn.transition=i,be=r}return null}function Xw(t,e,n,r){do es();while(Sr!==null);if(me&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Iv(t,s),t===He&&(je=He=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nl||(Nl=!0,o1(sa,function(){return es(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tn.transition,tn.transition=null;var o=be;be=1;var l=me;me|=4,zh.current=null,Gw(t,n),Xm(n,t),yw(rf),la=!!nf,rf=nf=null,t.current=n,Vw(n),bv(),me=l,be=o,tn.transition=s}else t.current=n;if(Nl&&(Nl=!1,Sr=t,Sa=i),s=t.pendingLanes,s===0&&(Ir=null),Av(n.stateNode),It(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ba)throw ba=!1,t=Tf,Tf=null,t;return Sa&1&&t.tag!==0&&es(),s=t.pendingLanes,s&1?t===Af?uo++:(uo=0,Af=t):uo=0,$r(),null}function es(){if(Sr!==null){var t=j0(Sa),e=tn.transition,n=be;try{if(tn.transition=null,be=16>t?16:t,Sr===null)var r=!1;else{if(t=Sr,Sr=null,Sa=0,me&6)throw Error(X(331));var i=me;for(me|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(ee=u;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:lo(8,f,s)}var d=f.child;if(d!==null)d.return=f,ee=d;else for(;ee!==null;){f=ee;var p=f.sibling,x=f.return;if(Wm(f),f===u){ee=null;break}if(p!==null){p.return=x,ee=p;break}ee=x}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var S=E.sibling;E.sibling=null,E=S}while(E!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lo(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ee=w;break e}ee=s.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var c=o.child;if(o.subtreeFlags&2064&&c!==null)c.return=o,ee=c;else e:for(o=v;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qa(9,l)}}catch(T){Pe(l,l.return,T)}if(l===o){ee=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ee=b;break e}ee=l.return}}if(me=i,$r(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Ra,t)}catch{}r=!0}return r}finally{be=n,tn.transition=e}}return!1}function Bp(t,e,n){e=cs(n,e),e=jm(t,e,1),t=Lr(t,e,1),e=Et(),t!==null&&(Ho(t,1,e),It(t,e))}function Pe(t,e,n){if(t.tag===3)Bp(t,t,n);else for(;e!==null;){if(e.tag===3){Bp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=cs(n,t),t=Um(e,t,1),e=Lr(e,t,1),t=Et(),e!==null&&(Ho(e,1,t),It(e,t));break}}e=e.return}}function Yw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Xe&n)===n&&(Fe===4||Fe===3&&(Xe&130023424)===Xe&&500>De()-Gh?ei(t,0):Hh|=n),It(t,e)}function i1(t,e){e===0&&(t.mode&1?(e=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):e=1);var n=Et();t=rr(t,e),t!==null&&(Ho(t,e,n),It(t,n))}function Jw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),i1(t,n)}function e2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),i1(t,n)}var s1;s1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,qw(t,e,n);_t=!!(t.flags&131072)}else _t=!1,Le&&e.flags&1048576&&um(e,pa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wl(t,e),t=e.pendingProps;var i=os(e,ht.current);Ji(e,n),i=Uh(null,e,r,t,i,n);var s=Mh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,ha(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rh(e),i.updater=$a,e.stateNode=i,i._reactInternals=e,df(e,r,t,n),e=mf(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&kh(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=n2(r),t=cn(r,t),i){case 0:e=gf(null,e,r,t,n);break e;case 1:e=kp(null,e,r,t,n);break e;case 11:e=Tp(null,e,r,t,n);break e;case 14:e=Ap(null,e,r,cn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),gf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),kp(t,e,r,i,n);case 3:e:{if(Fm(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gm(t,e),ya(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cs(Error(X(423)),e),e=Np(t,e,r,n,i);break e}else if(r!==i){i=cs(Error(X(424)),e),e=Np(t,e,r,n,i);break e}else for(Pt=Cr(e.stateNode.containerInfo.firstChild),Ut=e,Le=!0,hn=null,n=dm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===i){e=ir(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return mm(e),t===null&&cf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sf(r,i)?o=null:s!==null&&sf(r,s)&&(e.flags|=32),qm(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&cf(e),null;case 13:return zm(t,e,n);case 4:return Ph(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=as(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Tp(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ke(ga,r._currentValue),r._currentValue=o,s!==null)if(vn(s.value,o)){if(s.children===i.children&&!Ct.current){e=ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=er(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ff(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ff(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ji(e,n),i=nn(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=cn(r,e.pendingProps),i=cn(r.type,i),Ap(t,e,r,i,n);case 15:return Mm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Wl(t,e),e.tag=1,Lt(r)?(t=!0,ha(e)):t=!1,Ji(e,n),Bm(e,r,i),df(e,r,i,n),mf(null,e,r,!0,t,n);case 19:return Hm(t,e,n);case 22:return $m(t,e,n)}throw Error(X(156,e.tag))};function o1(t,e){return R0(t,e)}function t2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new t2(t,e,n,r)}function Zh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n2(t){if(typeof t=="function")return Zh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===gh)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Zh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ti(n.children,i,s,e);case dh:o=8,i|=8;break;case Bc:return t=Jt(12,n,e,i|2),t.elementType=Bc,t.lanes=s,t;case jc:return t=Jt(13,n,e,i),t.elementType=jc,t.lanes=s,t;case Uc:return t=Jt(19,n,e,i),t.elementType=Uc,t.lanes=s,t;case m0:return za(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p0:o=10;break e;case g0:o=9;break e;case ph:o=11;break e;case gh:o=14;break e;case vr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ti(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function za(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=m0,t.lanes=n,t.stateNode={isHidden:!1},t}function pc(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function gc(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qh(t,e,n,r,i,s,o,l,a){return t=new r2(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(s),t}function i2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function l1(t){if(!t)return Br;t=t._reactInternals;e:{if(fi(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Lt(n))return lm(t,n,e)}return e}function a1(t,e,n,r,i,s,o,l,a){return t=Qh(n,r,!0,t,i,s,o,l,a),t.context=l1(null),n=t.current,r=Et(),i=Or(n),s=er(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,Ho(t,i,r),It(t,r),t}function Ha(t,e,n,r){var i=e.current,s=Et(),o=Or(i);return n=l1(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(mn(t,i,o,s),Gl(t,i,o)),o}function Aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xh(t,e){jp(t,e),(t=t.alternate)&&jp(t,e)}function s2(){return null}var u1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yh(t){this._internalRoot=t}Ga.prototype.render=Yh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Ha(t,e,null,null)};Ga.prototype.unmount=Yh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){Ha(null,t,null,null)}),e[nr]=null}};function Ga(t){this._internalRoot=t}Ga.prototype.unstable_scheduleHydration=function(t){if(t){var e=$0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&F0(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Up(){}function o2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Aa(o);s.call(u)}}var o=a1(e,r,t,0,null,!1,!1,"",Up);return t._reactRootContainer=o,t[nr]=o.current,Ao(t.nodeType===8?t.parentNode:t),oi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Aa(a);l.call(u)}}var a=Qh(t,0,!1,null,null,!1,!1,"",Up);return t._reactRootContainer=a,t[nr]=a.current,Ao(t.nodeType===8?t.parentNode:t),oi(function(){Ha(e,a,n,r)}),a}function Ka(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Aa(o);l.call(a)}}Ha(e,o,t,i)}else o=o2(n,e,t,i,r);return Aa(o)}U0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qs(e.pendingLanes);n!==0&&(vh(e,n|1),It(e,De()),!(me&6)&&(fs=De()+500,$r()))}break;case 13:oi(function(){var r=rr(t,1);if(r!==null){var i=Et();mn(r,t,1,i)}}),Xh(t,1)}};wh=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=Et();mn(e,t,134217728,n)}Xh(t,134217728)}};M0=function(t){if(t.tag===13){var e=Or(t),n=rr(t,e);if(n!==null){var r=Et();mn(n,t,e,r)}Xh(t,e)}};$0=function(){return be};q0=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Wc=function(t,e,n){switch(e){case"input":if(qc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ja(r);if(!i)throw Error(X(90));v0(r),qc(r,i)}}}break;case"textarea":x0(t,n);break;case"select":e=n.value,e!=null&&Zi(t,!!n.multiple,e,!1)}};N0=Vh;_0=oi;var l2={usingClientEntryPoint:!1,Events:[Vo,$i,ja,A0,k0,Vh]},Hs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a2={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I0(t),t===null?null:t.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||s2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Ra=_l.inject(a2),Dn=_l}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l2;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(X(200));return i2(t,e,null,n)};$t.createRoot=function(t,e){if(!Jh(t))throw Error(X(299));var n=!1,r="",i=u1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qh(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,Ao(t.nodeType===8?t.parentNode:t),new Yh(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=I0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return oi(t)};$t.hydrate=function(t,e,n){if(!Va(e))throw Error(X(200));return Ka(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=u1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=a1(e,null,t,1,n??null,i,!1,s,o),t[nr]=e.current,Ao(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ga(e)};$t.render=function(t,e,n){if(!Va(e))throw Error(X(200));return Ka(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Va(t))throw Error(X(40));return t._reactRootContainer?(oi(function(){Ka(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};$t.unstable_batchedUpdates=Vh;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Va(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Ka(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function c1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c1)}catch(t){console.error(t)}}c1(),c0.exports=$t;var u2=c0.exports,Mp=u2;Pc.createRoot=Mp.createRoot,Pc.hydrateRoot=Mp.hydrateRoot;function c2(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ed={exports:{}};ed.exports;(function(t){(function(){function e(r,i){return i?c2(r):r.slice?e[s(r)]:function(o,l){r(o={exports:{}}),e[s(l)]=o.exports};function s(o){return o.split("/").slice(-1).toString().replace(".js","")}}var n=t;e(function(r){String.random=function(s,o){var l="";for(s=s||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";s-- >0;)l+=o.charAt(Math.floor(Math.random()*o.length));return l},String.match=function(s,o){var l,a;return typeof s!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},l=o["="]||o["*"]||o[">"]||o["<"],s===l?!0:a!==o["="]?!1:(l=o["*"]||o[">"],s.slice(0,(l||"").length)===l?!0:a!==o["*"]?!1:a!==o[">"]&&a!==o["<"]?s>=o[">"]&&s<=o["<"]:a!==o[">"]&&s>=o[">"]||a!==o["<"]&&s<=o["<"]))},String.hash=function(s,o){if(typeof s=="string"){if(o=o||0,!s.length)return o;for(var l=0,a=s.length,u;l<a;++l)u=s.charCodeAt(l),o=(o<<5)-o+u,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(s){return s?s instanceof Object&&s.constructor===Object||Object.prototype.toString.call(s).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(s,o){for(var l in s)if(i.call(s,l)&&(!o||o.indexOf(l)==-1))return!1;return!0},Object.keys=Object.keys||function(s){var o=[];for(var l in s)i.call(s,l)&&o.push(l);return o},function(){var s,o=setTimeout,l=0,a=0,u=typeof setImmediate!=""+s&&setImmediate||function(d,p){return typeof MessageChannel==""+s?o:((d=new MessageChannel).port1.onmessage=function(x){x.data==""&&p()},function(x){p=x,d.port2.postMessage("")})}(),f=o.check=o.check||typeof performance!=""+s&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(d){if(o.hold>=f.now()-l&&a++<3333){d();return}u(function(){l=f.now(),d()},a=0)}}(),function(){var s=setTimeout,o=s.turn=s.turn||function(p){l.push(p)==1&&a(d)},l=o.s=[],a=s.poll,u=0,f,d=function(){(f=l[u++])&&f(),(u==l.length||u==99)&&(l=o.s=l.slice(u),u=0),l.length&&a(d)}}(),function(){var s,o=setTimeout,l=o.turn;(o.each=o.each||function(a,u,f,d){d=d||9,function p(x,y,E){if(y=(x=(a||[]).splice(0,d)).length){for(var S=0;S<y&&s===(E=u(x[S]));S++);if(s===E){l(p);return}}f&&f(E)}()})()}()})(e,"./shim"),e(function(r){r.exports=function i(f,o,l){if(!f)return{to:i};var a,u=typeof o=="function",f=(this.tag||(this.tag={}))[f]||u&&(this.tag[f]={tag:f,to:i._={next:function(p){var x;(x=this.to)&&x.next(p)}}});if(u){var d={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:f,on:this,as:l};return(d.back=f.last||f).to=d,f.last=d}return(f=f.to)&&a!==o&&f.next(o),f}})(e,"./onto"),e(function(r){r.exports=function(i){return i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"&&i!=1/0&&i!=-1/0&&i===i||!!i&&typeof i["#"]=="string"&&Object.keys(i).length===1&&i["#"]}})(e,"./valid"),e(function(r){e("./shim");function i(){var f=+new Date;return a<f?(o=0,a=f+i.drift):a=f+(o+=1)/l+i.drift}i.drift=0;var s=-1/0,o=0,l=999,a=s,u;i.is=function(f,d,p){var x=d&&f&&f._&&f._[">"]||p;if(x)return typeof(x=x[d])=="number"?x:s},i.ify=function(f,d,p,x,y){(f=f||{})._=f._||{},y&&(f._["#"]=y);var E=f._[">"]||(f._[">"]={});return u!==d&&d!=="_"&&(typeof p=="number"&&(E[d]=p),u!==x&&(f[d]=x)),f},r.exports=i})(e,"./state"),e(function(r){e("./shim");function i(s){var o={s:{}},l=o.s;s=s||{max:999,age:1e3*9},o.check=function(u){return l[u]?a(u):!1};var a=o.track=function(u){var f=l[u]||(l[u]={});return f.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,s.age+9)),a.ed&&a.ed(u),f};return o.drop=function(u){o.to=null,o.now=+new Date;var f=Object.keys(l);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(f,function(d){var p=l[d];p&&(u||s.age)>o.now-p.was||delete l[d]},0,99)},o}r.exports=i})(e,"./dup"),e(function(r){e("./onto"),r.exports=function(o,l){if(this.on){var a=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var f=o["#"]||o,u=(this.tag||"")[f];return u?(l&&(u=this.on(f,l),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},a)),!0):void 0}var f=l&&l["#"]||i(9);if(!o)return f;var d=this.on(f,o,l);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},a),f}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(r){function i(y){return y instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:y}):new i(y)}i.is=function(y){return y instanceof i||y&&y._&&y===y._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},e("./shim"),i.valid=e("./valid"),i.state=e("./state"),i.on=e("./onto"),i.dup=e("./dup"),i.ask=e("./ask"),function(){i.create=function(N){N.root=N.root||N,N.graph=N.graph||{},N.on=N.on||i.on,N.ask=N.ask||i.ask,N.dup=N.dup||i.dup();var P=N.$.opt(N.opt);return N.once||(N.on("in",y,N),N.on("out",y,N),N.on("put",w,N),i.on("create",N),N.on("create",N)),N.once=1,P};function y(N){if(N){if(N.out===y){this.to.next(N);return}var P=this,U=P.as,G=U.at||U,F=G.$,D=G.dup,q,M=N.DBG;if((q=N["#"])||(q=N["#"]=o(9)),!D.check(q)){if(D.track(q),q=N._,N._=typeof q=="function"?q:function(){},N.$&&N.$===(N.$._||"").$||(N.$=F),N["@"]&&!N.put&&c(N),!G.ask(N["@"],N))if(M&&(M.u=+new Date),N.put){E(N);return}else N.get&&i.on.get(N,F);M&&(M.uc=+new Date),P.to.next(N),M&&(M.ua=+new Date),!(N.nts||N.NTS)&&(N.out=y,G.on("out",N),M&&(M.ue=+new Date))}}}function E(N){if(N){var P=N._||"",U=P.root=((P.$=N.$||"")._||"").root;if(N["@"]&&P.faith&&!P.miss){N.out=y,U.on("out",N);return}P.latch=U.hatch,P.match=U.hatch=[];var G=N.put,F=P.DBG=N.DBG,D=+new Date;if(W=W||D,!(G["#"]&&G["."])){F&&(F.p=D),P["#"]=N["#"],P.msg=N,P.all=0,P.stun=1;var q=Object.keys(G);console.STAT&&console.STAT(D,((F||P).pk=+new Date)-D,"put sort");var M=0,Z,J,le,ue,se,he,Ue;(function Se(dt){if(Z!=M){if(Z=M,!(le=q[M])){console.STAT&&console.STAT(D,((F||P).pd=+new Date)-D,"put"),v(P);return}(ue=G[le])?(Ue=ue._)?le!==Ue["#"]?he=T+L(le)+"soul not same.":(se=Ue[">"])||(he=T+L(le)+"no state."):he=T+L(le)+"no meta.":he=T+L(le)+"no node.",J=Object.keys(ue||{})}if(he){N.err=P.err=he,v(P);return}var zt=0,Ge;for(dt=dt||0;dt++<9&&(Ge=J[zt++]);)if(Ge!=="_"){var pt=ue[Ge],et=se[Ge];if(d===et){he=T+L(Ge)+"on"+L(le)+"no state.";break}if(!a(pt)){he=T+L(Ge)+"on"+L(le)+"bad "+typeof pt+L(pt);break}S(pt,Ge,le,et,N),++H}if((J=J.slice(zt)).length){l(Se);return}++M,J=null,Se(dt)})()}}}i.on.put=E;function S(N,P,U,G,F){var D=F._||"",q=D.root,M=q.graph,Z,J=M[U]||p,le=u(J,P,1),ue=J[P],se=D.DBG;(Z=console.STAT)&&(!M[U]||!ue)&&(Z.has=(Z.has||0)+1);var he=j();if(G>he){setTimeout(function(){S(N,P,U,G,F)},(Z=G-he)>O?O:Z),console.STAT&&console.STAT((se||D).Hf=+new Date,Z,"future");return}if(!(G<le)&&!(!D.faith&&G===le&&(N===ue||_(N)<=_(ue))&&!D.miss)){D.stun++;var Ue=F["#"]+D.all++,Se={toString:function(){return Ue},_:D};Se.toJSON=Se.toString,q.dup.track(Se)["#"]=F["#"],se&&(se.ph=se.ph||+new Date),q.on("put",{"#":Se,"@":F["@"],put:{"#":U,".":P,":":N,">":G},ok:F.ok,_:D})}}function w(N){var P;(P=(N._||"").DBG)&&(P.pa=+new Date,P.pm=P.pm||+new Date);var U=this,G=U.as,F=G.graph,D=N._,q=N.put,M=q["#"],Z=q["."],J=q[":"],le=q[">"];N["#"];var ue;(ue=D.msg)&&(ue=ue.put)&&(ue=ue[M])&&f(ue,Z,le,J,M),F[M]=f(F[M],Z,le,J,M),(ue=(G.next||"")[M])&&ue.on("in",N),v(D),U.to.next(N)}function v(N,P){var U;if(!N.stop&&!(!N.err&&0<--N.stun)&&(N.stop=1,!!(U=N.root))){var G=N.match;G.end=1,G===U.hatch&&(!(G=N.latch)||G.end?delete U.hatch:U.hatch=G),N.hatch&&N.hatch(),setTimeout.each(N.match,function(F){F&&F()}),!(!(P=N.msg)||N.err||P.err)&&(P.out=y,N.root.on("out",P),I())}}function c(N){var P=N["@"]||"",U;if(!(U=P._)){var G=(G=N.$)&&(G=G._)&&(G=G.root)&&(G=G.dup);if(!(G=G.check(P)))return;N["@"]=G["#"]||N["@"];return}U.acks=(U.acks||0)+1,(U.err=N.err)&&(N["@"]=U["#"],v(U)),U.ok=N.ok||U.ok,!U.stop&&!U.crack&&(U.crack=U.match&&U.match.push(function(){b(U)})),b(U)}function b(N){!N||!N.root||N.stun||N.acks!==N.all||N.root.on("in",{"@":N["#"],err:N.err,ok:N.err?d:N.ok||{"":1}})}var T="Error: Invalid graph!",L=function(N){return" '"+(""+N).slice(0,9)+"...' "},_=JSON.stringify,O=2147483647,j=i.state,H=0,W,I=function(){H>999&&H/-(W-(W=+new Date))>1&&(i.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),I=function(){H=0})}}(),function(){i.on.get=function(E,S){var w=S._,v=E.get,c=v["#"],b=w.graph[c],T=v["."],L=w.next||(w.next={}),_=L[c],O=E._||{},j=O.DBG=E.DBG;if(j&&(j.g=+new Date),!b)return w.on("get",E);if(T){if((typeof T!="string"||d===b[T])&&!((_||"").next||"")[T]){w.on("get",E);return}b=f({},T,u(b,T),b[T],c)}b&&y(E,b),w.on("get",E)};function y(E,S){var w=+new Date,v=E._||{},c=v.DBG=E.DBG,b=E["#"],T=o(9),L=Object.keys(S||"").sort(),_=((S||"")._||"")["#"];L.length;var O=E.$._.root,j=S===O.graph[_];console.STAT&&console.STAT(w,((c||v).gk=+new Date)-w,"got keys"),S&&function H(){w=+new Date;for(var W=0,I,N={},P;W<9&&(I=L[W++]);)f(N,I,u(S,I),S[I],_);L=L.slice(W),(P={})[_]=N,N=P;var U;j&&(U=function(){},U.ram=U.faith=!0),P=L.length,console.STAT&&console.STAT(w,-(w-(w=+new Date)),"got copied some"),c&&(c.ga=+new Date),O.on("in",{"@":b,"#":T,put:N,"%":P?T=o(9):d,$:O.$,_:U,DBG:c,FOO:1}),console.STAT&&console.STAT(w,+new Date-w,"got in"),P&&setTimeout.turn(H)}(),S||O.on("in",{"@":E["#"]})}i.on.get.ack=y}(),function(){i.chain.opt=function(y){y=y||{};var E=this,S=E._,w=y.peers||y;return Object.plain(y)||(y={}),Object.plain(S.opt)||(S.opt=y),typeof w=="string"&&(w=[w]),Object.plain(S.opt.peers)||(S.opt.peers={}),w instanceof Array&&(y.peers={},w.forEach(function(v){var c={};c.id=c.url=v,y.peers[v]=S.opt.peers[v]=S.opt.peers[v]||c})),s(y,function v(c){var b=this[c];if(this&&this.hasOwnProperty(c)||typeof b=="string"||Object.empty(b)){this[c]=b;return}b&&b.constructor!==Object&&!(b instanceof Array)||s(b,v)}),S.opt.from=y,i.on("opt",S),S.opt.uuid=S.opt.uuid||function(c){return i.state().toString(36).replace(".","")+String.random(c||12)},E}}();var s=function(y,E){Object.keys(y).forEach(E,y)},o=String.random,l=setTimeout.turn,a=i.valid,u=i.state.is,f=i.state.ify,d,p={},x;i.log=function(){return!i.log.off&&x.log.apply(x,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(y,E,S){return(S=i.log.once)[y]=S[y]||0,S[y]++||i.log(E)},typeof window<"u"&&((window.GUN=window.Gun=i).window=window);try{typeof n<"u"&&(n.exports=i)}catch{}r.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(x=console).only=function(y,E){return x.only.i&&y===x.only.i&&x.only.i++&&(x.log.apply(x,arguments)||E)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(r){var i=e("./root");i.chain.back=function(l,a){var u;if(l=l||1,l===-1||l===1/0)return this._.root.$;if(l===1)return(this._.back||this._).$;var f=this,d=f._;if(typeof l=="string"&&(l=l.split(".")),l instanceof Array){var p=0,x=l.length,u=d;for(p;p<x;p++)u=(u||s)[l[p]];return o!==u?a?f:u:(u=d.back)?u.$.back(l,a):void 0}if(typeof l=="function"){for(var y,u={back:d};(u=u.back)&&o===(y=l(u,a)););return y}return typeof l=="number"?(d.back||d).$.back(l-1):this};var s={},o})(e,"./back"),e(function(r){var i=e("./root");i.chain.chain=function(v){var c=this,b=c._,T=new(v||c).constructor(c),L=T._,_;return L.root=_=b.root,L.id=++_.once,L.back=c._,L.on=i.on,L.on("in",i.on.in,L),L.on("out",i.on.out,L),T};function s(v){var c,b=this.as,T=b.back,L=b.root,_;if(v.$||(v.$=b.$),this.to.next(v),b.err){b.on("in",{put:b.put=d,$:b.$});return}if(c=v.get){if(L.pass&&(L.pass[b.id]=b),b.lex&&Object.keys(b.lex).forEach(function(O){_[O]=b.lex[O]},_=v.get=v.get||{}),c["#"]||b.soul){if(c["#"]=c["#"]||b.soul,v["#"]||(v["#"]=p(9)),T=L.$.get(c["#"])._,c=c["."]){if(y(T.put,c)&&(_=T.ask&&T.ask[c],(T.ask||(T.ask={}))[c]=T.$.get(c)._,T.on("in",{get:c,put:{"#":T.soul,".":c,":":T.put[c],">":S(L.graph[T.soul],c)}}),_))return}else{if(_=T.ask&&T.ask[""],(T.ask||(T.ask={}))[""]=T,d!==T.put&&(T.on("in",T),_))return;v.$=T.$}return L.ask(u,v),L.on("in",v)}if(c["."])return b.get?(v={get:{".":b.get},$:b.$},(T.ask||(T.ask={}))[b.get]=v.$._,T.on("out",v)):(v={get:b.lex?v.get:{},$:b.$},T.on("out",v));if((b.ask||(b.ask={}))[""]=b,b.get)return c["."]=b.get,(T.ask||(T.ask={}))[b.get]=v.$._,T.on("out",v)}return T.on("out",v)}i.on.out=s;function o(v,c){c=c||this.as;var b=c.root,T=v.$||(v.$=c.$),L=(T||"")._||f,_=v.put||"",O=_["#"],j=_["."],H=d!==_["="]?_["="]:_[":"],W=_[">"]||-1/0,I;if(d!==v.put&&(d===_["#"]||d===_["."]||d===_[":"]&&d===_["="]||d===_[">"])){if(!x(_)){if(!(O=((_||"")._||"")["#"])){console.log("chain not yet supported for",_,"...",v,c);return}return T=c.root.$.get(O),setTimeout.each(Object.keys(_).sort(),function(N){N=="_"||d===(W=S(_,N))||c.on("in",{$:T,put:{"#":O,".":N,"=":_[N],">":W},VIA:v})})}c.on("in",{$:L.back.$,put:{"#":O=L.back.soul,".":j=L.has||L.get,"=":_,">":S(L.back.put,j)},via:v});return}(v.seen||"")[c.id]||((v.seen||(v.seen=function(){}))[c.id]=c,c!==L&&(Object.keys(v).forEach(function(N){_[N]=v[N]},_={}),_.get=c.get||_.get,!c.soul&&!c.has?_.$$$=_.$$$||c.$:L.soul&&(_.$=c.$,_.$$=_.$$||L.$),v=_),a(v,c),(c.soul||v.$$)&&W>=S(b.graph[O],j)&&((_=b.$.get(O)._).put=w(_.put,j,W,H,O)),!L.soul&&W>=S(b.graph[O],j)&&(I=(b.$.get(O)._.next||"")[j])&&(I.put=H,typeof(_=x(H))=="string"&&(I.put=b.$.get(_)._.put||H)),this.to&&this.to.next(v),c.any&&setTimeout.each(Object.keys(c.any),function(N){(N=c.any[N])&&N(v)},0,99),c.echo&&setTimeout.each(Object.keys(c.echo),function(N){(N=c.echo[N])&&N.on("in",v)},0,99),((v.$$||"")._||L).soul&&(I=c.next)&&(I=I[j])&&(_={},Object.keys(v).forEach(function(N){_[N]=v[N]}),_.$=(v.$$||v.$).get(_.get=j),delete _.$$,delete _.$$$,I.on("in",_)),l(v,c))}i.on.in=o;function l(v,c){if(c=c||this.as||v.$._,!(v.$$&&this!==i.on)&&!(!v.put||c.soul)){var b=v.put||"",T=b["="]||b[":"],j,L=c.root,_=L.$.get(b["#"]).get(b["."])._;if(typeof(T=x(T))!="string"){this===i.on&&((_.echo||(_.echo={}))[c.id]=c);return}if(!((_.echo||(_.echo={}))[c.id]&&!(L.pass||"")[c.id])){if(j=L.pass){if(j[T+c.id])return;j[T+c.id]=1}(_.echo||(_.echo={}))[c.id]=c,c.has&&(c.link=T);var O=L.$.get(_.link=T)._;(O.echo||(O.echo={}))[_.id]=_;var j=c.ask||"";(j[""]||c.lex)&&O.on("out",{get:{"#":T}}),setTimeout.each(Object.keys(j),function(H,W){!H||!(W=j[H])||W.on("out",{get:{"#":T,".":H}})},0,99)}}}i.on.link=l;function a(v,c){var b=v.put||"",T=d!==b["="]?b["="]:b[":"],L=c.root,_,O;if(d===T){if(c.soul&&d!==c.put||(O=(v.$$||v.$||"")._||"",v["@"]&&(d!==O.put||d!==c.put)))return;(_=c.link||v.linked)&&delete(L.$.get(_)._.echo||"")[c.id],c.has&&(c.link=null),c.put=d,setTimeout.each(Object.keys(c.next||""),function(j,H){(H=c.next[j])&&(_&&delete(L.$.get(_).get(j)._.echo||"")[H.id],H.on("in",{get:j,put:d,$:H.$}))},0,99);return}c.soul||v.$$||(_=x(T),O=v.$._||"",!((_===O.link||c.has&&!O.link)&&!((L.pass||"")[c.id]&&typeof _!="string"))&&(delete(O.echo||"")[c.id],a({get:c.get,put:d,$:v.$,linked:v.linked=v.linked||O.link},c)))}i.on.unlink=a;function u(v,c){var b=this.as,T=b.$._;T.root;var L=b.get||"",_=(v.put||"")[L["#"]]||"";if(!v.put||typeof L["."]=="string"&&d===_[L["."]]){if(d!==T.put||!T.soul&&!T.has)return;T.ack=(T.ack||0)+1,T.on("in",{get:T.get,put:T.put=d,$:T.$,"@":v["@"]});return}(v._||{}).miss=1,i.on.put(v)}var f={},d,p=String.random,x=i.valid,y=function(v,c){return v&&Object.prototype.hasOwnProperty.call(v,c)},E=i.state,S=E.is,w=E.ify})(e,"./chain"),e(function(r){var i=e("./root");i.chain.get=function(d,p,x){var y,E;if(typeof d=="string"){if(d.length==0)return(y=this.chain())._.err={err:i.log("0 length key!",d)},p&&p.call(y,y._.err),y;var S=this,w=S._,v=w.next||a;(y=v[d])||(y=d&&s(d,S)),y=y&&y.$}else if(typeof d=="function"){let O=function(j,H,W){if(!O.stun&&!((F=b.pass)&&!F[T])){var I=j.$._,N=(j.$$||"")._,P=(N||I).put,U=!I.has&&!I.soul,G={},F;if((U||f===P)&&(P=f===((F=j.put)||"")["="]?f===(F||"")[":"]?F:F[":"]:F["="]),typeof(F=i.valid(P))=="string"&&(P=f===(F=b.$.get(F)._.put)?c.not?f:P:F),!(c.not&&f===P)){if(f===c.stun){if((F=b.stun)&&F.on&&(w.$.back(function(D){if(F.on(""+D.id,G={}),(G.run||0)<O.id)return G}),!G.run&&F.on(""+I.id,G={}),!G.run&&N&&F.on(""+N.id,G={}),O.id>G.run&&((!G.stun||G.stun.end)&&(G.stun=F.on("stun"),G.stun=G.stun&&G.stun.last),G.stun&&!G.stun.end))){(G.stun.add||(G.stun.add={}))[T]=function(){O(j,H,1)};return}if(f===P&&(W=0),(F=b.hatch)&&!F.end&&f===c.hatch&&!W){if(L[I.$._.id])return;L[I.$._.id]=1,F.push(function(){O(j,H,1)});return}L={}}if(b.pass){if(b.pass[T+I.id])return;b.pass[T+I.id]=1}if(c.on){c.ok.call(I.$,P,I.get,j,H||O);return}if(c.v2020){c.ok(j,H||O);return}Object.keys(j).forEach(function(D){F[D]=j[D]},F={}),j=F,j.put=P,c.ok.call(c.as,j,H||O)}}};if(p===!0)return o(this,d,p,x),this;y=this;var w=y._,c=p||{},b=w.root,T;c.at=w,c.ok=d;var L={};return O.at=w,(w.any||(w.any={}))[T=String.random(7)]=O,O.off=function(){O.stun=1,w.any&&delete w.any[T]},O.rid=l,O.id=c.run||++b.once,E=b.pass,(b.pass={})[T]=1,c.out=c.out||{get:{}},w.on("out",c.out),b.pass=E,y}else{if(typeof d=="number")return this.get(""+d,p,x);if(typeof(E=u(d))=="string")return this.get(E,p,x);(E=this.get.next)&&(y=E(this,d))}return y?(p&&typeof p=="function"&&y.get(p,x),y):((y=this.chain())._.err={err:i.log("Invalid get request!",d)},p&&p.call(y,y._.err),y)};function s(d,p){var x=p._,y=x.next,E=p.chain(),S=E._;return y||(y=x.next={}),y[S.get=d]=S,p===x.root.$?S.soul=d:(x.soul||x.has)&&(S.has=d),S}function o(d,p,x,y){var E=d._,S=0,w;return(w=E.soul||E.link)?p(w,y,E):E.jam?E.jam.push([p,y]):(E.jam=[[p,y]],d.get(function(c,b){if(!(f===c.put&&!E.root.opt.super&&(w=Object.keys(E.root.opt.peers).length)&&++S<=w)){b.rid(c);var T=(T=c.$)&&T._||{},L=0,_;for(w=E.jam,delete E.jam;_=w[L++];){var O=_[0];_=_[1],O&&O(T.link||T.soul||i.valid(c.put)||((c.put||{})._||{})["#"],_,c,b)}}},{out:{get:{".":!0}}}),d)}function l(d){var p=this.at||this.on;if(!d||p.soul||p.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){p.map;var x;if((x=this.seen||(this.seen={}))[d])return!0;x[d]=!0}}var a={},u=i.valid,f})(e,"./get"),e(function(r){var i=e("./root");i.chain.put=function(y,E,S){var w=this,v=w._,c=v.root;S=S||{},S.root=v.root,S.run||(S.run=c.once),s(S,v.id),S.ack=S.ack||E,S.via=S.via||w,S.data=S.data||y,S.soul||(S.soul=v.soul||typeof E=="string"&&E);var b=S.state=S.state||i.state();return typeof y=="function"?(y(function(T){S.data=T,w.put(u,u,S)}),w):S.soul?(S.$=c.$.get(S.soul),S.todo=[{it:S.data,ref:S.$}],S.turn=S.turn||d,S.ran=S.ran||o,function T(){var L=S.todo,_=L.pop(),O=_.it;_.ref&&_.ref._.id;var j,H,W,I,N;if(s(S,_.ref),(I=_.todo)&&(H=I.pop(),O=O[H],I.length&&L.push(_)),H&&(L.path||(L.path=[])).push(H),!(j=p(O))&&!(N=i.is(O))){if(!Object.plain(O)){o.err(S,"Invalid data: "+a(O)+" at "+(S.via.back(function(F){F.get&&I.push(F.get)},I=[])||I.join("."))+"."+(L.path||[]).join("."));return}for(var P=S.seen||(S.seen=[]),U=P.length;U--;)if(O===(I=P[U]).it){j=O=I.link;break}}if(H&&j)_.node=x(_.node,H,b,O);else{let F=function(D,q){var M=W.link["#"];q&&(q.off(),q.rid(D));var Z=M||D.soul||(I=(D.$$||D.$)._||"").soul||I.link||((I=I.put||"")._||"")["#"]||I["#"]||((I=D.put||"")&&D.$$?I["#"]:(I["="]||I[":"]||"")["#"]);if(!M&&s(S,D.$),!Z&&!_.link["#"]){(_.wait||(_.wait=[])).push(function(){F(D,q)});return}Z||(Z=[],(D.$$||D.$).back(function(J){if(I=J.soul||J.link)return Z.push(I);Z.push(J.get)}),Z=Z.reverse().join("/")),W.link["#"]=Z,!N&&(((S.graph||(S.graph={}))[Z]=W.node||(W.node={_:{}}))._["#"]=Z),delete S.wait[G],W.wait&&setTimeout.each(W.wait,function(J){J&&J()}),S.ran(S)};if(!S.seen){o.err(S,"Data at root of graph must be a node (an object).");return}S.seen.push(W={it:O,link:{},todo:N?[]:Object.keys(O).sort().reverse(),path:(L.path||[]).slice(),up:_}),_.node=x(_.node,H,b,W.link),!N&&W.todo.length&&L.push(W);var G=S.seen.length;(S.wait||(S.wait={}))[G]="",I=(W.ref=N?O:H?_.ref.get(H):_.ref)._,(I=O&&(O._||"")["#"]||I.soul||I.link)?F({soul:I}):W.ref.get(F,{run:S.run,v2020:1,out:{get:{".":" "}}})}if(!L.length)return S.ran(S);S.turn(T)}(),w):(l(S),w)};function s(y,E){if(E){E=(E._||"").id||E;var S=y.root.stun||(y.root.stun={on:i.on}),w={},v;y.stun||(y.stun=S.on("stun",function(){})),(v=S.on(""+E))&&v.the.last.next(w),!(w.run>=y.run)&&S.on(""+E,function(c){if(y.stun.end){this.off(),this.to.next(c);return}c.run=c.run||y.run,c.stun=c.stun||y.stun})}}function o(y){if(y.err){o.end(y.stun,y.root);return}if(!(y.todo.length||y.end||!Object.empty(y.wait))){y.end=1;var E=y.$.back(-1)._,S=E.root,w=E.ask(function(T){S.on("ack",T),T.err&&!T.lack&&i.log(T),++v>(y.acks||0)&&this.off(),y.ack&&y.ack(T,this)},y.opt),v=0,c=y.stun,b;(b=function(){c&&(o.end(c,S),setTimeout.each(Object.keys(c=c.add||""),function(T){(T=c[T])&&T()}))}).hatch=b,y.ack&&!y.ok&&(y.ok=y.acks||9),y.via._.on("out",{put:y.out=y.graph,ok:y.ok&&{"@":y.ok+1},opt:y.opt,"#":w,_:b})}}o.end=function(y,E){y.end=f,y.the.to===y&&y===y.the.last&&delete E.stun,y.off()},o.err=function(y,E){(y.ack||f).call(y,y.out={err:y.err=i.log(E)}),y.ran(y)};function l(y){var E=y.via._,S;y.via=y.via.back(function(w){if(w.soul||!w.get)return w.$;S=y.data,(y.data={})[w.get]=S}),(!y.via||!y.via._.soul)&&(y.via=E.root.$.get(((y.data||"")._||"")["#"]||E.$.back("opt.uuid")())),y.via.put(y.data,y.ack,y)}function a(y,E){return y&&(E=y.constructor)&&E.name||typeof y}var u,f=function(){},d=setTimeout.turn,p=i.valid,x=i.state.ify})(e,"./put"),e(function(r){var i=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),r.exports=i})(e,"./index"),e(function(r){var i=e("./index");i.chain.on=function(l,a,u,f){var d=this,p=d._;p.root;var x;if(typeof l=="string")return a?(x=p.on(l,a,u||p,f),u&&u.$&&(u.subs||(u.subs=[])).push(x),d):p.on(l);var y=a;return(y=y===!0?{change:!0}:y||{}).not=1,y.on=1,d.get(l,y),d},i.chain.once=function(l,a){if(a=a||{},!l)return s(this);var u=this,f=u._,d=f.root;f.put;var p=String.random(7),x;return u.get(function(y,E,S,w){var v=this,c=v._,b=c.one||(c.one={});if(w.stun||b[p]==="")return;if((x=i.valid(y))===!0){T();return}if(typeof x=="string")return;clearTimeout((f.one||"")[p]),clearTimeout(b[p]),b[p]=setTimeout(T,a.wait||99);function T(L){if(!c.has&&!c.soul&&(c={put:y,get:E}),o===(x=c.put)&&(x=((S.$$||"")._||"").put),typeof i.valid(x)=="string"&&(x=d.$.get(x)._.put,x===o&&!L)){b[p]=setTimeout(function(){T(1)},a.wait||99);return}w.stun||b[p]!==""&&(b[p]="",(f.soul||f.has)&&w.off(),l.call(v,x,c.get),clearTimeout(b[p]))}},{on:1}),u};function s(l,a,u){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(u=l.chain())._.nix=l.once(function(f,d){u._.on("in",this._)}),u._.lex=l._.lex,u}i.chain.off=function(){var l=this,a=l._,u,f=a.back;if(f)return a.ack=0,(u=f.next)&&u[a.get]&&delete u[a.get],(u=f.any)&&(delete f.any,f.any={}),(u=f.ask)&&delete u[a.get],(u=f.put)&&delete u[a.get],(u=a.soul)&&delete f.root.graph[u],(u=a.map)&&Object.keys(u).forEach(function(d,p){p=u[d],p.link&&f.root.$.get(p.link).off()}),(u=a.next)&&Object.keys(u).forEach(function(d,p){p=u[d],p.$.off()}),a.on("off",{}),l};var o})(e,"./on"),e(function(r){var i=e("./index"),s=i.chain.get.next;i.chain.get.next=function(u,f){var d;return Object.plain(f)?(d=((d=f["#"])||"")["="]||d)?u.get(d):((d=u.chain()._).lex=f,u.on("in",function(p){String.match(p.get||(p.put||"")["."],f["."]||f["#"]||f)&&d.on("in",p),this.to.next(p)}),d.$):(s||l)(u,f)},i.chain.map=function(u,f,d){var p=this,x=p._,y,E;return Object.plain(u)&&(y=u["."]?u:{".":u},u=a),u?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),E=p.chain(),p.map().on(function(S,w,v,c){var b=(u||l).call(this,S,w,v,c);if(a!==b){if(S===b)return E._.on("in",v);if(i.is(b))return E._.on("in",b._);var T={};Object.keys(v.put).forEach(function(L){T[L]=v.put[L]},T),T["="]=b,E._.on("in",{get:w,put:T})}}),E):((E=x.each)||((x.each=E=p.chain())._.lex=y||E._.lex||x.lex,E._.nix=p.back("nix"),p.on("in",o,E._)),E)};function o(u){this.to.next(u);var f=this.as,d=u.$,p=d._,x=u.put,y;!p.soul&&!u.$$||(y=f.lex)&&!String.match(u.get||(x||"")["."],y["."]||y["#"]||y)||i.on.link(u,f)}var l=function(){},a})(e,"./map"),e(function(r){var i=e("./index");i.chain.set=function(s,o,l){var a=this,u=a.back(-1),f,d;return o=o||function(){},l=l||{},l.item=l.item||s,(f=((s||"")._||"")["#"])&&((s={})["#"]=f),typeof(d=i.valid(s))=="string"?a.get(f=d).put(s,o,l):i.is(s)?(a.put(function(p){s.get(function(x,y,E){if(!x)return o.call(a,{err:i.log('Only a node can be linked! Not "'+E.put+'"!')});(d={})[x]={"#":x},p(d)},!0)}),s):(Object.plain(s)&&(s=u.get(f=a.back("opt.uuid")()).put(s)),a.get(f||u.back("opt.uuid")(7)).put(s,o,l))}})(e,"./set"),e(function(r){e("./shim");var i=function(){},s=JSON.parseAsync||function(u,f,d){var p,x=+new Date;try{f(p,JSON.parse(u,d),o.sucks(+new Date-x))}catch(y){f(y)}},o=JSON.stringifyAsync||function(u,f,d,p){var x,y=+new Date;try{f(x,JSON.stringify(u,d,p),o.sucks(+new Date-y))}catch(E){f(E)}};o.sucks=function(u){u>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=i)};function l(u){var f=function(){},d=u.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var p=setTimeout.turn||setTimeout,x=u.dup,y=x.check,E=x.track,S=f.hear=function(c,b){if(c){if(d.max<=c.length)return f.say({dam:"!",err:"Message too big!"},b);f===this&&(S.d+=c.length||0,++S.c);var T=b.SH=+new Date,L=c[0],_;if(L==="["){s(c,function(O,j){if(O||!j)return f.say({dam:"!",err:"DAM JSON parse error."},b);console.STAT&&console.STAT(+new Date,j.length,"# on hear batch");var H=d.puff;(function W(){for(var I=+new Date,N=0,P;N<H&&(P=j[N++]);)f.hear(P,b);j=j.slice(N),console.STAT&&console.STAT(I,+new Date-I,"hear loop"),w(b),j.length&&p(W,0)})()}),c="";return}if(L==="{"||(c["#"]||Object.plain(c))&&(_=c)){if(_)return S.one(_,b,T);s(c,function(O,j){if(O||!j)return f.say({dam:"!",err:"DAM JSON parse error."},b);S.one(j,b,T)});return}}};S.one=function(c,b,W){var L,_,O,j,H;if(c.DBG&&(c.DBG=H={DBG:c.DBG}),H&&(H.h=W),H&&(H.hp=+new Date),(L=c["#"])||(L=c["#"]=String.random(9)),!(O=y(L))&&(_=c["##"],!(_&&(O=c["@"]||c.get&&L)&&x.check(j=O+_)))){if((c._=function(){}).via=f.leap=b,(O=c["><"])&&typeof O=="string"&&O.slice(0,99).split(",").forEach(function(I){this[I]=1},c._.yo={}),O=c.dam){(O=f.hear[O])&&O(c,b,u),E(L);return}(O=c.ok)&&(c._.near=O["/"]);var W=+new Date;H&&(H.is=W),b.SI=L,E.ed=function(I){L===I&&(E.ed=0,(I=x.s[L])&&(I.via=b,c.get&&(I.it=c)))},u.on("in",f.last=c),H&&(H.hd=+new Date),console.STAT&&console.STAT(W,+new Date-W,c.get?"msg get":c.put?"msg put":"msg"),E(L),j&&E(j),f.leap=f.last=null}},S.c=S.d=0,function(){var c=0,b;f.hash=function(_,O){var j,H,W,I=+new Date;o(_.put,function N(P,U){var G=(H||(H=W=U||"")).slice(0,32768);if(j=String.hash(G,j),H=H.slice(32768),H){p(N,0);return}console.STAT&&console.STAT(I,+new Date-I,"say json+hash"),_._.$put=W,_["##"]=j,f.say(_,O),delete _._.$put},T)};function T(_,O){var j;return O instanceof Object?(Object.keys(O).sort().forEach(L,{to:j={},on:O}),j):O}function L(_){this.to[_]=this.on[_]}f.say=function(_,O){var j;if((j=this)&&(j=j.to)&&j.next&&j.next(_),!_)return!1;var H,W,I,N=_["@"],P=_._||(_._=function(){}),U=_.DBG,G=+new Date;if(P.y=P.y||G,O||U&&(U.y=G),(H=_["#"])||(H=_["#"]=String.random(9)),!b&&E(H),!(W=_["##"])&&a!==_.put&&!P.via&&N){f.hash(_,O);return}if(!O&&N&&(O=(j=x.s[N])&&(j.via||(j=j.it)&&(j=j._)&&j.via)||(j=f.last)&&N===j["#"]&&f.leap),!O&&N)return x.s[N]?void 0:(console.STAT&&console.STAT(+new Date,++c,"total no peer to ack to"),!1);if(N&&!_.put&&!W&&((x.s[N]||"").it||"")["##"])return!1;if(!O&&f.way)return f.way(_);if(U&&(U.yh=+new Date),!(I=P.raw)){f.raw(_,O);return}if(U&&(U.yr=+new Date),!O||!O.id){if(!Object.plain(O||d.peers))return!1;var G=+new Date;d.puff;var F=d.peers,D=Object.keys(O||d.peers||{});console.STAT&&console.STAT(G,+new Date-G,"peer keys"),function Z(){var J=+new Date;b=1;var le=P.raw;P.raw=I;for(var ue=0,se;ue<9&&(se=(D||"")[ue++]);)(se=F[se]||(O||"")[se])&&f.say(_,se);P.raw=le,b=0,D=D.slice(ue),console.STAT&&console.STAT(J,+new Date-J,"say loop"),D.length&&(p(Z,0),N&&E(N))}();return}if(!O.wire&&f.wire&&f.wire(O),H!==O.last){if(O.last=H,O===P.via||(j=P.yo)&&(j[O.url]||j[O.pid]||j[O.id]))return!1;if(console.STAT&&console.STAT(G,((U||P).yp=+new Date)-(P.y||G),"say prep"),!b&&N&&E(N),O.batch){if(O.tail=(j=O.tail||0)+I.length,O.tail<=d.pack){O.batch+=(j?",":"")+I;return}w(O)}O.batch="[";var q=+new Date;setTimeout(function(){console.STAT&&console.STAT(q,+new Date-q,"0ms TO"),w(O)},d.gap),v(I,O),console.STAT&&N===O.SI&&console.STAT(G,+new Date-O.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(_,O){if(!_)return"";var j=_._||{},H,W;if(W=j.raw)return W;if(typeof _=="string")return _;var I=_["##"],N=_["@"];if(I&&N){if(!j.via&&y(N+I))return!1;if(W=(x.s[N]||"").it){if(I===W["##"])return!1;W["##"]||(W["##"]=I)}}if(!_.dam&&!_["@"]){var P=0,U=[];W=d.peers;for(var G in W){var F=W[G];if(U.push(F.url||F.pid||F.id),++P>6)break}P>1&&(_["><"]=U.join())}if(_.put&&(W=_.ok)&&(_.ok={"@":(W["@"]||1)-1,"/":W["/"]==_._.near?f.near:W["/"]}),H=j.$put){W={},Object.keys(_).forEach(function(q){W[q]=_[q]}),W.put=":])([:",o(W,function(q,M){if(!q){var Z=+new Date;W=M.indexOf('"put":":])([:"'),D(a,M=M.slice(0,W+6)+H+M.slice(W+14)),console.STAT&&console.STAT(Z,+new Date-Z,"say slice")}});return}o(_,D);function D(q,M){q||(j.raw=M,f.say(_,O))}}}();function w(c){var b=c.batch,T=typeof b=="string";if(T&&(b+="]"),c.batch=c.tail=null,!!b&&!(T?3>b.length:!b.length)){if(!T)try{b=b.length===1?b[0]:JSON.stringify(b)}catch(L){return d.log("DAM JSON stringify error",L)}b&&v(b,c)}}function v(c,b){try{var T=b.wire;b.say?b.say(c):T.send&&T.send(c),f.say.d+=c.length||0,++f.say.c}catch{(b.queue=b.queue||[]).push(c)}}return f.near=0,f.hi=function(c){var b=c.wire,T;if(!b){f.wire(c.length&&{url:c,id:c}||c);return}c.id?d.peers[c.url||c.id]=c:(T=c.id=c.id||c.url||String.random(9),f.say({dam:"?",pid:u.opt.pid},d.peers[T]=c),delete x.s[c.last]),c.met||(f.near++,c.met=+new Date,u.on("hi",c)),T=c.queue,c.queue=[],setTimeout.each(T||[],function(L){v(L,c)},0,9)},f.bye=function(c){c.met&&--f.near,delete c.met,u.on("bye",c);var b=+new Date;b=b-(c.met||b),f.bye.time=((f.bye.time||b)+b)/2},f.hear["!"]=function(c,b){d.log("Error:",c.err)},f.hear["?"]=function(c,b){c.pid&&(b.pid||(b.pid=c.pid),c["@"])||(f.say({dam:"?",pid:d.pid,"@":c["#"]},b),delete x.s[b.last])},f.hear.mob=function(c,b){if(c.peers){var T=Object.keys(c.peers),L=T[Math.random()*T.length>>0];L&&(f.bye(b),f.hi(L))}},u.on("create",function(c){c.opt.pid=c.opt.pid||String.random(9),this.to.next(c),c.on("out",f.say)}),u.on("bye",function(c,b){c=d.peers[c.id||c]||c,this.to.next(c),c.bye?c.bye():(b=c.wire)&&b.close&&b.close(),delete d.peers[c.id],c.wire=null}),u.on("bye",function(c,b){this.to.next(c),(b=console.STAT)&&(b.peers=f.near),(b=c.url)&&setTimeout(function(){},d.lack||9e3)}),u.on("hi",function(c,b){if(this.to.next(c),(b=console.STAT)&&(b.peers=f.near),!d.super){var T=Object.keys(u.next||"");T.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(T,function(L){var _=u.next[L];if(d.super||(_.ask||"")[""]){f.say({get:{"#":L}},c);return}setTimeout.each(Object.keys(_.ask||""),function(O){O&&f.say({"##":String.hash((u.graph[L]||"")[O]),get:{"#":L,".":O}},c)})})}}),f}var a;try{r.exports=l}catch{}})(e,"./mesh"),e(function(r){var i=e("./index");i.Mesh=e("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var l=o.opt;if(l.WebSocket===!1)return;var a=i.window||{},u=l.WebSocket||a.WebSocket||a.webkitWebSocket||a.mozWebSocket;if(!u)return;l.WebSocket=u;var f=l.mesh=l.mesh||i.Mesh(o);f.wire||l.wire,f.wire=l.wire=d;function d(E){try{if(!E||!E.url)return w&&w(E);var S=E.url.replace(/^http/,"ws"),w=E.wire=new l.WebSocket(S);return w.onclose=function(){x(E),l.mesh.bye(E)},w.onerror=function(v){x(E)},w.onopen=function(){l.mesh.hi(E)},w.onmessage=function(v){v&&l.mesh.hear(v.data||v,E)},w}catch{l.mesh.bye(E)}}setTimeout(function(){!l.super&&o.on("out",{dam:"hi"})},1);var p=2*999;function x(E){clearTimeout(E.defer),l.peers[E.url]&&(y&&E.retry<=0||(E.retry=(E.retry||l.retry+1||60)-(-E.tried+(E.tried=+new Date)<p*4?1:0),E.defer=setTimeout(function S(){if(y&&y.hidden)return setTimeout(S,p);d(E)},p)))}var y=""+s!=typeof document&&document});var s})(e,"./websocket"),e(function(r){if(!(typeof Gun>"u")){var i=function(){},s;try{s=(Gun.window||i).localStorage}catch{}s||(Gun.log("Warning: No localStorage exists to persist data to!"),s={setItem:function(l,a){this[l]=a},removeItem:function(l){delete this[l]},getItem:function(l){return this[l]}});var o=JSON.stringifyAsync||function(l,a,u,f){var d;try{a(d,JSON.stringify(l,u,f))}catch(p){a(p)}};Gun.on("create",function l(a){this.to.next(a);var u=a.opt;a.graph;var f=[],d,p,x,y;if(u.localStorage===!1)return;u.prefix=u.file||"gun/";try{d=l[u.prefix]=l[u.prefix]||JSON.parse(x=s.getItem(u.prefix))||{}}catch{d=l[u.prefix]={}}x=(x||"").length,a.on("get",function(S){this.to.next(S);var w=S.get,v,c,b,T;!w||!(v=w["#"])||(c=d[v]||T,c&&(b=w["."])&&!Object.plain(b)&&(c=Gun.state.ify({},b,Gun.state.is(c,b),c[b],v)),Gun.on.get.ack(S,c))}),a.on("put",function(S){this.to.next(S);var w=S.put,v=w["#"],c=w["."],b=S["#"],T=S.ok||"";if(d[v]=Gun.state.ify(d[v],c,w[">"],w[":"],v),y&&x>4999880){a.on("in",{"@":b,err:"localStorage max!"});return}!S["@"]&&(!S._.via||Math.random()<T["@"]/T["/"])&&f.push(b),!p&&(p=setTimeout(E,9+x/333))});function E(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(E,99);return}var S=f;clearTimeout(p),p=!1,f=[],o(d,function(w,v){try{!w&&s.setItem(u.prefix,v)}catch(c){w=y=c||"localStorage failure"}w&&(Gun.log(w+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),a.on("localStorage:error",{err:w,get:u.prefix,put:d})),x=v.length,setTimeout.each(S,function(c){a.on("in",{"@":c,err:w,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var W;if(""+W!=typeof Gun){var e=function(I){console.warn("Warning! Deprecated internal utility will break in next version:",I)},n=Gun;n.fn=n.fn||{is:function(I){return e("fn"),!!I&&typeof I=="function"}},n.bi=n.bi||{is:function(I){return e("bi"),I instanceof Boolean||typeof I=="boolean"}},n.num=n.num||{is:function(I){return e("num"),!r(I)&&(I-parseFloat(I)+1>=0||I===1/0||I===-1/0)}},n.text=n.text||{is:function(I){return e("text"),typeof I=="string"}},n.text.ify=n.text.ify||function(I){return e("text.ify"),n.text.is(I)?I:typeof JSON<"u"?JSON.stringify(I):I&&I.toString?I.toString():I},n.text.random=n.text.random||function(I,N){e("text.random");var P="";for(I=I||24,N=N||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";I>0;)P+=N.charAt(Math.floor(Math.random()*N.length)),I--;return P},n.text.match=n.text.match||function(I,N){var P,U;return e("text.match"),typeof I!="string"?!1:(typeof N=="string"&&(N={"=":N}),N=N||{},P=N["="]||N["*"]||N[">"]||N["<"],I===P?!0:U!==N["="]?!1:(P=N["*"]||N[">"]||N["<"],I.slice(0,(P||"").length)===P?!0:U!==N["*"]?!1:U!==N[">"]&&U!==N["<"]?I>=N[">"]&&I<=N["<"]:U!==N[">"]&&I>=N[">"]||U!==N["<"]&&I<=N["<"]))},n.text.hash=n.text.hash||function(I,N){if(e("text.hash"),typeof I=="string"){if(N=N||0,!I.length)return N;for(var P=0,U=I.length,G;P<U;++P)G=I.charCodeAt(P),N=(N<<5)-N+G,N|=0;return N}},n.list=n.list||{is:function(I){return e("list"),I instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(I){return e("list.sort"),function(N,P){return!N||!P?0:(N=N[I],P=P[I],N<P?-1:N>P?1:0)}},n.list.map=n.list.map||function(I,N,P){return e("list.map"),j(I,N,P)},n.list.index=1,n.obj=n.boj||{is:function(I){return e("obj"),I?I instanceof Object&&I.constructor===Object||Object.prototype.toString.call(I).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},n.obj.put=n.obj.put||function(I,N,P){return e("obj.put"),(I||{})[N]=P,I},n.obj.has=n.obj.has||function(I,N){return e("obj.has"),I&&Object.prototype.hasOwnProperty.call(I,N)},n.obj.del=n.obj.del||function(I,N){if(e("obj.del"),!!I)return I[N]=null,delete I[N],I},n.obj.as=n.obj.as||function(I,N,P,U){return e("obj.as"),I[N]=I[N]||(U===P?{}:P)},n.obj.ify=n.obj.ify||function(I){if(e("obj.ify"),b(I))return I;try{I=JSON.parse(I)}catch{I={}}return I},function(){var I;function N(P,U){L(this,U)&&I!==this[U]||(this[U]=P)}n.obj.to=n.obj.to||function(P,U){return e("obj.to"),U=U||{},j(P,N,U),U}}(),n.obj.copy=n.obj.copy||function(I){return e("obj.copy"),I&&JSON.parse(JSON.stringify(I))},function(){function I(N,P){var U=this.n,G;if(!(U&&(P===U||b(U)&&L(U,P)))&&G!==P)return!0}n.obj.empty=n.obj.empty||function(N,P){return e("obj.empty"),N?!j(N,I,{n:P}):!0}}(),function(){function I(U,G){if(arguments.length===2){I.r=I.r||{},I.r[U]=G;return}I.r=I.r||[],I.r.push(U)}var N=Object.keys,P;Object.keys=Object.keys||function(U){return P(U,function(G,F,D){D(F)})},n.obj.map=P=n.obj.map||function(U,G,F){e("obj.map");var D,q=0,M,Z,J,le,ue=typeof G=="function";if(I.r=D,N&&b(U)&&(J=N(U),le=!0),F=F||{},r(U)||J)for(M=(J||U).length;q<M;q++){var se=q+n.list.index;if(ue){if(Z=le?G.call(F,U[J[q]],J[q],I):G.call(F,U[q],se,I),Z!==D)return Z}else if(G===U[le?J[q]:q])return J?J[q]:se}else for(q in U)if(ue){if(L(U,q)&&(Z=F?G.call(F,U[q],q,I):G(U[q],q,I),Z!==D))return Z}else if(G===U[q])return q;return ue?I.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(I){return e("time"),I?I instanceof Date:+new Date().getTime()};var v=n.fn.is,r=n.list.is,c=n.obj,b=c.is,L=c.has,j=c.map,i={};i.is=function(I){return e("val.is"),I===W?!1:I===null?!0:I===1/0?!1:l(I)||o(I)||y(I)?!0:i.link.is(I)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(N){if(e("val.link.is"),N&&N[s]&&!N._&&b(N)){var P={};if(j(N,I,P),P.id)return P.id}return!1};function I(N,P){var U=this;if(U.id)return U.id=!1;if(P==s&&l(N))U.id=N;else return U.id=!1}}(),i.link.ify=function(I){return e("val.link.ify"),O({},s,I)},n.obj.has._=".";var s=i.link._,W,o=n.bi.is,y=n.num.is,l=n.text.is,c=n.obj,b=c.is,O=c.put,j=c.map;n.val=n.val||i;var a={_:"_"};a.soul=function(I,N){return e("node.soul"),I&&I._&&I._[N||d]},a.soul.ify=function(I,N){return e("node.soul.ify"),N=typeof N=="string"?{soul:N}:N||{},I=I||{},I._=I._||{},I._[d]=N.soul||I._[d]||f(),I},a.soul._=i.link._,function(){a.is=function(N,P,U){e("node.is");var G;return b(N)&&(G=a.soul(N))?!j(N,I,{as:U,cb:P,s:G,n:N}):!1};function I(N,P){if(P!==a._){if(!i.is(N))return!0;this.cb&&this.cb.call(this.as,N,P,this.n,this.s)}}}(),function(){a.ify=function(N,P,U){return e("node.ify"),P?typeof P=="string"?P={soul:P}:typeof P=="function"&&(P={map:P}):P={},P.map&&(P.node=P.map.call(U,N,W,P.node||{})),(P.node=a.soul.ify(P.node||{},P))&&j(N,I,{o:P,as:U}),P.node};function I(N,P){var U=this.o,G,F;if(U.map){G=U.map.call(this.as,N,""+P,U.node),F===G?T(U.node,P):U.node&&(U.node[P]=G);return}i.is(N)&&(U.node[P]=N)}}();var c=n.obj,b=c.is,T=c.del,j=c.map,u=n.text,f=u.random,d=a.soul._,W;n.node=n.node||a;var p=n.state;p.lex=function(){return e("state.lex"),p().toString(36).replace(".","")},p.to=function(I,N,P){e("state.to");var U=(I||{})[N];return b(U)&&(U=H(U)),p.ify(P,N,p.is(I,N),U,a.soul(I))},function(){p.map=function(N,P,U){e("state.map");var G,F=b(F=N||P)?F:null;return N=v(N=N||P)?N:null,F&&!N?(P=y(P)?P:p(),F[S]=F[S]||{},j(F,I,{o:F,s:P}),F):(U=U||b(P)?P:G,P=y(P)?P:p(),function(D,q,M,Z){if(!N)return I.call({o:M,s:P},D,q),D;N.call(U||this||{},D,q,M,Z),!(L(M,q)&&G===M[q])&&I.call({o:M,s:P},D,q)})};function I(N,P){S!==P&&p.ify(this.o,P,this.s)}}();var c=n.obj;c.as;var L=c.has,b=c.is,j=c.map,H=c.copy,x=n.num,y=x.is,E=n.fn,v=E.is,S=a._,W,w={};(function(){w.is=function(P,U,G,F){return e("graph.is"),!P||!b(P)||_(P)?!1:!j(P,I,{cb:U,fn:G,as:F})};function I(P,U){if(!P||U!==a.soul(P)||!a.is(P,this.fn,this.as))return!0;this.cb&&(N.n=P,N.as=this.as,this.cb.call(N.as,P,U,N))}function N(P){P&&a.is(N.n,P,N.as)}})(),function(){w.ify=function(F,D,q){e("graph.ify");var M={path:[],obj:F};return D?typeof D=="string"?D={soul:D}:typeof D=="function"&&(D.map=D):D={},typeof q=="string"&&(D.soul=D.soul||q,q=W),D.soul&&(M.link=i.link.ify(D.soul)),D.shell=(q||{}).shell,D.graph=D.graph||{},D.seen=D.seen||[],D.as=D.as||q,I(D,M),D.root=M.node,D.graph};function I(F,D){var q;return(q=G(F,D))?q:(D.env=F,D.soul=P,a.ify(D.obj,N,D)&&(D.link=D.link||i.link.ify(a.soul(D.node)),D.obj!==F.shell&&(F.graph[i.link.is(D.link)]=D.node)),D)}function N(F,D,q){var M=this,Z=M.env,J,le;if(a._===D&&L(F,i.link._))return q._;if(J=U(F,D,q,M,Z)){if(D||(M.node=M.node||q||{},L(F,a._)&&a.soul(F)&&(M.node._=H(F._)),M.node=a.soul.ify(M.node,i.link.is(M.link)),M.link=M.link||i.link.ify(a.soul(M.node))),(le=Z.map)&&(le.call(Z.as||{},F,D,q,M),L(q,D))){if(F=q[D],W===F){T(q,D);return}if(!(J=U(F,D,q,M,Z)))return}if(!D)return M.node;if(J===!0)return F;if(le=I(Z,{obj:F,path:M.path.concat(D)}),!!le.node)return le.link}}function P(F){var D=this,q=i.link.is(D.link),M=D.env.graph;D.link=D.link||i.link.ify(F),D.link[i.link._]=F,D.node&&D.node[a._]&&(D.node[a._][i.link._]=F),L(M,q)&&(M[F]=M[q],T(M,q))}function U(F,D,q,M,Z){var J;if(i.is(F))return!0;if(b(F))return 1;if(J=Z.invalid)return F=J.call(Z.as||{},F,D,q),U(F,D,q,M,Z);Z.err="Invalid value at '"+M.path.concat(D).join(".")+"'!",n.list.is(F)&&(Z.err+=" Use `.set(item)` instead of an Array.")}function G(F,D){for(var q=F.seen,M=q.length,Z;M--;)if(Z=q[M],D.obj===Z.obj)return Z;q.push(D)}}(),w.node=function(I){e("graph.node");var N=a.soul(I);if(N)return O({},N,I)},function(){w.to=function(N,P,U){if(e("graph.to"),!!N){var G={};return U=U||{seen:{}},j(N[P],I,{obj:G,graph:N,opt:U}),G}};function I(N,P){var U,G;if(a._===P){if(_(N,i.link._))return;this.obj[P]=H(N);return}if(!(U=i.link.is(N))){this.obj[P]=N;return}if(G=this.opt.seen[U]){this.obj[P]=G;return}this.obj[P]=this.opt.seen[U]=w.to(this.graph,U,this.opt)}}();var v=n.fn.is,c=n.obj,b=c.is,T=c.del,L=c.has,_=c.empty,O=c.put,j=c.map,H=c.copy,W;n.graph=n.graph||w}}()})(ed);var f1=ed.exports,f2=f1;const h2=sh(f2);(function(){var t=typeof window<"u"?window.Gun:f1;t.on("opt",function(e){this.to.next(e);var n=e.opt;if(e.once||!t.Mesh||n.RTCPeerConnection===!1)return;var r;typeof window<"u"&&(r=window),typeof Pn<"u"&&(r=Pn),r=r||{};var i=n.RTCPeerConnection||r.RTCPeerConnection||r.webkitRTCPeerConnection||r.mozRTCPeerConnection,s=n.RTCSessionDescription||r.RTCSessionDescription||r.webkitRTCSessionDescription||r.mozRTCSessionDescription,o=n.RTCIceCandidate||r.RTCIceCandidate||r.webkitRTCIceCandidate||r.mozRTCIceCandidate;if(!i||!s||!o)return;n.RTCPeerConnection=i,n.RTCSessionDescription=s,n.RTCIceCandidate=o,n.rtc=n.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},n.rtc.dataChannel=n.rtc.dataChannel||{ordered:!1,maxRetransmits:2},n.rtc.sdp=n.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},n.rtc.max=n.rtc.max||55,n.rtc.room=n.rtc.room||t.window&&(location.hash.slice(1)||location.pathname.slice(1)),n.announce=function(u){n.rtc.start=+new Date,e.$.get("/RTC/"+n.rtc.room+"<?99").get("+").put(n.pid,function(f){!f.ok||!f.ok.rtc||a(f)},{acks:n.rtc.max}).on(function(f,d,p){f===n.pid||n.rtc.start>p.put[">"]||a({"#":""+p["#"],ok:{rtc:{id:f}}})})};var l=n.mesh=n.mesh||t.Mesh(e);e.on("create",function(u){this.to.next(u),setTimeout(n.announce,1)});function a(u){if(this&&this.off&&this.off(),!!u.ok){var f=u.ok.rtc,d,p;if(!(!f||!f.id||f.id===n.pid)){if(p=f.answer)return!(d=n.peers[f.id]||a[f.id])||d.remoteSet?void 0:(p.sdp=p.sdp.replace(/\\r\\n/g,`\r
`),d.setRemoteDescription(d.remoteSet=new n.RTCSessionDescription(p)));if(p=f.candidate)return d=n.peers[f.id]||a[f.id]||a({ok:{rtc:{id:f.id}}}),d.addIceCandidate(new n.RTCIceCandidate(p));if(!a[f.id]){(d=new n.RTCPeerConnection(n.rtc)).id=f.id;var x=d.wire=d.createDataChannel("dc",n.rtc.dataChannel);if(a[f.id]=d,x.to=setTimeout(function(){delete a[f.id]},1e3*60),x.onclose=function(){l.bye(d)},x.onerror=function(y){},x.onopen=function(y){delete a[f.id],l.hi(d)},x.onmessage=function(y){y&&l.hear(y.data||y,d)},d.onicecandidate=function(y){y.candidate&&e.on("out",{"@":u["#"],ok:{rtc:{candidate:y.candidate,id:n.pid}}})},d.ondatachannel=function(y){var E=y.channel;E.onmessage=x.onmessage,E.onopen=x.onopen,E.onclose=x.onclose},p=f.offer){f.offer.sdp=f.offer.sdp.replace(/\\r\\n/g,`\r
`),d.setRemoteDescription(new n.RTCSessionDescription(p)),d.createAnswer(function(y){d.setLocalDescription(y),e.on("out",{"@":u["#"],ok:{rtc:{answer:y,id:n.pid}}})},function(){},n.rtc.sdp);return}return d.createOffer(function(y){d.setLocalDescription(y),e.on("out",{"@":u["#"],"#":e.ask(a),ok:{rtc:{offer:y,id:n.pid}}})},function(){},n.rtc.sdp),d}}}}})})();class d2{constructor(e={}){Y(this,"gun");Y(this,"options");Y(this,"annotationCallbacks",new Map);Y(this,"currentPeers",[]);Y(this,"isConnected",!1);Y(this,"lastLogTime",new Map);Y(this,"fetchAttempts",0);Y(this,"maxFetchAttempts",10);Y(this,"initializationResolve",null);Y(this,"cleanupListeners",null);this.options={peers:e.peers||["https://citizen-x-bootsrap.onrender.com/gun"],radisk:e.radisk??!0},this.currentPeers=this.options.peers,this.gun=h2({peers:this.currentPeers,radisk:this.options.radisk,localStorage:!1,file:"gun-data",webrtc:!0})}throttleLog(e,n=6e4){const r=Date.now(),i=this.lastLogTime.get(e)||0;return r-i<n?!1:(this.lastLogTime.set(e,r),!0)}async initialize(){return this.initializationResolve?(console.log("GunRepository: Already initializing, waiting for existing promise"),new Promise(e=>{this.initializationResolve=e})):(console.log("GunRepository: Initializing..."),new Promise((e,n)=>{this.initializationResolve=e;const r=l=>{var a;console.log("GunRepository: Connected to peer:",l),this.isConnected=!0,this.cleanupListeners(),(a=this.initializationResolve)==null||a.call(this),this.initializationResolve=null},i=l=>{console.log("GunRepository: Disconnected from peer:",l),this.isConnected=!1};this.gun.on("hi",r),this.gun.on("bye",i);const s=setTimeout(()=>{var l;this.isConnected||(console.warn("GunRepository: No connection established after timeout, proceeding anyway"),this.cleanupListeners(),(l=this.initializationResolve)==null||l.call(this),this.initializationResolve=null)},1e4),o=()=>{clearTimeout(s),this.gun.off("hi",r),this.gun.off("bye",i)};this.cleanupListeners=o,this.gun.on("error",l=>{console.error("GunRepository: Error during initialization:",l),this.cleanupListeners(),n(l),this.initializationResolve=null})}).then(()=>{console.log("GunRepository: Initialization complete, starting peer discovery"),this.discoverPeers()}))}discoverPeers(){this.fetchKnownPeers().then(r=>{const i=[...new Set([...this.currentPeers,...r])];if(this.arraysEqual(i,this.currentPeers)){console.log("GunRepository: Initial peer list unchanged:",this.currentPeers);return}this.currentPeers=i,console.log("GunRepository: Discovered initial peers:",this.currentPeers),this.gun.opt({peers:this.currentPeers})});let e=0;const n=30*1e3;this.gun.get("knownPeers").map().on((r,i)=>{const s=Date.now();if(s-e<n)return;if(!r||!r.url||!r.timestamp){this.throttleLog(`Ignore null peer ${i}`)&&console.log("GunRepository: Ignoring null or invalid peer entry:",i);return}if(s-r.timestamp>10*60*1e3){console.log("GunRepository: Removing expired peer:",r.url),this.gun.get("knownPeers").get(i).put(null);return}this.fetchKnownPeers().then(l=>{const a=[...new Set([...this.currentPeers,...l])];if(this.arraysEqual(a,this.currentPeers)){this.throttleLog("Peer list unchanged after update")&&console.log("GunRepository: Peer list unchanged after update:",this.currentPeers);return}this.currentPeers=a,console.log("GunRepository: Updated peers list:",this.currentPeers),this.gun.opt({peers:this.currentPeers}),e=s})})}async fetchKnownPeers(){if(this.fetchAttempts>=this.maxFetchAttempts)return console.warn("GunRepository: Max fetch attempts reached, stopping retries"),[];this.isConnected||(console.log("GunRepository: Waiting for connection before fetching knownPeers..."),await new Promise(r=>{this.gun.on("hi",()=>r(null)),setTimeout(()=>{console.warn("GunRepository: Connection timeout in fetchKnownPeers, proceeding"),r(null)},5e3)}));const e=5;let n=0;for(this.fetchAttempts++;n<e;){n++;const r=await new Promise(i=>{const s=[];this.gun.get("knownPeers").map().once((o,l)=>{if(console.log("GunRepository: Raw peer data from knownPeers:",l,o),!o||!o.url||!o.timestamp)return;const u=Date.now()-o.timestamp;u<=10*60*1e3?(s.push(o.url),console.log("GunRepository: Found valid peer:",o.url,"Age:",u/1e3,"seconds")):console.log("GunRepository: Skipping stale peer in fetch:",o.url,"Age:",u/1e3,"seconds")}),setTimeout(()=>i(s),5e3)});if(r.length>0)return this.fetchAttempts=0,r;if(n===e)return console.log("GunRepository: No valid peers found in knownPeers after",n,"attempts"),[];this.throttleLog("Retry fetchKnownPeers")&&console.log("GunRepository: Retrying fetchKnownPeers, attempt:",n),await new Promise(i=>setTimeout(i,2e3))}return console.log("GunRepository: No valid peers found in knownPeers after all retries"),[]}arraysEqual(e,n){return e.length!==n.length?!1:e.every((r,i)=>r===n[i])}getGunInstance(){return this.gun}addPeers(e){const n=[...new Set([...this.currentPeers,...e])];if(this.arraysEqual(n,this.currentPeers)){console.log("GunRepository: No new peers to add:",this.currentPeers);return}this.currentPeers=n,this.gun.opt({peers:this.currentPeers}),console.log("Updated peers:",this.currentPeers)}async getCurrentDID(){return new Promise(e=>{const n=localStorage.getItem("currentDID");console.log("GunRepository: Retrieved cached DID from localStorage:",n),n?this.gun.get(`user_${n}`).get("did").once(r=>{r&&r.did===n?(console.log("GunRepository: Confirmed DID in user-specific namespace:",n),e(n)):(console.log("GunRepository: DID not found in user-specific namespace, clearing localStorage"),localStorage.removeItem("currentDID"),e(null))}):e(null)})}async setCurrentDID(e){return new Promise((n,r)=>{localStorage.setItem("currentDID",e),console.log("GunRepository: Set current DID in localStorage:",e),this.gun.get(`user_${e}`).get("did").put({did:e},i=>{i.err?(console.error("GunRepository: Failed to set user-specific DID:",i.err),r(new Error(i.err))):(console.log("GunRepository: Set user-specific DID in Gun.js:",e),n())})})}async clearCurrentDID(){return new Promise(e=>{localStorage.removeItem("currentDID"),console.log("GunRepository: Cleared current DID from localStorage"),e()})}async saveProfile(e){return new Promise((n,r)=>{this.gun.get(`user_${e.did}`).get("profile").put(e,i=>{i.err?(console.error("GunRepository: Failed to save profile:",i.err),r(new Error(i.err))):(console.log("GunRepository: Saved profile:",e),n())})})}async getProfile(e,n=5,r=1e3){for(let i=1;i<=n;i++){const s=await new Promise(o=>{this.gun.get(`user_${e}`).get("profile").once(l=>{l&&l.did&&l.handle?(console.log("GunRepository: Loaded profile for DID:",e,l),o({did:l.did,handle:l.handle,profilePicture:l.profilePicture})):(console.warn("GunRepository: Profile not found for DID on attempt",i,e,l),o(null))})});if(s)return s;console.log(`GunRepository: Retrying getProfile for DID: ${e}, attempt ${i}/${n}`),await new Promise(o=>setTimeout(o,r))}return console.error("GunRepository: Failed to load profile for DID after retries:",e),null}async getAnnotations(e,n){const r=[],i=this.gun.get("annotations").get(e),s=3;for(let o=1;o<=s;o++){const l=new Set;let a=!1;if(await new Promise(u=>{i.map().once(async f=>{if(!f||l.has(f.id))return;l.add(f.id),a=!0;const d=await new Promise(x=>{const y=[];i.get(f.id).get("comments").map().once(E=>{E&&y.push({id:E.id,content:E.content,author:E.author,timestamp:E.timestamp})}),setTimeout(()=>x(y),500)}),p={id:f.id,url:f.url,content:f.content,author:f.author,timestamp:f.timestamp,comments:d};r.push(p),console.log("GunRepository: Loaded annotation:",p)}),setTimeout(()=>{console.log("GunRepository: Initial annotations loaded for URL:",e,r,"Has new data:",a,"Attempt:",o),u()},2e3)}),a||o===s)break;console.log("GunRepository: Retrying annotations fetch for URL:",e,"Attempt:",o),await new Promise(u=>setTimeout(u,1e3))}return n&&(this.annotationCallbacks.has(e)||this.annotationCallbacks.set(e,[]),this.annotationCallbacks.get(e).push(n),i.map().on(async(o,l)=>{if(console.log("Real-time update received for URL:",e,"Annotation:",o),o){const a=await new Promise(d=>{const p=[];i.get(o.id).get("comments").map().once(x=>{x&&p.push({id:x.id,content:x.content,author:x.author,timestamp:x.timestamp})}),setTimeout(()=>d(p),500)}),u=r.filter(d=>d.id!==o.id);u.push({id:o.id,url:o.url,content:o.content,author:o.author,timestamp:o.timestamp,comments:a}),r.splice(0,r.length,...u),console.log("GunRepository: Real-time update for URL:",e,r),(this.annotationCallbacks.get(e)||[]).forEach(d=>d([...r]))}else{const a=r.filter(f=>f.id!==l);r.splice(0,r.length,...a),console.log("GunRepository: Real-time deletion for URL:",e,r),(this.annotationCallbacks.get(e)||[]).forEach(f=>f([...r]))}})),[...r]}async saveAnnotation(e){const{comments:n,...r}=e;if(await new Promise((i,s)=>{this.gun.get("annotations").get(e.url).get(e.id).put(r,o=>{o.err?(console.error("GunRepository: Failed to save annotation:",o.err),s(new Error(o.err))):(console.log("GunRepository: Saved annotation:",r),i())})}),n&&n.length>0)for(const i of n)await this.saveComment(e.url,e.id,i)}async deleteAnnotation(e,n){return new Promise((r,i)=>{this.gun.get("annotations").get(e).get(n).put(null,s=>{s.err?(console.error("GunRepository: Failed to delete annotation:",s.err),i(new Error(s.err))):(console.log("GunRepository: Deleted annotation:",n),r())})})}async saveComment(e,n,r){return new Promise((i,s)=>{this.gun.get("annotations").get(e).get(n).get("comments").get(r.id).put(r,o=>{o.err?(console.error("GunRepository: Failed to save comment:",o.err),s(new Error(o.err))):(console.log("GunRepository: Saved comment:",r),i())})})}}const Wi=class Wi{constructor(){}static getInstance(){return Wi.instance||(Wi.instance=new p2),Wi.instance}};Y(Wi,"instance");let _f=Wi;class p2{constructor(){Y(this,"repository");Y(this,"initialized",!1);Y(this,"initializing",!1);Y(this,"initializationPromise",null);const e=["https://citizen-x-bootsrap.onrender.com/gun"];this.repository=new d2({peers:e,radisk:!1})}normalizeUrl(e){let n=e.replace(/^(https?:\/\/)+/,"https://");n=n.replace(/\/+$/,"");const r=new URL(n),i=new URLSearchParams(r.search);for(const s of i.keys())s.startsWith("utm_")&&i.delete(s);return r.search=i.toString(),r.toString()}async initialize(){if(this.initialized){console.log("StorageRepository: Already initialized");return}return this.initializing?(console.log("StorageRepository: Initialization already in progress, waiting..."),this.initializationPromise):(console.log("StorageRepository: Initializing..."),this.initializing=!0,this.initializationPromise=this.repository.initialize().then(()=>{this.initialized=!0,this.initializing=!1,console.log("StorageRepository: Initialized successfully")}).catch(e=>{throw console.error("StorageRepository: Initialization failed:",e),this.initialized=!1,this.initializing=!1,this.initializationPromise=null,e}),this.initializationPromise)}async getCurrentDID(){return await this.initialize(),this.repository.getCurrentDID()}async setCurrentDID(e){await this.initialize(),await this.repository.setCurrentDID(e)}async clearCurrentDID(){await this.initialize(),await this.repository.clearCurrentDID()}async saveProfile(e){await this.initialize(),await this.repository.saveProfile(e)}async getProfile(e){return await this.initialize(),this.repository.getProfile(e)}async getAnnotations(e){await this.initialize();const n=this.normalizeUrl(e);return console.log("StorageRepository: Fetching annotations for normalized URL:",n),this.repository.getAnnotations(n)}async saveAnnotation(e){await this.initialize();const n={...e,url:this.normalizeUrl(e.url)};await this.repository.saveAnnotation(n)}async deleteAnnotation(e,n){await this.initialize();const r=this.normalizeUrl(e);await this.repository.deleteAnnotation(r,n)}async saveComment(e,n,r){await this.initialize();const i=this.normalizeUrl(e);await this.repository.saveComment(i,n,r)}}const co=_f.getInstance();function h1(){const[t,e]=ie.useState(null),[n,r]=ie.useState(!0);return ie.useEffect(()=>{(async()=>{try{console.log("useStorage: Starting storage initialization"),await co.initialize(),console.log("useStorage: Storage initialized successfully"),e(null)}catch(s){console.error("useStorage: Failed to initialize storage:",s.message||s),e("Failed to initialize storage: "+(s.message||"Unknown error"))}finally{r(!1)}})()},[]),{storage:co,error:t,isLoading:n}}var Cf={exports:{}};function g2(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,l=t.charAt(0),a=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var y=0,E=0,S=0,w=x.length;S!==w&&x[S]===0;)S++,y++;for(var v=(w-S)*u+1>>>0,c=new Uint8Array(v);S!==w;){for(var b=x[S],T=0,L=v-1;(b!==0||T<E)&&L!==-1;L--,T++)b+=256*c[L]>>>0,c[L]=b%o>>>0,b=b/o>>>0;if(b!==0)throw new Error("Non-zero carry");E=T,S++}for(var _=v-E;_!==v&&c[_]===0;)_++;for(var O=l.repeat(y);_<v;++_)O+=t.charAt(c[_]);return O}function d(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var y=0;if(x[y]!==" "){for(var E=0,S=0;x[y]===l;)E++,y++;for(var w=(x.length-y)*a+1>>>0,v=new Uint8Array(w);x[y];){var c=e[x.charCodeAt(y)];if(c===255)return;for(var b=0,T=w-1;(c!==0||b<S)&&T!==-1;T--,b++)c+=o*v[T]>>>0,v[T]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");S=b,y++}if(x[y]!==" "){for(var L=w-S;L!==w&&v[L]===0;)L++;for(var _=new Uint8Array(E+(w-L)),O=E;L!==w;)_[O++]=v[L++];return _}}}function p(x){var y=d(x);if(y)return y;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:d,decode:p}}var m2=g2;const y2=new TextDecoder,v2=t=>y2.decode(t),w2=new TextEncoder,x2=t=>w2.encode(t);function E2(t,e){const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}var td={decodeText:v2,encodeText:x2,concat:E2};const{encodeText:b2}=td;let S2=class{constructor(e,n,r,i){this.name=e,this.code=n,this.codeBuf=b2(this.code),this.alphabet=i,this.codec=r(i)}encode(e){return this.codec.encode(e)}decode(e){for(const n of e)if(this.alphabet&&this.alphabet.indexOf(n)<0)throw new Error(`invalid character '${n}' in '${e}'`);return this.codec.decode(e)}};var T2=S2;const A2=(t,e,n)=>{const r={};for(let u=0;u<e.length;++u)r[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let o=0,l=0,a=0;for(let u=0;u<i;++u){const f=r[t[u]];if(f===void 0)throw new SyntaxError("Invalid character "+t[u]);l=l<<n|f,o+=n,o>=8&&(o-=8,s[a++]=255&l>>o)}if(o>=n||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return s},k2=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,l=0;for(let a=0;a<t.length;++a)for(l=l<<8|t[a],o+=8;o>n;)o-=n,s+=e[i&l>>o];if(o&&(s+=e[i&l<<n-o]),r)for(;s.length*n&7;)s+="=";return s},N2=t=>e=>({encode(n){return k2(n,e,t)},decode(n){return A2(n,e,t)}});var _2={rfc4648:N2};const Gs=m2,C2=T2,{rfc4648:We}=_2,{decodeText:L2,encodeText:I2}=td,O2=()=>({encode:L2,decode:I2}),d1=[["identity","\0",O2,""],["base2","0",We(1),"01"],["base8","7",We(3),"01234567"],["base10","9",Gs,"0123456789"],["base16","f",We(4),"0123456789abcdef"],["base16upper","F",We(4),"0123456789ABCDEF"],["base32hex","v",We(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",We(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",We(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",We(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",We(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",We(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",We(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",We(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",We(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Gs,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Gs,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Gs,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Gs,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",We(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],p1=d1.reduce((t,e)=>(t[e[0]]=new C2(e[0],e[1],e[2],e[3]),t),{}),R2=d1.reduce((t,e)=>(t[e[1]]=p1[e[0]],t),{});var P2={names:p1,codes:R2};(function(t,e){const n=P2,{encodeText:r,decodeText:i,concat:s}=td;function o(E,S){if(!S)throw new Error("requires an encoded Uint8Array");const{name:w,codeBuf:v}=d(E);return f(w,S),s([v,S],v.length+S.length)}function l(E,S){const w=d(E),v=r(w.encode(S));return s([w.codeBuf,v],w.codeBuf.length+v.length)}function a(E){E instanceof Uint8Array&&(E=i(E));const S=E[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(S)&&(E=E.toLowerCase()),d(E[0]).decode(E.substring(1))}function u(E){if(E instanceof Uint8Array&&(E=i(E)),Object.prototype.toString.call(E)!=="[object String]")return!1;try{return d(E[0]).name}catch{return!1}}function f(E,S){d(E).decode(i(S))}function d(E){if(Object.prototype.hasOwnProperty.call(n.names,E))return n.names[E];if(Object.prototype.hasOwnProperty.call(n.codes,E))return n.codes[E];throw new Error(`Unsupported encoding: ${E}`)}function p(E){return E instanceof Uint8Array&&(E=i(E)),d(E[0])}e=t.exports=o,e.encode=l,e.decode=a,e.isEncoded=u,e.encoding=d,e.encodingFromData=p;const x=Object.freeze(n.names),y=Object.freeze(n.codes);e.names=x,e.codes=y})(Cf,Cf.exports);var g1=Cf.exports;/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const at=2n**255n-19n,Yl=2n**252n+27742317777372353535851937790883648493n,$p=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,qp=0x6666666666666666666666666666666666666666666666666666666666666658n,D2=37095705934669439343138083508754565189542113879843219016388785533085940283555n,Cl={a:-1n,d:D2,h:8},Qe=(t="")=>{throw new Error(t)},m1=t=>typeof t=="string",B2=t=>t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array",Po=(t,e)=>!B2(t)||typeof e=="number"&&e>0&&t.length!==e?Qe("Uint8Array of valid length expected"):t,hs=t=>new Uint8Array(t),nd=(t,e)=>Po(m1(t)?id(t):hs(Po(t)),e),ae=(t,e=at)=>{let n=t%e;return n>=0n?n:e+n},Fp=t=>t instanceof Xt?t:Qe("Point expected");class Xt{constructor(e,n,r,i){this.ex=e,this.ey=n,this.ez=r,this.et=i}static fromAffine(e){return new Xt(e.x,e.y,1n,ae(e.x*e.y))}static fromHex(e,n=!1){const{d:r}=Cl;e=nd(e,32);const i=e.slice(),s=e[31];i[31]=s&-129;const o=v1(i);n&&!(0n<=o&&o<2n**256n)&&Qe("bad y coord 1"),!n&&!(0n<=o&&o<at)&&Qe("bad y coord 2");const l=ae(o*o),a=ae(l-1n),u=ae(r*l+1n);let{isValid:f,value:d}=M2(a,u);f||Qe("bad y coordinate 3");const p=(d&1n)===1n,x=(s&128)!==0;return!n&&d===0n&&x&&Qe("bad y coord 3"),x!==p&&(d=ae(-d)),new Xt(d,o,1n,ae(d*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:n,ey:r,ez:i}=this,{ex:s,ey:o,ez:l}=Fp(e),a=ae(n*l),u=ae(s*i),f=ae(r*l),d=ae(o*i);return a===u&&f===d}is0(){return this.equals(Ys)}negate(){return new Xt(ae(-this.ex),this.ey,this.ez,ae(-this.et))}double(){const{ex:e,ey:n,ez:r}=this,{a:i}=Cl,s=ae(e*e),o=ae(n*n),l=ae(2n*ae(r*r)),a=ae(i*s),u=e+n,f=ae(ae(u*u)-s-o),d=a+o,p=d-l,x=a-o,y=ae(f*p),E=ae(d*x),S=ae(f*x),w=ae(p*d);return new Xt(y,E,w,S)}add(e){const{ex:n,ey:r,ez:i,et:s}=this,{ex:o,ey:l,ez:a,et:u}=Fp(e),{a:f,d}=Cl,p=ae(n*o),x=ae(r*l),y=ae(s*d*u),E=ae(i*a),S=ae((n+r)*(o+l)-p-x),w=ae(E-y),v=ae(E+y),c=ae(x-f*p),b=ae(S*w),T=ae(v*c),L=ae(S*c),_=ae(w*v);return new Xt(b,T,_,L)}mul(e,n=!0){if(e===0n)return n===!0?Qe("cannot multiply by 0"):Ys;if(typeof e=="bigint"&&0n<e&&e<Yl||Qe("invalid scalar, must be < L"),!n&&this.is0()||e===1n)return this;if(this.equals(ds))return K2(e).p;let r=Ys,i=ds;for(let s=this;e>0n;s=s.double(),e>>=1n)e&1n?r=r.add(s):n&&(i=i.add(s));return r}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(Cl.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(Yl/2n,!1).double();return Yl%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:n,ez:r}=this;if(this.equals(Ys))return{x:0n,y:1n};const i=w1(r,at);return ae(r*i)!==1n&&Qe("invalid inverse"),{x:ae(e*i),y:ae(n*i)}}toRawBytes(){const{x:e,y:n}=this.toAffine(),r=j2(n);return r[31]|=e&1n?128:0,r}toHex(){return rd(this.toRawBytes())}}Xt.BASE=new Xt($p,qp,1n,ae($p*qp));Xt.ZERO=new Xt(0n,1n,1n,0n);const{BASE:ds,ZERO:Ys}=Xt,y1=(t,e)=>t.toString(16).padStart(e,"0"),rd=t=>Array.from(Po(t)).map(e=>y1(e,2)).join(""),Kn={_0:48,_9:57,A:65,F:70,a:97,f:102},zp=t=>{if(t>=Kn._0&&t<=Kn._9)return t-Kn._0;if(t>=Kn.A&&t<=Kn.F)return t-(Kn.A-10);if(t>=Kn.a&&t<=Kn.f)return t-(Kn.a-10)},id=t=>{const e="hex invalid";if(!m1(t))return Qe(e);const n=t.length,r=n/2;if(n%2)return Qe(e);const i=hs(r);for(let s=0,o=0;s<r;s++,o+=2){const l=zp(t.charCodeAt(o)),a=zp(t.charCodeAt(o+1));if(l===void 0||a===void 0)return Qe(e);i[s]=l*16+a}return i},j2=t=>id(y1(t,32*2)).reverse(),v1=t=>BigInt("0x"+rd(hs(Po(t)).reverse())),Hp=(...t)=>{const e=hs(t.reduce((r,i)=>r+Po(i).length,0));let n=0;return t.forEach(r=>{e.set(r,n),n+=r.length}),e},w1=(t,e)=>{(t===0n||e<=0n)&&Qe("no inverse n="+t+" mod="+e);let n=ae(t,e),r=e,i=0n,s=1n;for(;n!==0n;){const o=r/n,l=r%n,a=i-s*o;r=n,n=l,i=s,s=a}return r===1n?ae(i,e):Qe("no inverse")},Cn=(t,e)=>{let n=t;for(;e-- >0n;)n*=n,n%=at;return n},U2=t=>{const n=t*t%at*t%at,r=Cn(n,2n)*n%at,i=Cn(r,1n)*t%at,s=Cn(i,5n)*i%at,o=Cn(s,10n)*s%at,l=Cn(o,20n)*o%at,a=Cn(l,40n)*l%at,u=Cn(a,80n)*a%at,f=Cn(u,80n)*a%at,d=Cn(f,10n)*s%at;return{pow_p_5_8:Cn(d,2n)*t%at,b2:n}},Gp=19681161376707505956807079304988542015446066515923890162744021073123829784752n,M2=(t,e)=>{const n=ae(e*e*e),r=ae(n*n*e),i=U2(t*r).pow_p_5_8;let s=ae(t*n*i);const o=ae(e*s*s),l=s,a=ae(s*Gp),u=o===t,f=o===ae(-t),d=o===ae(-t*Gp);return u&&(s=l),(f||d)&&(s=a),(ae(s)&1n)===1n&&(s=ae(-s)),{isValid:u||f,value:s}},$2=t=>ae(v1(t),Yl);let fo;const q2=(...t)=>wn.sha512Async(...t),F2=(...t)=>typeof fo=="function"?fo(...t):Qe("etc.sha512Sync not set"),x1=t=>{const e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const n=t.slice(32,64),r=$2(e),i=ds.mul(r),s=i.toRawBytes();return{head:e,prefix:n,scalar:r,point:i,pointBytes:s}},z2=t=>q2(nd(t,32)).then(x1),E1=t=>x1(F2(nd(t,32))),H2=t=>E1(t).pointBytes,Vp=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,wn={bytesToHex:rd,hexToBytes:id,concatBytes:Hp,mod:ae,invert:w1,randomBytes:(t=32)=>{const e=Vp();return(!e||!e.getRandomValues)&&Qe("crypto.getRandomValues must be defined"),e.getRandomValues(hs(t))},sha512Async:async(...t)=>{const e=Vp(),n=e&&e.subtle;n||Qe("etc.sha512Async or crypto.subtle must be defined");const r=Hp(...t);return hs(await n.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(wn,{sha512Sync:{configurable:!1,get(){return fo},set(t){fo||(fo=t)}}});const G2={getExtendedPublicKeyAsync:z2,getExtendedPublicKey:E1,randomPrivateKey:()=>wn.randomBytes(32),precompute:(t=8,e=ds)=>(e.multiply(3n),e)},Qr=8,V2=()=>{const t=[],e=256/Qr+1;let n=ds,r=n;for(let i=0;i<e;i++){r=n,t.push(r);for(let s=1;s<2**(Qr-1);s++)r=r.add(n),t.push(r);n=r.double()}return t};let Kp;const K2=t=>{const e=Kp||(Kp=V2()),n=(f,d)=>{let p=d.negate();return f?p:d};let r=Ys,i=ds;const s=1+256/Qr,o=2**(Qr-1),l=BigInt(2**Qr-1),a=2**Qr,u=BigInt(Qr);for(let f=0;f<s;f++){const d=f*o;let p=Number(t&l);t>>=u,p>o&&(p-=a,t+=1n);const x=d,y=d+Math.abs(p)-1,E=f%2!==0,S=p<0;p===0?i=i.add(n(E,e[x])):r=r.add(n(S,e[y]))}return{p:r,f:i}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function W2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sd(t,...e){if(!W2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Wp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Z2(t,e){sd(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Lf(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function mc(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Q2(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function b1(t){return typeof t=="string"&&(t=Q2(t)),sd(t),t}let X2=class{};function Y2(t){const e=r=>t().update(b1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function J2(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),l=Number(n&s),a=r?4:0,u=r?0:4;t.setUint32(e+a,o,r),t.setUint32(e+u,l,r)}class ex extends X2{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=mc(this.buffer)}update(e){Wp(this),e=b1(e),sd(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const a=mc(e);for(;i<=s-o;o+=i)this.process(a,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wp(this),Z2(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Lf(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;J2(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=mc(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)l.setUint32(4*d,f[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=l,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const lt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ll=BigInt(2**32-1),Zp=BigInt(32);function tx(t,e=!1){return e?{h:Number(t&Ll),l:Number(t>>Zp&Ll)}:{h:Number(t>>Zp&Ll)|0,l:Number(t&Ll)|0}}function nx(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l}=tx(t[s],e);[r[s],i[s]]=[o,l]}return[r,i]}const Qp=(t,e,n)=>t>>>n,Xp=(t,e,n)=>t<<32-n|e>>>n,Ai=(t,e,n)=>t>>>n|e<<32-n,ki=(t,e,n)=>t<<32-n|e>>>n,Il=(t,e,n)=>t<<64-n|e>>>n-32,Ol=(t,e,n)=>t>>>n-32|e<<64-n;function Wn(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const rx=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),ix=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,sx=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ox=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,lx=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ax=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,S1=nx(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ux=S1[0],cx=S1[1],gr=new Uint32Array(80),mr=new Uint32Array(80);class fx extends ex{constructor(e=64){super(128,e,16,!1),this.Ah=lt[0]|0,this.Al=lt[1]|0,this.Bh=lt[2]|0,this.Bl=lt[3]|0,this.Ch=lt[4]|0,this.Cl=lt[5]|0,this.Dh=lt[6]|0,this.Dl=lt[7]|0,this.Eh=lt[8]|0,this.El=lt[9]|0,this.Fh=lt[10]|0,this.Fl=lt[11]|0,this.Gh=lt[12]|0,this.Gl=lt[13]|0,this.Hh=lt[14]|0,this.Hl=lt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:l,Dl:a,Eh:u,El:f,Fh:d,Fl:p,Gh:x,Gl:y,Hh:E,Hl:S}=this;return[e,n,r,i,s,o,l,a,u,f,d,p,x,y,E,S]}set(e,n,r,i,s,o,l,a,u,f,d,p,x,y,E,S){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=d|0,this.Fl=p|0,this.Gh=x|0,this.Gl=y|0,this.Hh=E|0,this.Hl=S|0}process(e,n){for(let c=0;c<16;c++,n+=4)gr[c]=e.getUint32(n),mr[c]=e.getUint32(n+=4);for(let c=16;c<80;c++){const b=gr[c-15]|0,T=mr[c-15]|0,L=Ai(b,T,1)^Ai(b,T,8)^Qp(b,T,7),_=ki(b,T,1)^ki(b,T,8)^Xp(b,T,7),O=gr[c-2]|0,j=mr[c-2]|0,H=Ai(O,j,19)^Il(O,j,61)^Qp(O,j,6),W=ki(O,j,19)^Ol(O,j,61)^Xp(O,j,6),I=sx(_,W,mr[c-7],mr[c-16]),N=ox(I,L,H,gr[c-7],gr[c-16]);gr[c]=N|0,mr[c]=I|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:l,Cl:a,Dh:u,Dl:f,Eh:d,El:p,Fh:x,Fl:y,Gh:E,Gl:S,Hh:w,Hl:v}=this;for(let c=0;c<80;c++){const b=Ai(d,p,14)^Ai(d,p,18)^Il(d,p,41),T=ki(d,p,14)^ki(d,p,18)^Ol(d,p,41),L=d&x^~d&E,_=p&y^~p&S,O=lx(v,T,_,cx[c],mr[c]),j=ax(O,w,b,L,ux[c],gr[c]),H=O|0,W=Ai(r,i,28)^Il(r,i,34)^Il(r,i,39),I=ki(r,i,28)^Ol(r,i,34)^Ol(r,i,39),N=r&s^r&l^s&l,P=i&o^i&a^o&a;w=E|0,v=S|0,E=x|0,S=y|0,x=d|0,y=p|0,{h:d,l:p}=Wn(u|0,f|0,j|0,H|0),u=l|0,f=a|0,l=s|0,a=o|0,s=r|0,o=i|0;const U=rx(H,I,P);r=ix(U,j,W,N),i=U|0}({h:r,l:i}=Wn(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Wn(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:a}=Wn(this.Ch|0,this.Cl|0,l|0,a|0),{h:u,l:f}=Wn(this.Dh|0,this.Dl|0,u|0,f|0),{h:d,l:p}=Wn(this.Eh|0,this.El|0,d|0,p|0),{h:x,l:y}=Wn(this.Fh|0,this.Fl|0,x|0,y|0),{h:E,l:S}=Wn(this.Gh|0,this.Gl|0,E|0,S|0),{h:w,l:v}=Wn(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,i,s,o,l,a,u,f,d,p,x,y,E,S,w,v)}roundClean(){Lf(gr,mr)}destroy(){Lf(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hx=Y2(()=>new fx),Wa=hx;var If={},Za={};Za.byteLength=gx;Za.toByteArray=yx;Za.fromByteArray=xx;var Rn=[],Vt=[],dx=typeof Uint8Array<"u"?Uint8Array:Array,yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ni=0,px=yc.length;Ni<px;++Ni)Rn[Ni]=yc[Ni],Vt[yc.charCodeAt(Ni)]=Ni;Vt[45]=62;Vt[95]=63;function T1(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function gx(t){var e=T1(t),n=e[0],r=e[1];return(n+r)*3/4-r}function mx(t,e,n){return(e+n)*3/4-n}function yx(t){var e,n=T1(t),r=n[0],i=n[1],s=new dx(mx(t,r,i)),o=0,l=i>0?r-4:r,a;for(a=0;a<l;a+=4)e=Vt[t.charCodeAt(a)]<<18|Vt[t.charCodeAt(a+1)]<<12|Vt[t.charCodeAt(a+2)]<<6|Vt[t.charCodeAt(a+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Vt[t.charCodeAt(a)]<<2|Vt[t.charCodeAt(a+1)]>>4,s[o++]=e&255),i===1&&(e=Vt[t.charCodeAt(a)]<<10|Vt[t.charCodeAt(a+1)]<<4|Vt[t.charCodeAt(a+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function vx(t){return Rn[t>>18&63]+Rn[t>>12&63]+Rn[t>>6&63]+Rn[t&63]}function wx(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(vx(r));return i.join("")}function xx(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,l=n-r;o<l;o+=s)i.push(wx(t,o,o+s>l?l:o+s));return r===1?(e=t[n-1],i.push(Rn[e>>2]+Rn[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Rn[e>>10]+Rn[e>>4&63]+Rn[e<<2&63]+"=")),i.join("")}var od={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */od.read=function(t,e,n,r,i){var s,o,l=i*8-r-1,a=(1<<l)-1,u=a>>1,f=-7,d=n?i-1:0,p=n?-1:1,x=t[e+d];for(d+=p,s=x&(1<<-f)-1,x>>=-f,f+=l;f>0;s=s*256+t[e+d],d+=p,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=o*256+t[e+d],d+=p,f-=8);if(s===0)s=1-u;else{if(s===a)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(x?-1:1)*o*Math.pow(2,s-r)};od.write=function(t,e,n,r,i,s){var o,l,a,u=s*8-i-1,f=(1<<u)-1,d=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=r?0:s-1,y=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+d>=1?e+=p/a:e+=p*Math.pow(2,1-d),e*a>=2&&(o++,a/=2),o+d>=f?(l=0,o=f):o+d>=1?(l=(e*a-1)*Math.pow(2,i),o=o+d):(l=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+x]=l&255,x+=y,l/=256,i-=8);for(o=o<<i|l,u+=i;u>0;t[n+x]=o&255,x+=y,o/=256,u-=8);t[n+x-y]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Za,n=od,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const A=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(A,h),A.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(A){if(A>i)throw new RangeError('The value "'+A+'" is invalid for option "size"');const h=new Uint8Array(A);return Object.setPrototypeOf(h,l.prototype),h}function l(A,h,m){if(typeof A=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(A)}return a(A,h,m)}l.poolSize=8192;function a(A,h,m){if(typeof A=="string")return p(A,h);if(ArrayBuffer.isView(A))return y(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(mt(A,ArrayBuffer)||A&&mt(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mt(A,SharedArrayBuffer)||A&&mt(A.buffer,SharedArrayBuffer)))return E(A,h,m);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=A.valueOf&&A.valueOf();if(C!=null&&C!==A)return l.from(C,h,m);const B=S(A);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return l.from(A[Symbol.toPrimitive]("string"),h,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}l.from=function(A,h,m){return a(A,h,m)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function f(A,h,m){return u(A),A<=0?o(A):h!==void 0?typeof m=="string"?o(A).fill(h,m):o(A).fill(h):o(A)}l.alloc=function(A,h,m){return f(A,h,m)};function d(A){return u(A),o(A<0?0:w(A)|0)}l.allocUnsafe=function(A){return d(A)},l.allocUnsafeSlow=function(A){return d(A)};function p(A,h){if((typeof h!="string"||h==="")&&(h="utf8"),!l.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const m=c(A,h)|0;let C=o(m);const B=C.write(A,h);return B!==m&&(C=C.slice(0,B)),C}function x(A){const h=A.length<0?0:w(A.length)|0,m=o(h);for(let C=0;C<h;C+=1)m[C]=A[C]&255;return m}function y(A){if(mt(A,Uint8Array)){const h=new Uint8Array(A);return E(h.buffer,h.byteOffset,h.byteLength)}return x(A)}function E(A,h,m){if(h<0||A.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<h+(m||0))throw new RangeError('"length" is outside of buffer bounds');let C;return h===void 0&&m===void 0?C=new Uint8Array(A):m===void 0?C=new Uint8Array(A,h):C=new Uint8Array(A,h,m),Object.setPrototypeOf(C,l.prototype),C}function S(A){if(l.isBuffer(A)){const h=w(A.length)|0,m=o(h);return m.length===0||A.copy(m,0,0,h),m}if(A.length!==void 0)return typeof A.length!="number"||fr(A.length)?o(0):x(A);if(A.type==="Buffer"&&Array.isArray(A.data))return x(A.data)}function w(A){if(A>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return A|0}function v(A){return+A!=A&&(A=0),l.alloc(+A)}l.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==l.prototype},l.compare=function(h,m){if(mt(h,Uint8Array)&&(h=l.from(h,h.offset,h.byteLength)),mt(m,Uint8Array)&&(m=l.from(m,m.offset,m.byteLength)),!l.isBuffer(h)||!l.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===m)return 0;let C=h.length,B=m.length;for(let $=0,V=Math.min(C,B);$<V;++$)if(h[$]!==m[$]){C=h[$],B=m[$];break}return C<B?-1:B<C?1:0},l.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(h,m){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return l.alloc(0);let C;if(m===void 0)for(m=0,C=0;C<h.length;++C)m+=h[C].length;const B=l.allocUnsafe(m);let $=0;for(C=0;C<h.length;++C){let V=h[C];if(mt(V,Uint8Array))$+V.length>B.length?(l.isBuffer(V)||(V=l.from(V)),V.copy(B,$)):Uint8Array.prototype.set.call(B,V,$);else if(l.isBuffer(V))V.copy(B,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=V.length}return B};function c(A,h){if(l.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||mt(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const m=A.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;let B=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return gt(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Fn(A).length;default:if(B)return C?-1:gt(A).length;h=(""+h).toLowerCase(),B=!0}}l.byteLength=c;function b(A,h,m){let C=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,h>>>=0,m<=h))return"";for(A||(A="utf8");;)switch(A){case"hex":return q(this,h,m);case"utf8":case"utf-8":return P(this,h,m);case"ascii":return F(this,h,m);case"latin1":case"binary":return D(this,h,m);case"base64":return N(this,h,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,h,m);default:if(C)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),C=!0}}l.prototype._isBuffer=!0;function T(A,h,m){const C=A[h];A[h]=A[m],A[m]=C}l.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<h;m+=2)T(this,m,m+1);return this},l.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<h;m+=4)T(this,m,m+3),T(this,m+1,m+2);return this},l.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<h;m+=8)T(this,m,m+7),T(this,m+1,m+6),T(this,m+2,m+5),T(this,m+3,m+4);return this},l.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?P(this,0,h):b.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(h){if(!l.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:l.compare(this,h)===0},l.prototype.inspect=function(){let h="";const m=t.INSPECT_MAX_BYTES;return h=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(h+=" ... "),"<Buffer "+h+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(h,m,C,B,$){if(mt(h,Uint8Array)&&(h=l.from(h,h.offset,h.byteLength)),!l.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(m===void 0&&(m=0),C===void 0&&(C=h?h.length:0),B===void 0&&(B=0),$===void 0&&($=this.length),m<0||C>h.length||B<0||$>this.length)throw new RangeError("out of range index");if(B>=$&&m>=C)return 0;if(B>=$)return-1;if(m>=C)return 1;if(m>>>=0,C>>>=0,B>>>=0,$>>>=0,this===h)return 0;let V=$-B,ce=C-m;const we=Math.min(V,ce),xe=this.slice(B,$),Ee=h.slice(m,C);for(let pe=0;pe<we;++pe)if(xe[pe]!==Ee[pe]){V=xe[pe],ce=Ee[pe];break}return V<ce?-1:ce<V?1:0};function L(A,h,m,C,B){if(A.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,fr(m)&&(m=B?0:A.length-1),m<0&&(m=A.length+m),m>=A.length){if(B)return-1;m=A.length-1}else if(m<0)if(B)m=0;else return-1;if(typeof h=="string"&&(h=l.from(h,C)),l.isBuffer(h))return h.length===0?-1:_(A,h,m,C,B);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(A,h,m):Uint8Array.prototype.lastIndexOf.call(A,h,m):_(A,[h],m,C,B);throw new TypeError("val must be string, number or Buffer")}function _(A,h,m,C,B){let $=1,V=A.length,ce=h.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(A.length<2||h.length<2)return-1;$=2,V/=2,ce/=2,m/=2}function we(Ee,pe){return $===1?Ee[pe]:Ee.readUInt16BE(pe*$)}let xe;if(B){let Ee=-1;for(xe=m;xe<V;xe++)if(we(A,xe)===we(h,Ee===-1?0:xe-Ee)){if(Ee===-1&&(Ee=xe),xe-Ee+1===ce)return Ee*$}else Ee!==-1&&(xe-=xe-Ee),Ee=-1}else for(m+ce>V&&(m=V-ce),xe=m;xe>=0;xe--){let Ee=!0;for(let pe=0;pe<ce;pe++)if(we(A,xe+pe)!==we(h,pe)){Ee=!1;break}if(Ee)return xe}return-1}l.prototype.includes=function(h,m,C){return this.indexOf(h,m,C)!==-1},l.prototype.indexOf=function(h,m,C){return L(this,h,m,C,!0)},l.prototype.lastIndexOf=function(h,m,C){return L(this,h,m,C,!1)};function O(A,h,m,C){m=Number(m)||0;const B=A.length-m;C?(C=Number(C),C>B&&(C=B)):C=B;const $=h.length;C>$/2&&(C=$/2);let V;for(V=0;V<C;++V){const ce=parseInt(h.substr(V*2,2),16);if(fr(ce))return V;A[m+V]=ce}return V}function j(A,h,m,C){return Tn(gt(h,A.length-m),A,m,C)}function H(A,h,m,C){return Tn(Tt(h),A,m,C)}function W(A,h,m,C){return Tn(Fn(h),A,m,C)}function I(A,h,m,C){return Tn(Ss(h,A.length-m),A,m,C)}l.prototype.write=function(h,m,C,B){if(m===void 0)B="utf8",C=this.length,m=0;else if(C===void 0&&typeof m=="string")B=m,C=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(C)?(C=C>>>0,B===void 0&&(B="utf8")):(B=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-m;if((C===void 0||C>$)&&(C=$),h.length>0&&(C<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let V=!1;for(;;)switch(B){case"hex":return O(this,h,m,C);case"utf8":case"utf-8":return j(this,h,m,C);case"ascii":case"latin1":case"binary":return H(this,h,m,C);case"base64":return W(this,h,m,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,h,m,C);default:if(V)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),V=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(A,h,m){return h===0&&m===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(h,m))}function P(A,h,m){m=Math.min(A.length,m);const C=[];let B=h;for(;B<m;){const $=A[B];let V=null,ce=$>239?4:$>223?3:$>191?2:1;if(B+ce<=m){let we,xe,Ee,pe;switch(ce){case 1:$<128&&(V=$);break;case 2:we=A[B+1],(we&192)===128&&(pe=($&31)<<6|we&63,pe>127&&(V=pe));break;case 3:we=A[B+1],xe=A[B+2],(we&192)===128&&(xe&192)===128&&(pe=($&15)<<12|(we&63)<<6|xe&63,pe>2047&&(pe<55296||pe>57343)&&(V=pe));break;case 4:we=A[B+1],xe=A[B+2],Ee=A[B+3],(we&192)===128&&(xe&192)===128&&(Ee&192)===128&&(pe=($&15)<<18|(we&63)<<12|(xe&63)<<6|Ee&63,pe>65535&&pe<1114112&&(V=pe))}}V===null?(V=65533,ce=1):V>65535&&(V-=65536,C.push(V>>>10&1023|55296),V=56320|V&1023),C.push(V),B+=ce}return G(C)}const U=4096;function G(A){const h=A.length;if(h<=U)return String.fromCharCode.apply(String,A);let m="",C=0;for(;C<h;)m+=String.fromCharCode.apply(String,A.slice(C,C+=U));return m}function F(A,h,m){let C="";m=Math.min(A.length,m);for(let B=h;B<m;++B)C+=String.fromCharCode(A[B]&127);return C}function D(A,h,m){let C="";m=Math.min(A.length,m);for(let B=h;B<m;++B)C+=String.fromCharCode(A[B]);return C}function q(A,h,m){const C=A.length;(!h||h<0)&&(h=0),(!m||m<0||m>C)&&(m=C);let B="";for(let $=h;$<m;++$)B+=Ht[A[$]];return B}function M(A,h,m){const C=A.slice(h,m);let B="";for(let $=0;$<C.length-1;$+=2)B+=String.fromCharCode(C[$]+C[$+1]*256);return B}l.prototype.slice=function(h,m){const C=this.length;h=~~h,m=m===void 0?C:~~m,h<0?(h+=C,h<0&&(h=0)):h>C&&(h=C),m<0?(m+=C,m<0&&(m=0)):m>C&&(m=C),m<h&&(m=h);const B=this.subarray(h,m);return Object.setPrototypeOf(B,l.prototype),B};function Z(A,h,m){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+h>m)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(h,m,C){h=h>>>0,m=m>>>0,C||Z(h,m,this.length);let B=this[h],$=1,V=0;for(;++V<m&&($*=256);)B+=this[h+V]*$;return B},l.prototype.readUintBE=l.prototype.readUIntBE=function(h,m,C){h=h>>>0,m=m>>>0,C||Z(h,m,this.length);let B=this[h+--m],$=1;for(;m>0&&($*=256);)B+=this[h+--m]*$;return B},l.prototype.readUint8=l.prototype.readUInt8=function(h,m){return h=h>>>0,m||Z(h,1,this.length),this[h]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(h,m){return h=h>>>0,m||Z(h,2,this.length),this[h]|this[h+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(h,m){return h=h>>>0,m||Z(h,2,this.length),this[h]<<8|this[h+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(h,m){return h=h>>>0,m||Z(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(h,m){return h=h>>>0,m||Z(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},l.prototype.readBigUInt64LE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const B=m+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,$=this[++h]+this[++h]*2**8+this[++h]*2**16+C*2**24;return BigInt(B)+(BigInt($)<<BigInt(32))}),l.prototype.readBigUInt64BE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const B=m*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],$=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+C;return(BigInt(B)<<BigInt(32))+BigInt($)}),l.prototype.readIntLE=function(h,m,C){h=h>>>0,m=m>>>0,C||Z(h,m,this.length);let B=this[h],$=1,V=0;for(;++V<m&&($*=256);)B+=this[h+V]*$;return $*=128,B>=$&&(B-=Math.pow(2,8*m)),B},l.prototype.readIntBE=function(h,m,C){h=h>>>0,m=m>>>0,C||Z(h,m,this.length);let B=m,$=1,V=this[h+--B];for(;B>0&&($*=256);)V+=this[h+--B]*$;return $*=128,V>=$&&(V-=Math.pow(2,8*m)),V},l.prototype.readInt8=function(h,m){return h=h>>>0,m||Z(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},l.prototype.readInt16LE=function(h,m){h=h>>>0,m||Z(h,2,this.length);const C=this[h]|this[h+1]<<8;return C&32768?C|4294901760:C},l.prototype.readInt16BE=function(h,m){h=h>>>0,m||Z(h,2,this.length);const C=this[h+1]|this[h]<<8;return C&32768?C|4294901760:C},l.prototype.readInt32LE=function(h,m){return h=h>>>0,m||Z(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},l.prototype.readInt32BE=function(h,m){return h=h>>>0,m||Z(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},l.prototype.readBigInt64LE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const B=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(C<<24);return(BigInt(B)<<BigInt(32))+BigInt(m+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),l.prototype.readBigInt64BE=yt(function(h){h=h>>>0,et(h,"offset");const m=this[h],C=this[h+7];(m===void 0||C===void 0)&&Ot(h,this.length-8);const B=(m<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(B)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+C)}),l.prototype.readFloatLE=function(h,m){return h=h>>>0,m||Z(h,4,this.length),n.read(this,h,!0,23,4)},l.prototype.readFloatBE=function(h,m){return h=h>>>0,m||Z(h,4,this.length),n.read(this,h,!1,23,4)},l.prototype.readDoubleLE=function(h,m){return h=h>>>0,m||Z(h,8,this.length),n.read(this,h,!0,52,8)},l.prototype.readDoubleBE=function(h,m){return h=h>>>0,m||Z(h,8,this.length),n.read(this,h,!1,52,8)};function J(A,h,m,C,B,$){if(!l.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>B||h<$)throw new RangeError('"value" argument is out of bounds');if(m+C>A.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(h,m,C,B){if(h=+h,m=m>>>0,C=C>>>0,!B){const ce=Math.pow(2,8*C)-1;J(this,h,m,C,ce,0)}let $=1,V=0;for(this[m]=h&255;++V<C&&($*=256);)this[m+V]=h/$&255;return m+C},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(h,m,C,B){if(h=+h,m=m>>>0,C=C>>>0,!B){const ce=Math.pow(2,8*C)-1;J(this,h,m,C,ce,0)}let $=C-1,V=1;for(this[m+$]=h&255;--$>=0&&(V*=256);)this[m+$]=h/V&255;return m+C},l.prototype.writeUint8=l.prototype.writeUInt8=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,1,255,0),this[m]=h&255,m+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,2,65535,0),this[m]=h&255,this[m+1]=h>>>8,m+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,2,65535,0),this[m]=h>>>8,this[m+1]=h&255,m+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,4,4294967295,0),this[m+3]=h>>>24,this[m+2]=h>>>16,this[m+1]=h>>>8,this[m]=h&255,m+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,4,4294967295,0),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=h&255,m+4};function le(A,h,m,C,B){pt(h,C,B,A,m,7);let $=Number(h&BigInt(4294967295));A[m++]=$,$=$>>8,A[m++]=$,$=$>>8,A[m++]=$,$=$>>8,A[m++]=$;let V=Number(h>>BigInt(32)&BigInt(4294967295));return A[m++]=V,V=V>>8,A[m++]=V,V=V>>8,A[m++]=V,V=V>>8,A[m++]=V,m}function ue(A,h,m,C,B){pt(h,C,B,A,m,7);let $=Number(h&BigInt(4294967295));A[m+7]=$,$=$>>8,A[m+6]=$,$=$>>8,A[m+5]=$,$=$>>8,A[m+4]=$;let V=Number(h>>BigInt(32)&BigInt(4294967295));return A[m+3]=V,V=V>>8,A[m+2]=V,V=V>>8,A[m+1]=V,V=V>>8,A[m]=V,m+8}l.prototype.writeBigUInt64LE=yt(function(h,m=0){return le(this,h,m,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=yt(function(h,m=0){return ue(this,h,m,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(h,m,C,B){if(h=+h,m=m>>>0,!B){const we=Math.pow(2,8*C-1);J(this,h,m,C,we-1,-we)}let $=0,V=1,ce=0;for(this[m]=h&255;++$<C&&(V*=256);)h<0&&ce===0&&this[m+$-1]!==0&&(ce=1),this[m+$]=(h/V>>0)-ce&255;return m+C},l.prototype.writeIntBE=function(h,m,C,B){if(h=+h,m=m>>>0,!B){const we=Math.pow(2,8*C-1);J(this,h,m,C,we-1,-we)}let $=C-1,V=1,ce=0;for(this[m+$]=h&255;--$>=0&&(V*=256);)h<0&&ce===0&&this[m+$+1]!==0&&(ce=1),this[m+$]=(h/V>>0)-ce&255;return m+C},l.prototype.writeInt8=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,1,127,-128),h<0&&(h=255+h+1),this[m]=h&255,m+1},l.prototype.writeInt16LE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,2,32767,-32768),this[m]=h&255,this[m+1]=h>>>8,m+2},l.prototype.writeInt16BE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,2,32767,-32768),this[m]=h>>>8,this[m+1]=h&255,m+2},l.prototype.writeInt32LE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,4,2147483647,-2147483648),this[m]=h&255,this[m+1]=h>>>8,this[m+2]=h>>>16,this[m+3]=h>>>24,m+4},l.prototype.writeInt32BE=function(h,m,C){return h=+h,m=m>>>0,C||J(this,h,m,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=h&255,m+4},l.prototype.writeBigInt64LE=yt(function(h,m=0){return le(this,h,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=yt(function(h,m=0){return ue(this,h,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(A,h,m,C,B,$){if(m+C>A.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function he(A,h,m,C,B){return h=+h,m=m>>>0,B||se(A,h,m,4),n.write(A,h,m,C,23,4),m+4}l.prototype.writeFloatLE=function(h,m,C){return he(this,h,m,!0,C)},l.prototype.writeFloatBE=function(h,m,C){return he(this,h,m,!1,C)};function Ue(A,h,m,C,B){return h=+h,m=m>>>0,B||se(A,h,m,8),n.write(A,h,m,C,52,8),m+8}l.prototype.writeDoubleLE=function(h,m,C){return Ue(this,h,m,!0,C)},l.prototype.writeDoubleBE=function(h,m,C){return Ue(this,h,m,!1,C)},l.prototype.copy=function(h,m,C,B){if(!l.isBuffer(h))throw new TypeError("argument should be a Buffer");if(C||(C=0),!B&&B!==0&&(B=this.length),m>=h.length&&(m=h.length),m||(m=0),B>0&&B<C&&(B=C),B===C||h.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),h.length-m<B-C&&(B=h.length-m+C);const $=B-C;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,C,B):Uint8Array.prototype.set.call(h,this.subarray(C,B),m),$},l.prototype.fill=function(h,m,C,B){if(typeof h=="string"){if(typeof m=="string"?(B=m,m=0,C=this.length):typeof C=="string"&&(B=C,C=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!l.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(h.length===1){const V=h.charCodeAt(0);(B==="utf8"&&V<128||B==="latin1")&&(h=V)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(m<0||this.length<m||this.length<C)throw new RangeError("Out of range index");if(C<=m)return this;m=m>>>0,C=C===void 0?this.length:C>>>0,h||(h=0);let $;if(typeof h=="number")for($=m;$<C;++$)this[$]=h;else{const V=l.isBuffer(h)?h:l.from(h,B),ce=V.length;if(ce===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for($=0;$<C-m;++$)this[$+m]=V[$%ce]}return this};const Se={};function dt(A,h,m){Se[A]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(A,h){return`The "${A}" argument must be of type number. Received type ${typeof h}`},TypeError),dt("ERR_OUT_OF_RANGE",function(A,h,m){let C=`The value of "${A}" is out of range.`,B=m;return Number.isInteger(m)&&Math.abs(m)>2**32?B=zt(String(m)):typeof m=="bigint"&&(B=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(B=zt(B)),B+="n"),C+=` It must be ${h}. Received ${B}`,C},RangeError);function zt(A){let h="",m=A.length;const C=A[0]==="-"?1:0;for(;m>=C+4;m-=3)h=`_${A.slice(m-3,m)}${h}`;return`${A.slice(0,m)}${h}`}function Ge(A,h,m){et(h,"offset"),(A[h]===void 0||A[h+m]===void 0)&&Ot(h,A.length-(m+1))}function pt(A,h,m,C,B,$){if(A>m||A<h){const V=typeof h=="bigint"?"n":"";let ce;throw h===0||h===BigInt(0)?ce=`>= 0${V} and < 2${V} ** ${($+1)*8}${V}`:ce=`>= -(2${V} ** ${($+1)*8-1}${V}) and < 2 ** ${($+1)*8-1}${V}`,new Se.ERR_OUT_OF_RANGE("value",ce,A)}Ge(C,B,$)}function et(A,h){if(typeof A!="number")throw new Se.ERR_INVALID_ARG_TYPE(h,"number",A)}function Ot(A,h,m){throw Math.floor(A)!==A?(et(A,m),new Se.ERR_OUT_OF_RANGE("offset","an integer",A)):h<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,A)}const Te=/[^+/0-9A-Za-z-_]/g;function tt(A){if(A=A.split("=")[0],A=A.trim().replace(Te,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function gt(A,h){h=h||1/0;let m;const C=A.length;let B=null;const $=[];for(let V=0;V<C;++V){if(m=A.charCodeAt(V),m>55295&&m<57344){if(!B){if(m>56319){(h-=3)>-1&&$.push(239,191,189);continue}else if(V+1===C){(h-=3)>-1&&$.push(239,191,189);continue}B=m;continue}if(m<56320){(h-=3)>-1&&$.push(239,191,189),B=m;continue}m=(B-55296<<10|m-56320)+65536}else B&&(h-=3)>-1&&$.push(239,191,189);if(B=null,m<128){if((h-=1)<0)break;$.push(m)}else if(m<2048){if((h-=2)<0)break;$.push(m>>6|192,m&63|128)}else if(m<65536){if((h-=3)<0)break;$.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((h-=4)<0)break;$.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return $}function Tt(A){const h=[];for(let m=0;m<A.length;++m)h.push(A.charCodeAt(m)&255);return h}function Ss(A,h){let m,C,B;const $=[];for(let V=0;V<A.length&&!((h-=2)<0);++V)m=A.charCodeAt(V),C=m>>8,B=m%256,$.push(B),$.push(C);return $}function Fn(A){return e.toByteArray(tt(A))}function Tn(A,h,m,C){let B;for(B=0;B<C&&!(B+m>=h.length||B>=A.length);++B)h[B+m]=A[B];return B}function mt(A,h){return A instanceof h||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===h.name}function fr(A){return A!==A}const Ht=function(){const A="0123456789abcdef",h=new Array(256);for(let m=0;m<16;++m){const C=m*16;for(let B=0;B<16;++B)h[C+B]=A[m]+A[B]}return h}();function yt(A){return typeof BigInt>"u"?Ts:A}function Ts(){throw new Error("BigInt not supported")}})(If);wn.sha512Sync=(...t)=>Wa(wn.concatBytes(...t));wn.sha512Async=(...t)=>Promise.resolve(Wa(wn.concatBytes(...t)));const ts=[237,1];async function Ex(){try{const t=G2.randomPrivateKey(),e=await H2(t),n=new Uint8Array(ts.length+e.length);n.set(ts,0),n.set(e,ts.length);const r=g1.encode("base58btc",n),s=`did:key:${If.Buffer.from(r).toString("utf8")}`,o=If.Buffer.from(t).toString("hex");return console.log("Generated DID:",s),{did:s,privateKey:o}}catch(t){throw console.error("Error generating DID:",t),new Error("Failed to generate DID")}}function vc(t){try{if(!t.startsWith("did:key:"))throw new Error("Invalid DID format: must start with did:key:");const e=t.split("did:key:")[1];if(!e||!e.startsWith("z"))throw new Error("Invalid DID: identifier must be multibase-encoded (base58btc, prefix z)");const n=g1.decode(e);if(console.log("Decoded DID identifier bytes:",Array.from(n)),n[0]!==ts[0]||n[1]!==ts[1])throw new Error("Invalid DID: key type must be Ed25519");if(n.length!==32+ts.length)throw new Error("Invalid DID: Ed25519 public key must be 32 bytes");return!0}catch(e){return console.error("DID validation error:",e.message),!1}}var Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Js=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rl=0;Rl<Ki.length;Rl++)Js[Ki.charCodeAt(Rl)]=Rl;var wc=function(t){var e=new Uint8Array(t),n,r=e.length,i="";for(n=0;n<r;n+=3)i+=Ki[e[n]>>2],i+=Ki[(e[n]&3)<<4|e[n+1]>>4],i+=Ki[(e[n+1]&15)<<2|e[n+2]>>6],i+=Ki[e[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},xc=function(t){var e=t.length*.75,n=t.length,r,i=0,s,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=new ArrayBuffer(e),f=new Uint8Array(u);for(r=0;r<n;r+=4)s=Js[t.charCodeAt(r)],o=Js[t.charCodeAt(r+1)],l=Js[t.charCodeAt(r+2)],a=Js[t.charCodeAt(r+3)],f[i++]=s<<2|o>>4,f[i++]=(o&15)<<4|l>>2,f[i++]=(l&3)<<6|a&63;return u};wn.sha512Sync=(...t)=>Wa(wn.concatBytes(...t));wn.sha512Async=(...t)=>Promise.resolve(Wa(wn.concatBytes(...t)));function Of(t){return new TextEncoder().encode(t).buffer}function bx(t){return new TextDecoder().decode(t)}async function Sx(t,e){try{const n=await crypto.subtle.importKey("raw",Of(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),r=crypto.getRandomValues(new Uint8Array(16)),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},i,Of(t)),l={salt:wc(r.buffer),iv:wc(s.buffer),encryptedData:wc(o)};return console.log("crypto: Exported data:",l),JSON.stringify(l)}catch(n){throw console.error("crypto: Failed to export data:",n),new Error("Failed to export data: "+(n.message||"Unknown error"))}}async function Tx(t,e){try{const n=JSON.parse(t),{salt:r,iv:i,encryptedData:s}=n,o=await crypto.subtle.importKey("raw",Of(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),l=await crypto.subtle.deriveKey({name:"PBKDF2",salt:xc(r),iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["decrypt"]),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:xc(i)},l,xc(s)),u=bx(a);return console.log("crypto: Decrypted data:",u),u}catch(n){throw console.error("crypto: Failed to import data:",n),new Error("Failed to decrypt data: "+(n.message||"Unknown error"))}}const Ax=()=>{const{storage:t,error:e,isLoading:n}=h1(),[r,i]=ie.useState(null),[s,o]=ie.useState(null),[l,a]=ie.useState(null),[u,f]=ie.useState(!0),[d,p]=ie.useState(null);ie.useEffect(()=>{(async()=>{if(!n){if(!t){p("Storage not initialized"),f(!1);return}try{const b=await t.getCurrentDID();if(b)if(vc(b)){i(b),console.log("useUserProfile: Loaded DID from storage:",b);const T=await new Promise(_=>{chrome.storage.local.get(["privateKey"],O=>{_(O.privateKey||null)})});T?(o(T),console.log("useUserProfile: Loaded private key from storage")):console.warn("useUserProfile: Private key not found in storage");const L=await t.getProfile(b);L?(a(L),console.log("useUserProfile: Loaded profile from storage:",L)):console.warn("useUserProfile: Profile not found for DID:",b)}else console.warn("useUserProfile: Invalid DID in storage, clearing..."),await t.clearCurrentDID(),await new Promise(T=>{chrome.storage.local.remove("privateKey",()=>T())})}catch(b){console.error("useUserProfile: Failed to initialize:",b),p("Failed to initialize user profile")}finally{f(!1)}}})()},[t,n]);const x=ie.useCallback(async()=>{if(n){p("Storage is still initializing");return}if(!t){p("Storage not initialized");return}try{if(f(!0),p(null),!r){const{did:c,privateKey:b}=await Ex();if(vc(c))i(c),o(b),await t.setCurrentDID(c),await new Promise(T=>{chrome.storage.local.set({privateKey:b},()=>T())}),console.log("useUserProfile: Created and saved new DID:",c);else throw new Error("Generated DID is invalid")}}catch(c){console.error("useUserProfile: Authentication failed:",c),p("Authentication failed")}finally{f(!1)}},[t,n,r]),y=ie.useCallback(async()=>{if(n){p("Storage is still initializing");return}if(!t){p("Storage not initialized");return}try{await t.clearCurrentDID(),await new Promise(c=>{chrome.storage.local.remove("privateKey",()=>c())}),i(null),o(null),a(null),p(null),console.log("useUserProfile: Signed out")}catch(c){console.error("useUserProfile: Sign out failed:",c),p("Sign out failed")}},[t,n]),E=ie.useCallback(async c=>{if(n)throw new Error("Storage is still initializing");if(!t)throw new Error("Storage not initialized");if(!r||!s)throw new Error("Not authenticated");try{const T=JSON.stringify({did:r,privateKey:s,profile:l||{did:r,handle:"Unknown"}}),L=await Sx(T,c);return console.log("useUserProfile: Exported identity:",L),L}catch(b){throw console.error("useUserProfile: Export identity failed:",b),new Error("Failed to export identity: "+(b.message||"Unknown error"))}},[n,t,r,s,l]),S=ie.useCallback(async(c,b)=>{if(n)throw new Error("Storage is still initializing");if(!t)throw new Error("Storage not initialized");try{const T=await Tx(c,b),{did:L,privateKey:_,profile:O}=JSON.parse(T);if(!vc(L))throw new Error("Invalid DID format");if(i(L),o(_),await t.setCurrentDID(L),await new Promise(j=>{chrome.storage.local.set({privateKey:_},()=>j())}),console.log("useUserProfile: Imported identity:",L),O&&O.did)await t.saveProfile(O),a(O),console.log("useUserProfile: Restored profile after import:",O);else{const j=await t.getProfile(L);j&&(a(j),console.log("useUserProfile: Loaded profile after import:",j))}}catch(T){console.error("useUserProfile: Import identity failed:",T);let L="Failed to import identity";throw T.message.includes("OperationError")||T.message.includes("Failed to decrypt")?L="Failed to import identity: Incorrect passphrase or corrupted data":T.message.includes("Invalid DID format")?L="Failed to import identity: Invalid DID format":L="Failed to import identity: "+(T.message||"Unknown error"),new Error(L)}},[n,t]),w=ie.useCallback(async(c,b)=>{if(n){p("Storage is still initializing");return}if(!t||!r){p("Not authenticated or storage not initialized");return}try{const T={did:r,handle:c,profilePicture:b};console.log("useUserProfile: Saving profile to storage:",T),await t.saveProfile(T),a(T),p(null)}catch(T){console.error("useUserProfile: Failed to create profile:",T),p("Failed to create profile")}},[n,t,r]),v=ie.useCallback(async(c,b)=>{if(n){p("Storage is still initializing");return}if(!t||!r){p("Not authenticated or storage not initialized");return}try{const T={did:r,handle:c,profilePicture:b};console.log("useUserProfile: Updating profile in storage:",T),await t.saveProfile(T),a(T),p(null)}catch(T){console.error("useUserProfile: Failed to update profile:",T),p("Failed to update profile")}},[n,t,r]);return{did:r,profile:l,loading:u||n,error:d||e,authenticate:x,signOut:y,exportIdentity:E,importIdentity:S,createProfile:w,updateProfile:v}},kx=({url:t,did:e})=>{const{storage:n,error:r,isLoading:i}=h1(),[s,o]=ie.useState([]),[l,a]=ie.useState({}),[u,f]=ie.useState(null),[d,p]=ie.useState(!1);ie.useEffect(()=>{if(!t){console.log("useAnnotations: No URL provided, skipping fetch"),p(!1);return}if(i){console.log("useAnnotations: Waiting for storage to initialize"),p(!0);return}if(!n){console.error("useAnnotations: Storage not initialized"),f(r||"Storage not initialized"),p(!1);return}const S=Pi(t);console.log("useAnnotations: Fetching annotations for URL:",S),p(!0),f(null),n.getAnnotations(S).then(w=>{console.log("useAnnotations: Fetched annotations:",w),o(w);const v=w.map(c=>n.getProfile(c.author).then(b=>({did:c.author,profile:b})));Promise.all(v).then(c=>{const b=c.reduce((T,{did:L,profile:_})=>(_&&(T[L]=_),T),{});a(T=>({...T,...b}))})}).catch(w=>{console.error("useAnnotations: Failed to fetch annotations:",w),f(w.message||"Failed to fetch annotations")}).finally(()=>{p(!1)})},[t,n,i,r]);const x=ie.useCallback(async S=>{if(!e)throw new Error("User not authenticated");if(!n)throw new Error("Storage not initialized");const w={id:Date.now().toString(),url:Pi(t),content:S,author:e,timestamp:Date.now(),comments:[]};await n.saveAnnotation(w),o(v=>[...v,w])},[e,t,n]),y=ie.useCallback(async S=>{if(!n)throw new Error("Storage not initialized");await n.deleteAnnotation(Pi(t),S),o(w=>w.filter(v=>v.id!==S))},[t,n]),E=ie.useCallback(async(S,w)=>{if(!e)throw new Error("User not authenticated");if(!n)throw new Error("Storage not initialized");const v={id:Date.now().toString(),content:w,author:e,timestamp:Date.now()};await n.saveComment(Pi(t),S,v),o(c=>c.map(b=>b.id===S?{...b,comments:[...b.comments||[],v]}:b))},[e,t,n]);return{annotations:s,profiles:l,error:u||r,loading:d||i,handleSaveAnnotation:x,handleDeleteAnnotation:y,handleSaveComment:E}};var A1=typeof global=="object"&&global&&global.Object===Object&&global,Nx=typeof self=="object"&&self&&self.Object===Object&&self,qn=A1||Nx||Function("return this")(),jr=qn.Symbol,k1=Object.prototype,_x=k1.hasOwnProperty,Cx=k1.toString,Vs=jr?jr.toStringTag:void 0;function Lx(t){var e=_x.call(t,Vs),n=t[Vs];try{t[Vs]=void 0;var r=!0}catch{}var i=Cx.call(t);return r&&(e?t[Vs]=n:delete t[Vs]),i}var Ix=Object.prototype,Ox=Ix.toString;function Rx(t){return Ox.call(t)}var Px="[object Null]",Dx="[object Undefined]",Yp=jr?jr.toStringTag:void 0;function bs(t){return t==null?t===void 0?Dx:Px:Yp&&Yp in Object(t)?Lx(t):Rx(t)}function sr(t){return t!=null&&typeof t=="object"}var li=Array.isArray;function qr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function N1(t){return t}var Bx="[object AsyncFunction]",jx="[object Function]",Ux="[object GeneratorFunction]",Mx="[object Proxy]";function ld(t){if(!qr(t))return!1;var e=bs(t);return e==jx||e==Ux||e==Bx||e==Mx}var Ec=qn["__core-js_shared__"],Jp=function(){var t=/[^.]+$/.exec(Ec&&Ec.keys&&Ec.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $x(t){return!!Jp&&Jp in t}var qx=Function.prototype,Fx=qx.toString;function hi(t){if(t!=null){try{return Fx.call(t)}catch{}try{return t+""}catch{}}return""}var zx=/[\\^$.*+?()[\]{}|]/g,Hx=/^\[object .+?Constructor\]$/,Gx=Function.prototype,Vx=Object.prototype,Kx=Gx.toString,Wx=Vx.hasOwnProperty,Zx=RegExp("^"+Kx.call(Wx).replace(zx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qx(t){if(!qr(t)||$x(t))return!1;var e=ld(t)?Zx:Hx;return e.test(hi(t))}function Xx(t,e){return t==null?void 0:t[e]}function di(t,e){var n=Xx(t,e);return Qx(n)?n:void 0}var Rf=di(qn,"WeakMap"),eg=Object.create,Yx=function(){function t(){}return function(e){if(!qr(e))return{};if(eg)return eg(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Jx(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function eE(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var tE=800,nE=16,rE=Date.now;function iE(t){var e=0,n=0;return function(){var r=rE(),i=nE-(r-n);if(n=r,i>0){if(++e>=tE)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function sE(t){return function(){return t}}var ka=function(){try{var t=di(Object,"defineProperty");return t({},"",{}),t}catch{}}(),oE=ka?function(t,e){return ka(t,"toString",{configurable:!0,enumerable:!1,value:sE(e),writable:!0})}:N1,lE=iE(oE);function aE(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var uE=9007199254740991,cE=/^(?:0|[1-9]\d*)$/;function _1(t,e){var n=typeof t;return e=e??uE,!!e&&(n=="number"||n!="symbol"&&cE.test(t))&&t>-1&&t%1==0&&t<e}function ad(t,e,n){e=="__proto__"&&ka?ka(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Wo(t,e){return t===e||t!==t&&e!==e}var fE=Object.prototype,hE=fE.hasOwnProperty;function C1(t,e,n){var r=t[e];(!(hE.call(t,e)&&Wo(r,n))||n===void 0&&!(e in t))&&ad(t,e,n)}function dE(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],a=void 0;a===void 0&&(a=t[l]),i?ad(n,l,a):C1(n,l,a)}return n}var tg=Math.max;function pE(t,e,n){return e=tg(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=tg(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),Jx(t,this,l)}}function gE(t,e){return lE(pE(t,e,N1),t+"")}var mE=9007199254740991;function L1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=mE}function Qa(t){return t!=null&&L1(t.length)&&!ld(t)}function yE(t,e,n){if(!qr(n))return!1;var r=typeof e;return(r=="number"?Qa(n)&&_1(e,n.length):r=="string"&&e in n)?Wo(n[e],t):!1}function vE(t){return gE(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&yE(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}var wE=Object.prototype;function ud(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||wE;return t===n}function xE(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var EE="[object Arguments]";function ng(t){return sr(t)&&bs(t)==EE}var I1=Object.prototype,bE=I1.hasOwnProperty,SE=I1.propertyIsEnumerable,Pf=ng(function(){return arguments}())?ng:function(t){return sr(t)&&bE.call(t,"callee")&&!SE.call(t,"callee")};function TE(){return!1}var O1=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,rg=O1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,AE=rg&&rg.exports===O1,ig=AE?qn.Buffer:void 0,kE=ig?ig.isBuffer:void 0,Do=kE||TE,NE="[object Arguments]",_E="[object Array]",CE="[object Boolean]",LE="[object Date]",IE="[object Error]",OE="[object Function]",RE="[object Map]",PE="[object Number]",DE="[object Object]",BE="[object RegExp]",jE="[object Set]",UE="[object String]",ME="[object WeakMap]",$E="[object ArrayBuffer]",qE="[object DataView]",FE="[object Float32Array]",zE="[object Float64Array]",HE="[object Int8Array]",GE="[object Int16Array]",VE="[object Int32Array]",KE="[object Uint8Array]",WE="[object Uint8ClampedArray]",ZE="[object Uint16Array]",QE="[object Uint32Array]",_e={};_e[FE]=_e[zE]=_e[HE]=_e[GE]=_e[VE]=_e[KE]=_e[WE]=_e[ZE]=_e[QE]=!0;_e[NE]=_e[_E]=_e[$E]=_e[CE]=_e[qE]=_e[LE]=_e[IE]=_e[OE]=_e[RE]=_e[PE]=_e[DE]=_e[BE]=_e[jE]=_e[UE]=_e[ME]=!1;function XE(t){return sr(t)&&L1(t.length)&&!!_e[bs(t)]}function cd(t){return function(e){return t(e)}}var R1=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,ho=R1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,YE=ho&&ho.exports===R1,bc=YE&&A1.process,ps=function(){try{var t=ho&&ho.require&&ho.require("util").types;return t||bc&&bc.binding&&bc.binding("util")}catch{}}(),sg=ps&&ps.isTypedArray,fd=sg?cd(sg):XE,JE=Object.prototype,eb=JE.hasOwnProperty;function P1(t,e){var n=li(t),r=!n&&Pf(t),i=!n&&!r&&Do(t),s=!n&&!r&&!i&&fd(t),o=n||r||i||s,l=o?xE(t.length,String):[],a=l.length;for(var u in t)(e||eb.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||_1(u,a)))&&l.push(u);return l}function D1(t,e){return function(n){return t(e(n))}}var tb=D1(Object.keys,Object),nb=Object.prototype,rb=nb.hasOwnProperty;function ib(t){if(!ud(t))return tb(t);var e=[];for(var n in Object(t))rb.call(t,n)&&n!="constructor"&&e.push(n);return e}function sb(t){return Qa(t)?P1(t):ib(t)}function ob(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var lb=Object.prototype,ab=lb.hasOwnProperty;function ub(t){if(!qr(t))return ob(t);var e=ud(t),n=[];for(var r in t)r=="constructor"&&(e||!ab.call(t,r))||n.push(r);return n}function B1(t){return Qa(t)?P1(t,!0):ub(t)}var Bo=di(Object,"create");function cb(){this.__data__=Bo?Bo(null):{},this.size=0}function fb(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var hb="__lodash_hash_undefined__",db=Object.prototype,pb=db.hasOwnProperty;function gb(t){var e=this.__data__;if(Bo){var n=e[t];return n===hb?void 0:n}return pb.call(e,t)?e[t]:void 0}var mb=Object.prototype,yb=mb.hasOwnProperty;function vb(t){var e=this.__data__;return Bo?e[t]!==void 0:yb.call(e,t)}var wb="__lodash_hash_undefined__";function xb(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bo&&e===void 0?wb:e,this}function ai(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ai.prototype.clear=cb;ai.prototype.delete=fb;ai.prototype.get=gb;ai.prototype.has=vb;ai.prototype.set=xb;function Eb(){this.__data__=[],this.size=0}function Xa(t,e){for(var n=t.length;n--;)if(Wo(t[n][0],e))return n;return-1}var bb=Array.prototype,Sb=bb.splice;function Tb(t){var e=this.__data__,n=Xa(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Sb.call(e,n,1),--this.size,!0}function Ab(t){var e=this.__data__,n=Xa(e,t);return n<0?void 0:e[n][1]}function kb(t){return Xa(this.__data__,t)>-1}function Nb(t,e){var n=this.__data__,r=Xa(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ur(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ur.prototype.clear=Eb;ur.prototype.delete=Tb;ur.prototype.get=Ab;ur.prototype.has=kb;ur.prototype.set=Nb;var jo=di(qn,"Map");function _b(){this.size=0,this.__data__={hash:new ai,map:new(jo||ur),string:new ai}}function Cb(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ya(t,e){var n=t.__data__;return Cb(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Lb(t){var e=Ya(this,t).delete(t);return this.size-=e?1:0,e}function Ib(t){return Ya(this,t).get(t)}function Ob(t){return Ya(this,t).has(t)}function Rb(t,e){var n=Ya(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function pi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pi.prototype.clear=_b;pi.prototype.delete=Lb;pi.prototype.get=Ib;pi.prototype.has=Ob;pi.prototype.set=Rb;function Pb(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var j1=D1(Object.getPrototypeOf,Object),Db="[object Object]",Bb=Function.prototype,jb=Object.prototype,U1=Bb.toString,Ub=jb.hasOwnProperty,Mb=U1.call(Object);function $b(t){if(!sr(t)||bs(t)!=Db)return!1;var e=j1(t);if(e===null)return!0;var n=Ub.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&U1.call(n)==Mb}function qb(){this.__data__=new ur,this.size=0}function Fb(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function zb(t){return this.__data__.get(t)}function Hb(t){return this.__data__.has(t)}var Gb=200;function Vb(t,e){var n=this.__data__;if(n instanceof ur){var r=n.__data__;if(!jo||r.length<Gb-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new pi(r)}return n.set(t,e),this.size=n.size,this}function jn(t){var e=this.__data__=new ur(t);this.size=e.size}jn.prototype.clear=qb;jn.prototype.delete=Fb;jn.prototype.get=zb;jn.prototype.has=Hb;jn.prototype.set=Vb;var M1=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,og=M1&&typeof jt=="object"&&jt&&!jt.nodeType&&jt,Kb=og&&og.exports===M1,lg=Kb?qn.Buffer:void 0,ag=lg?lg.allocUnsafe:void 0;function $1(t,e){if(e)return t.slice();var n=t.length,r=ag?ag(n):new t.constructor(n);return t.copy(r),r}function Wb(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function Zb(){return[]}var Qb=Object.prototype,Xb=Qb.propertyIsEnumerable,ug=Object.getOwnPropertySymbols,Yb=ug?function(t){return t==null?[]:(t=Object(t),Wb(ug(t),function(e){return Xb.call(t,e)}))}:Zb;function Jb(t,e,n){var r=e(t);return li(t)?r:Pb(r,n(t))}function Df(t){return Jb(t,sb,Yb)}var Bf=di(qn,"DataView"),jf=di(qn,"Promise"),Uf=di(qn,"Set"),cg="[object Map]",eS="[object Object]",fg="[object Promise]",hg="[object Set]",dg="[object WeakMap]",pg="[object DataView]",tS=hi(Bf),nS=hi(jo),rS=hi(jf),iS=hi(Uf),sS=hi(Rf),dn=bs;(Bf&&dn(new Bf(new ArrayBuffer(1)))!=pg||jo&&dn(new jo)!=cg||jf&&dn(jf.resolve())!=fg||Uf&&dn(new Uf)!=hg||Rf&&dn(new Rf)!=dg)&&(dn=function(t){var e=bs(t),n=e==eS?t.constructor:void 0,r=n?hi(n):"";if(r)switch(r){case tS:return pg;case nS:return cg;case rS:return fg;case iS:return hg;case sS:return dg}return e});var oS=Object.prototype,lS=oS.hasOwnProperty;function aS(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&lS.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Na=qn.Uint8Array;function hd(t){var e=new t.constructor(t.byteLength);return new Na(e).set(new Na(t)),e}function uS(t,e){var n=hd(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var cS=/\w*$/;function fS(t){var e=new t.constructor(t.source,cS.exec(t));return e.lastIndex=t.lastIndex,e}var gg=jr?jr.prototype:void 0,mg=gg?gg.valueOf:void 0;function hS(t){return mg?Object(mg.call(t)):{}}function q1(t,e){var n=e?hd(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var dS="[object Boolean]",pS="[object Date]",gS="[object Map]",mS="[object Number]",yS="[object RegExp]",vS="[object Set]",wS="[object String]",xS="[object Symbol]",ES="[object ArrayBuffer]",bS="[object DataView]",SS="[object Float32Array]",TS="[object Float64Array]",AS="[object Int8Array]",kS="[object Int16Array]",NS="[object Int32Array]",_S="[object Uint8Array]",CS="[object Uint8ClampedArray]",LS="[object Uint16Array]",IS="[object Uint32Array]";function OS(t,e,n){var r=t.constructor;switch(e){case ES:return hd(t);case dS:case pS:return new r(+t);case bS:return uS(t);case SS:case TS:case AS:case kS:case NS:case _S:case CS:case LS:case IS:return q1(t,n);case gS:return new r;case mS:case wS:return new r(t);case yS:return fS(t);case vS:return new r;case xS:return hS(t)}}function F1(t){return typeof t.constructor=="function"&&!ud(t)?Yx(j1(t)):{}}var RS="[object Map]";function PS(t){return sr(t)&&dn(t)==RS}var yg=ps&&ps.isMap,DS=yg?cd(yg):PS,BS="[object Set]";function jS(t){return sr(t)&&dn(t)==BS}var vg=ps&&ps.isSet,US=vg?cd(vg):jS,MS=1,z1="[object Arguments]",$S="[object Array]",qS="[object Boolean]",FS="[object Date]",zS="[object Error]",H1="[object Function]",HS="[object GeneratorFunction]",GS="[object Map]",VS="[object Number]",G1="[object Object]",KS="[object RegExp]",WS="[object Set]",ZS="[object String]",QS="[object Symbol]",XS="[object WeakMap]",YS="[object ArrayBuffer]",JS="[object DataView]",e3="[object Float32Array]",t3="[object Float64Array]",n3="[object Int8Array]",r3="[object Int16Array]",i3="[object Int32Array]",s3="[object Uint8Array]",o3="[object Uint8ClampedArray]",l3="[object Uint16Array]",a3="[object Uint32Array]",Ae={};Ae[z1]=Ae[$S]=Ae[YS]=Ae[JS]=Ae[qS]=Ae[FS]=Ae[e3]=Ae[t3]=Ae[n3]=Ae[r3]=Ae[i3]=Ae[GS]=Ae[VS]=Ae[G1]=Ae[KS]=Ae[WS]=Ae[ZS]=Ae[QS]=Ae[s3]=Ae[o3]=Ae[l3]=Ae[a3]=!0;Ae[zS]=Ae[H1]=Ae[XS]=!1;function Jl(t,e,n,r,i,s){var o,l=e&MS;if(o!==void 0)return o;if(!qr(t))return t;var a=li(t);if(a)o=aS(t);else{var u=dn(t),f=u==H1||u==HS;if(Do(t))return $1(t,l);if(u==G1||u==z1||f&&!i)o=f?{}:F1(t);else{if(!Ae[u])return i?t:{};o=OS(t,u,l)}}s||(s=new jn);var d=s.get(t);if(d)return d;s.set(t,o),US(t)?t.forEach(function(y){o.add(Jl(y,e,n,y,t,s))}):DS(t)&&t.forEach(function(y,E){o.set(E,Jl(y,e,n,E,t,s))});var p=Df,x=a?void 0:p(t);return aE(x||t,function(y,E){x&&(E=y,y=t[E]),C1(o,E,Jl(y,e,n,E,t,s))}),o}var u3=1,c3=4;function ns(t){return Jl(t,u3|c3)}var f3="__lodash_hash_undefined__";function h3(t){return this.__data__.set(t,f3),this}function d3(t){return this.__data__.has(t)}function _a(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pi;++e<n;)this.add(t[e])}_a.prototype.add=_a.prototype.push=h3;_a.prototype.has=d3;function p3(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function g3(t,e){return t.has(e)}var m3=1,y3=2;function V1(t,e,n,r,i,s){var o=n&m3,l=t.length,a=e.length;if(l!=a&&!(o&&a>l))return!1;var u=s.get(t),f=s.get(e);if(u&&f)return u==e&&f==t;var d=-1,p=!0,x=n&y3?new _a:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var y=t[d],E=e[d];if(r)var S=o?r(E,y,d,e,t,s):r(y,E,d,t,e,s);if(S!==void 0){if(S)continue;p=!1;break}if(x){if(!p3(e,function(w,v){if(!g3(x,v)&&(y===w||i(y,w,n,r,s)))return x.push(v)})){p=!1;break}}else if(!(y===E||i(y,E,n,r,s))){p=!1;break}}return s.delete(t),s.delete(e),p}function v3(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function w3(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var x3=1,E3=2,b3="[object Boolean]",S3="[object Date]",T3="[object Error]",A3="[object Map]",k3="[object Number]",N3="[object RegExp]",_3="[object Set]",C3="[object String]",L3="[object Symbol]",I3="[object ArrayBuffer]",O3="[object DataView]",wg=jr?jr.prototype:void 0,Sc=wg?wg.valueOf:void 0;function R3(t,e,n,r,i,s,o){switch(n){case O3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I3:return!(t.byteLength!=e.byteLength||!s(new Na(t),new Na(e)));case b3:case S3:case k3:return Wo(+t,+e);case T3:return t.name==e.name&&t.message==e.message;case N3:case C3:return t==e+"";case A3:var l=v3;case _3:var a=r&x3;if(l||(l=w3),t.size!=e.size&&!a)return!1;var u=o.get(t);if(u)return u==e;r|=E3,o.set(t,e);var f=V1(l(t),l(e),r,i,s,o);return o.delete(t),f;case L3:if(Sc)return Sc.call(t)==Sc.call(e)}return!1}var P3=1,D3=Object.prototype,B3=D3.hasOwnProperty;function j3(t,e,n,r,i,s){var o=n&P3,l=Df(t),a=l.length,u=Df(e),f=u.length;if(a!=f&&!o)return!1;for(var d=a;d--;){var p=l[d];if(!(o?p in e:B3.call(e,p)))return!1}var x=s.get(t),y=s.get(e);if(x&&y)return x==e&&y==t;var E=!0;s.set(t,e),s.set(e,t);for(var S=o;++d<a;){p=l[d];var w=t[p],v=e[p];if(r)var c=o?r(v,w,p,e,t,s):r(w,v,p,t,e,s);if(!(c===void 0?w===v||i(w,v,n,r,s):c)){E=!1;break}S||(S=p=="constructor")}if(E&&!S){var b=t.constructor,T=e.constructor;b!=T&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof T=="function"&&T instanceof T)&&(E=!1)}return s.delete(t),s.delete(e),E}var U3=1,xg="[object Arguments]",Eg="[object Array]",Pl="[object Object]",M3=Object.prototype,bg=M3.hasOwnProperty;function $3(t,e,n,r,i,s){var o=li(t),l=li(e),a=o?Eg:dn(t),u=l?Eg:dn(e);a=a==xg?Pl:a,u=u==xg?Pl:u;var f=a==Pl,d=u==Pl,p=a==u;if(p&&Do(t)){if(!Do(e))return!1;o=!0,f=!1}if(p&&!f)return s||(s=new jn),o||fd(t)?V1(t,e,n,r,i,s):R3(t,e,a,n,r,i,s);if(!(n&U3)){var x=f&&bg.call(t,"__wrapped__"),y=d&&bg.call(e,"__wrapped__");if(x||y){var E=x?t.value():t,S=y?e.value():e;return s||(s=new jn),i(E,S,n,r,s)}}return p?(s||(s=new jn),j3(t,e,n,r,i,s)):!1}function K1(t,e,n,r,i){return t===e?!0:t==null||e==null||!sr(t)&&!sr(e)?t!==t&&e!==e:$3(t,e,n,r,K1,i)}function q3(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),l=o.length;l--;){var a=o[++i];if(n(s[a],a,s)===!1)break}return e}}var F3=q3();function Mf(t,e,n){(n!==void 0&&!Wo(t[e],n)||n===void 0&&!(e in t))&&ad(t,e,n)}function z3(t){return sr(t)&&Qa(t)}function $f(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function H3(t){return dE(t,B1(t))}function G3(t,e,n,r,i,s,o){var l=$f(t,n),a=$f(e,n),u=o.get(a);if(u){Mf(t,n,u);return}var f=s?s(l,a,n+"",t,e,o):void 0,d=f===void 0;if(d){var p=li(a),x=!p&&Do(a),y=!p&&!x&&fd(a);f=a,p||x||y?li(l)?f=l:z3(l)?f=eE(l):x?(d=!1,f=$1(a,!0)):y?(d=!1,f=q1(a,!0)):f=[]:$b(a)||Pf(a)?(f=l,Pf(l)?f=H3(l):(!qr(l)||ld(l))&&(f=F1(a))):d=!1}d&&(o.set(a,f),i(f,a,r,s,o),o.delete(a)),Mf(t,n,f)}function W1(t,e,n,r,i){t!==e&&F3(e,function(s,o){if(i||(i=new jn),qr(s))G3(t,e,o,n,W1,r,i);else{var l=r?r($f(t,o),s,o+"",t,e,i):void 0;l===void 0&&(l=s),Mf(t,o,l)}},B1)}function dd(t,e){return K1(t,e)}var Pr=vE(function(t,e,n){W1(t,e,n)}),re=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(re||{});class Mn{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=re.TYPE&re.ATTRIBUTE;this.scope=r.scope!=null?r.scope&re.LEVEL|i:re.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class rs extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const Z1=class qf{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new rs(`Unable to create ${n} blot`);const s=i,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(r),l=new s(e,o,r);return qf.blots.set(l.domNode,l),l}find(e,n=!1){return qf.find(e,n)}query(e,n=re.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&re.LEVEL&re.BLOCK?r=this.types.block:e&re.LEVEL&re.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&re.LEVEL&r.scope&&n&re.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new rs("Invalid definition");if(r&&n.blotName==="abstract")throw new rs("Cannot register abstract class");const s=r?n.blotName:i?n.attrName:void 0;return this.types[s]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};Z1.blots=new WeakMap;let gs=Z1;function Sg(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class V3 extends Mn{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){Sg(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(Sg(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const En=V3;function Tc(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class K3 extends Mn{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[Tc(this.keyName)]=n,!0):!1}remove(e){e.style[Tc(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[Tc(this.keyName)];return this.canAdd(e,n)?n:""}}const Fr=K3;class W3{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=gs.find(this.domNode);if(e==null)return;const n=Mn.keys(this.domNode),r=En.keys(this.domNode),i=Fr.keys(this.domNode);n.concat(r).concat(i).forEach(s=>{const o=e.scroll.query(s,re.ATTRIBUTE);o instanceof Mn&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const Ja=W3,Q1=class{constructor(e,n){this.scroll=e,this.domNode=n,gs.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new rs("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),gs.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const s=this.isolate(e,n);if(this.scroll.query(r,re.BLOT)!=null&&i)s.wrap(r,i);else if(this.scroll.query(r,re.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);s.wrap(o),o.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),s=this.split(e);this.parent.insertBefore(i,s||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new rs(`Cannot wrap ${e}`);return r.appendChild(this),r}};Q1.blotName="abstract";let X1=Q1;const Y1=class extends X1{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Y1.scope=re.INLINE_BLOT;let Z3=Y1;const ct=Z3;class Q3{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const s=i.length();if(e<s||n&&e===s&&(i.next==null||i.next.length()!==0))return[i,e];e-=s,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,s]=this.find(e);let o=e-s;const l=this.iterator(i);let a=l();for(;a&&o<e+n;){const u=a.length();e>o?r(a,e-o,Math.min(n,o+u-e)):r(a,0,Math.min(u,e+n-o)),o+=u,a=l()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function Tg(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(re.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const J1=class yr extends X1{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,yr.uiClass&&this.uiNode.classList.add(yr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Q3,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=Tg(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof rs)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,s)=>{r.deleteAt(i,s)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof yr?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],s=r;return this.children.forEachAt(n,r,(o,l,a)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&i.push(o),o instanceof yr&&(i=i.concat(o.descendants(e,l,s))),s-=a}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===re.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof yr?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(s,o,l)=>{s.formatAt(o,l,r,i)})}insertAt(e,n,r){const[i,s]=this.children.find(e);if(i)i.insertAt(s,n,r);else{const o=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),s=[[this,e]];return r instanceof yr?s.concat(r.path(i,n)):(r!=null&&s.push([r,i]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof yr&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,s,o)=>{const l=i.split(s,n);l!=null&&r.appendChild(l)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(r.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(s);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),r.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,o)=>s===o?0:s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let o=null;s.nextSibling!=null&&(o=this.scroll.find(s.nextSibling));const l=Tg(s,this.scroll);(l.next!==o||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,o||void 0))}),this.enforceAllowedChildren()}};J1.uiClass="";let X3=J1;const yn=X3;function Y3(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const _i=class Ci extends yn{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Ci.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Ja(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof Ci||(r=r.wrap(Ci.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,re.INLINE);if(r==null)return;r instanceof Mn?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,re.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof Ci&&r.prev===this&&Y3(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof Ci&&this.attributes.move(r),r}};_i.allowedChildren=[_i,ct],_i.blotName="inline",_i.scope=re.INLINE_BLOT,_i.tagName="SPAN";let J3=_i;const pd=J3,Li=class Ff extends yn{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Ff.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Ja(this.domNode)}format(e,n){const r=this.scroll.query(e,re.BLOCK);r!=null&&(r instanceof Mn?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(Ff.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,re.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,re.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const s=this.scroll.create(n,r);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Li.blotName="block",Li.scope=re.BLOCK_BLOT,Li.tagName="P",Li.allowedChildren=[pd,Li,ct];let e4=Li;const Uo=e4,zf=class extends yn{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};zf.blotName="container",zf.scope=re.BLOCK_BLOT;let t4=zf;const eu=t4;class n4 extends ct{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ft=n4,r4={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},i4=100,Ii=class extends yn{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,r4),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=re.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const s=(a,u=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),u&&s(a.parent))},o=a=>{r.has(a.domNode)&&(a instanceof yn&&a.children.forEach(o),r.delete(a.domNode),a.optimize(n))};let l=e;for(let a=0;l.length>0;a+=1){if(a>=i4)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(u=>{const f=this.find(u.target,!0);f!=null&&(f.domNode===u.target&&(u.type==="childList"?(s(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(d=>{const p=this.find(d,!1);s(p,!1),p instanceof yn&&p.children.forEach(x=>{s(x,!1)})})):u.type==="attributes"&&s(f.prev)),s(f))}),this.children.forEach(o),l=Array.from(this.observer.takeRecords()),i=l.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const s=this.find(i.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(i),null):(r.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};Ii.blotName="scroll",Ii.defaultChild=Uo,Ii.allowedChildren=[Uo,eu],Ii.scope=re.BLOCK_BLOT,Ii.tagName="DIV";let s4=Ii;const gd=s4,Hf=class ey extends ct{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ey&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Hf.blotName="text",Hf.scope=re.INLINE_BLOT;let o4=Hf;const Ca=o4,l4=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Mn,AttributorStore:Ja,BlockBlot:Uo,ClassAttributor:En,ContainerBlot:eu,EmbedBlot:Ft,InlineBlot:pd,LeafBlot:ct,ParentBlot:yn,Registry:gs,Scope:re,ScrollBlot:gd,StyleAttributor:Fr,TextBlot:Ca},Symbol.toStringTag,{value:"Module"}));var Gf={exports:{}},Dt=-1,xt=1,qe=0;function Mo(t,e,n,r,i){if(t===e)return t?[[qe,t]]:[];if(n!=null){var s=m4(t,e,n);if(s)return s}var o=md(t,e),l=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=tu(t,e);var a=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var u=a4(t,e);return l&&u.unshift([qe,l]),a&&u.push([qe,a]),yd(u,i),r&&f4(u),u}function a4(t,e){var n;if(!t)return[[xt,e]];if(!e)return[[Dt,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,s=r.indexOf(i);if(s!==-1)return n=[[xt,r.substring(0,s)],[qe,i],[xt,r.substring(s+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Dt),n;if(i.length===1)return[[Dt,t],[xt,e]];var o=c4(t,e);if(o){var l=o[0],a=o[1],u=o[2],f=o[3],d=o[4],p=Mo(l,u),x=Mo(a,f);return p.concat([[qe,d]],x)}return u4(t,e)}function u4(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,o=2*i,l=new Array(o),a=new Array(o),u=0;u<o;u++)l[u]=-1,a[u]=-1;l[s+1]=0,a[s+1]=0;for(var f=n-r,d=f%2!==0,p=0,x=0,y=0,E=0,S=0;S<i;S++){for(var w=-S+p;w<=S-x;w+=2){var v=s+w,c;w===-S||w!==S&&l[v-1]<l[v+1]?c=l[v+1]:c=l[v-1]+1;for(var b=c-w;c<n&&b<r&&t.charAt(c)===e.charAt(b);)c++,b++;if(l[v]=c,c>n)x+=2;else if(b>r)p+=2;else if(d){var T=s+f-w;if(T>=0&&T<o&&a[T]!==-1){var L=n-a[T];if(c>=L)return Ag(t,e,c,b)}}}for(var _=-S+y;_<=S-E;_+=2){var T=s+_,L;_===-S||_!==S&&a[T-1]<a[T+1]?L=a[T+1]:L=a[T-1]+1;for(var O=L-_;L<n&&O<r&&t.charAt(n-L-1)===e.charAt(r-O-1);)L++,O++;if(a[T]=L,L>n)E+=2;else if(O>r)y+=2;else if(!d){var v=s+f-_;if(v>=0&&v<o&&l[v]!==-1){var c=l[v],b=s+c-v;if(L=n-L,c>=L)return Ag(t,e,c,b)}}}}return[[Dt,t],[xt,e]]}function Ag(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),o=t.substring(n),l=e.substring(r),a=Mo(i,s),u=Mo(o,l);return a.concat(u)}function md(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return ty(t.charCodeAt(i-1))&&i--,i}function kg(t,e){var n=t.length,r=e.length;if(n==0||r==0)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var s=0,o=1;;){var l=t.substring(i-o),a=e.indexOf(l);if(a==-1)return s;o+=a,(a==0||t.substring(i-o)==e.substring(0,o))&&(s=o,o++)}}function tu(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return ny(t.charCodeAt(t.length-i))&&i--,i}function c4(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function i(x,y,E){for(var S=x.substring(E,E+Math.floor(x.length/4)),w=-1,v="",c,b,T,L;(w=y.indexOf(S,w+1))!==-1;){var _=md(x.substring(E),y.substring(w)),O=tu(x.substring(0,E),y.substring(0,w));v.length<O+_&&(v=y.substring(w-O,w)+y.substring(w,w+_),c=x.substring(0,E-O),b=x.substring(E+_),T=y.substring(0,w-O),L=y.substring(w+_))}return v.length*2>=x.length?[c,b,T,L,v]:null}var s=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),l;if(!s&&!o)return null;o?s?l=s[4].length>o[4].length?s:o:l=o:l=s;var a,u,f,d;t.length>e.length?(a=l[0],u=l[1],f=l[2],d=l[3]):(f=l[0],d=l[1],a=l[2],u=l[3]);var p=l[4];return[a,u,f,d,p]}function f4(t){for(var e=!1,n=[],r=0,i=null,s=0,o=0,l=0,a=0,u=0;s<t.length;)t[s][0]==qe?(n[r++]=s,o=a,l=u,a=0,u=0,i=t[s][1]):(t[s][0]==xt?a+=t[s][1].length:u+=t[s][1].length,i&&i.length<=Math.max(o,l)&&i.length<=Math.max(a,u)&&(t.splice(n[r-1],0,[Dt,i]),t[n[r-1]+1][0]=xt,r--,r--,s=r>0?n[r-1]:-1,o=0,l=0,a=0,u=0,i=null,e=!0)),s++;for(e&&yd(t),p4(t),s=1;s<t.length;){if(t[s-1][0]==Dt&&t[s][0]==xt){var f=t[s-1][1],d=t[s][1],p=kg(f,d),x=kg(d,f);p>=x?(p>=f.length/2||p>=d.length/2)&&(t.splice(s,0,[qe,d.substring(0,p)]),t[s-1][1]=f.substring(0,f.length-p),t[s+1][1]=d.substring(p),s++):(x>=f.length/2||x>=d.length/2)&&(t.splice(s,0,[qe,f.substring(0,x)]),t[s-1][0]=xt,t[s-1][1]=d.substring(0,d.length-x),t[s+1][0]=Dt,t[s+1][1]=f.substring(x),s++),s++}s++}}var Ng=/[^a-zA-Z0-9]/,_g=/\s/,Cg=/[\r\n]/,h4=/\n\r?\n$/,d4=/^\r?\n\r?\n/;function p4(t){function e(x,y){if(!x||!y)return 6;var E=x.charAt(x.length-1),S=y.charAt(0),w=E.match(Ng),v=S.match(Ng),c=w&&E.match(_g),b=v&&S.match(_g),T=c&&E.match(Cg),L=b&&S.match(Cg),_=T&&x.match(h4),O=L&&y.match(d4);return _||O?5:T||L?4:w&&!c&&b?3:c||b?2:w||v?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==qe&&t[n+1][0]==qe){var r=t[n-1][1],i=t[n][1],s=t[n+1][1],o=tu(r,i);if(o){var l=i.substring(i.length-o);r=r.substring(0,r.length-o),i=l+i.substring(0,i.length-o),s=l+s}for(var a=r,u=i,f=s,d=e(r,i)+e(i,s);i.charAt(0)===s.charAt(0);){r+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var p=e(r,i)+e(i,s);p>=d&&(d=p,a=r,u=i,f=s)}t[n-1][1]!=a&&(a?t[n-1][1]=a:(t.splice(n-1,1),n--),t[n][1]=u,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}}function yd(t,e){t.push([qe,""]);for(var n=0,r=0,i=0,s="",o="",l;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case xt:i++,o+=t[n][1],n++;break;case Dt:r++,s+=t[n][1],n++;break;case qe:var a=n-i-r-1;if(e){if(a>=0&&iy(t[a][1])){var u=t[a][1].slice(-1);if(t[a][1]=t[a][1].slice(0,-1),s=u+s,o=u+o,!t[a][1]){t.splice(a,1),n--;var f=a-1;t[f]&&t[f][0]===xt&&(i++,o=t[f][1]+o,f--),t[f]&&t[f][0]===Dt&&(r++,s=t[f][1]+s,f--),a=f}}if(ry(t[n][1])){var u=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),s+=u,o+=u}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(l=md(o,s),l!==0&&(a>=0?t[a][1]+=o.substring(0,l):(t.splice(0,0,[qe,o.substring(0,l)]),n++),o=o.substring(l),s=s.substring(l)),l=tu(o,s),l!==0&&(t[n][1]=o.substring(o.length-l)+t[n][1],o=o.substring(0,o.length-l),s=s.substring(0,s.length-l)));var d=i+r;s.length===0&&o.length===0?(t.splice(n-d,d),n=n-d):s.length===0?(t.splice(n-d,d,[xt,o]),n=n-d+1):o.length===0?(t.splice(n-d,d,[Dt,s]),n=n-d+1):(t.splice(n-d,d,[Dt,s],[xt,o]),n=n-d+2)}n!==0&&t[n-1][0]===qe?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",o="";break}}t[t.length-1][1]===""&&t.pop();var p=!1;for(n=1;n<t.length-1;)t[n-1][0]===qe&&t[n+1][0]===qe&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),p=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),p=!0)),n++;p&&yd(t,e)}function ty(t){return t>=55296&&t<=56319}function ny(t){return t>=56320&&t<=57343}function ry(t){return ny(t.charCodeAt(0))}function iy(t){return ty(t.charCodeAt(t.length-1))}function g4(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function Ac(t,e,n,r){return iy(t)||ry(r)?null:g4([[qe,t],[Dt,e],[xt,n],[qe,r]])}function m4(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,s=t.length,o=e.length;if(r.length===0&&(i===null||i.length===0)){var l=r.index,a=t.slice(0,l),u=t.slice(l),f=i?i.index:null;e:{var d=l+o-s;if(f!==null&&f!==d||d<0||d>o)break e;var p=e.slice(0,d),x=e.slice(d);if(x!==u)break e;var y=Math.min(l,d),E=a.slice(0,y),S=p.slice(0,y);if(E!==S)break e;var w=a.slice(y),v=p.slice(y);return Ac(E,w,v,u)}e:{if(f!==null&&f!==l)break e;var c=l,p=e.slice(0,c),x=e.slice(c);if(p!==a)break e;var b=Math.min(s-c,o-c),T=u.slice(u.length-b),L=x.slice(x.length-b);if(T!==L)break e;var w=u.slice(0,u.length-b),v=x.slice(0,x.length-b);return Ac(a,w,v,T)}}if(r.length>0&&i&&i.length===0)e:{var E=t.slice(0,r.index),T=t.slice(r.index+r.length),y=E.length,b=T.length;if(o<y+b)break e;var S=e.slice(0,y),L=e.slice(o-b);if(E!==S||T!==L)break e;var w=t.slice(y,s-b),v=e.slice(y,o-b);return Ac(E,w,v,T)}return null}function nu(t,e,n,r){return Mo(t,e,n,r,!0)}nu.INSERT=xt;nu.DELETE=Dt;nu.EQUAL=qe;var y4=nu,La={exports:{}};La.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",l="[object Boolean]",a="[object Date]",u="[object Error]",f="[object Function]",d="[object GeneratorFunction]",p="[object Map]",x="[object Number]",y="[object Object]",E="[object Promise]",S="[object RegExp]",w="[object Set]",v="[object String]",c="[object Symbol]",b="[object WeakMap]",T="[object ArrayBuffer]",L="[object DataView]",_="[object Float32Array]",O="[object Float64Array]",j="[object Int8Array]",H="[object Int16Array]",W="[object Int32Array]",I="[object Uint8Array]",N="[object Uint8ClampedArray]",P="[object Uint16Array]",U="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,F=/\w*$/,D=/^\[object .+?Constructor\]$/,q=/^(?:0|[1-9]\d*)$/,M={};M[s]=M[o]=M[T]=M[L]=M[l]=M[a]=M[_]=M[O]=M[j]=M[H]=M[W]=M[p]=M[x]=M[y]=M[S]=M[w]=M[v]=M[c]=M[I]=M[N]=M[P]=M[U]=!0,M[u]=M[f]=M[b]=!1;var Z=typeof Pn=="object"&&Pn&&Pn.Object===Object&&Pn,J=typeof self=="object"&&self&&self.Object===Object&&self,le=Z||J||Function("return this")(),ue=e&&!e.nodeType&&e,se=ue&&!0&&t&&!t.nodeType&&t,he=se&&se.exports===ue;function Ue(g,k){return g.set(k[0],k[1]),g}function Se(g,k){return g.add(k),g}function dt(g,k){for(var R=-1,z=g?g.length:0;++R<z&&k(g[R],R,g)!==!1;);return g}function zt(g,k){for(var R=-1,z=k.length,fe=g.length;++R<z;)g[fe+R]=k[R];return g}function Ge(g,k,R,z){for(var fe=-1,oe=g?g.length:0;++fe<oe;)R=k(R,g[fe],fe,g);return R}function pt(g,k){for(var R=-1,z=Array(g);++R<g;)z[R]=k(R);return z}function et(g,k){return g==null?void 0:g[k]}function Ot(g){var k=!1;if(g!=null&&typeof g.toString!="function")try{k=!!(g+"")}catch{}return k}function Te(g){var k=-1,R=Array(g.size);return g.forEach(function(z,fe){R[++k]=[fe,z]}),R}function tt(g,k){return function(R){return g(k(R))}}function gt(g){var k=-1,R=Array(g.size);return g.forEach(function(z){R[++k]=z}),R}var Tt=Array.prototype,Ss=Function.prototype,Fn=Object.prototype,Tn=le["__core-js_shared__"],mt=function(){var g=/[^.]+$/.exec(Tn&&Tn.keys&&Tn.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),fr=Ss.toString,Ht=Fn.hasOwnProperty,yt=Fn.toString,Ts=RegExp("^"+fr.call(Ht).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=he?le.Buffer:void 0,h=le.Symbol,m=le.Uint8Array,C=tt(Object.getPrototypeOf,Object),B=Object.create,$=Fn.propertyIsEnumerable,V=Tt.splice,ce=Object.getOwnPropertySymbols,we=A?A.isBuffer:void 0,xe=tt(Object.keys,Object),Ee=on(le,"DataView"),pe=on(le,"Map"),sn=on(le,"Promise"),vi=on(le,"Set"),As=on(le,"WeakMap"),zr=on(Object,"create"),ks=vt(Ee),Hr=vt(pe),Ns=vt(sn),_s=vt(vi),Cs=vt(As),hr=h?h.prototype:void 0,Jo=hr?hr.valueOf:void 0;function zn(g){var k=-1,R=g?g.length:0;for(this.clear();++k<R;){var z=g[k];this.set(z[0],z[1])}}function lu(){this.__data__=zr?zr(null):{}}function au(g){return this.has(g)&&delete this.__data__[g]}function uu(g){var k=this.__data__;if(zr){var R=k[g];return R===r?void 0:R}return Ht.call(k,g)?k[g]:void 0}function el(g){var k=this.__data__;return zr?k[g]!==void 0:Ht.call(k,g)}function Ls(g,k){var R=this.__data__;return R[g]=zr&&k===void 0?r:k,this}zn.prototype.clear=lu,zn.prototype.delete=au,zn.prototype.get=uu,zn.prototype.has=el,zn.prototype.set=Ls;function Ve(g){var k=-1,R=g?g.length:0;for(this.clear();++k<R;){var z=g[k];this.set(z[0],z[1])}}function cu(){this.__data__=[]}function fu(g){var k=this.__data__,R=xi(k,g);if(R<0)return!1;var z=k.length-1;return R==z?k.pop():V.call(k,R,1),!0}function hu(g){var k=this.__data__,R=xi(k,g);return R<0?void 0:k[R][1]}function du(g){return xi(this.__data__,g)>-1}function pu(g,k){var R=this.__data__,z=xi(R,g);return z<0?R.push([g,k]):R[z][1]=k,this}Ve.prototype.clear=cu,Ve.prototype.delete=fu,Ve.prototype.get=hu,Ve.prototype.has=du,Ve.prototype.set=pu;function nt(g){var k=-1,R=g?g.length:0;for(this.clear();++k<R;){var z=g[k];this.set(z[0],z[1])}}function gu(){this.__data__={hash:new zn,map:new(pe||Ve),string:new zn}}function mu(g){return Vr(this,g).delete(g)}function yu(g){return Vr(this,g).get(g)}function vu(g){return Vr(this,g).has(g)}function wu(g,k){return Vr(this,g).set(g,k),this}nt.prototype.clear=gu,nt.prototype.delete=mu,nt.prototype.get=yu,nt.prototype.has=vu,nt.prototype.set=wu;function At(g){this.__data__=new Ve(g)}function xu(){this.__data__=new Ve}function Eu(g){return this.__data__.delete(g)}function bu(g){return this.__data__.get(g)}function Su(g){return this.__data__.has(g)}function Tu(g,k){var R=this.__data__;if(R instanceof Ve){var z=R.__data__;if(!pe||z.length<n-1)return z.push([g,k]),this;R=this.__data__=new nt(z)}return R.set(g,k),this}At.prototype.clear=xu,At.prototype.delete=Eu,At.prototype.get=bu,At.prototype.has=Su,At.prototype.set=Tu;function wi(g,k){var R=Ps(g)||bi(g)?pt(g.length,String):[],z=R.length,fe=!!z;for(var oe in g)Ht.call(g,oe)&&!(fe&&(oe=="length"||Uu(oe,z)))&&R.push(oe);return R}function tl(g,k,R){var z=g[k];(!(Ht.call(g,k)&&ol(z,R))||R===void 0&&!(k in g))&&(g[k]=R)}function xi(g,k){for(var R=g.length;R--;)if(ol(g[R][0],k))return R;return-1}function An(g,k){return g&&Rs(k,Bs(k),g)}function Is(g,k,R,z,fe,oe,ye){var ge;if(z&&(ge=oe?z(g,fe,oe,ye):z(g)),ge!==void 0)return ge;if(!Nn(g))return g;var Be=Ps(g);if(Be){if(ge=Bu(g),!k)return Ru(g,ge)}else{var ve=Gn(g),rt=ve==f||ve==d;if(ll(g))return Ei(g,k);if(ve==y||ve==s||rt&&!oe){if(Ot(g))return oe?g:{};if(ge=kn(rt?{}:g),!k)return Pu(g,An(ge,g))}else{if(!M[ve])return oe?g:{};ge=ju(g,ve,Is,k)}}ye||(ye=new At);var kt=ye.get(g);if(kt)return kt;if(ye.set(g,ge),!Be)var Me=R?Du(g):Bs(g);return dt(Me||g,function(it,Ke){Me&&(Ke=it,it=g[Ke]),tl(ge,Ke,Is(it,k,R,z,Ke,g,ye))}),ge}function Au(g){return Nn(g)?B(g):{}}function ku(g,k,R){var z=k(g);return Ps(g)?z:zt(z,R(g))}function Nu(g){return yt.call(g)}function _u(g){if(!Nn(g)||$u(g))return!1;var k=Ds(g)||Ot(g)?Ts:D;return k.test(vt(g))}function Cu(g){if(!il(g))return xe(g);var k=[];for(var R in Object(g))Ht.call(g,R)&&R!="constructor"&&k.push(R);return k}function Ei(g,k){if(k)return g.slice();var R=new g.constructor(g.length);return g.copy(R),R}function Os(g){var k=new g.constructor(g.byteLength);return new m(k).set(new m(g)),k}function Gr(g,k){var R=k?Os(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function nl(g,k,R){var z=k?R(Te(g),!0):Te(g);return Ge(z,Ue,new g.constructor)}function rl(g){var k=new g.constructor(g.source,F.exec(g));return k.lastIndex=g.lastIndex,k}function Lu(g,k,R){var z=k?R(gt(g),!0):gt(g);return Ge(z,Se,new g.constructor)}function Iu(g){return Jo?Object(Jo.call(g)):{}}function Ou(g,k){var R=k?Os(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function Ru(g,k){var R=-1,z=g.length;for(k||(k=Array(z));++R<z;)k[R]=g[R];return k}function Rs(g,k,R,z){R||(R={});for(var fe=-1,oe=k.length;++fe<oe;){var ye=k[fe],ge=void 0;tl(R,ye,ge===void 0?g[ye]:ge)}return R}function Pu(g,k){return Rs(g,Hn(g),k)}function Du(g){return ku(g,Bs,Hn)}function Vr(g,k){var R=g.__data__;return Mu(k)?R[typeof k=="string"?"string":"hash"]:R.map}function on(g,k){var R=et(g,k);return _u(R)?R:void 0}var Hn=ce?tt(ce,Object):Fu,Gn=Nu;(Ee&&Gn(new Ee(new ArrayBuffer(1)))!=L||pe&&Gn(new pe)!=p||sn&&Gn(sn.resolve())!=E||vi&&Gn(new vi)!=w||As&&Gn(new As)!=b)&&(Gn=function(g){var k=yt.call(g),R=k==y?g.constructor:void 0,z=R?vt(R):void 0;if(z)switch(z){case ks:return L;case Hr:return p;case Ns:return E;case _s:return w;case Cs:return b}return k});function Bu(g){var k=g.length,R=g.constructor(k);return k&&typeof g[0]=="string"&&Ht.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function kn(g){return typeof g.constructor=="function"&&!il(g)?Au(C(g)):{}}function ju(g,k,R,z){var fe=g.constructor;switch(k){case T:return Os(g);case l:case a:return new fe(+g);case L:return Gr(g,z);case _:case O:case j:case H:case W:case I:case N:case P:case U:return Ou(g,z);case p:return nl(g,z,R);case x:case v:return new fe(g);case S:return rl(g);case w:return Lu(g,z,R);case c:return Iu(g)}}function Uu(g,k){return k=k??i,!!k&&(typeof g=="number"||q.test(g))&&g>-1&&g%1==0&&g<k}function Mu(g){var k=typeof g;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?g!=="__proto__":g===null}function $u(g){return!!mt&&mt in g}function il(g){var k=g&&g.constructor,R=typeof k=="function"&&k.prototype||Fn;return g===R}function vt(g){if(g!=null){try{return fr.call(g)}catch{}try{return g+""}catch{}}return""}function sl(g){return Is(g,!0,!0)}function ol(g,k){return g===k||g!==g&&k!==k}function bi(g){return qu(g)&&Ht.call(g,"callee")&&(!$.call(g,"callee")||yt.call(g)==s)}var Ps=Array.isArray;function Si(g){return g!=null&&al(g.length)&&!Ds(g)}function qu(g){return ul(g)&&Si(g)}var ll=we||zu;function Ds(g){var k=Nn(g)?yt.call(g):"";return k==f||k==d}function al(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=i}function Nn(g){var k=typeof g;return!!g&&(k=="object"||k=="function")}function ul(g){return!!g&&typeof g=="object"}function Bs(g){return Si(g)?wi(g):Cu(g)}function Fu(){return[]}function zu(){return!1}t.exports=sl})(La,La.exports);var sy=La.exports,Ia={exports:{}};Ia.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,l="[object Arguments]",a="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",d="[object Date]",p="[object Error]",x="[object Function]",y="[object GeneratorFunction]",E="[object Map]",S="[object Number]",w="[object Null]",v="[object Object]",c="[object Promise]",b="[object Proxy]",T="[object RegExp]",L="[object Set]",_="[object String]",O="[object Symbol]",j="[object Undefined]",H="[object WeakMap]",W="[object ArrayBuffer]",I="[object DataView]",N="[object Float32Array]",P="[object Float64Array]",U="[object Int8Array]",G="[object Int16Array]",F="[object Int32Array]",D="[object Uint8Array]",q="[object Uint8ClampedArray]",M="[object Uint16Array]",Z="[object Uint32Array]",J=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,se={};se[N]=se[P]=se[U]=se[G]=se[F]=se[D]=se[q]=se[M]=se[Z]=!0,se[l]=se[a]=se[W]=se[f]=se[I]=se[d]=se[p]=se[x]=se[E]=se[S]=se[v]=se[T]=se[L]=se[_]=se[H]=!1;var he=typeof Pn=="object"&&Pn&&Pn.Object===Object&&Pn,Ue=typeof self=="object"&&self&&self.Object===Object&&self,Se=he||Ue||Function("return this")(),dt=e&&!e.nodeType&&e,zt=dt&&!0&&t&&!t.nodeType&&t,Ge=zt&&zt.exports===dt,pt=Ge&&he.process,et=function(){try{return pt&&pt.binding&&pt.binding("util")}catch{}}(),Ot=et&&et.isTypedArray;function Te(g,k){for(var R=-1,z=g==null?0:g.length,fe=0,oe=[];++R<z;){var ye=g[R];k(ye,R,g)&&(oe[fe++]=ye)}return oe}function tt(g,k){for(var R=-1,z=k.length,fe=g.length;++R<z;)g[fe+R]=k[R];return g}function gt(g,k){for(var R=-1,z=g==null?0:g.length;++R<z;)if(k(g[R],R,g))return!0;return!1}function Tt(g,k){for(var R=-1,z=Array(g);++R<g;)z[R]=k(R);return z}function Ss(g){return function(k){return g(k)}}function Fn(g,k){return g.has(k)}function Tn(g,k){return g==null?void 0:g[k]}function mt(g){var k=-1,R=Array(g.size);return g.forEach(function(z,fe){R[++k]=[fe,z]}),R}function fr(g,k){return function(R){return g(k(R))}}function Ht(g){var k=-1,R=Array(g.size);return g.forEach(function(z){R[++k]=z}),R}var yt=Array.prototype,Ts=Function.prototype,A=Object.prototype,h=Se["__core-js_shared__"],m=Ts.toString,C=A.hasOwnProperty,B=function(){var g=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),$=A.toString,V=RegExp("^"+m.call(C).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=Ge?Se.Buffer:void 0,we=Se.Symbol,xe=Se.Uint8Array,Ee=A.propertyIsEnumerable,pe=yt.splice,sn=we?we.toStringTag:void 0,vi=Object.getOwnPropertySymbols,As=ce?ce.isBuffer:void 0,zr=fr(Object.keys,Object),ks=Hn(Se,"DataView"),Hr=Hn(Se,"Map"),Ns=Hn(Se,"Promise"),_s=Hn(Se,"Set"),Cs=Hn(Se,"WeakMap"),hr=Hn(Object,"create"),Jo=vt(ks),zn=vt(Hr),lu=vt(Ns),au=vt(_s),uu=vt(Cs),el=we?we.prototype:void 0,Ls=el?el.valueOf:void 0;function Ve(g){var k=-1,R=g==null?0:g.length;for(this.clear();++k<R;){var z=g[k];this.set(z[0],z[1])}}function cu(){this.__data__=hr?hr(null):{},this.size=0}function fu(g){var k=this.has(g)&&delete this.__data__[g];return this.size-=k?1:0,k}function hu(g){var k=this.__data__;if(hr){var R=k[g];return R===r?void 0:R}return C.call(k,g)?k[g]:void 0}function du(g){var k=this.__data__;return hr?k[g]!==void 0:C.call(k,g)}function pu(g,k){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=hr&&k===void 0?r:k,this}Ve.prototype.clear=cu,Ve.prototype.delete=fu,Ve.prototype.get=hu,Ve.prototype.has=du,Ve.prototype.set=pu;function nt(g){var k=-1,R=g==null?0:g.length;for(this.clear();++k<R;){var z=g[k];this.set(z[0],z[1])}}function gu(){this.__data__=[],this.size=0}function mu(g){var k=this.__data__,R=Ei(k,g);if(R<0)return!1;var z=k.length-1;return R==z?k.pop():pe.call(k,R,1),--this.size,!0}function yu(g){var k=this.__data__,R=Ei(k,g);return R<0?void 0:k[R][1]}function vu(g){return Ei(this.__data__,g)>-1}function wu(g,k){var R=this.__data__,z=Ei(R,g);return z<0?(++this.size,R.push([g,k])):R[z][1]=k,this}nt.prototype.clear=gu,nt.prototype.delete=mu,nt.prototype.get=yu,nt.prototype.has=vu,nt.prototype.set=wu;function At(g){var k=-1,R=g==null?0:g.length;for(this.clear();++k<R;){var z=g[k];this.set(z[0],z[1])}}function xu(){this.size=0,this.__data__={hash:new Ve,map:new(Hr||nt),string:new Ve}}function Eu(g){var k=on(this,g).delete(g);return this.size-=k?1:0,k}function bu(g){return on(this,g).get(g)}function Su(g){return on(this,g).has(g)}function Tu(g,k){var R=on(this,g),z=R.size;return R.set(g,k),this.size+=R.size==z?0:1,this}At.prototype.clear=xu,At.prototype.delete=Eu,At.prototype.get=bu,At.prototype.has=Su,At.prototype.set=Tu;function wi(g){var k=-1,R=g==null?0:g.length;for(this.__data__=new At;++k<R;)this.add(g[k])}function tl(g){return this.__data__.set(g,r),this}function xi(g){return this.__data__.has(g)}wi.prototype.add=wi.prototype.push=tl,wi.prototype.has=xi;function An(g){var k=this.__data__=new nt(g);this.size=k.size}function Is(){this.__data__=new nt,this.size=0}function Au(g){var k=this.__data__,R=k.delete(g);return this.size=k.size,R}function ku(g){return this.__data__.get(g)}function Nu(g){return this.__data__.has(g)}function _u(g,k){var R=this.__data__;if(R instanceof nt){var z=R.__data__;if(!Hr||z.length<n-1)return z.push([g,k]),this.size=++R.size,this;R=this.__data__=new At(z)}return R.set(g,k),this.size=R.size,this}An.prototype.clear=Is,An.prototype.delete=Au,An.prototype.get=ku,An.prototype.has=Nu,An.prototype.set=_u;function Cu(g,k){var R=bi(g),z=!R&&ol(g),fe=!R&&!z&&Si(g),oe=!R&&!z&&!fe&&ul(g),ye=R||z||fe||oe,ge=ye?Tt(g.length,String):[],Be=ge.length;for(var ve in g)C.call(g,ve)&&!(ye&&(ve=="length"||fe&&(ve=="offset"||ve=="parent")||oe&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||ju(ve,Be)))&&ge.push(ve);return ge}function Ei(g,k){for(var R=g.length;R--;)if(sl(g[R][0],k))return R;return-1}function Os(g,k,R){var z=k(g);return bi(g)?z:tt(z,R(g))}function Gr(g){return g==null?g===void 0?j:w:sn&&sn in Object(g)?Gn(g):il(g)}function nl(g){return Nn(g)&&Gr(g)==l}function rl(g,k,R,z,fe){return g===k?!0:g==null||k==null||!Nn(g)&&!Nn(k)?g!==g&&k!==k:Lu(g,k,R,z,rl,fe)}function Lu(g,k,R,z,fe,oe){var ye=bi(g),ge=bi(k),Be=ye?a:kn(g),ve=ge?a:kn(k);Be=Be==l?v:Be,ve=ve==l?v:ve;var rt=Be==v,kt=ve==v,Me=Be==ve;if(Me&&Si(g)){if(!Si(k))return!1;ye=!0,rt=!1}if(Me&&!rt)return oe||(oe=new An),ye||ul(g)?Rs(g,k,R,z,fe,oe):Pu(g,k,Be,R,z,fe,oe);if(!(R&i)){var it=rt&&C.call(g,"__wrapped__"),Ke=kt&&C.call(k,"__wrapped__");if(it||Ke){var dr=it?g.value():g,Vn=Ke?k.value():k;return oe||(oe=new An),fe(dr,Vn,R,z,oe)}}return Me?(oe||(oe=new An),Du(g,k,R,z,fe,oe)):!1}function Iu(g){if(!al(g)||Mu(g))return!1;var k=ll(g)?V:le;return k.test(vt(g))}function Ou(g){return Nn(g)&&Ds(g.length)&&!!se[Gr(g)]}function Ru(g){if(!$u(g))return zr(g);var k=[];for(var R in Object(g))C.call(g,R)&&R!="constructor"&&k.push(R);return k}function Rs(g,k,R,z,fe,oe){var ye=R&i,ge=g.length,Be=k.length;if(ge!=Be&&!(ye&&Be>ge))return!1;var ve=oe.get(g);if(ve&&oe.get(k))return ve==k;var rt=-1,kt=!0,Me=R&s?new wi:void 0;for(oe.set(g,k),oe.set(k,g);++rt<ge;){var it=g[rt],Ke=k[rt];if(z)var dr=ye?z(Ke,it,rt,k,g,oe):z(it,Ke,rt,g,k,oe);if(dr!==void 0){if(dr)continue;kt=!1;break}if(Me){if(!gt(k,function(Vn,Kr){if(!Fn(Me,Kr)&&(it===Vn||fe(it,Vn,R,z,oe)))return Me.push(Kr)})){kt=!1;break}}else if(!(it===Ke||fe(it,Ke,R,z,oe))){kt=!1;break}}return oe.delete(g),oe.delete(k),kt}function Pu(g,k,R,z,fe,oe,ye){switch(R){case I:if(g.byteLength!=k.byteLength||g.byteOffset!=k.byteOffset)return!1;g=g.buffer,k=k.buffer;case W:return!(g.byteLength!=k.byteLength||!oe(new xe(g),new xe(k)));case f:case d:case S:return sl(+g,+k);case p:return g.name==k.name&&g.message==k.message;case T:case _:return g==k+"";case E:var ge=mt;case L:var Be=z&i;if(ge||(ge=Ht),g.size!=k.size&&!Be)return!1;var ve=ye.get(g);if(ve)return ve==k;z|=s,ye.set(g,k);var rt=Rs(ge(g),ge(k),z,fe,oe,ye);return ye.delete(g),rt;case O:if(Ls)return Ls.call(g)==Ls.call(k)}return!1}function Du(g,k,R,z,fe,oe){var ye=R&i,ge=Vr(g),Be=ge.length,ve=Vr(k),rt=ve.length;if(Be!=rt&&!ye)return!1;for(var kt=Be;kt--;){var Me=ge[kt];if(!(ye?Me in k:C.call(k,Me)))return!1}var it=oe.get(g);if(it&&oe.get(k))return it==k;var Ke=!0;oe.set(g,k),oe.set(k,g);for(var dr=ye;++kt<Be;){Me=ge[kt];var Vn=g[Me],Kr=k[Me];if(z)var Ld=ye?z(Kr,Vn,Me,k,g,oe):z(Vn,Kr,Me,g,k,oe);if(!(Ld===void 0?Vn===Kr||fe(Vn,Kr,R,z,oe):Ld)){Ke=!1;break}dr||(dr=Me=="constructor")}if(Ke&&!dr){var cl=g.constructor,fl=k.constructor;cl!=fl&&"constructor"in g&&"constructor"in k&&!(typeof cl=="function"&&cl instanceof cl&&typeof fl=="function"&&fl instanceof fl)&&(Ke=!1)}return oe.delete(g),oe.delete(k),Ke}function Vr(g){return Os(g,Bs,Bu)}function on(g,k){var R=g.__data__;return Uu(k)?R[typeof k=="string"?"string":"hash"]:R.map}function Hn(g,k){var R=Tn(g,k);return Iu(R)?R:void 0}function Gn(g){var k=C.call(g,sn),R=g[sn];try{g[sn]=void 0;var z=!0}catch{}var fe=$.call(g);return z&&(k?g[sn]=R:delete g[sn]),fe}var Bu=vi?function(g){return g==null?[]:(g=Object(g),Te(vi(g),function(k){return Ee.call(g,k)}))}:Fu,kn=Gr;(ks&&kn(new ks(new ArrayBuffer(1)))!=I||Hr&&kn(new Hr)!=E||Ns&&kn(Ns.resolve())!=c||_s&&kn(new _s)!=L||Cs&&kn(new Cs)!=H)&&(kn=function(g){var k=Gr(g),R=k==v?g.constructor:void 0,z=R?vt(R):"";if(z)switch(z){case Jo:return I;case zn:return E;case lu:return c;case au:return L;case uu:return H}return k});function ju(g,k){return k=k??o,!!k&&(typeof g=="number"||ue.test(g))&&g>-1&&g%1==0&&g<k}function Uu(g){var k=typeof g;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?g!=="__proto__":g===null}function Mu(g){return!!B&&B in g}function $u(g){var k=g&&g.constructor,R=typeof k=="function"&&k.prototype||A;return g===R}function il(g){return $.call(g)}function vt(g){if(g!=null){try{return m.call(g)}catch{}try{return g+""}catch{}}return""}function sl(g,k){return g===k||g!==g&&k!==k}var ol=nl(function(){return arguments}())?nl:function(g){return Nn(g)&&C.call(g,"callee")&&!Ee.call(g,"callee")},bi=Array.isArray;function Ps(g){return g!=null&&Ds(g.length)&&!ll(g)}var Si=As||zu;function qu(g,k){return rl(g,k)}function ll(g){if(!al(g))return!1;var k=Gr(g);return k==x||k==y||k==u||k==b}function Ds(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}function al(g){var k=typeof g;return g!=null&&(k=="object"||k=="function")}function Nn(g){return g!=null&&typeof g=="object"}var ul=Ot?Ss(Ot):Ou;function Bs(g){return Ps(g)?Cu(g):Ru(g)}function Fu(){return[]}function zu(){return!1}t.exports=qu})(Ia,Ia.exports);var oy=Ia.exports,vd={};Object.defineProperty(vd,"__esModule",{value:!0});const v4=sy,w4=oy;var Vf;(function(t){function e(s={},o={},l=!1){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});let a=v4(o);l||(a=Object.keys(a).reduce((u,f)=>(a[f]!=null&&(u[f]=a[f]),u),{}));for(const u in s)s[u]!==void 0&&o[u]===void 0&&(a[u]=s[u]);return Object.keys(a).length>0?a:void 0}t.compose=e;function n(s={},o={}){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});const l=Object.keys(s).concat(Object.keys(o)).reduce((a,u)=>(w4(s[u],o[u])||(a[u]=o[u]===void 0?null:o[u]),a),{});return Object.keys(l).length>0?l:void 0}t.diff=n;function r(s={},o={}){s=s||{};const l=Object.keys(o).reduce((a,u)=>(o[u]!==s[u]&&s[u]!==void 0&&(a[u]=o[u]),a),{});return Object.keys(s).reduce((a,u)=>(s[u]!==o[u]&&o[u]===void 0&&(a[u]=null),a),l)}t.invert=r;function i(s,o,l=!1){if(typeof s!="object")return o;if(typeof o!="object")return;if(!l)return o;const a=Object.keys(o).reduce((u,f)=>(s[f]===void 0&&(u[f]=o[f]),u),{});return Object.keys(a).length>0?a:void 0}t.transform=i})(Vf||(Vf={}));vd.default=Vf;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});var Kf;(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(Kf||(Kf={}));ru.default=Kf;var wd={};Object.defineProperty(wd,"__esModule",{value:!0});const Lg=ru;class x4{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const n=this.ops[this.index];if(n){const r=this.offset,i=Lg.default.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};{const s={};return n.attributes&&(s.attributes=n.attributes),typeof n.retain=="number"?s.retain=e:typeof n.retain=="object"&&n.retain!==null?s.retain=n.retain:typeof n.insert=="string"?s.insert=n.insert.substr(r,e):s.insert=n.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Lg.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,n=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(i)}}else return[]}}wd.default=x4;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=y4,r=sy,i=oy,s=vd;e.AttributeMap=s.default;const o=ru;e.Op=o.default;const l=wd;e.OpIterator=l.default;const a="\0",u=(d,p)=>{if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const x=Object.keys(d)[0];if(!x||x!==Object.keys(p)[0])throw new Error(`embed types not matched: ${x} != ${Object.keys(p)[0]}`);return[x,d[x],p[x]]};class f{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,x){this.handlers[p]=x}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const x=this.handlers[p];if(!x)throw new Error(`no handlers for embed type "${p}"`);return x}insert(p,x){const y={};return typeof p=="string"&&p.length===0?this:(y.insert=p,x!=null&&typeof x=="object"&&Object.keys(x).length>0&&(y.attributes=x),this.push(y))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,x){if(typeof p=="number"&&p<=0)return this;const y={retain:p};return x!=null&&typeof x=="object"&&Object.keys(x).length>0&&(y.attributes=x),this.push(y)}push(p){let x=this.ops.length,y=this.ops[x-1];if(p=r(p),typeof y=="object"){if(typeof p.delete=="number"&&typeof y.delete=="number")return this.ops[x-1]={delete:y.delete+p.delete},this;if(typeof y.delete=="number"&&p.insert!=null&&(x-=1,y=this.ops[x-1],typeof y!="object"))return this.ops.unshift(p),this;if(i(p.attributes,y.attributes)){if(typeof p.insert=="string"&&typeof y.insert=="string")return this.ops[x-1]={insert:y.insert+p.insert},typeof p.attributes=="object"&&(this.ops[x-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof y.retain=="number")return this.ops[x-1]={retain:y.retain+p.retain},typeof p.attributes=="object"&&(this.ops[x-1].attributes=p.attributes),this}}return x===this.ops.length?this.ops.push(p):this.ops.splice(x,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const x=[],y=[];return this.forEach(E=>{(p(E)?x:y).push(E)}),[x,y]}reduce(p,x){return this.ops.reduce(p,x)}changeLength(){return this.reduce((p,x)=>x.insert?p+o.default.length(x):x.delete?p-x.delete:p,0)}length(){return this.reduce((p,x)=>p+o.default.length(x),0)}slice(p=0,x=1/0){const y=[],E=new l.default(this.ops);let S=0;for(;S<x&&E.hasNext();){let w;S<p?w=E.next(p-S):(w=E.next(x-S),y.push(w)),S+=o.default.length(w)}return new f(y)}compose(p){const x=new l.default(this.ops),y=new l.default(p.ops),E=[],S=y.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){let v=S.retain;for(;x.peekType()==="insert"&&x.peekLength()<=v;)v-=x.peekLength(),E.push(x.next());S.retain-v>0&&y.next(S.retain-v)}const w=new f(E);for(;x.hasNext()||y.hasNext();)if(y.peekType()==="insert")w.push(y.next());else if(x.peekType()==="delete")w.push(x.next());else{const v=Math.min(x.peekLength(),y.peekLength()),c=x.next(v),b=y.next(v);if(b.retain){const T={};if(typeof c.retain=="number")T.retain=typeof b.retain=="number"?v:b.retain;else if(typeof b.retain=="number")c.retain==null?T.insert=c.insert:T.retain=c.retain;else{const _=c.retain==null?"insert":"retain",[O,j,H]=u(c[_],b.retain),W=f.getHandler(O);T[_]={[O]:W.compose(j,H,_==="retain")}}const L=s.default.compose(c.attributes,b.attributes,typeof c.retain=="number");if(L&&(T.attributes=L),w.push(T),!y.hasNext()&&i(w.ops[w.ops.length-1],T)){const _=new f(x.rest());return w.concat(_).chop()}}else typeof b.delete=="number"&&(typeof c.retain=="number"||typeof c.retain=="object"&&c.retain!==null)&&w.push(b)}return w.chop()}concat(p){const x=new f(this.ops.slice());return p.ops.length>0&&(x.push(p.ops[0]),x.ops=x.ops.concat(p.ops.slice(1))),x}diff(p,x){if(this.ops===p.ops)return new f;const y=[this,p].map(c=>c.map(b=>{if(b.insert!=null)return typeof b.insert=="string"?b.insert:a;const T=c===p?"on":"with";throw new Error("diff() called "+T+" non-document")}).join("")),E=new f,S=n(y[0],y[1],x,!0),w=new l.default(this.ops),v=new l.default(p.ops);return S.forEach(c=>{let b=c[1].length;for(;b>0;){let T=0;switch(c[0]){case n.INSERT:T=Math.min(v.peekLength(),b),E.push(v.next(T));break;case n.DELETE:T=Math.min(b,w.peekLength()),w.next(T),E.delete(T);break;case n.EQUAL:T=Math.min(w.peekLength(),v.peekLength(),b);const L=w.next(T),_=v.next(T);i(L.insert,_.insert)?E.retain(T,s.default.diff(L.attributes,_.attributes)):E.push(_).delete(T);break}b-=T}}),E.chop()}eachLine(p,x=`
`){const y=new l.default(this.ops);let E=new f,S=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const w=y.peek(),v=o.default.length(w)-y.peekLength(),c=typeof w.insert=="string"?w.insert.indexOf(x,v)-v:-1;if(c<0)E.push(y.next());else if(c>0)E.push(y.next(c));else{if(p(E,y.next(1).attributes||{},S)===!1)return;S+=1,E=new f}}E.length()>0&&p(E,{},S)}invert(p){const x=new f;return this.reduce((y,E)=>{if(E.insert)x.delete(o.default.length(E));else{if(typeof E.retain=="number"&&E.attributes==null)return x.retain(E.retain),y+E.retain;if(E.delete||typeof E.retain=="number"){const S=E.delete||E.retain;return p.slice(y,y+S).forEach(v=>{E.delete?x.push(v):E.retain&&E.attributes&&x.retain(o.default.length(v),s.default.invert(E.attributes,v.attributes))}),y+S}else if(typeof E.retain=="object"&&E.retain!==null){const S=p.slice(y,y+1),w=new l.default(S.ops).next(),[v,c,b]=u(E.retain,w.insert),T=f.getHandler(v);return x.retain({[v]:T.invert(c,b)},s.default.invert(E.attributes,w.attributes)),y+1}}return y},0),x.chop()}transform(p,x=!1){if(x=!!x,typeof p=="number")return this.transformPosition(p,x);const y=p,E=new l.default(this.ops),S=new l.default(y.ops),w=new f;for(;E.hasNext()||S.hasNext();)if(E.peekType()==="insert"&&(x||S.peekType()!=="insert"))w.retain(o.default.length(E.next()));else if(S.peekType()==="insert")w.push(S.next());else{const v=Math.min(E.peekLength(),S.peekLength()),c=E.next(v),b=S.next(v);if(c.delete)continue;if(b.delete)w.push(b);else{const T=c.retain,L=b.retain;let _=typeof L=="object"&&L!==null?L:v;if(typeof T=="object"&&T!==null&&typeof L=="object"&&L!==null){const O=Object.keys(T)[0];if(O===Object.keys(L)[0]){const j=f.getHandler(O);j&&(_={[O]:j.transform(T[O],L[O],x)})}}w.retain(_,s.default.transform(c.attributes,b.attributes,x))}}return w.chop()}transformPosition(p,x=!1){x=!!x;const y=new l.default(this.ops);let E=0;for(;y.hasNext()&&E<=p;){const S=y.peekLength(),w=y.peekType();if(y.next(),w==="delete"){p-=Math.min(S,p-E);continue}else w==="insert"&&(E<p||!x)&&(p+=S);E+=S}return p}}f.Op=o.default,f.OpIterator=l.default,f.AttributeMap=s.default,f.handlers={},e.default=f,t.exports=f,t.exports.default=f})(Gf,Gf.exports);var en=Gf.exports;const ne=sh(en);class bn extends Ft{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}bn.blotName="break";bn.tagName="BR";let xn=class extends Ca{};const E4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function iu(t){return t.replace(/[&<>"']/g,e=>E4[e])}const In=class In extends pd{static compare(e,n){const r=In.order.indexOf(e),i=In.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(In.compare(this.statics.blotName,r)<0&&this.scroll.query(r,re.BLOT)){const s=this.isolate(e,n);i&&s.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof In&&In.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};Y(In,"allowedChildren",[In,bn,Ft,xn]),Y(In,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let $n=In;const Ig=1;class Ye extends Uo{constructor(){super(...arguments);Y(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=ly(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,i,s){r<=0||(this.scroll.query(i,re.BLOCK)?n+r===this.length()&&this.format(i,s):super.formatAt(n,Math.min(r,this.length()-n-1),i,s),this.cache={})}insertAt(n,r,i){if(i!=null){super.insertAt(n,r,i),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),o=s.shift();o.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let l=this;s.reduce((a,u)=>(l=l.split(a,!0),l.insertAt(0,u),u.length),n+o.length)}insertBefore(n,r){const{head:i}=this.children;super.insertBefore(n,r),i instanceof bn&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Ig),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-Ig)){const s=this.clone();return n===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(n,r);return this.cache={},i}}Ye.blotName="block";Ye.tagName="P";Ye.defaultChild=bn;Ye.allowedChildren=[bn,$n,Ft,xn];class Yt extends Ft{attach(){super.attach(),this.attributes=new Ja(this.domNode)}delta(){return new ne().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,re.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),s=i.pop(),o=i.map(a=>{const u=this.scroll.create(Ye.blotName);return u.insertAt(0,a),u}),l=this.split(e);o.forEach(a=>{this.parent.insertBefore(a,l)}),s&&this.parent.insertBefore(this.scroll.create("text",s),l)}}Yt.scope=re.BLOCK_BLOT;function ly(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(ct).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),Zt(r,{},e)),new ne).insert(`
`,Zt(t))}function Zt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Zt(t.parent,e,n)}const Gt=class Gt extends Ft{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(Gt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==re.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Gt.CONTENTS.length,r.optimize(),r.formatAt(i,Gt.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof xn?this.prev:null,r=n?n.length():0,i=this.next instanceof xn?this.next:null,s=i?i.text:"",{textNode:o}=this,l=o.data.split(Gt.CONTENTS).join("");o.data=Gt.CONTENTS;let a;if(n)a=n,(l||i)&&(n.insertAt(n.length(),l+s),i&&i.remove());else if(i)a=i,i.insertAt(0,l);else{const u=document.createTextNode(l);a=this.scroll.create(u),this.parent.insertBefore(a,this)}if(this.remove(),e){const u=(p,x)=>n&&p===n.domNode?x:p===o?r+x-1:i&&p===i.domNode?r+l.length+x:null,f=u(e.start.node,e.start.offset),d=u(e.end.node,e.end.offset);if(f!==null&&d!==null)return{startNode:a.domNode,startOffset:f,endNode:a.domNode,endOffset:d}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Gt.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};Y(Gt,"blotName","cursor"),Y(Gt,"className","ql-cursor"),Y(Gt,"tagName","span"),Y(Gt,"CONTENTS","\uFEFF");let ms=Gt;var ay={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(a,u,f){this.fn=a,this.context=u,this.once=f||!1}function s(a,u,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,d||a,p),y=n?n+u:u;return a._events[y]?a._events[y].fn?a._events[y]=[a._events[y],x]:a._events[y].push(x):(a._events[y]=x,a._eventsCount++),a}function o(a,u){--a._eventsCount===0?a._events=new r:delete a._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,x=d.length,y=new Array(x);p<x;p++)y[p]=d[p].fn;return y},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,p,x,y){var E=n?n+u:u;if(!this._events[E])return!1;var S=this._events[E],w=arguments.length,v,c;if(S.fn){switch(S.once&&this.removeListener(u,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,d),!0;case 4:return S.fn.call(S.context,f,d,p),!0;case 5:return S.fn.call(S.context,f,d,p,x),!0;case 6:return S.fn.call(S.context,f,d,p,x,y),!0}for(c=1,v=new Array(w-1);c<w;c++)v[c-1]=arguments[c];S.fn.apply(S.context,v)}else{var b=S.length,T;for(c=0;c<b;c++)switch(S[c].once&&this.removeListener(u,S[c].fn,void 0,!0),w){case 1:S[c].fn.call(S[c].context);break;case 2:S[c].fn.call(S[c].context,f);break;case 3:S[c].fn.call(S[c].context,f,d);break;case 4:S[c].fn.call(S[c].context,f,d,p);break;default:if(!v)for(T=1,v=new Array(w-1);T<w;T++)v[T-1]=arguments[T];S[c].fn.apply(S[c].context,v)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,p){var x=n?n+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===f&&(!p||y.once)&&(!d||y.context===d)&&o(this,x);else{for(var E=0,S=[],w=y.length;E<w;E++)(y[E].fn!==f||p&&!y[E].once||d&&y[E].context!==d)&&S.push(y[E]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(ay);var b4=ay.exports;const S4=sh(b4),Wf=new WeakMap,Zf=["error","warn","log","info"];let Qf="warn";function uy(t){if(Qf&&Zf.indexOf(t)<=Zf.indexOf(Qf)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function cr(t){return Zf.reduce((e,n)=>(e[n]=uy.bind(console,n,t),e),{})}cr.level=t=>{Qf=t};uy.level=cr.level;const kc=cr("quill:events"),T4=["selectionchange","mousedown","mouseup","click"];T4.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=Wf.get(i);s&&s.emitter&&s.emitter.handleDOM(...n)})})});class te extends S4{constructor(){super(),this.domListeners={},this.on("error",kc.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kc.log.call(kc,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(s=>{let{node:o,handler:l}=s;(e.target===o||o.contains(e.target))&&l(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}Y(te,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),Y(te,"sources",{API:"api",SILENT:"silent",USER:"user"});const Nc=cr("quill:selection");class ui{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class A4{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ui(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,te.sources.USER),1)}),this.emitter.on(te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(te.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const o=s.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(o?te.sources.SILENT:i)}catch{}})}),this.emitter.on(te.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:s,startOffset:o,endNode:l,endOffset:a}=i.range;this.setNativeRange(s,o,l,a),this.update(te.sources.SILENT)}}),this.update(te.sources.SILENT)}handleComposition(){this.emitter.on(te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,re.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof ct){const s=i.split(r.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[s,o]=this.scroll.leaf(e);if(s==null)return null;if(n>0&&o===s.length()){const[f]=this.scroll.leaf(e+1);if(f){const[d]=this.scroll.line(e),[p]=this.scroll.line(e+1);d===p&&(s=f,o=0)}}[i,o]=s.position(o,!0);const l=document.createRange();if(n>0)return l.setStart(i,o),[s,o]=this.scroll.leaf(e+n),s==null?null:([i,o]=s.position(o,!0),l.setEnd(i,o),l.getBoundingClientRect());let a="left",u;if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(l.setStart(i,o),l.setEnd(i,o+1)):(l.setStart(i,o-1),l.setEnd(i,o),a="right"),u=l.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;u=s.domNode.getBoundingClientRect(),o>0&&(a="right")}return{bottom:u.top+u.height,height:u.height,left:u[a],right:u[a],top:u.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Nc.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&_c(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(o=>{const[l,a]=o,u=this.scroll.find(l,!0),f=u.offset(this.scroll);return a===0?f:u instanceof ct?f+u.index(l,a):f+u.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),s=Math.min(i,...r);return new ui(s,i-s)}normalizeNative(e){if(!_c(this.root,e.startContainer)||!e.collapsed&&!_c(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:s}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;r.node=i,r.offset=s}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,s)=>{i=Math.min(n-1,i);const[o,l]=this.scroll.leaf(i);return o?o.position(l,s):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Nc.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||s||e!==l.startContainer||n!==l.startOffset||r!==l.endContainer||i!==l.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const a=document.createRange();a.setStart(e,n),a.setEnd(r,i),o.removeAllRanges(),o.addRange(a)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.sources.API;if(typeof n=="string"&&(r=n,n=!1),Nc.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!dd(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const s=[te.events.SELECTION_CHANGE,ns(this.lastRange),ns(n),e];this.emitter.emit(te.events.EDITOR_CHANGE,...s),e!==te.sources.SILENT&&this.emitter.emit(...s)}}}function _c(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const k4=/^[ -~]*$/;class N4{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=Og(e),i=new ne;return C4(r.ops.slice()).reduce((o,l)=>{const a=en.Op.length(l);let u=l.attributes||{},f=!1,d=!1;if(l.insert!=null){if(i.retain(a),typeof l.insert=="string"){const y=l.insert;d=!y.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(Yt,o)[0]),this.scroll.insertAt(o,y);const[E,S]=this.scroll.line(o);let w=Pr({},Zt(E));if(E instanceof Ye){const[v]=E.descendant(ct,S);v&&(w=Pr(w,Zt(v)))}u=en.AttributeMap.diff(w,u)||{}}else if(typeof l.insert=="object"){const y=Object.keys(l.insert)[0];if(y==null)return o;const E=this.scroll.query(y,re.INLINE)!=null;if(E)(n<=o||this.scroll.descendant(Yt,o)[0])&&(d=!0);else if(o>0){const[S,w]=this.scroll.descendant(ct,o-1);S instanceof xn?S.value()[w]!==`
`&&(f=!0):S instanceof Ft&&S.statics.scope===re.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(o,y,l.insert[y]),E){const[S]=this.scroll.descendant(ct,o);if(S){const w=Pr({},Zt(S));u=en.AttributeMap.diff(w,u)||{}}}}n+=a}else if(i.push(l),l.retain!==null&&typeof l.retain=="object"){const y=Object.keys(l.retain)[0];if(y==null)return o;this.scroll.updateEmbedAt(o,y,l.retain[y])}Object.keys(u).forEach(y=>{this.scroll.formatAt(o,a,y,u[y])});const p=f?1:0,x=d?1:0;return n+=p+x,i.retain(p),i.delete(x),o+a+p+x},0),i.reduce((o,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(o,l.delete),o):o+en.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new ne().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(s=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(s,r[s])})}),this.scroll.optimize();const i=new ne().retain(e).retain(n,ns(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(s=>{this.scroll.formatAt(e,n,s,r[s])});const i=new ne().retain(e).retain(n,ns(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new ne)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(l=>{const[a]=l;a instanceof Ye?r.push(a):a instanceof ct&&i.push(a)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(ct,e,n));const[s,o]=[r,i].map(l=>{const a=l.shift();if(a==null)return{};let u=Zt(a);for(;Object.keys(u).length>0;){const f=l.shift();if(f==null)return u;u=_4(Zt(f),u)}return u});return{...s,...o}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const s=r.length();return r.length()>=i+n&&!(i===0&&n===s)?$o(r,i,n,!0):$o(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=Og(n),i=new ne().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new ne().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new ne().retain(e).insert(n,ns(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Ye.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof bn}removeFormat(e,n){const r=this.getText(e,n),[i,s]=this.scroll.line(e+n);let o=0,l=new ne;i!=null&&(o=i.length()-s,l=i.delta().slice(s,s+o-1).insert(`
`));const u=this.getContents(e,n+o).diff(new ne().insert(r).concat(l)),f=new ne().retain(e).concat(u);return this.applyDelta(f)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(k4)&&this.scroll.find(n[0].target)){const s=this.scroll.find(n[0].target),o=Zt(s),l=s.offset(this.scroll),a=n[0].oldValue.replace(ms.CONTENTS,""),u=new ne().insert(a),f=new ne().insert(s.value()),d=r&&{oldRange:Rg(r.oldRange,-l),newRange:Rg(r.newRange,-l)};e=new ne().retain(l).concat(u.diff(f,d)).reduce((x,y)=>y.insert?x.insert(y.insert,o):x.push(y),new ne),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!dd(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Oi(t,e,n){if(t.length===0){const[x]=Cc(n.pop());return e<=0?`</li></${x}>`:`</li></${x}>${Oi([],e-1,n)}`}const[{child:r,offset:i,length:s,indent:o,type:l},...a]=t,[u,f]=Cc(l);if(o>e)return n.push(l),o===e+1?`<${u}><li${f}>${$o(r,i,s)}${Oi(a,o,n)}`:`<${u}><li>${Oi(t,e+1,n)}`;const d=n[n.length-1];if(o===e&&l===d)return`</li><li${f}>${$o(r,i,s)}${Oi(a,o,n)}`;const[p]=Cc(n.pop());return`</li></${p}>${Oi(t,e-1,n)}`}function $o(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof xn)return iu(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof yn){if(t.statics.blotName==="list-container"){const u=[];return t.children.forEachAt(e,n,(f,d,p)=>{const x="formats"in f&&typeof f.formats=="function"?f.formats():{};u.push({child:f,offset:d,length:p,indent:x.indent||0,type:x.list})}),Oi(u,-1,[])}const i=[];if(t.children.forEachAt(e,n,(u,f,d)=>{i.push($o(u,f,d))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:o}=t.domNode,[l,a]=s.split(`>${o}<`);return l==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${a}`:`${l}>${i.join("")}<${a}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function _4(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function Cc(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Og(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new ne)}function Rg(t,e){let{index:n,length:r}=t;return new ui(n+e,r)}function C4(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,s)=>{s&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class Sn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}Y(Sn,"DEFAULTS",{});const Dl="\uFEFF";class xd extends Ft{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Dl),this.rightGuard=document.createTextNode(Dl),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(Dl).join("");if(e===this.leftGuard)if(this.prev instanceof xn){const s=this.prev.length();this.prev.insertAt(s,i),n={startNode:this.prev.domNode,startOffset:s+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof xn?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=Dl,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class L4{constructor(e,n){Y(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof xd)&&(this.emitter.emit(te.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(te.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(te.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(te.events.COMPOSITION_END,e),this.isComposing=!1}}const go=class go{constructor(e,n){Y(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};Y(go,"DEFAULTS",{modules:{}}),Y(go,"themes",{default:go});let ys=go;const I4=t=>t.parentElement||t.getRootNode().host||null,O4=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},Bl=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Pg=(t,e,n,r,i,s)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+s:0,R4=(t,e)=>{var s,o,l;const n=t.ownerDocument;let r=e,i=t;for(;i;){const a=i===n.body,u=a?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??n.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??n.documentElement.clientHeight,left:0}:O4(i),f=getComputedStyle(i),d=Pg(r.left,r.right,u.left,u.right,Bl(f.scrollPaddingLeft),Bl(f.scrollPaddingRight)),p=Pg(r.top,r.bottom,u.top,u.bottom,Bl(f.scrollPaddingTop),Bl(f.scrollPaddingBottom));if(d||p)if(a)(l=n.defaultView)==null||l.scrollBy(d,p);else{const{scrollLeft:x,scrollTop:y}=i;p&&(i.scrollTop+=p),d&&(i.scrollLeft+=d);const E=i.scrollLeft-x,S=i.scrollTop-y;r={left:r.left-E,top:r.top-S,right:r.right-E,bottom:r.bottom-S}}i=a||f.position==="fixed"?null:I4(i)}},P4=100,D4=["block","break","cursor","inline","scroll","text"],B4=(t,e,n)=>{const r=new gs;return D4.forEach(i=>{const s=e.query(i);s&&r.register(s)}),t.forEach(i=>{let s=e.query(i);s||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;s;)if(r.register(s),s="blotName"in s?s.requiredContainer??null:null,o+=1,o>P4){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},is=cr("quill"),jl=new gs;yn.uiClass="ql-ui";const un=class un{static debug(e){e===!0&&(e="log"),cr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Wf.get(e)||jl.find(e,n)}static import(e){return this.imports[e]==null&&is.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&is.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&jl.register(n),typeof n.register=="function"&&n.register(jl)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=j4(e,n),this.container=this.options.container,this.container==null){is.error("Invalid Quill container",e);return}this.options.debug&&un.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Wf.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new te;const i=gd.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new N4(this.scroll),this.selection=new A4(this.scroll,this.emitter),this.composition=new L4(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(te.events.EDITOR_CHANGE,o=>{o===te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(te.events.SCROLL_UPDATE,(o,l)=>{const a=this.selection.lastRange,[u]=this.selection.getRange(),f=a&&u?{oldRange:a,newRange:u}:void 0;an.call(this,()=>this.editor.update(null,l,f),o)}),this.emitter.on(te.events.SCROLL_EMBED_UPDATE,(o,l)=>{const a=this.selection.lastRange,[u]=this.selection.getRange(),f=a&&u?{oldRange:a,newRange:u}:void 0;an.call(this,()=>{const d=new ne().retain(o.offset(this)).retain({[o.statics.blotName]:l});return this.editor.update(d,[],f)},un.sources.USER)}),r){const o=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Zn(e,n,r),an.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.sources.API;return an.call(this,()=>{const i=this.getSelection(!0);let s=new ne;if(i==null)return s;if(this.scroll.query(e,re.BLOCK))s=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),s;s=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,te.sources.SILENT),s},r)}formatLine(e,n,r,i,s){let o;return[e,n,o,s]=Zn(e,n,r,i,s),an.call(this,()=>this.editor.formatLine(e,n,o),s,e,0)}formatText(e,n,r,i,s){let o;return[e,n,o,s]=Zn(e,n,r,i,s),an.call(this,()=>this.editor.formatText(e,n,o),s,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Zn(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Zn(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Zn(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:un.sources.API;return an.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,s){let o;return[e,,o,s]=Zn(e,0,r,i,s),an.call(this,()=>this.editor.insertText(e,n,o),s,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Zn(e,n,r),an.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){R4(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;return an.call(this,()=>{e=new ne(e);const r=this.getLength(),i=this.editor.deleteText(0,r),s=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(o)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||un.sources.API):([e,n,,r]=Zn(e,n,r),this.selection.setRange(new ui(Math.max(0,e),n),r),r!==te.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;const r=new ne().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.sources.API;return an.call(this,()=>(e=new ne(e),this.editor.applyDelta(e)),n,!0)}};Y(un,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:jl,theme:"default"}),Y(un,"events",te.events),Y(un,"sources",te.sources),Y(un,"version","2.0.3"),Y(un,"imports",{delta:ne,parchment:l4,"core/module":Sn,"core/theme":ys});let K=un;function Dg(t){return typeof t=="string"?document.querySelector(t):t}function Lc(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function Bg(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function j4(t,e){const n=Dg(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===K.DEFAULTS.theme?ys:K.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:s,...o}=K.DEFAULTS,{modules:l,...a}=i.DEFAULTS;let u=Lc(e.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const f=Pr({},Lc(s),Lc(l),u),d={...o,...Bg(a),...Bg(e)};let p=e.registry;return p?e.formats&&is.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?B4(e.formats,d.registry,is):d.registry,{...d,registry:p,container:n,theme:i,modules:Object.entries(f).reduce((x,y)=>{let[E,S]=y;if(!S)return x;const w=K.import(`modules/${E}`);return w==null?(is.error(`Cannot load ${E} module. Are you sure you registered it?`),x):{...x,[E]:Pr({},w.DEFAULTS||{},S)}},{}),bounds:Dg(d.bounds)}}function an(t,e,n,r){if(!this.isEnabled()&&e===te.sources.USER&&!this.allowReadOnlyEdits)return new ne;let i=n==null?null:this.getSelection();const s=this.editor.delta,o=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=jg(i,o,e):r!==0&&(i=jg(i,n,r,e)),this.setSelection(i,te.sources.SILENT)),o.length()>0){const l=[te.events.TEXT_CHANGE,o,s,e];this.emitter.emit(te.events.EDITOR_CHANGE,...l),e!==te.sources.SILENT&&this.emitter.emit(...l)}return o}function Zn(t,e,n,r,i){let s={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(s=n,i=r):typeof n=="string"&&(r!=null?s[n]=r:i=n),i=i||te.sources.API,[t,e,s,i]}function jg(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let s,o;return e&&typeof e.transformPosition=="function"?[s,o]=[t.index,t.index+t.length].map(l=>e.transformPosition(l,r!==te.sources.USER)):[s,o]=[t.index,t.index+t.length].map(l=>l<e||l===e&&r===te.sources.USER?l:i>=0?l+i:Math.max(e,l+i)),new ui(s,o-s)}class gi extends eu{}function Ug(t){return t instanceof Ye||t instanceof Yt}function Mg(t){return typeof t.updateContent=="function"}class Ri extends gd{constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(te.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(te.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(te.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[s]=this.line(e+n);if(super.deleteAt(e,n),s!=null&&r!==s&&i>0){if(r instanceof Yt||s instanceof Yt){this.optimize();return}const o=s.children.head instanceof bn?null:s.children.head;r.moveChildren(s,o),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,re.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===re.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new ne().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const s=r.shift();if(s){const a=s.type==="block"&&(s.delta.length()===0||!this.descendant(Yt,e)[0]&&e<this.length()),u=s.type==="block"?s.delta:new ne().insert({[s.key]:s.value});Ic(this,e,u);const f=s.type==="block"?1:0,d=e+u.length()+f;a&&this.insertAt(d-1,`
`);const p=Zt(this.line(e)[0]),x=en.AttributeMap.diff(p,s.attributes)||{};Object.keys(x).forEach(y=>{this.formatAt(d-1,1,y,x[y])}),e=d}let[o,l]=this.children.find(e);if(r.length&&(o&&(o=o.split(l),l=0),r.forEach(a=>{if(a.type==="block"){const u=this.createBlock(a.attributes,o||void 0);Ic(u,0,a.delta)}else{const u=this.create(a.key,a.value);this.insertBefore(u,o||void 0),Object.keys(a.attributes).forEach(f=>{u.format(f,a.attributes[f])})}})),i.type==="block"&&i.delta.length()){const a=o?o.offset(o.scroll)+l:this.length();Ic(this,a,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof ct?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Ug,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,s,o)=>{let l=[],a=o;return i.children.forEachAt(s,o,(u,f,d)=>{Ug(u)?l.push(u):u instanceof eu&&(l=l.concat(r(u,f,a))),a-=d}),l};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(te.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=te.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const s=this.find(i,!0);return s&&!Mg(s)}),e.length>0&&this.emitter.emit(te.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(te.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(s=>s instanceof Yt,e);i&&i.statics.blotName===n&&Mg(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new ne;return e.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const o=s.split(`
`);o.slice(0,-1).forEach(a=>{r.insert(a,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new ne});const l=o[o.length-1];l&&r.insert(l,i.attributes)}else{const o=Object.keys(s)[0];if(!o)return;this.query(o,re.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new ne,n.push({type:"blockEmbed",key:o,value:s[o],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(l=>{let[a,u]=l;this.query(a,re.BLOCK&re.BLOT)!=null?r=a:i[a]=u});const s=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(s,n||void 0);const o=s.length();return Object.entries(i).forEach(l=>{let[a,u]=l;s.formatAt(0,o,a,u)}),s}}Y(Ri,"blotName","scroll"),Y(Ri,"className","ql-editor"),Y(Ri,"tagName","DIV"),Y(Ri,"defaultChild",Ye),Y(Ri,"allowedChildren",[Ye,Yt,gi]);function Ic(t,e,n){n.reduce((r,i)=>{const s=en.Op.length(i);let o=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const l=i.insert;t.insertAt(r,l);const[a]=t.descendant(ct,r),u=Zt(a);o=en.AttributeMap.diff(u,o)||{}}else if(typeof i.insert=="object"){const l=Object.keys(i.insert)[0];if(l==null)return r;if(t.insertAt(r,l,i.insert[l]),t.scroll.query(l,re.INLINE)!=null){const[u]=t.descendant(ct,r),f=Zt(u);o=en.AttributeMap.diff(f,o)||{}}}}return Object.keys(o).forEach(l=>{t.formatAt(r,s,l,o[l])}),r+s},e)}const Ed={scope:re.BLOCK,whitelist:["right","center","justify"]},U4=new Mn("align","align",Ed),cy=new En("align","ql-align",Ed),fy=new Fr("align","text-align",Ed);class hy extends Fr{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const M4=new En("color","ql-color",{scope:re.INLINE}),bd=new hy("color","color",{scope:re.INLINE}),$4=new En("background","ql-bg",{scope:re.INLINE}),Sd=new hy("background","background-color",{scope:re.INLINE});class mi extends gi{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${iu(this.code(e,n))}
</pre>`}}class ft extends Ye{static register(){K.register(mi)}}Y(ft,"TAB","  ");class Td extends $n{}Td.blotName="code";Td.tagName="CODE";ft.blotName="code-block";ft.className="ql-code-block";ft.tagName="DIV";mi.blotName="code-block-container";mi.className="ql-code-block-container";mi.tagName="DIV";mi.allowedChildren=[ft];ft.allowedChildren=[xn,bn,ms];ft.requiredContainer=mi;const Ad={scope:re.BLOCK,whitelist:["rtl"]},dy=new Mn("direction","dir",Ad),py=new En("direction","ql-direction",Ad),gy=new Fr("direction","direction",Ad),my={scope:re.INLINE,whitelist:["serif","monospace"]},yy=new En("font","ql-font",my);class q4 extends Fr{value(e){return super.value(e).replace(/["']/g,"")}}const vy=new q4("font","font-family",my),wy=new En("size","ql-size",{scope:re.INLINE,whitelist:["small","large","huge"]}),xy=new Fr("size","font-size",{scope:re.INLINE,whitelist:["10px","18px","32px"]}),F4=cr("quill:keyboard"),z4=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class su extends Sn{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=G4(e);if(i==null){F4.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(o=>{const l={...i,key:o,...n,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(w=>su.match(e,w));if(i.length===0)return;const s=K.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[l,a]=this.quill.getLine(o.index),[u,f]=this.quill.getLeaf(o.index),[d,p]=o.length===0?[u,f]:this.quill.getLeaf(o.index+o.length),x=u instanceof Ca?u.value().slice(0,f):"",y=d instanceof Ca?d.value().slice(p):"",E={collapsed:o.length===0,empty:o.length===0&&l.length()<=1,format:this.quill.getFormat(o),line:l,offset:a,prefix:x,suffix:y,event:e};i.some(w=>{if(w.collapsed!=null&&w.collapsed!==E.collapsed||w.empty!=null&&w.empty!==E.empty||w.offset!=null&&w.offset!==E.offset)return!1;if(Array.isArray(w.format)){if(w.format.every(v=>E.format[v]==null))return!1}else if(typeof w.format=="object"&&!Object.keys(w.format).every(v=>w.format[v]===!0?E.format[v]!=null:w.format[v]===!1?E.format[v]==null:dd(w.format[v],E.format[v])))return!1;return w.prefix!=null&&!w.prefix.test(E.prefix)||w.suffix!=null&&!w.suffix.test(E.suffix)?!1:w.handler.call(this,o,E,w)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(e.index);let o=new ne().retain(e.index-r).delete(r);if(n.offset===0){const[l]=this.quill.getLine(e.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const u=s.formats(),f=this.quill.getFormat(e.index-1,1);if(i=en.AttributeMap.diff(u,f)||{},Object.keys(i).length>0){const d=new ne().retain(e.index+s.length()-2).retain(1,i);o=o.compose(d)}}}this.quill.updateContents(o,K.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[s]=this.quill.getLine(e.index);let o=new ne().retain(e.index).delete(r);if(n.offset>=s.length()-1){const[l]=this.quill.getLine(e.index+1);if(l){const a=s.formats(),u=this.quill.getFormat(e.index,1);i=en.AttributeMap.diff(a,u)||{},Object.keys(i).length>0&&(o=o.retain(l.length()-1).retain(1,i))}}this.quill.updateContents(o,K.sources.USER),this.quill.focus()}handleDeleteRange(e){kd({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((s,o)=>(this.quill.scroll.query(o,re.BLOCK)&&!Array.isArray(n.format[o])&&(s[o]=n.format[o]),s),{}),i=new ne().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(e.index+1,K.sources.SILENT),this.quill.focus()}}const H4={bindings:{bold:Oc("bold"),italic:Oc("italic"),underline:Oc("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",K.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",K.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",K.sources.USER):e.format.list!=null&&this.quill.format("list",!1,K.sources.USER)}},"indent code-block":$g(!0),"outdent code-block":$g(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,K.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new ne().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,K.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,K.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,K.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,K.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new ne().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(t.index+1,K.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new ne().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(t.index+1,K.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,s]=e.getTable(t),o=V4(n,r,i,s);if(o==null)return;let l=n.offset();if(o<0){const a=new ne().retain(l).insert(`
`);this.quill.updateContents(a,K.sources.USER),this.quill.setSelection(t.index+1,t.length,K.sources.SILENT)}else if(o>0){l+=n.length();const a=new ne().retain(l).insert(`
`);this.quill.updateContents(a,K.sources.USER),this.quill.setSelection(l,K.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,K.sources.USER):this.quill.setSelection(i+r.length(),K.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",K.sources.USER),this.quill.history.cutoff();const o=new ne().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:s});return this.quill.updateContents(o,K.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,K.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const s=new ne().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,K.sources.USER),this.quill.setSelection(t.index-1,K.sources.SILENT),!1}return!0}},"embed left":Ul("ArrowLeft",!1),"embed left shift":Ul("ArrowLeft",!0),"embed right":Ul("ArrowRight",!1),"embed right shift":Ul("ArrowRight",!0),"table down":qg(!1),"table up":qg(!0)}};su.DEFAULTS=H4;function $g(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,s,K.sources.USER),this.quill.setSelection(e.index+s.length,K.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:l,length:a}=e;o.forEach((u,f)=>{t?(u.insertAt(0,s),f===0?l+=s.length:a+=s.length):u.domNode.textContent.startsWith(s)&&(u.deleteAt(0,s.length),f===0?l-=s.length:a-=s.length)}),this.quill.update(K.sources.USER),this.quill.setSelection(l,a,K.sources.SILENT)}}}function Ul(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[s]=this.quill.getLeaf(i);return s instanceof Ft?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,K.sources.USER):this.quill.setSelection(r.index-1,K.sources.USER):e?this.quill.setSelection(r.index,r.length+1,K.sources.USER):this.quill.setSelection(r.index+r.length+1,K.sources.USER),!1):!0}}}function Oc(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],K.sources.USER)}}}function qg(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,s=i.parent[r];if(s!=null){if(s.statics.blotName==="table-row"){let o=s.children.head,l=i;for(;l.prev!=null;)l=l.prev,o=o.next;const a=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(a,0,K.sources.USER)}}else{const o=i.table()[r];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,K.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,K.sources.USER))}return!1}}}function G4(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=ns(t);else return null;return t.shortKey&&(t[z4]=t.shortKey,delete t.shortKey),t}function kd(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const s=r[0].formats(),o=r[r.length-1].formats();i=en.AttributeMap.diff(o,s)||{}}e.deleteText(n,K.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,K.sources.USER),e.setSelection(n.index,K.sources.SILENT)}function V4(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const K4=/font-weight:\s*normal/,W4=["P","OL","UL"],Fg=t=>t&&W4.includes(t.tagName),Z4=t=>{Array.from(t.querySelectorAll("br")).filter(e=>Fg(e.previousElementSibling)&&Fg(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},Q4=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(K4)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function X4(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Q4(t),Z4(t))}const Y4=/\bmso-list:[^;]*ignore/i,J4=/\bmso-list:[^;]*\bl(\d+)/i,e5=/\bmso-list:[^;]*\blevel(\d+)/i,t5=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(J4);if(!r)return null;const i=Number(r[1]),s=n==null?void 0:n.match(e5),o=s?Number(s[1]):1,l=new RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),a=e.match(l),u=a&&a[1]==="bullet"?"bullet":"ordered";return{id:i,indent:o,type:u,element:t}},n5=t=>{var o,l;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(a=>{(a.getAttribute("style")||"").match(Y4)?n.push(a):r.push(a)}),n.forEach(a=>{var u;return(u=a.parentNode)==null?void 0:u.removeChild(a)});const i=t.documentElement.innerHTML,s=r.map(a=>t5(a,i)).filter(a=>a);for(;s.length;){const a=[];let u=s.shift();for(;u;)a.push(u),u=s.length&&((o=s[0])==null?void 0:o.element)===u.element.nextElementSibling&&s[0].id===u.id?s.shift():null;const f=document.createElement("ul");a.forEach(x=>{const y=document.createElement("li");y.setAttribute("data-list",x.type),x.indent>1&&y.setAttribute("class",`ql-indent-${x.indent-1}`),y.innerHTML=x.element.innerHTML,f.appendChild(y)});const d=(l=a[0])==null?void 0:l.element,{parentNode:p}=d??{};d&&(p==null||p.replaceChild(f,d)),a.slice(1).forEach(x=>{let{element:y}=x;p==null||p.removeChild(y)})}};function r5(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&n5(t)}const i5=[r5,X4],s5=t=>{t.documentElement&&i5.forEach(e=>{e(t)})},o5=cr("quill:clipboard"),l5=[[Node.TEXT_NODE,w5],[Node.TEXT_NODE,Hg],["br",h5],[Node.ELEMENT_NODE,Hg],[Node.ELEMENT_NODE,f5],[Node.ELEMENT_NODE,c5],[Node.ELEMENT_NODE,y5],["li",g5],["ol, ul",m5],["pre",d5],["tr",v5],["b",Rc("bold")],["i",Rc("italic")],["strike",Rc("strike")],["style",p5]],a5=[U4,dy].reduce((t,e)=>(t[e.keyName]=e,t),{}),zg=[fy,Sd,bd,gy,vy,xy].reduce((t,e)=>(t[e.keyName]=e,t),{});class Ey extends Sn{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],l5.concat(this.options.matchers??[]).forEach(r=>{let[i,s]=r;this.addMatcher(i,s)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[ft.blotName])return new ne().insert(r||"",{[ft.blotName]:i[ft.blotName]});if(!n)return new ne().insert(r||"",i);const s=this.convertHTML(n);return Zo(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new ne().retain(s.length()-1).delete(1)):s}normalizeHTML(e){s5(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[s,o]=this.prepareMatching(r,i);return Nd(this.quill.scroll,r,s,o,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,K.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new ne().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),K.sources.SILENT)}}onCaptureCopy(e){var o,l;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:s}=this.onCopy(r,n);(o=e.clipboardData)==null||o.setData("text/plain",s),(l=e.clipboardData)==null||l.setData("text/html",i),n&&kd({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var o,l,a,u,f;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(o=e.clipboardData)==null?void 0:o.getData("text/html");let i=(l=e.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!i){const d=(a=e.clipboardData)==null?void 0:a.getData("text/uri-list");d&&(i=this.normalizeURIList(d))}const s=Array.from(((u=e.clipboardData)==null?void 0:u.files)||[]);if(!r&&s.length>0){this.quill.uploader.upload(n,s);return}if(r&&s.length>0){const d=new DOMParser().parseFromString(r,"text/html");if(d.body.childElementCount===1&&((f=d.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(n,s);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const s=this.quill.getFormat(e.index),o=this.convert({text:r,html:i},s);o5.log("onPaste",o,{text:r,html:i});const l=new ne().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(l,K.sources.USER),this.quill.setSelection(l.length()-e.length,K.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(s=>{const[o,l]=s;switch(o){case Node.TEXT_NODE:i.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(e.querySelectorAll(o)).forEach(a=>{if(n.has(a)){const u=n.get(a);u==null||u.push(l)}else n.set(a,[l])});break}}),[r,i]}}Y(Ey,"DEFAULTS",{matchers:[]});function yi(t,e,n,r){return r.query(e)?t.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[e])return i.push(s);const o=n?{[e]:n}:{};return i.insert(s.insert,{...o,...s.attributes})},new ne):t}function Zo(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function Tr(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Ft?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function u5(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Tr(t.previousElementSibling,e)&&!Tr(t.nextElementSibling,e)}const Ml=new WeakMap;function by(t){return t==null?!1:(Ml.has(t)||(t.tagName==="PRE"?Ml.set(t,!0):Ml.set(t,by(t.parentNode))),Ml.get(t))}function Nd(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((s,o)=>o(e,s,t),new ne):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,o)=>{let l=Nd(t,o,n,r,i);return o.nodeType===e.ELEMENT_NODE&&(l=n.reduce((a,u)=>u(o,a,t),l),l=(i.get(o)||[]).reduce((a,u)=>u(o,a,t),l)),s.concat(l)},new ne):new ne}function Rc(t){return(e,n,r)=>yi(n,t,!0,r)}function c5(t,e,n){const r=Mn.keys(t),i=En.keys(t),s=Fr.keys(t),o={};return r.concat(i).concat(s).forEach(l=>{let a=n.query(l,re.ATTRIBUTE);a!=null&&(o[a.attrName]=a.value(t),o[a.attrName])||(a=a5[l],a!=null&&(a.attrName===l||a.keyName===l)&&(o[a.attrName]=a.value(t)||void 0),a=zg[l],a!=null&&(a.attrName===l||a.keyName===l)&&(a=zg[l],o[a.attrName]=a.value(t)||void 0))}),Object.entries(o).reduce((l,a)=>{let[u,f]=a;return yi(l,u,f,n)},e)}function f5(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof Ft){const i={},s=r.value(t);if(s!=null)return i[r.blotName]=s,new ne().insert(i,r.formats(t,n))}else if(r.prototype instanceof Uo&&!Zo(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return yi(e,r.blotName,r.formats(t,n),n);return e}function h5(t,e){return Zo(e,`
`)||e.insert(`
`),e}function d5(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return yi(e,"code-block",i,n)}function p5(){return new ne}function g5(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Zo(e,`
`))return e;let i=-1,s=t.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?e:e.reduce((o,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?o.push(l):o.insert(l.insert,{indent:i,...l.attributes||{}}):o,new ne)}function m5(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const s=r.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),yi(e,"list",i,n)}function Hg(t,e,n){if(!Zo(e,`
`)){if(Tr(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Tr(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof Yt)return e.insert(`
`);r=r.firstChild}}}return e}function y5(t,e,n){var s;const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,l)=>{let[a,u]=l;return yi(o,a,u,n)},e),parseFloat(i.textIndent||0)>0?new ne().insert("	").concat(e):e}function v5(t,e,n){var i,s;const r=((i=t.parentElement)==null?void 0:i.tagName)==="TABLE"?t.parentElement:(s=t.parentElement)==null?void 0:s.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return yi(e,"table",l,n)}return e}function w5(t,e,n){var i;let r=t.data;if(((i=t.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(r.trim());if(!by(t)){if(r.trim().length===0&&r.includes(`
`)&&!u5(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&Tr(t.parentElement,n)||t.previousSibling instanceof Element&&Tr(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&Tr(t.parentElement,n)||t.nextSibling instanceof Element&&Tr(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(" "," ")}return e.insert(r)}class Sy extends Sn{constructor(n,r){super(n,r);Y(this,"lastRecorded",0);Y(this,"ignoreChange",!1);Y(this,"stack",{undo:[],redo:[]});Y(this,"currentRange",null);this.quill.on(K.events.EDITOR_CHANGE,(i,s,o,l)=>{i===K.events.SELECTION_CHANGE?s&&l!==K.sources.SILENT&&(this.currentRange=s):i===K.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===K.sources.USER?this.record(s,o):this.transform(s)),this.currentRange=Xf(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const i=this.stack[n].pop();if(!i)return;const s=this.quill.getContents(),o=i.delta.invert(s);this.stack[r].push({delta:o,range:Xf(i.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,K.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let i=n.invert(r),s=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(i=i.compose(l.delta),s=l.range)}else this.lastRecorded=o;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){Gg(this.stack.undo,n),Gg(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,K.sources.USER);else{const r=E5(this.quill.scroll,n.delta);this.quill.setSelection(r,K.sources.USER)}}}Y(Sy,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Gg(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Xf(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function x5(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,re.BLOCK)!=null):!1}function E5(t,e){const n=e.reduce((i,s)=>i+(s.delete||0),0);let r=e.length()-n;return x5(t,e)&&(r-=1),r}function Xf(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class Ty extends Sn{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var o;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(l.offsetNode,l.offset),i.setEnd(l.offsetNode,l.offset)}const s=i&&e.selection.normalizeNative(i);if(s){const l=e.selection.normalizedToRange(s);(o=r.dataTransfer)!=null&&o.files&&this.upload(l,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}Ty.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((s,o)=>s.insert({image:o}),new ne().retain(t.index).delete(t.length));this.quill.updateContents(i,te.sources.USER),this.quill.setSelection(t.index+r.length,te.sources.SILENT)})}};const b5=["insertText","insertReplacementText"];class S5 extends Sn{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(K.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){kd({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new ne().retain(e.index).insert(n,r),K.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,K.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!b5.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=T5(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function T5(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const A5=/Mac/i.test(navigator.platform),k5=100,N5=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||A5&&t.key==="a"&&t.ctrlKey===!0);class _5 extends Sn{constructor(n,r){super(n,r);Y(this,"isListening",!1);Y(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:i,event:s}=r;if(!(i instanceof yn)||!i.uiNode)return!0;const o=getComputedStyle(i.domNode).direction==="rtl";return o&&s.key!=="ArrowRight"||!o&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(s.shiftKey?1:0),K.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&N5(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+k5,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof yn)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(s)}}K.register({"blots/block":Ye,"blots/block/embed":Yt,"blots/break":bn,"blots/container":gi,"blots/cursor":ms,"blots/embed":xd,"blots/inline":$n,"blots/scroll":Ri,"blots/text":xn,"modules/clipboard":Ey,"modules/history":Sy,"modules/keyboard":su,"modules/uploader":Ty,"modules/input":S5,"modules/uiNode":_5});class C5 extends En{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const L5=new C5("indent","ql-indent",{scope:re.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Yf extends Ye{}Y(Yf,"blotName","blockquote"),Y(Yf,"tagName","blockquote");class Jf extends Ye{static formats(e){return this.tagName.indexOf(e.tagName)+1}}Y(Jf,"blotName","header"),Y(Jf,"tagName",["H1","H2","H3","H4","H5","H6"]);class Qo extends gi{}Qo.blotName="list-container";Qo.tagName="OL";class Xo extends Ye{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){K.register(Qo)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=s=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),s.preventDefault()):o==="unchecked"&&(this.format("list","checked"),s.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}Xo.blotName="list";Xo.tagName="LI";Qo.allowedChildren=[Xo];Xo.requiredContainer=Qo;class qo extends $n{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}Y(qo,"blotName","bold"),Y(qo,"tagName",["STRONG","B"]);class eh extends qo{}Y(eh,"blotName","italic"),Y(eh,"tagName",["EM","I"]);class Ar extends $n{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return Ay(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}Y(Ar,"blotName","link"),Y(Ar,"tagName","A"),Y(Ar,"SANITIZED_URL","about:blank"),Y(Ar,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function Ay(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class th extends $n{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}Y(th,"blotName","script"),Y(th,"tagName",["SUB","SUP"]);class nh extends qo{}Y(nh,"blotName","strike"),Y(nh,"tagName",["S","STRIKE"]);class rh extends $n{}Y(rh,"blotName","underline"),Y(rh,"tagName","U");class ea extends xd{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}Y(ea,"blotName","formula"),Y(ea,"className","ql-formula"),Y(ea,"tagName","SPAN");const Vg=["alt","height","width"];class ih extends Ft{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Vg.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return Ay(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){Vg.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}}Y(ih,"blotName","image"),Y(ih,"tagName","IMG");const Kg=["height","width"];class ta extends Yt{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Kg.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return Ar.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){Kg.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}Y(ta,"blotName","video"),Y(ta,"className","ql-video"),Y(ta,"tagName","IFRAME");const eo=new En("code-token","hljs",{scope:re.INLINE});class or extends $n{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(ft.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),eo.add(this.domNode,r)}format(e,n){e!==or.blotName?super.format(e,n):n?eo.add(this.domNode,n):(eo.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),eo.value(this.domNode)||this.unwrap()}}or.blotName="code-token";or.className="ql-token";class Qt extends ft{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),or.blotName,!1),super.replaceWith(e,n)}}class po extends mi{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Qt.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===Qt.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,s=Qt.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const o=this.children.reduce((a,u)=>a.concat(ly(u,!1)),new ne),l=e(i,s);o.diff(l).reduce((a,u)=>{let{retain:f,attributes:d}=u;return f?(d&&Object.keys(d).forEach(p=>{[Qt.blotName,or.blotName].includes(p)&&this.formatAt(a,f,p,d[p])}),a+f):a},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?Qt.formats(r.domNode):"plain"}">
${iu(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Qt.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}po.allowedChildren=[Qt];Qt.requiredContainer=po;Qt.allowedChildren=[or,ms,xn,bn];const I5=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class ky extends Sn{static register(){K.register(or,!0),K.register(Qt,!0),K.register(po,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:s}=i;return r[s]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(K.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof po))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:s}=r;const o=n.ownerDocument.createElement("option");o.textContent=s,o.setAttribute("value",i),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(Qt.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Qt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(K.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(K.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(po):[e]).forEach(s=>{s.highlight(this.highlightBlot,n)}),this.quill.update(K.sources.SILENT),r!=null&&this.quill.setSelection(r,K.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return iu(e).split(`
`).reduce((i,s,o)=>(o!==0&&i.insert(`
`,{[ft.blotName]:n}),i.insert(s)),new ne);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(ft.className),r.innerHTML=I5(this.options.hljs,n,e),Nd(this.quill.scroll,r,[(i,s)=>{const o=eo.value(i);return o?s.compose(new ne().retain(s.length(),{[or.blotName]:o})):s}],[(i,s)=>i.data.split(`
`).reduce((o,l,a)=>(a!==0&&o.insert(`
`,{[ft.blotName]:n}),o.insert(l)),s)],new WeakMap)}}ky.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const mo=class mo extends Ye{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",_d()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===mo.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};Y(mo,"blotName","table"),Y(mo,"tagName","TD");let pn=mo;class lr extends gi{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const s=this.splitAfter(n);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}Y(lr,"blotName","table-row"),Y(lr,"tagName","TR");class Un extends gi{}Y(Un,"blotName","table-body"),Y(Un,"tagName","TBODY");class vs extends gi{balanceCells(){const e=this.descendants(lr),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=pn.formats(r.children.head.domNode));const s=this.scroll.create(pn.blotName,i);r.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(Un);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[n]=this.descendant(Un);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),s=pn.formats(r.children.head.domNode),o=this.scroll.create(pn.blotName,s);r.insertBefore(o,i)})}insertRow(e){const[n]=this.descendant(Un);if(n==null||n.children.head==null)return;const r=_d(),i=this.scroll.create(lr.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(pn.blotName,r);i.appendChild(o)});const s=n.children.at(e);n.insertBefore(i,s)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}Y(vs,"blotName","table-container"),Y(vs,"tagName","TABLE");vs.allowedChildren=[Un];Un.requiredContainer=vs;Un.allowedChildren=[lr];lr.requiredContainer=Un;lr.allowedChildren=[pn];pn.requiredContainer=lr;function _d(){return`row-${Math.random().toString(36).slice(2,6)}`}class O5 extends Sn{static register(){K.register(pn),K.register(lr),K.register(Un),K.register(vs)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(vs).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(K.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(K.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(K.sources.USER),this.quill.setSelection(n,K.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==pn.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const o=s.cellOffset();r.insertColumn(o+e),this.quill.update(K.sources.USER);let l=i.rowOffset();e===0&&(l+=1),this.quill.setSelection(n.index+l,n.length,K.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const o=i.rowOffset();r.insertRow(o+e),this.quill.update(K.sources.USER),e>0?this.quill.setSelection(n,K.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,K.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(s=>{const o=new Array(n).fill(`
`).join("");return s.insert(o,{table:_d()})},new ne().retain(r.index));this.quill.updateContents(i,K.sources.USER),this.quill.setSelection(r.index,K.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(K.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(K.events.TEXT_CHANGE,(r,i,s)=>{s===K.sources.USER&&this.balanceTables()}),!0):!1)})}}const Wg=cr("quill:toolbar");class Cd extends Sn{constructor(e,n){var r,i;if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),R5(s,this.options.container),(i=(r=e.container)==null?void 0:r.parentNode)==null||i.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Wg.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var l;const o=(l=this.options.handlers)==null?void 0:l[s];o&&this.addHandler(s,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(K.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){Wg.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];l.hasAttribute("selected")?s=!1:s=l.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,s);else if(this.quill.scroll.query(n).prototype instanceof Ft){if(s=prompt(`Enter ${n}`),!s)return;this.quill.updateContents(new ne().retain(o.index).delete(o.length).insert({[n]:s}),K.sources.USER)}else this.quill.format(n,s,K.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,s]=r;if(s.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[i]==null)o=s.querySelector("option[selected]");else if(!Array.isArray(n[i])){let l=n[i];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),o=s.querySelector(`option[value="${l}"]`)}o==null?(s.value="",s.selectedIndex=-1):o.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const o=n[i],l=o===s.getAttribute("value")||o!=null&&o.toString()===s.getAttribute("value")||o==null&&!s.getAttribute("value");s.classList.toggle("ql-active",l),s.setAttribute("aria-pressed",l.toString())}else{const o=n[i]!=null;s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}})}}Cd.DEFAULTS={};function Zg(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function R5(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")Zg(r,i);else{const s=Object.keys(i)[0],o=i[s];Array.isArray(o)?P5(r,s,o):Zg(r,s,o)}}),t.appendChild(r)})}function P5(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),r.appendChild(s)}),t.appendChild(r)}Cd.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,re.INLINE)!=null&&this.quill.format(n,!1,K.sources.USER)})}else this.quill.removeFormat(t.index,t.length,K.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",K.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,K.sources.USER),this.quill.format("direction",t,K.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,K.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,K.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,K.sources.USER):this.quill.format("list","unchecked",K.sources.USER):this.quill.format("list",t,K.sources.USER)}}};const D5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',B5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',j5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',U5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',M5='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',$5='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',q5='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',F5='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Qg='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',z5='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',H5='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',G5='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',V5='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',K5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',W5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Z5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Q5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',X5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Y5='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',J5='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',eT='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',tT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',nT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',rT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',iT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',sT='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',oT='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',lT='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',aT='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',uT='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',cT='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',fT='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',hT='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Fo={align:{"":D5,center:B5,right:j5,justify:U5},background:M5,blockquote:$5,bold:q5,clean:F5,code:Qg,"code-block":Qg,color:z5,direction:{"":H5,rtl:G5},formula:V5,header:{1:K5,2:W5,3:Z5,4:Q5,5:X5,6:Y5},italic:J5,image:eT,indent:{"+1":tT,"-1":nT},link:rT,list:{bullet:iT,check:sT,ordered:oT},script:{sub:lT,super:aT},strike:uT,table:cT,underline:fT,video:hT},dT='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Xg=0;function Yg(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class ou{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Yg(this.label,"aria-expanded"),Yg(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=dT,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Xg}`,Xg+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class Ny extends ou{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class _y extends ou{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const pT=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class Cy{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,pT(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let o=0;if(s.right>i.right&&(o=i.right-s.right,this.root.style.left=`${n+o}px`),s.left<i.left&&(o=i.left-s.left,this.root.style.left=`${n+o}px`),s.bottom>i.bottom){const l=s.bottom-s.top,a=e.bottom-e.top+l;this.root.style.top=`${r-a}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const gT=[!1,"center","right","justify"],mT=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],yT=[!1,"serif","monospace"],vT=["1","2","3",!1],wT=["small",!1,"large","huge"];class Yo extends ys{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),n[s]!=null))if(s==="direction")r.innerHTML=n[s][""]+n[s].rtl;else if(typeof n[s]=="string")r.innerHTML=n[s];else{const o=r.value||"";o!=null&&n[s][o]&&(r.innerHTML=n[s][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Ks(i,gT),typeof n.align=="object"))return new _y(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Ks(i,mT,s==="background"?"#ffffff":"#000000"),new Ny(i,n[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Ks(i,yT):i.classList.contains("ql-header")?Ks(i,vT):i.classList.contains("ql-size")&&Ks(i,wT)),new ou(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(te.events.EDITOR_CHANGE,r)}}Yo.DEFAULTS=Pr({},ys.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Ly extends Cy{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,te.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=xT(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",te.sources.USER),this.quill.setSelection(r+2,te.sources.USER)}break}}this.textbox.value="",this.hide()}}function xT(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Ks(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const ET=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Iy extends Ly{constructor(e,n){super(e,n),this.quill.on(te.events.EDITOR_CHANGE,(r,i,s,o)=>{if(r===te.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&o===te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(i.index,i.length);if(l.length===1){const a=this.quill.getBounds(i);a!=null&&this.position(a)}else{const a=l[l.length-1],u=this.quill.getIndex(a),f=Math.min(a.length()-1,i.index+i.length-u),d=this.quill.getBounds(new ui(u,f));d!=null&&this.position(d)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}Y(Iy,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Oy extends Yo{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=ET),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Iy(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Fo),this.buildPickers(e.container.querySelectorAll("select"),Fo))}}Oy.DEFAULTS=Pr({},Yo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,K.sources.USER)}}}}});const bT=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Ry extends Ly{constructor(){super(...arguments);Y(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,te.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(te.events.SELECTION_CHANGE,(n,r,i)=>{if(n!=null){if(n.length===0&&i===te.sources.USER){const[s,o]=this.quill.scroll.descendant(Ar,n.index);if(s!=null){this.linkRange=new ui(n.index-o,s.length());const l=Ar.formats(s.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}Y(Ry,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Py extends Yo{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=bT),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Fo),this.buildPickers(e.container.querySelectorAll("select"),Fo),this.tooltip=new Ry(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}Py.DEFAULTS=Pr({},Yo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,K.sources.USER)}}}}});K.register({"attributors/attribute/direction":dy,"attributors/class/align":cy,"attributors/class/background":$4,"attributors/class/color":M4,"attributors/class/direction":py,"attributors/class/font":yy,"attributors/class/size":wy,"attributors/style/align":fy,"attributors/style/background":Sd,"attributors/style/color":bd,"attributors/style/direction":gy,"attributors/style/font":vy,"attributors/style/size":xy},!0);K.register({"formats/align":cy,"formats/direction":py,"formats/indent":L5,"formats/background":Sd,"formats/color":bd,"formats/font":yy,"formats/size":wy,"formats/blockquote":Yf,"formats/code-block":ft,"formats/header":Jf,"formats/list":Xo,"formats/bold":qo,"formats/code":Td,"formats/italic":eh,"formats/link":Ar,"formats/script":th,"formats/strike":nh,"formats/underline":rh,"formats/formula":ea,"formats/image":ih,"formats/video":ta,"modules/syntax":ky,"modules/table":O5,"modules/toolbar":Cd,"themes/bubble":Oy,"themes/snow":Py,"ui/icons":Fo,"ui/picker":ou,"ui/icon-picker":_y,"ui/color-picker":Ny,"ui/tooltip":Cy},!0);const ST=({annotations:t,profiles:e,onDelete:n,onSaveComment:r})=>{const[i,s]=ie.useState({}),[o,l]=ie.useState(null),a=ie.useRef({}),u=ie.useRef({}),[f,d]=ie.useState({});ie.useEffect(()=>(t.forEach(w=>{const v=w.id,c=a.current[v];c&&!u.current[v]&&(u.current[v]=new K(c,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]},placeholder:"Add a comment..."}),u.current[v].on("text-change",()=>{const b=u.current[v].root.innerHTML||"";s(T=>({...T,[v]:b==="<p><br></p>"?"":b}))}))}),()=>{t.forEach(w=>{const v=w.id;u.current[v]&&(u.current[v].off("text-change"),u.current[v]=null)})}),[t]),ie.useEffect(()=>{const w={};t.forEach(v=>{f[v.id]===void 0&&(w[v.id]=!1)}),d(v=>({...v,...w}))},[t]);const p=async w=>{const v=i[w]||"";if(v.trim()&&r){console.log("AnnotationList: Saving comment for annotation:",w,v),await r(w,v),s(b=>({...b,[w]:""}));const c=u.current[w];c&&c.setContents([])}},x=async w=>{var L;const v=Pi(w.url),c=`https://citizenx.app/check-extension?annotationId=${w.id}&url=${encodeURIComponent(v)}`,b=`Check out this annotation: "${w.content.substring(0,100)}..." by ${((L=e[w.author])==null?void 0:L.handle)||"Unknown"} #CitizenX`,T=navigator.platform.toLowerCase().includes("mac");if(navigator.share&&!T)try{await navigator.share({title:"CitizenX Annotation",text:b,url:c})}catch(_){console.error("AnnotationList: Share failed:",_),l(`${b} ${c}`)}else l(`${b} ${c}`)},y=async w=>{await navigator.clipboard.writeText(w),alert("Link copied to clipboard!"),l(null)},E=w=>{d(v=>({...v,[w]:!v[w]}))},S=(w,v,c)=>{const b=encodeURIComponent(v),T=encodeURIComponent(c);switch(w){case"x":return`https://twitter.com/intent/tweet?text=${b}&url=${T}`;case"facebook":return`https://www.facebook.com/sharer/sharer.php?u=${T}"e=${b}`;case"whatsapp":return`https://api.whatsapp.com/send?text=${b}%20${T}`;case"telegram":return`https://t.me/share/url?url=${T}&text=${b}`;case"email":return`mailto:?subject=CitizenX%20Annotation&body=${b}%20${T}`;default:return"#"}};return Q.jsxs("div",{className:"annotation-list",children:[t.map(w=>{var L;const v=e[w.author]||null,c=v?v.handle:"Unknown";console.log("AnnotationList: Rendering annotation:",w,"Author handle:",c);const b=w.comments?[...w.comments].sort((_,O)=>_.timestamp-O.timestamp):[],T=f[w.id]||!1;return Q.jsxs("div",{className:"annotation-item","data-annotation-id":w.id,children:[Q.jsxs("div",{className:"annotation-header",children:[Q.jsx("span",{className:"annotation-author",children:c}),Q.jsxs("span",{className:"annotation-timestamp",children:[" ","• ",new Date(w.timestamp).toLocaleString()]}),Q.jsx("button",{onClick:()=>n(w.id),className:"delete-button",children:"Delete"}),Q.jsx("button",{onClick:()=>x(w),className:"share-button",children:"Share"})]}),Q.jsx("div",{className:"annotation-content",dangerouslySetInnerHTML:{__html:w.content||"No content"}}),b.length>0&&Q.jsxs(Q.Fragment,{children:[Q.jsxs("button",{className:"comments-toggle-button",onClick:()=>E(w.id),children:[T?"−":"+"," ",T?"Hide comments":`Show ${b.length} comment${b.length>1?"s":""}`]}),T&&Q.jsx("div",{className:"comments-section",children:b.map(_=>{const O=e[_.author]||null,j=O?O.handle:"Unknown";return Q.jsx("div",{className:"comment-item",children:Q.jsxs("div",{className:"comment-group",children:[Q.jsxs("div",{className:"comment-header",children:[Q.jsx("span",{className:"comment-author",children:j}),Q.jsxs("span",{className:"comment-timestamp",children:[" ","• ",new Date(_.timestamp).toLocaleString()]})]}),Q.jsx("div",{className:"comment-content",dangerouslySetInnerHTML:{__html:_.content}})]})},_.id)})})]}),r&&Q.jsxs("div",{className:"add-comment-section",children:[Q.jsx("div",{ref:_=>a.current[w.id]=_,className:"quill-editor"}),Q.jsx("button",{onClick:()=>p(w.id),disabled:!((L=i[w.id])!=null&&L.trim()),className:"add-comment-button",children:"Add Comment"})]})]},w.id)}),o&&Q.jsx("div",{className:"share-modal",children:Q.jsxs("div",{className:"share-modal-content",children:[Q.jsx("h3",{children:"Share Annotation"}),Q.jsxs("div",{className:"share-buttons",children:[Q.jsxs("a",{href:S("x",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-x",title:"Share on X",children:[Q.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Q.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),Q.jsx("span",{children:"X (Twitter)"})]}),Q.jsxs("a",{href:S("facebook",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-whatsapp",title:"Share on Facebook",children:[Q.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Q.jsx("path",{d:"M9.198 21.5h4v-8.01h3.604l.396-3.98h-4V7.5a1 1 0 0 1 1-1h3v-4h-3a5 5 0 0 0-5 5v2.01h-2l-.396 3.98h2.396v8.01Z"})}),Q.jsx("span",{children:"Facebook"})]}),Q.jsxs("a",{href:S("whatsapp",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-whatsapp",title:"Share on WhatsApp",children:[Q.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Q.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),Q.jsx("span",{children:"WhatsApp"})]}),Q.jsxs("a",{href:S("telegram",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-telegram",title:"Share on Telegram",children:[Q.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Q.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),Q.jsx("span",{children:"Telegram"})]}),Q.jsxs("a",{href:S("email",o.split(" ").slice(0,-1).join(" "),o.split(" ").pop()||""),target:"_blank",rel:"noopener noreferrer",className:"share-button-social share-email",title:"Share via Email",children:[Q.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Q.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),Q.jsx("span",{children:"Email"})]}),Q.jsxs("button",{onClick:()=>y(o),className:"share-button-social share-copy",title:"Copy Message",children:[Q.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Q.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),Q.jsx("span",{children:"Copy Message"})]})]}),Q.jsx("button",{onClick:()=>l(null),className:"share-modal-close",children:"Close"})]})})]})},TT="/assets/citizenx-logo.png",AT=({url:t,isPopupUrl:e})=>{const{did:n,profile:r,loading:i,error:s,authenticate:o,signOut:l,exportIdentity:a,importIdentity:u,createProfile:f,updateProfile:d}=Ax(),{annotations:p,profiles:x,error:y,loading:E,handleSaveAnnotation:S,handleDeleteAnnotation:w,handleSaveComment:v}=kx({url:t,did:n}),[c,b]=ie.useState(""),[T,L]=ie.useState(!1),[_,O]=ie.useState(""),[j,H]=ie.useState(void 0),[W,I]=ie.useState(!1),[N,P]=ie.useState(""),[U,G]=ie.useState(!1),[F,D]=ie.useState(""),[q,M]=ie.useState(""),[Z,J]=ie.useState(null),[le,ue]=ie.useState(""),se=ie.useRef(null),he=ie.useRef(null);ie.useEffect(()=>(se.current&&!he.current&&(he.current=new K(se.current,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]},placeholder:"Enter annotation..."}),he.current.on("text-change",()=>{var tt;const Te=((tt=he.current)==null?void 0:tt.root.innerHTML)||"";b(Te==="<p><br></p>"?"":Te)})),()=>{he.current&&(he.current.off("text-change"),he.current=null)}),[]),ie.useEffect(()=>{!i&&n&&!r?(console.log("AnnotationUI: Opening Update Profile modal"),L(!0)):console.log("AnnotationUI: Profile modal conditions - loading:",i,"did:",n,"profile:",r)},[i,n,r]),ie.useEffect(()=>{console.log("AnnotationUI: annotationsLoading changed:",E)},[E]);const Ue=async()=>{c.trim()&&!e&&(await S(c),b(""),he.current&&he.current.setContents([]))},Se=async()=>{_.trim()&&(r?await d(_,j):await f(_,j),L(!1),O(""),H(void 0))},dt=async()=>{await o(),I(!1)},zt=async()=>{await l(),I(!1)},Ge=async()=>{J("export")},pt=async()=>{if(!q){alert("Please enter a passphrase");return}try{const Te=await a(q);D(Te),G(!0),J(null),M(""),I(!1)}catch(Te){console.error("Failed to export identity:",Te),alert(Te.message||"Failed to export identity")}},et=async()=>{if(!N.trim()){alert("Please paste the identity data");return}J("import")},Ot=async()=>{if(!le){alert("Please enter the passphrase");return}try{await u(N,le),P(""),ue(""),J(null),I(!1)}catch(Te){console.error("Failed to import identity:",Te),alert(Te.message||"Failed to import identity")}};return ie.useEffect(()=>{const Te=()=>{const tt=gt=>{if(gt.type==="HIGHLIGHT_ANNOTATION"&&gt.url===Pi(t)){const Tt=document.querySelector(`[data-annotation-id="${gt.annotationId}"]`);Tt&&(Tt.scrollIntoView({behavior:"smooth"}),Tt.classList.add("highlight"),setTimeout(()=>Tt.classList.remove("highlight"),3e3))}};return chrome.runtime.onMessage.addListener(tt),()=>chrome.runtime.onMessage.removeListener(tt)};if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage)return Te()},[t]),console.log("AnnotationUI: Rendering with annotations:",p,"profiles:",x,"loading:",E),Q.jsxs("div",{className:"annotation-ui-container",children:[s&&Q.jsx("div",{className:"error-text",children:s}),y&&Q.jsx("div",{className:"error-text",children:y}),Q.jsx("div",{className:"connected-section",children:Q.jsxs("div",{className:"connected-section-content",children:[Q.jsx("div",{className:"connected-user-info",children:r?Q.jsxs(Q.Fragment,{children:[r.profilePicture&&Q.jsx("img",{src:r.profilePicture,alt:"Profile",className:"profile-picture"}),Q.jsxs("p",{className:"connected-text",children:["Connected: ",r.handle]})]}):Q.jsx("p",{className:"connected-text",children:"Not connected"})}),Q.jsxs("div",{className:"settings-menu-container",children:[Q.jsx("button",{className:"settings-button",onClick:()=>I(!W),children:"⚙️"}),W&&Q.jsx("div",{className:"settings-menu",children:n?Q.jsxs(Q.Fragment,{children:[Q.jsx("button",{className:"settings-menu-button",onClick:Ge,children:"Export Identity"}),Q.jsx("button",{className:"settings-menu-button sign-out-button",onClick:zt,children:"Sign Out"})]}):Q.jsxs("div",{className:"auth-section",children:[Q.jsx("button",{className:"authenticate-button",onClick:dt,children:"Authenticate"}),Q.jsxs("div",{className:"import-section",children:[Q.jsx("textarea",{className:"import-textarea",value:N,onChange:Te=>P(Te.target.value),placeholder:"Paste identity to import..."}),Q.jsx("button",{className:"import-button",onClick:et,disabled:!N.trim(),children:"Import Identity"})]})]})})]})]})}),E&&Q.jsx("div",{className:"loading-spinner",children:Q.jsx("span",{children:"Loading annotations..."})}),!e&&Q.jsxs("div",{className:"annotation-input",children:[Q.jsx("div",{ref:se,className:"quill-editor"}),Q.jsx("button",{onClick:Ue,className:"annotation-save-button",disabled:!c.trim()||!n||E,children:"Save"})]}),Q.jsx("div",{className:"annotation-list-wrapper",children:Q.jsx(ST,{annotations:p,profiles:x,onDelete:w,onSaveComment:e||!n||E?void 0:v})}),Q.jsx("div",{className:"logo-container",children:Q.jsx("a",{href:"https://citizenx.app",target:"_blank",rel:"noopener noreferrer",children:Q.jsx("img",{src:TT,alt:"CitizenX Logo",className:"citizenx-logo"})})}),T&&Q.jsxs("div",{className:"profile-modal",children:[Q.jsx("h2",{className:"profile-modal-title",children:r?"Update Profile":"Create Profile"}),Q.jsx("input",{type:"text",value:_,onChange:Te=>O(Te.target.value),placeholder:"Enter your handle",className:"profile-modal-input"}),Q.jsx("input",{type:"file",accept:"image/*",onChange:Te=>{var gt;const tt=(gt=Te.target.files)==null?void 0:gt[0];if(tt){const Tt=new FileReader;Tt.onloadend=()=>{H(Tt.result)},Tt.readAsDataURL(tt)}},className:"profile-modal-file-input"}),j&&Q.jsx("img",{src:j,alt:"Preview",className:"profile-modal-preview"}),Q.jsxs("div",{className:"profile-modal-buttons",children:[Q.jsx("button",{onClick:Se,className:"profile-modal-save-button",children:"Save Profile"}),Q.jsx("button",{onClick:()=>L(!1),className:"profile-modal-cancel-button",children:"Cancel"})]})]}),U&&Q.jsxs("div",{className:"export-modal",children:[Q.jsx("h2",{className:"export-modal-title",children:"Export Identity"}),Q.jsx("textarea",{className:"export-modal-textarea",value:F,readOnly:!0}),Q.jsx("button",{className:"export-modal-button",onClick:()=>navigator.clipboard.writeText(F),children:"Copy to Clipboard"}),Q.jsx("button",{className:"export-modal-close-button",onClick:()=>G(!1),children:"Close"})]}),Z&&Q.jsxs("div",{className:"profile-modal",children:[Q.jsx("h2",{className:"profile-modal-title",children:Z==="export"?"Export Identity":"Import Identity"}),Q.jsx("input",{type:"password",value:Z==="export"?q:le,onChange:Te=>{Z==="export"?M(Te.target.value):ue(Te.target.value)},placeholder:"Enter passphrase",className:"profile-modal-input"}),Q.jsxs("div",{className:"profile-modal-buttons",children:[Q.jsx("button",{onClick:Z==="export"?pt:Ot,className:"profile-modal-save-button",children:Z==="export"?"Export":"Import"}),Q.jsx("button",{onClick:()=>{J(null),M(""),ue("")},className:"profile-modal-cancel-button",children:"Cancel"})]})]})]})};function kT(){const[t,e]=ie.useState(""),[n,r]=ie.useState([]),[i,s]=ie.useState({}),[o,l]=ie.useState(!1),[a,u]=ie.useState(!1),[f,d]=ie.useState(!1);return ie.useEffect(()=>{console.log("index.tsx: Initializing storage..."),co.initialize().then(()=>{console.log("index.tsx: Storage initialized"),u(!0)}).catch(E=>{console.error("index.tsx: Failed to initialize storage:",E)});const p=E=>{if(E.url){console.log("index.tsx: Fetched current tab URL:",E.url),e(E.url);const w=[/^chrome-extension:\/\//,/^chrome:\/\//,/^about:\/\//].some(v=>v.test(E.url));d(w)}};chrome.runtime.onMessage.addListener(p),chrome.runtime.sendMessage({action:"getCurrentTabUrl"});const x=()=>{console.log("index.tsx: Tab activated, fetching new URL"),chrome.runtime.sendMessage({action:"getCurrentTabUrl"})},y=()=>{console.log("index.tsx: Window focus changed, fetching new URL"),chrome.runtime.sendMessage({action:"getCurrentTabUrl"})};return chrome.tabs.onActivated.addListener(x),chrome.tabs.onUpdated.addListener(x),chrome.windows.onFocusChanged.addListener(y),()=>{chrome.runtime.onMessage.removeListener(p),chrome.tabs.onActivated.removeListener(x),chrome.tabs.onUpdated.removeListener(x),chrome.windows.onFocusChanged.removeListener(y)}},[]),ie.useEffect(()=>{if(!a||!t){console.log("useAnnotations: Waiting for storage to initialize or URL to be set");return}console.log("useAnnotations: Fetching annotations for URL:",t),l(!0),co.getAnnotations(t).then(p=>{console.log("useAnnotations: Fetched annotations:",p),r(p);const x=p.map(y=>co.getProfile(y.author).then(E=>({did:y.author,profile:E})));Promise.all(x).then(y=>{const E=y.reduce((S,{did:w,profile:v})=>(v&&(S[w]=v),S),{});s(S=>({...S,...E}))}).finally(()=>{l(!1)})}).catch(p=>{console.error("useAnnotations: Failed to fetch annotations:",p),l(!1)})},[t,a]),Q.jsx(AT,{url:t,isPopupUrl:f})}const NT=Pc.createRoot(document.getElementById("root"));NT.render(Q.jsx(kT,{}))});export default _T();
